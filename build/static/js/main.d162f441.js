/*! For license information please see main.d162f441.js.LICENSE.txt */
(()=>{var e={49:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var b=y.prototype=new x;b.constructor=y,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var r,a={},s=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,r)&&!M.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,r,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=e),e=""===a?"."+k(l,0):a,_(s)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),T(s,t,r,"",function(e){return e})):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var u=a+k(o=e[c],c);l+=T(o,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,r,u=a+k(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var i=[],r=0;return T(e,i,"","",function(e){return t.call(n,e,r++)}),i}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},B={transition:null},N={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:B,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=y,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!M.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},153:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},224:(e,t,n)=>{"use strict";e.exports=n(733)},235:(e,t,n)=>{"use strict";e.exports=n(473)},340:(e,t,n)=>{"use strict";e.exports=n(761)},345:(e,t,n)=>{"use strict";var i=n(950),r=n(340);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var B=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var I,j=Object.assign;function z(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var F=!1;function O(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=i.stack.split("\n"),s=r.length-1,o=a.length-1;1<=s&&0<=o&&r[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(r[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||r[s]!==a[o]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=O(e.type,!1);case 11:return e=O(e.type.render,!1);case 1:return e=O(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case A:return"Profiler";case M:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=V(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Me=null;function Ae(e){if(e=yr(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_r(t),we(e.stateNode,e.type,t))}}function Ce(e){Se?Me?Me.push(e):Me=[e]:Se=e}function Ee(){if(Se){var e=Se,t=Me;if(Me=Se=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function ke(e,t){return e(t)}function Te(){}var Re=!1;function Le(e,t,n){if(Re)return e(t,n);Re=!0;try{return ke(e,t,n)}finally{Re=!1,(null!==Se||null!==Me)&&(Te(),Ee())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Be=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Be=!1}function De(e,t,n,i,r,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ie=!1,je=null,ze=!1,Fe=null,Oe={onError:function(e){Ie=!0,je=e}};function Ue(e,t,n,i,r,a,s,o,l){Ie=!1,je=null,De.apply(Oe,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(a(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return We(r),e;if(s===i)return We(r),t;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Je=r.unstable_cancelCallback,Ke=r.unstable_shouldYield,qe=r.unstable_requestPaint,Ze=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~r;0!==o?i=dt(o):0!==(a&=s)&&(i=dt(a))}else 0!==(s=n&~r)?i=dt(s):0!==a&&(i=dt(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,St,Mt,At,Ct=!1,Et=[],kt=null,Tt=null,Rt=null,Lt=new Map,Pt=new Map,Bt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function It(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jt(e){var t=xr(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void At(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Ot(){Ct=!1,null!==kt&&zt(kt)&&(kt=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==Rt&&zt(Rt)&&(Rt=null),Lt.forEach(Ft),Pt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ot)))}function Ht(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var i=Et[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==kt&&Ut(kt,e),null!==Tt&&Ut(Tt,e),null!==Rt&&Ut(Rt,e),Lt.forEach(t),Pt.forEach(t),n=0;n<Bt.length;n++)(i=Bt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Bt.length&&null===(n=Bt[0]).blockedOn;)jt(n),null===n.blockedOn&&Bt.shift()}var Gt=b.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,i){var r=yt,a=Gt.transition;Gt.transition=null;try{yt=1,Yt(e,t,n,i)}finally{yt=r,Gt.transition=a}}function Xt(e,t,n,i){var r=yt,a=Gt.transition;Gt.transition=null;try{yt=4,Yt(e,t,n,i)}finally{yt=r,Gt.transition=a}}function Yt(e,t,n,i){if(Wt){var r=Kt(e,t,n,i);if(null===r)Wi(e,t,i,Jt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return kt=It(kt,e,t,n,i,r),!0;case"dragenter":return Tt=It(Tt,e,t,n,i,r),!0;case"mouseover":return Rt=It(Rt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Lt.set(a,It(Lt.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Pt.set(a,It(Pt.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Nt.indexOf(e)){for(;null!==r;){var a=yr(r);if(null!==a&&_t(a),null===(a=Kt(e,t,n,i))&&Wi(e,t,i,Jt,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Jt=null;function Kt(e,t,n,i){if(Jt=null,null!==(e=xr(e=_e(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,i=n.length,r="value"in Zt?Zt.value:Zt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[a-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,i,r,a){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=j({},cn,{view:0,detail:0}),hn=an(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=an(pn),mn=an(j({},pn,{dataTransfer:0})),gn=an(j({},dn,{relatedTarget:0})),vn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(xn),bn=an(j({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function An(){return Mn}var Cn=j({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Cn),kn=an(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Rn=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Ln),Bn=[9,13,27,32],Nn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var In=u&&"TextEvent"in window&&!Dn,jn=u&&(!Nn||Dn&&8<Dn&&11>=Dn),zn=String.fromCharCode(32),Fn=!1;function On(e,t){switch(e){case"keyup":return-1!==Bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Vn(e,t,n,i){Ce(i),0<(t=Xi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Jn(e){zi(e,0)}function Kn(e){if(Y(br(e)))return e}function qn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Qn=$n}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){Xn&&(Xn.detachEvent("onpropertychange",ni),Yn=Xn=null)}function ni(e){if("value"===e.propertyName&&Kn(Yn)){var t=[];Vn(t,Yn,e,_e(e)),Le(Jn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Yn=n,(Xn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Yn)}function ai(e,t){if("click"===e)return Kn(t)}function si(e,t){if("input"===e||"change"===e)return Kn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=ui(n,a);var s=ui(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,xi=null,yi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==J(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},xi&&li(xi,i)||(xi=i,0<(i=Xi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Si={},Mi={};function Ai(e){if(Si[e])return Si[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mi)return Si[e]=n[t];return e}u&&(Mi=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ci=Ai("animationend"),Ei=Ai("animationiteration"),ki=Ai("animationstart"),Ti=Ai("transitionend"),Ri=new Map,Li="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(e,t){Ri.set(e,t),l(t,[e])}for(var Bi=0;Bi<Li.length;Bi++){var Ni=Li[Bi];Pi(Ni.toLowerCase(),"on"+(Ni[0].toUpperCase()+Ni.slice(1)))}Pi(Ci,"onAnimationEnd"),Pi(Ei,"onAnimationIteration"),Pi(ki,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Ti,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function ji(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,o,l,c){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(a(198));var u=je;Ie=!1,je=null,ze||(ze=!0,Fe=u)}}(i,t,void 0,e),e.currentTarget=null}function zi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;ji(r,o,c),a=l}else for(s=0;s<i.length;s++){if(l=(o=i[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;ji(r,o,c),a=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Gi(t,e,2,!1),n.add(i))}function Oi(e,t,n){var i=0;t&&(i|=4),Gi(n,e,i,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Ui]){e[Ui]=!0,s.forEach(function(t){"selectionchange"!==t&&(Ii.has(t)||Oi(t,!1,e),Oi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Oi("selectionchange",!1,t))}}function Gi(e,t,n,i){switch(qt(t)){case 1:var r=Vt;break;case 4:r=Xt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==o;){if(null===(s=xr(o)))return;if(5===(l=s.tag)||6===l){i=a=s;continue e}o=o.parentNode}}i=i.return}Le(function(){var i=a,r=_e(n),s=[];e:{var o=Ri.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Ci:case Ei:case ki:l=vn;break;case Ti:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Pe(f,h))&&u.push(Vi(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,r),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xr(c)&&!c[fr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?xr(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:br(l),p=null==c?o:br(c),(o=new u(m,f+"leave",l,n,r)).target=d,o.relatedTarget=p,m=null,xr(r)===i&&((u=new u(h,f+"enter",c,n,r)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Yi(p))f++;for(p=0,m=h;m;m=Yi(m))p++;for(;0<f-p;)u=Yi(u),f--;for(;0<p-f;)h=Yi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yi(u),h=Yi(h)}u=null}else u=null;null!==l&&Ji(s,o,l,u,!1),null!==c&&null!==d&&Ji(s,d,c,u,!0)}if("select"===(l=(o=i?br(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=qn;else if(Wn(o))if(Zn)g=si;else{g=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ai);switch(g&&(g=g(e,i))?Vn(s,g,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?br(i):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,xi=null);break;case"focusout":xi=vi=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,bi(s,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":bi(s,n,r)}var x;if(Nn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hn?On(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(x=en()):(Qt="value"in(Zt=r)?Zt.value:Zt.textContent,Hn=!0)),0<(v=Xi(i,y)).length&&(y=new bn(y,e,null,n,r),s.push({event:y,listeners:v}),x?y.data=x:null!==(x=Un(n))&&(y.data=x))),(x=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Nn&&On(e,t)?(e=en(),$t=Qt=Zt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Xi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=x))}zi(s,t)})}function Vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Pe(e,n))&&i.unshift(Vi(e,a,r)),null!=(a=Pe(e,t))&&i.push(Vi(e,a,r))),e=e.return}return i}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ji(e,t,n,i,r){for(var a=t._reactName,s=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Pe(n,a))&&s.unshift(Vi(n,l,o)):r||null!=(l=Pe(n,a))&&s.push(Vi(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Ki=/\r\n?/g,qi=/\u0000|\uFFFD/g;function Zi(e){return("string"===typeof e?e:""+e).replace(Ki,"\n").replace(qi,"")}function Qi(e,t,n){if(t=Zi(t),Zi(e)!==t&&n)throw Error(a(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function xr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _r(e){return e[pr]||null}var wr=[],Sr=-1;function Mr(e){return{current:e}}function Ar(e){0>Sr||(e.current=wr[Sr],wr[Sr]=null,Sr--)}function Cr(e,t){Sr++,wr[Sr]=e.current,e.current=t}var Er={},kr=Mr(Er),Tr=Mr(!1),Rr=Er;function Lr(e,t){var n=e.type.contextTypes;if(!n)return Er;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Br(){Ar(Tr),Ar(kr)}function Nr(e,t,n){if(kr.current!==Er)throw Error(a(168));Cr(kr,t),Cr(Tr,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,G(e)||"Unknown",r));return j({},n,i)}function Ir(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Rr=kr.current,Cr(kr,e),Cr(Tr,Tr.current),!0}function jr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Dr(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,Ar(Tr),Ar(kr),Cr(kr,e)):Ar(Tr),Cr(Tr,n)}var zr=null,Fr=!1,Or=!1;function Ur(e){null===zr?zr=[e]:zr.push(e)}function Hr(){if(!Or&&null!==zr){Or=!0;var e=0,t=yt;try{var n=zr;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}zr=null,Fr=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),Ye($e,Hr),r}finally{yt=t,Or=!1}}return null}var Gr=[],Wr=0,Vr=null,Xr=0,Yr=[],Jr=0,Kr=null,qr=1,Zr="";function Qr(e,t){Gr[Wr++]=Xr,Gr[Wr++]=Vr,Vr=e,Xr=t}function $r(e,t,n){Yr[Jr++]=qr,Yr[Jr++]=Zr,Yr[Jr++]=Kr,Kr=e;var i=qr;e=Zr;var r=32-st(i)-1;i&=~(1<<r),n+=1;var a=32-st(t)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,qr=1<<32-st(t)+r|n<<r|i,Zr=a+e}else qr=1<<a|n<<r|i,Zr=e}function ea(e){null!==e.return&&(Qr(e,1),$r(e,1,0))}function ta(e){for(;e===Vr;)Vr=Gr[--Wr],Gr[Wr]=null,Xr=Gr[--Wr],Gr[Wr]=null;for(;e===Kr;)Kr=Yr[--Jr],Yr[Jr]=null,Zr=Yr[--Jr],Yr[Jr]=null,qr=Yr[--Jr],Yr[Jr]=null}var na=null,ia=null,ra=!1,aa=null;function sa(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ia=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Kr?{id:qr,overflow:Zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ia=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ra){var t=ia;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cr(n.nextSibling);var i=na;t&&oa(e,t)?sa(i,n):(e.flags=-4097&e.flags|2,ra=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ra)return ua(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ia)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=cr(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=na?cr(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ia;e;)e=cr(e.nextSibling)}function pa(){ia=na=null,ra=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=jc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var a=n.type;return a===S?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&xa(a)===t.type)?((i=r(t,n.props)).ref=ga(e,t,n),i.return=e,i):((i=Nc(n.type,n.key,n.props,null,e.mode,i)).ref=ga(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=Dc(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case w:return(t=zc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case P:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:d(e,t,n,i,null);va(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case P:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return d(t,e=e.get(n)||null,i,r,null);va(t,i)}return null}function m(r,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(r,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),a=s(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(r,d),ra&&Qr(r,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(r,o[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return ra&&Qr(r,m),c}for(d=i(r,d);m<o.length;m++)null!==(g=f(d,r,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(r,e)}),ra&&Qr(r,m),c}function g(r,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=o,g=o=0,v=null,x=l.next();null!==m&&!x.done;g++,x=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(r,m,x.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(r,m),o=s(y,o,g),null===d?u=y:d.sibling=y,d=y,m=v}if(x.done)return n(r,m),ra&&Qr(r,g),u;if(null===m){for(;!x.done;g++,x=l.next())null!==(x=h(r,x.value,c))&&(o=s(x,o,g),null===d?u=x:d.sibling=x,d=x);return ra&&Qr(r,g),u}for(m=i(r,m);!x.done;g++,x=l.next())null!==(x=f(m,r,g,x.value,c))&&(e&&null!==x.alternate&&m.delete(null===x.key?g:x.key),o=s(x,o,g),null===d?u=x:d.sibling=x,d=x);return e&&m.forEach(function(e){return t(r,e)}),ra&&Qr(r,g),u}return function e(i,a,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=a;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(i,u.sibling),(a=r(u,s.props.children)).return=i,i=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&xa(c)===u.type){n(i,u.sibling),(a=r(u,s.props)).ref=ga(i,u,s),a.return=i,i=a;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===S?((a=Dc(s.props.children,i.mode,l,s.key)).return=i,i=a):((l=Nc(s.type,s.key,s.props,null,i.mode,l)).ref=ga(i,a,s),l.return=i,i=l)}return o(i);case w:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(i,a.sibling),(a=r(a,s.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=zc(s,i.mode,l)).return=i,i=a}return o(i);case P:return e(i,a,(u=s._init)(s._payload),l)}if(te(s))return m(i,a,s,l);if(D(s))return g(i,a,s,l);va(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,s)).return=i,i=a):(n(i,a),(a=jc(s,i.mode,l)).return=i,i=a),o(i)):n(i,a)}}var ba=ya(!0),_a=ya(!1),wa=Mr(null),Sa=null,Ma=null,Aa=null;function Ca(){Aa=Ma=Sa=null}function Ea(e){var t=wa.current;Ar(wa),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){Sa=e,Aa=Ma=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ra(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},null===Ma){if(null===Sa)throw Error(a(308));Ma=e,Sa.dependencies={lanes:0,firstContext:e}}else Ma=Ma.next=e;return t}var La=null;function Pa(e){null===La?La=[e]:La.push(e)}function Ba(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Pa(t)):(n.next=r.next,r.next=n),t.interleaved=n,Na(e,i)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ja(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&kl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Na(e,n)}return null===(r=i.interleaved)?(t.next=t,Pa(i)):(t.next=r.next,r.next=t),i.interleaved=t,Na(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Ua(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ha(e,t,n,i){var r=e.updateQueue;Da=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=r.baseState;for(s=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:Da=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Il|=s,e.lanes=s,e.memoizedState=d}}function Ga(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Wa={},Va=Mr(Wa),Xa=Mr(Wa),Ya=Mr(Wa);function Ja(e){if(e===Wa)throw Error(a(174));return e}function Ka(e,t){switch(Cr(Ya,t),Cr(Xa,e),Cr(Va,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ar(Va),Cr(Va,t)}function qa(){Ar(Va),Ar(Xa),Ar(Ya)}function Za(e){Ja(Ya.current);var t=Ja(Va.current),n=le(t,e.type);t!==n&&(Cr(Xa,e),Cr(Va,n))}function Qa(e){Xa.current===e&&(Ar(Va),Ar(Xa))}var $a=Mr(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var is=b.ReactCurrentDispatcher,rs=b.ReactCurrentBatchConfig,as=0,ss=null,os=null,ls=null,cs=!1,us=!1,ds=0,hs=0;function ps(){throw Error(a(321))}function fs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ms(e,t,n,i,r,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Qs:$s,e=n(i,r),us){s=0;do{if(us=!1,ds=0,25<=s)throw Error(a(301));s+=1,ls=os=null,t.updateQueue=null,is.current=eo,e=n(i,r)}while(us)}if(is.current=Zs,t=null!==os&&null!==os.next,as=0,ls=os=ss=null,cs=!1,t)throw Error(a(300));return e}function gs(){var e=0!==ds;return ds=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function xs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function ys(e,t){return"function"===typeof t?t(e):t}function bs(e){var t=xs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=os,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((as&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,ss.lanes|=d,Il|=d}u=u.next}while(null!==u&&u!==s);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(yo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,ss.lanes|=s,Il|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _s(e){var t=xs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);oi(s,t.memoizedState)||(yo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function ws(){}function Ss(e,t){var n=ss,i=xs(),r=t(),s=!oi(i.memoizedState,r);if(s&&(i.memoizedState=r,yo=!0),i=i.queue,Ds(Cs.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Rs(9,As.bind(null,n,i,r,t),void 0,null),null===Tl)throw Error(a(349));0!==(30&as)||Ms(n,t,r)}return r}function Ms(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function As(e,t,n,i){t.value=n,t.getSnapshot=i,Es(t)&&ks(e)}function Cs(e,t,n){return n(function(){Es(t)&&ks(e)})}function Es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function ks(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Ts(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},t.queue=e,e=e.dispatch=Ys.bind(null,ss,e),[t.memoizedState,e]}function Rs(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ls(){return xs().memoizedState}function Ps(e,t,n,i){var r=vs();ss.flags|=e,r.memoizedState=Rs(1|t,n,void 0,void 0===i?null:i)}function Bs(e,t,n,i){var r=xs();i=void 0===i?null:i;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==i&&fs(i,s.deps))return void(r.memoizedState=Rs(t,n,a,i))}ss.flags|=e,r.memoizedState=Rs(1|t,n,a,i)}function Ns(e,t){return Ps(8390656,8,e,t)}function Ds(e,t){return Bs(2048,8,e,t)}function Is(e,t){return Bs(4,2,e,t)}function js(e,t){return Bs(4,4,e,t)}function zs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4,4,zs.bind(null,t,e),n)}function Os(){}function Us(e,t){var n=xs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=xs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fs(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Gs(e,t,n){return 0===(21&as)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(oi(n,t)||(n=mt(),ss.lanes|=n,Il|=n,e.baseState=!0),t)}function Ws(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=rs.transition;rs.transition={};try{e(!1),t()}finally{yt=n,rs.transition=i}}function Vs(){return xs().memoizedState}function Xs(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Js(e))Ks(t,n);else if(null!==(n=Ba(e,t,n,i))){nc(n,e,i,ec()),qs(n,t,i)}}function Ys(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Js(e))Ks(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,s)){var l=t.interleaved;return null===l?(r.next=r,Pa(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ba(e,t,r,i))&&(nc(n,e,i,r=ec()),qs(n,t,i))}}function Js(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Ks(e,t){us=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qs(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Zs={readContext:Ra,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Qs={readContext:Ra,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Ra,useEffect:Ns,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4194308,4,zs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=vs();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Xs.bind(null,ss,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:Ts,useDebugValue:Os,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Ts(!1),t=e[0];return e=Ws.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ss,r=vs();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Tl)throw Error(a(349));0!==(30&as)||Ms(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ns(Cs.bind(null,i,s,e),[e]),i.flags|=2048,Rs(9,As.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Tl.identifierPrefix;if(ra){var n=Zr;t=":"+t+"R"+(n=(qr&~(1<<32-st(qr)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$s={readContext:Ra,useCallback:Us,useContext:Ra,useEffect:Ds,useImperativeHandle:Fs,useInsertionEffect:Is,useLayoutEffect:js,useMemo:Hs,useReducer:bs,useRef:Ls,useState:function(){return bs(ys)},useDebugValue:Os,useDeferredValue:function(e){return Gs(xs(),os.memoizedState,e)},useTransition:function(){return[bs(ys)[0],xs().memoizedState]},useMutableSource:ws,useSyncExternalStore:Ss,useId:Vs,unstable_isNewReconciler:!1},eo={readContext:Ra,useCallback:Us,useContext:Ra,useEffect:Ds,useImperativeHandle:Fs,useInsertionEffect:Is,useLayoutEffect:js,useMemo:Hs,useReducer:_s,useRef:Ls,useState:function(){return _s(ys)},useDebugValue:Os,useDeferredValue:function(e){var t=xs();return null===os?t.memoizedState=e:Gs(t,os.memoizedState,e)},useTransition:function(){return[_s(ys)[0],xs().memoizedState]},useMutableSource:ws,useSyncExternalStore:Ss,useId:Vs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),a=za(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,r))&&(nc(t,e,r,i),Oa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),a=za(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,r))&&(nc(t,e,r,i),Oa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=za(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Fa(e,r,i))&&(nc(t,e,i,n),Oa(t,e,i))}};function ro(e,t,n,i,r,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,a))}function ao(e,t,n){var i=!1,r=Er,a=t.contextType;return"object"===typeof a&&null!==a?a=Ra(a):(r=Pr(t)?Rr:kr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Lr(e,r):Er),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ia(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Ra(a):(a=Pr(t)?Rr:kr.current,r.context=Lr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&io.enqueueReplaceState(r,r.state,null),Ha(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=U(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=za(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Vl=i),uo(0,t)},n}function fo(e,t,n){(n=za(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=za(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var xo=b.ReactCurrentOwner,yo=!1;function bo(e,t,n,i){t.child=null===e?_a(t,null,n,i):ba(t,e.child,n,i)}function _o(e,t,n,i,r){n=n.render;var a=t.ref;return Ta(t,r),i=ms(e,t,n,i,a,r),n=gs(),null===e||yo?(ra&&n&&ea(t),t.flags|=1,bo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function wo(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,So(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=Bc(a,i)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(li(a,i)&&e.ref===t.ref){if(yo=!1,t.pendingProps=i=a,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(yo=!0)}}return Co(e,t,n,i,r)}function Mo(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Bl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Bl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,Cr(Bl,Pl),Pl|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,Cr(Bl,Pl),Pl|=i;return bo(e,t,r,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,i,r){var a=Pr(n)?Rr:kr.current;return a=Lr(t,a),Ta(t,r),n=ms(e,t,n,i,a,r),i=gs(),null===e||yo?(ra&&i&&ea(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function Eo(e,t,n,i,r){if(Pr(n)){var a=!0;Ir(t)}else a=!1;if(Ta(t,r),null===t.stateNode)Go(e,t),ao(t,n,i),oo(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ra(c):c=Lr(t,c=Pr(n)?Rr:kr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==i||l!==c)&&so(t,s,i,c),Da=!1;var h=t.memoizedState;s.state=h,Ha(t,i,s,r),l=t.memoizedState,o!==i||h!==l||Tr.current||Da?("function"===typeof u&&(no(t,n,u,i),l=t.memoizedState),(o=Da||ro(t,n,o,i,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,ja(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ra(l):l=Lr(t,l=Pr(n)?Rr:kr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&so(t,s,i,l),Da=!1,h=t.memoizedState,s.state=h,Ha(t,i,s,r);var f=t.memoizedState;o!==d||h!==f||Tr.current||Da?("function"===typeof p&&(no(t,n,p,i),f=t.memoizedState),(c=Da||ro(t,n,c,i,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return ko(e,t,n,i,a,r)}function ko(e,t,n,i,r,a){Ao(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&jr(t,n,!1),Wo(e,t,a);i=t.stateNode,xo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=i.state,r&&jr(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Nr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Nr(0,t.context,!1),Ka(e,t.containerInfo)}function Ro(e,t,n,i,r){return pa(),fa(r),t.flags|=256,bo(e,t,n,i),t.child}var Lo,Po,Bo,No,Do={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function jo(e,t,n){var i,r=t.pendingProps,s=$a.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Cr($a,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,r,0,null),e=Dc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(n),t.memoizedState=Do,e):zo(t,l));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,i=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Ic({mode:"visible",children:i.children},r,0,null),(s=Dc(s,r,o,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Do,s);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Fo(e,t,o,i=co(s=Error(a(419)),i,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(i=Tl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Na(e,r),nc(i,e,r,-1))}return mc(),Fo(e,t,o,i=co(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,ia=cr(r.nextSibling),na=t,ra=!0,aa=null,null!==e&&(Yr[Jr++]=qr,Yr[Jr++]=Zr,Yr[Jr++]=Kr,qr=e.id,Zr=e.overflow,Kr=t),t=zo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,s,n);if(o){o=r.fallback,l=t.mode,i=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Bc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?o=Bc(i,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,r}return e=(o=e.child).sibling,r=Bc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,i){return null!==i&&fa(i),ba(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Oo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ka(e.return,t,n)}function Uo(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Ho(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(bo(e,t,i.children,n),0!==(2&(i=$a.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Oo(e,n,t);else if(19===e.tag)Oo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr($a,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Uo(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===es(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Uo(t,!0,n,null,a);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Go(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Yo(e,t,n){var i=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(t),null;case 1:case 17:return Pr(t.type)&&Br(),Xo(t),null;case 3:return i=t.stateNode,qa(),Ar(Tr),Ar(kr),ns(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Po(e,t),Xo(t),null;case 5:Qa(t);var r=Ja(Ya.current);if(n=t.type,null!==e&&null!=t.stateNode)Bo(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Xo(t),null}if(e=Ja(Va.current),da(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[hr]=t,i[pr]=s,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)Fi(Di[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":q(i,s),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Fi("invalid",i);break;case"textarea":re(i,s),Fi("invalid",i)}for(var l in xe(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fi("scroll",i)}switch(n){case"input":X(i),$(i,s,!0);break;case"textarea":X(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Lo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),r=i;break;case"iframe":case"object":case"embed":Fi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)Fi(Di[r],e);r=i;break;case"source":Fi("error",e),r=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),r=i;break;case"details":Fi("toggle",e),r=i;break;case"input":q(e,i),r=K(e,i),Fi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Fi("invalid",e)}for(s in xe(n,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fi("scroll",e):null!=u&&y(e,s,u,l))}switch(n){case"input":X(e),$(e,i,!1);break;case"textarea":X(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xo(t),null;case 6:if(e&&null!=t.stateNode)No(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=Ja(Ya.current),Ja(Va.current),da(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(s=i.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Xo(t),null;case 13:if(Ar($a),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==ia&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,s=!1;else if(s=da(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hr]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xo(t),s=!1}else null!==aa&&(sc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$a.current)?0===Nl&&(Nl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Xo(t),null);case 4:return qa(),Po(e,t),null===e&&Hi(t.stateNode.containerInfo),Xo(t),null;case 10:return Ea(t.type._context),Xo(t),null;case 19:if(Ar($a),null===(s=t.memoizedState))return Xo(t),null;if(i=0!==(128&t.flags),null===(l=s.rendering))if(i)Vo(s,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Vo(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr($a,1&$a.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>Hl&&(t.flags|=128,i=!0,Vo(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=es(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ra)return Xo(t),null}else 2*Ze()-s.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,Vo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=$a.current,Cr($a,i?1&n|2:1&n),t):(Xo(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Xo(t),6&t.subtreeFlags&&(t.flags|=8192)):Xo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Jo(e,t){switch(ta(t),t.tag){case 1:return Pr(t.type)&&Br(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return qa(),Ar(Tr),Ar(kr),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qa(t),null;case 13:if(Ar($a),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ar($a),null;case 4:return qa(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Lo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Bo=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ja(Va.current);var a,s=null;switch(n){case"input":r=K(e,r),i=K(e,i),s=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(u in xe(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fi("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},No=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ko=!1,qo=!1,Zo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Mc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Mc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&el(t,n,a)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:qo||$o(n,t);case 6:var i=ul,r=dl;ul=null,hl(e,t,n),dl=r,null!==(ul=i)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=i,dl=r;break;case 0:case 11:case 14:case 15:if(!qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&el(n,t,s),r=r.next}while(r!==i)}hl(e,t,n);break;case 1:if(!qo&&($o(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Mc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(qo=(i=qo)||null!==n.memoizedState,hl(e,t,n),qo=i):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach(function(t){var i=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));pl(s,o,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Mc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Mc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Mc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&$o(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&$o(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Mc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(r,s),ye(l,o);var u=ye(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):y(r,d,h,u)}switch(l){case"input":Q(r,s);break;case"textarea":ae(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(g){Mc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){Mc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Mc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=Ze())),4&i&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(qo=(u=qo)||d,ml(t,e),qo=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qo=e,d=e.child;null!==d;){for(h=Qo=d;null!==Qo;){switch(f=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$o(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Mc(i,n,g)}}break;case 5:$o(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==f?(f.return=p,Qo=f):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Mc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Mc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(a(161))}}catch(o){Mc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Qo=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Qo;){var r=Qo,a=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Ko;if(!s){var o=r.alternate,l=null!==o&&null!==o.memoizedState||qo;o=Ko;var c=qo;if(Ko=s,(qo=l)&&!c)for(Qo=r;null!==Qo;)l=(s=Qo).child,22===s.tag&&null!==s.memoizedState?wl(r):null!==l?(l.return=s,Qo=l):wl(r);for(;null!==a;)Qo=a,yl(a,t,n),a=a.sibling;Qo=r,Ko=o,qo=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Qo=a):bl(e)}}function bl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!qo)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ga(t,s,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ga(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}qo||512&t.flags&&rl(t)}catch(p){Mc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Mc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Mc(t,r,l)}}var a=t.return;try{rl(t)}catch(l){Mc(t,a,l)}break;case 5:var s=t.return;try{rl(t)}catch(l){Mc(t,s,l)}}}catch(l){Mc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Sl,Ml=Math.ceil,Al=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,kl=0,Tl=null,Rl=null,Ll=0,Pl=0,Bl=Mr(0),Nl=0,Dl=null,Il=0,jl=0,zl=0,Fl=null,Ol=null,Ul=0,Hl=1/0,Gl=null,Wl=!1,Vl=null,Xl=null,Yl=!1,Jl=null,Kl=0,ql=0,Zl=null,Ql=-1,$l=0;function ec(){return 0!==(6&kl)?Ze():-1!==Ql?Ql:Ql=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Ll?Ll&-Ll:null!==ma.transition?(0===$l&&($l=mt()),$l):0!==(e=yt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function nc(e,t,n,i){if(50<ql)throw ql=0,Zl=null,Error(a(185));vt(e,n,i),0!==(2&kl)&&e===Tl||(e===Tl&&(0===(2&kl)&&(jl|=n),4===Nl&&oc(e,Ll)),ic(e,i),1===n&&0===kl&&0===(1&t.mode)&&(Hl=Ze()+500,Fr&&Hr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=r[s];-1===l?0!==(o&n)&&0===(o&i)||(r[s]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var i=ht(e,e===Tl?Ll:0);if(0===i)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Fr=!0,Ur(e)}(lc.bind(null,e)):Ur(lc.bind(null,e)),sr(function(){0===(6&kl)&&Hr()}),n=null;else{switch(bt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Tc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ql=-1,$l=0,0!==(6&kl))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=ht(e,e===Tl?Ll:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=kl;kl|=2;var s=fc();for(Tl===e&&Ll===t||(Gl=null,Hl=Ze()+500,hc(e,t));;)try{xc();break}catch(l){pc(e,l)}Ca(),Al.current=s,kl=r,null!==Rl?t=0:(Tl=null,Ll=0,t=Nl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=ac(e,r))),1===t)throw n=Dl,hc(e,0),oc(e,i),ic(e,Ze()),n;if(6===t)oc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!oi(a(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(s=ft(e))&&(i=s,t=ac(e,s))),1===t))throw n=Dl,hc(e,0),oc(e,i),ic(e,Ze()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Ol,Gl);break;case 3:if(oc(e,i),(130023424&i)===i&&10<(t=Ul+500-Ze())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(_c.bind(null,e,Ol,Gl),t);break}_c(e,Ol,Gl);break;case 4:if(oc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-st(i);s=1<<o,(o=t[o])>r&&(r=o),i&=~s}if(i=r,10<(i=(120>(i=Ze()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ml(i/1960))-i)){e.timeoutHandle=ir(_c.bind(null,e,Ol,Gl),i);break}_c(e,Ol,Gl);break;default:throw Error(a(329))}}}return ic(e,Ze()),e.callbackNode===n?rc.bind(null,e):null}function ac(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ol,Ol=n,null!==t&&sc(t)),e}function sc(e){null===Ol?Ol=e:Ol.push.apply(Ol,e)}function oc(e,t){for(t&=~zl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&kl))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return ic(e,Ze()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=ac(e,i))}if(1===n)throw n=Dl,hc(e,0),oc(e,t),ic(e,Ze()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ol,Gl),ic(e,Ze()),null}function cc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(Hl=Ze()+500,Fr&&Hr())}}function uc(e){null!==Jl&&0===Jl.tag&&0===(6&kl)&&wc();var t=kl;kl|=1;var n=El.transition,i=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=i,El.transition=n,0===(6&(kl=t))&&Hr()}}function dc(){Pl=Bl.current,Ar(Bl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(ta(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Br();break;case 3:qa(),Ar(Tr),Ar(kr),ns();break;case 5:Qa(i);break;case 4:qa();break;case 13:case 19:Ar($a);break;case 10:Ea(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Rl=e=Bc(e.current,null),Ll=Pl=t,Nl=0,Dl=null,zl=jl=Il=0,Ol=Fl=null,null!==La){for(t=0;t<La.length;t++)if(null!==(i=(n=La[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var s=a.next;a.next=r,i.next=s}n.pending=i}La=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(Ca(),is.current=Zs,cs){for(var i=ss.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}cs=!1}if(as=0,ls=os=ss=null,us=!1,ds=0,Cl.current=null,null===n||null===n.return){Nl=1,Dl=t,Rl=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(s,u,t),mc();break e}c=Error(a(426))}else if(ra&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fa(lo(c,l));break e}}s=c=lo(c,l),4!==Nl&&(Nl=2),null===Fl?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,po(0,c,t));break e;case 1:l=c;var x=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Xl||!Xl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,fo(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var e=Al.current;return Al.current=Zs,null===e?Zs:e}function mc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Tl||0===(268435455&Il)&&0===(268435455&jl)||oc(Tl,Ll)}function gc(e,t){var n=kl;kl|=2;var i=fc();for(Tl===e&&Ll===t||(Gl=null,hc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(Ca(),kl=n,Al.current=i,null!==Rl)throw Error(a(261));return Tl=null,Ll=0,Nl}function vc(){for(;null!==Rl;)yc(Rl)}function xc(){for(;null!==Rl&&!Ke();)yc(Rl)}function yc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Rl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Nl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Nl&&(Nl=5)}function _c(e,t,n){var i=yt,r=El.transition;try{El.transition=null,yt=1,function(e,t,n,i){do{wc()}while(null!==Jl);if(0!==(6&kl))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,s),e===Tl&&(Rl=Tl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Tc(tt,function(){return wc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=El.transition,El.transition=null;var o=yt;yt=1;var l=kl;kl|=4,Cl.current=null,function(e,t){if(er=Wt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==s||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=o),p===s&&++d===i&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(_){Mc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(tr),Wt=!!er,tr=er=null,e.current=n,xl(n,e,r),qe(),kl=l,yt=o,El.transition=s}else e.current=n;if(Yl&&(Yl=!1,Jl=e,Kl=r),s=e.pendingLanes,0===s&&(Xl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ze()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Kl)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===Zl?ql++:(ql=0,Zl=e):ql=0,Hr()}(e,t,n,i)}finally{El.transition=r,yt=i}return null}function wc(){if(null!==Jl){var e=bt(Kl),t=El.transition,n=yt;try{if(El.transition=null,yt=16>e?16:e,null===Jl)var i=!1;else{if(e=Jl,Jl=null,Kl=0,0!==(6&kl))throw Error(a(331));var r=kl;for(kl|=4,Qo=e.current;null!==Qo;){var s=Qo,o=s.child;if(0!==(16&Qo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var d=Qo;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Qo=h;else for(;null!==Qo;){var p=(d=Qo).sibling,f=d.return;if(al(d),d===u){Qo=null;break}if(null!==p){p.return=f,Qo=p;break}Qo=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(s=Qo).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var x=s.sibling;if(null!==x){x.return=s.return,Qo=x;break e}Qo=s.return}}var y=e.current;for(Qo=y;null!==Qo;){var b=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Qo=b;else e:for(o=y;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Mc(l,l.return,w)}if(l===o){Qo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Qo=_;break e}Qo=l.return}}if(kl=r,Hr(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{yt=n,El.transition=t}}return!1}function Sc(e,t,n){e=Fa(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Mc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){t=Fa(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Ac(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Ll&n)===n&&(4===Nl||3===Nl&&(130023424&Ll)===Ll&&500>Ze()-Ul?hc(e,0):zl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Na(e,t))&&(vt(e,t,n),ic(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Cc(e,n)}function Tc(e,t){return Ye(e,t)}function Rc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,i){return new Rc(e,t,n,i)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,i,r,s){var o=2;if(i=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Dc(n.children,r,s,t);case M:o=8,r|=8;break;case A:return(e=Lc(12,n,t,2|r)).elementType=A,e.lanes=s,e;case T:return(e=Lc(13,n,t,r)).elementType=T,e.lanes=s,e;case R:return(e=Lc(19,n,t,r)).elementType=R,e.lanes=s,e;case B:return Ic(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case E:o=9;break e;case k:o=11;break e;case L:o=14;break e;case P:o=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Lc(o,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Dc(e,t,n,i){return(e=Lc(7,e,i,t)).lanes=n,e}function Ic(e,t,n,i){return(e=Lc(22,e,i,t)).elementType=B,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Oc(e,t,n,i,r,a,s,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Lc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ia(a),e}function Uc(e){if(!e)return Er;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pr(n))return Dr(e,n,t)}return t}function Hc(e,t,n,i,r,a,s,o,l){return(e=Oc(n,i,!0,e,0,a,0,o,l)).context=Uc(null),n=e.current,(a=za(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Fa(n,a,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Gc(e,t,n,i){var r=t.current,a=ec(),s=tc(r);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=za(a,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Fa(r,t,s))&&(nc(e,r,s,a),Oa(e,r,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Tr.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:To(t),pa();break;case 5:Za(t);break;case 1:Pr(t.type)&&Ir(t);break;case 4:Ka(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(wa,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr($a,1&$a.current),t.flags|=128,null):0!==(n&t.child.childLanes)?jo(e,t,n):(Cr($a,1&$a.current),null!==(e=Wo(e,t,n))?e.sibling:null);Cr($a,1&$a.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ho(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr($a,$a.current),i)break;return null;case 22:case 23:return t.lanes=0,Mo(e,t,n)}return Wo(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,ra&&0!==(1048576&t.flags)&&$r(t,Xr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Go(e,t),e=t.pendingProps;var r=Lr(t,kr.current);Ta(t,n),r=ms(null,t,i,e,r,n);var s=gs();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pr(i)?(s=!0,Ir(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ia(t),r.updater=io,t.stateNode=r,r._reactInternals=t,oo(t,i,e,n),t=ko(null,t,i,!0,s,n)):(t.tag=0,ra&&s&&ea(t),bo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===L)return 14}return 2}(i),e=to(i,e),r){case 0:t=Co(null,t,i,e,n);break e;case 1:t=Eo(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=wo(null,t,i,to(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Co(e,t,i,r=t.elementType===i?r:to(i,r),n);case 1:return i=t.type,r=t.pendingProps,Eo(e,t,i,r=t.elementType===i?r:to(i,r),n);case 3:e:{if(To(t),null===e)throw Error(a(387));i=t.pendingProps,r=(s=t.memoizedState).element,ja(e,t),Ha(t,i,null,n);var o=t.memoizedState;if(i=o.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ro(e,t,i,n,r=lo(Error(a(423)),t));break e}if(i!==r){t=Ro(e,t,i,n,r=lo(Error(a(424)),t));break e}for(ia=cr(t.stateNode.containerInfo.firstChild),na=t,ra=!0,aa=null,n=_a(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),i===r){t=Wo(e,t,n);break e}bo(e,t,i,n)}t=t.child}return t;case 5:return Za(t),null===e&&ca(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==s&&nr(i,s)&&(t.flags|=32),Ao(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return jo(e,t,n);case 4:return Ka(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ba(t,null,i,n):bo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,_o(e,t,i,r=t.elementType===i?r:to(i,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,Cr(wa,i._currentValue),i._currentValue=o,null!==s)if(oi(s.value,o)){if(s.children===r.children&&!Tr.current){t=Wo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=za(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ka(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ka(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ta(t,n),i=i(r=Ra(r)),t.flags|=1,bo(e,t,i,n),t.child;case 14:return r=to(i=t.type,t.pendingProps),wo(e,t,i,r=to(i.type,r),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:to(i,r),Go(e,t),t.tag=1,Pr(i)?(e=!0,Ir(t)):e=!1,Ta(t,n),ao(t,i,r),oo(t,i,r,n),ko(null,t,i,!0,e,n);case 19:return Ho(e,t,n);case 22:return Mo(e,t,n)}throw Error(a(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function $c(e,t,n,i,r){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}Gc(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}var s=Hc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=s,e[fr]=s.current,Hi(8===e.nodeType?e.parentNode:e),uc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Wc(l);o.call(e)}}var l=Oc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fr]=l.current,Hi(8===e.nodeType?e.parentNode:e),uc(function(){Gc(t,l,n,i)}),l}(n,t,e,r,i);return Wc(s)}Kc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Kc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Gc(null,e,null,null)}),t[fr]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bt.length&&0!==t&&t<Bt[n].priority;n++);Bt.splice(n,0,e),0===n&&jt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(xt(t,1|n),ic(t,Ze()),0===(6&kl)&&(Hl=Ze()+500,Hr()))}break;case 13:uc(function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Xc(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Xc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Xc(e,t)}},Mt=function(){return yt},At=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(a(90));Y(i),Q(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[yr,br,_r,Ce,Ee,cc]},tu={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),at=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(a(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!qc(e))throw Error(a(299));var n=!1,i="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Oc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,s,o),e[fr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Kc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{"use strict";var i=n(119);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},414:(e,t,n)=>{"use strict";e.exports=n(654)},473:(e,t,n)=>{e.exports=function(e){var t={},i=n(950),r=n(224),a=Object.assign;function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var _=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_&&e[_]||e["@@iterator"])?e:null}function S(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case d:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:S(e.type)||"Memo";case y:t=e._payload,e=e._init;try{return S(e(t))}catch(n){}}return null}function M(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function A(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function C(e){if(A(e)!==e)throw Error(s(188))}function E(e){var t=e.alternate;if(!t){if(null===(t=A(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return C(r),e;if(a===i)return C(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function k(e){return null!==(e=E(e))?T(e):null}function T(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=T(e);if(null!==t)return t;e=e.sibling}return null}function R(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=R(e);if(null!==t)return t}e=e.sibling}return null}var L,P=Array.isArray,B=e.getPublicInstance,N=e.getRootHostContext,D=e.getChildHostContext,I=e.prepareForCommit,j=e.resetAfterCommit,z=e.createInstance,F=e.appendInitialChild,O=e.finalizeInitialChildren,U=e.prepareUpdate,H=e.shouldSetTextContent,G=e.createTextInstance,W=e.scheduleTimeout,V=e.cancelTimeout,X=e.noTimeout,Y=e.isPrimaryRenderer,J=e.supportsMutation,K=e.supportsPersistence,q=e.supportsHydration,Z=e.getInstanceFromNode,Q=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,re=e.findFiberRoot,ae=e.getBoundingRect,se=e.getTextContent,oe=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,de=e.appendChild,he=e.appendChildToContainer,pe=e.commitTextUpdate,fe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,xe=e.removeChild,ye=e.removeChildFromContainer,be=e.resetTextContent,_e=e.hideInstance,we=e.hideTextInstance,Se=e.unhideInstance,Me=e.unhideTextInstance,Ae=e.clearContainer,Ce=e.cloneInstance,Ee=e.createContainerChildSet,ke=e.appendChildToContainerChildSet,Te=e.finalizeContainerChildren,Re=e.replaceContainerChildren,Le=e.cloneHiddenInstance,Pe=e.cloneHiddenTextInstance,Be=e.canHydrateInstance,Ne=e.canHydrateTextInstance,De=e.canHydrateSuspenseInstance,Ie=e.isSuspenseInstancePending,je=e.isSuspenseInstanceFallback,ze=e.registerSuspenseInstanceRetry,Fe=e.getNextHydratableSibling,Oe=e.getFirstHydratableChild,Ue=e.getFirstHydratableChildWithinContainer,He=e.getFirstHydratableChildWithinSuspenseInstance,Ge=e.hydrateInstance,We=e.hydrateTextInstance,Ve=e.hydrateSuspenseInstance,Xe=e.getNextHydratableInstanceAfterSuspenseInstance,Ye=e.commitHydratedContainer,Je=e.commitHydratedSuspenseInstance,Ke=e.clearSuspenseBoundary,qe=e.clearSuspenseBoundaryFromContainer,Ze=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=i.stack.split("\n"),s=r.length-1,o=a.length-1;1<=s&&0<=o&&r[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(r[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||r[s]!==a[o]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,rt=[],at=-1;function st(e){return{current:e}}function ot(e){0>at||(e.current=rt[at],rt[at]=null,at--)}function lt(e,t){at++,rt[at]=e.current,e.current=t}var ct={},ut=st(ct),dt=st(!1),ht=ct;function pt(e,t){var n=e.type.contextTypes;if(!n)return ct;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ft(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){ot(dt),ot(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(s(168));lt(ut,t),lt(dt,n)}function vt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,M(e)||"Unknown",r));return a({},n,i)}function xt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,ht=ut.current,lt(ut,e),lt(dt,dt.current),!0}function yt(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=vt(e,t,ht),i.__reactInternalMemoizedMergedChildContext=e,ot(dt),ot(ut),lt(ut,e)):ot(dt),lt(dt,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(_t(e)/wt|0)|0},_t=Math.log,wt=Math.LN2;var St=64,Mt=4194304;function At(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~r;0!==o?i=At(o):0!==(a&=s)&&(i=At(a))}else 0!==(s=n&~r)?i=At(s):0!==a&&(i=At(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-bt(t)),i|=e[n],t&=~r;return i}function Et(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function kt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Tt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Lt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-bt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Pt=0;function Bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt=r.unstable_scheduleCallback,Dt=r.unstable_cancelCallback,It=r.unstable_shouldYield,jt=r.unstable_requestPaint,zt=r.unstable_now,Ft=r.unstable_ImmediatePriority,Ot=r.unstable_UserBlockingPriority,Ut=r.unstable_NormalPriority,Ht=r.unstable_IdlePriority,Gt=null,Wt=null;var Vt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Xt=null,Yt=!1,Jt=!1;function Kt(e){null===Xt?Xt=[e]:Xt.push(e)}function qt(){if(!Jt&&null!==Xt){Jt=!0;var e=0,t=Pt;try{var n=Xt;for(Pt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Xt=null,Yt=!1}catch(r){throw null!==Xt&&(Xt=Xt.slice(e+1)),Nt(Ft,qt),r}finally{Pt=t,Jt=!1}}return null}var Zt=o.ReactCurrentBatchConfig;function Qt(e,t){if(Vt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!it.call(t,r)||!Vt(e[r],t[r]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=st(null),nn=null,rn=null,an=null;function sn(){an=rn=nn=null}function on(e,t,n){Y?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;ot(tn),Y?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ir=!0),e.firstContext=null)}function dn(e){var t=Y?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(s(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,pn=!1;function fn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ja&&0!==(1&e.mode)&&0===(2&Ya)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function xn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Lt(e,n)}}function yn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,i){var r=e.updateQueue;pn=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?s=u:o.next=u,o=c;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===l?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(null!==s){var h=r.baseState;for(o=0,d=u=c=null,l=s;;){var p=l.lane,f=l.eventTime;if((i&p)===p){null!==d&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(p=t,f=n,g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(f,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(f,h,p):m)||void 0===p)break e;h=a({},h,p);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(u=d=f,c=h):d=d.next=f,o|=p;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(p=l).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===d&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);ts|=o,e.lanes=o,e.memoizedState=h}}function _n(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var wn=(new i.Component).refs;function Sn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Mn={isMounted:function(e){return!!(e=e._reactInternals)&&A(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=bs(),r=_s(e),a=gn(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),vn(e,a),null!==(t=ws(e,r,i))&&xn(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=bs(),r=_s(e),a=gn(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),vn(e,a),null!==(t=ws(e,r,i))&&xn(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bs(),i=_s(e),r=gn(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),vn(e,r),null!==(t=ws(e,i,n))&&xn(t,e,i)}};function An(e,t,n,i,r,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Qt(n,i)||!Qt(r,a))}function Cn(e,t,n){var i=!1,r=ct,a=t.contextType;return"object"===typeof a&&null!==a?a=dn(a):(r=ft(t)?ht:ut.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?pt(e,r):ct),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Mn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function En(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Mn.enqueueReplaceState(t,t.state,null)}function kn(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=wn,fn(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=dn(a):(a=ft(t)?ht:ut.current,r.context=pt(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Sn(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Mn.enqueueReplaceState(r,r.state,null),bn(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var Tn=[],Rn=0,Ln=null,Pn=0,Bn=[],Nn=0,Dn=null,In=1,jn="";function zn(e,t){Tn[Rn++]=Pn,Tn[Rn++]=Ln,Ln=e,Pn=t}function Fn(e,t,n){Bn[Nn++]=In,Bn[Nn++]=jn,Bn[Nn++]=Dn,Dn=e;var i=In;e=jn;var r=32-bt(i)-1;i&=~(1<<r),n+=1;var a=32-bt(t)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,In=1<<32-bt(t)+r|n<<r|i,jn=a+e}else In=1<<a|n<<r|i,jn=e}function On(e){null!==e.return&&(zn(e,1),Fn(e,1,0))}function Un(e){for(;e===Ln;)Ln=Tn[--Rn],Tn[Rn]=null,Pn=Tn[--Rn],Tn[Rn]=null;for(;e===Dn;)Dn=Bn[--Nn],Bn[Nn]=null,jn=Bn[--Nn],Bn[Nn]=null,In=Bn[--Nn],Bn[Nn]=null}var Hn=null,Gn=null,Wn=!1,Vn=!1,Xn=null;function Yn(e,t){var n=Zs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Jn(e,t){switch(e.tag){case 5:return null!==(t=Be(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=Oe(t),!0);case 6:return null!==(t=Ne(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=null,!0);case 13:if(null!==(t=De(t))){var n=null!==Dn?{id:In,overflow:jn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Zs(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Gn=null,!0}return!1;default:return!1}}function Kn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function qn(e){if(Wn){var t=Gn;if(t){var n=t;if(!Jn(e,t)){if(Kn(e))throw Error(s(418));t=Fe(n);var i=Hn;t&&Jn(e,t)?Yn(i,n):(e.flags=-4097&e.flags|2,Wn=!1,Hn=e)}}else{if(Kn(e))throw Error(s(418));e.flags=-4097&e.flags|2,Wn=!1,Hn=e}}}function Zn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Qn(e){if(!q||e!==Hn)return!1;if(!Wn)return Zn(e),Wn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ze(e.type)&&!H(e.type,e.memoizedProps))){var t=Gn;if(t){if(Kn(e)){for(e=Gn;e;)e=Fe(e);throw Error(s(418))}for(;t;)Yn(e,t),t=Fe(t)}}if(Zn(e),13===e.tag){if(!q)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));Gn=Xe(e)}else Gn=Hn?Fe(e.stateNode):null;return!0}function $n(){q&&(Gn=Hn=null,Vn=Wn=!1)}function ei(e){null===Xn?Xn=[e]:Xn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===wn&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ri(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=$s(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function d(e,t,n,i){return null===t||6!==t.tag?((t=io(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n,i){var a=n.type;return a===u?f(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===y&&ii(a)===t.type)?((i=r(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=eo(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function p(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ro(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function f(e,t,n,i,a){return null===t||7!==t.tag?((t=to(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=io(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=eo(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case c:return(t=ro(t,e.mode,n)).return=e,t;case y:return m(e,(0,t._init)(t._payload),n)}if(P(t)||w(t))return(t=to(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function g(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:d(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?h(e,t,n,i):null;case c:return n.key===r?p(e,t,n,i):null;case y:return g(e,t,(r=n._init)(n._payload),i)}if(P(n)||w(n))return null!==r?null:f(e,t,n,i,null);ni(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return d(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case c:return p(t,e=e.get(null===i.key?n:i.key)||null,i,r);case y:return v(e,t,n,(0,i._init)(i._payload),r)}if(P(i)||w(i))return f(t,e=e.get(n)||null,i,r,null);ni(t,i)}return null}function x(r,s,o,l){for(var c=null,u=null,d=s,h=s=0,p=null;null!==d&&h<o.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=g(r,d,o[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(r,d),s=a(f,s,h),null===u?c=f:u.sibling=f,u=f,d=p}if(h===o.length)return n(r,d),Wn&&zn(r,h),c;if(null===d){for(;h<o.length;h++)null!==(d=m(r,o[h],l))&&(s=a(d,s,h),null===u?c=d:u.sibling=d,u=d);return Wn&&zn(r,h),c}for(d=i(r,d);h<o.length;h++)null!==(p=v(d,r,h,o[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),s=a(p,s,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(r,e)}),Wn&&zn(r,h),c}function b(r,o,l,c){var u=w(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,h=o,p=o=0,f=null,x=l.next();null!==h&&!x.done;p++,x=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var y=g(r,h,x.value,c);if(null===y){null===h&&(h=f);break}e&&h&&null===y.alternate&&t(r,h),o=a(y,o,p),null===d?u=y:d.sibling=y,d=y,h=f}if(x.done)return n(r,h),Wn&&zn(r,p),u;if(null===h){for(;!x.done;p++,x=l.next())null!==(x=m(r,x.value,c))&&(o=a(x,o,p),null===d?u=x:d.sibling=x,d=x);return Wn&&zn(r,p),u}for(h=i(r,h);!x.done;p++,x=l.next())null!==(x=v(h,r,p,x.value,c))&&(e&&null!==x.alternate&&h.delete(null===x.key?p:x.key),o=a(x,o,p),null===d?u=x:d.sibling=x,d=x);return e&&h.forEach(function(e){return t(r,e)}),Wn&&zn(r,p),u}return function e(i,a,s,d){if("object"===typeof s&&null!==s&&s.type===u&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case l:e:{for(var h=s.key,p=a;null!==p;){if(p.key===h){if((h=s.type)===u){if(7===p.tag){n(i,p.sibling),(a=r(p,s.props.children)).return=i,i=a;break e}}else if(p.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===y&&ii(h)===p.type){n(i,p.sibling),(a=r(p,s.props)).ref=ti(i,p,s),a.return=i,i=a;break e}n(i,p);break}t(i,p),p=p.sibling}s.type===u?((a=to(s.props.children,i.mode,d,s.key)).return=i,i=a):((d=eo(s.type,s.key,s.props,null,i.mode,d)).ref=ti(i,a,s),d.return=i,i=d)}return o(i);case c:e:{for(p=s.key;null!==a;){if(a.key===p){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(i,a.sibling),(a=r(a,s.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=ro(s,i.mode,d)).return=i,i=a}return o(i);case y:return e(i,a,(p=s._init)(s._payload),d)}if(P(s))return x(i,a,s,d);if(w(s))return b(i,a,s,d);ni(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,s)).return=i,i=a):(n(i,a),(a=io(s,i.mode,d)).return=i,i=a),o(i)):n(i,a)}}var ai=ri(!0),si=ri(!1),oi={},li=st(oi),ci=st(oi),ui=st(oi);function di(e){if(e===oi)throw Error(s(174));return e}function hi(e,t){lt(ui,t),lt(ci,e),lt(li,oi),e=N(t),ot(li),lt(li,e)}function pi(){ot(li),ot(ci),ot(ui)}function fi(e){var t=di(ui.current),n=di(li.current);n!==(t=D(n,e.type,t))&&(lt(ci,e),lt(li,t))}function mi(e){ci.current===e&&(ot(li),ot(ci))}var gi=st(0);function vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ie(n)||je(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xi=[];function yi(){for(var e=0;e<xi.length;e++){var t=xi[e];Y?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}xi.length=0}var bi=o.ReactCurrentDispatcher,_i=o.ReactCurrentBatchConfig,wi=0,Si=null,Mi=null,Ai=null,Ci=!1,Ei=!1,ki=0,Ti=0;function Ri(){throw Error(s(321))}function Li(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Pi(e,t,n,i,r,a){if(wi=a,Si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bi.current=null===e||null===e.memoizedState?fr:mr,e=n(i,r),Ei){a=0;do{if(Ei=!1,ki=0,25<=a)throw Error(s(301));a+=1,Ai=Mi=null,t.updateQueue=null,bi.current=gr,e=n(i,r)}while(Ei)}if(bi.current=pr,t=null!==Mi&&null!==Mi.next,wi=0,Ai=Mi=Si=null,Ci=!1,t)throw Error(s(300));return e}function Bi(){var e=0!==ki;return ki=0,e}function Ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ai?Si.memoizedState=Ai=e:Ai=Ai.next=e,Ai}function Di(){if(null===Mi){var e=Si.alternate;e=null!==e?e.memoizedState:null}else e=Mi.next;var t=null===Ai?Si.memoizedState:Ai.next;if(null!==t)Ai=t,Mi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Mi=e).memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},null===Ai?Si.memoizedState=Ai=e:Ai=Ai.next=e}return Ai}function Ii(e,t){return"function"===typeof t?t(e):t}function ji(e){var t=Di(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=Mi,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((wi&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,Si.lanes|=d,ts|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,Vt(i,t.memoizedState)||(Ir=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,Si.lanes|=a,ts|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zi(e){var t=Di(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);Vt(a,t.memoizedState)||(Ir=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Fi(){}function Oi(e,t){var n=Si,i=Di(),r=t(),a=!Vt(i.memoizedState,r);if(a&&(i.memoizedState=r,Ir=!0),i=i.queue,Zi(Gi.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==Ai&&1&Ai.memoizedState.tag){if(n.flags|=2048,Xi(9,Hi.bind(null,n,i,r,t),void 0,null),null===Ja)throw Error(s(349));0!==(30&wi)||Ui(n,t,r)}return r}function Ui(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Si.updateQueue)?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hi(e,t,n,i){t.value=n,t.getSnapshot=i,Wi(t)&&ws(e,1,-1)}function Gi(e,t,n){return n(function(){Wi(t)&&ws(e,1,-1)})}function Wi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch(i){return!0}}function Vi(e){var t=Ni();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},t.queue=e,e=e.dispatch=lr.bind(null,Si,e),[t.memoizedState,e]}function Xi(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Si.updateQueue)?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Yi(){return Di().memoizedState}function Ji(e,t,n,i){var r=Ni();Si.flags|=e,r.memoizedState=Xi(1|t,n,void 0,void 0===i?null:i)}function Ki(e,t,n,i){var r=Di();i=void 0===i?null:i;var a=void 0;if(null!==Mi){var s=Mi.memoizedState;if(a=s.destroy,null!==i&&Li(i,s.deps))return void(r.memoizedState=Xi(t,n,a,i))}Si.flags|=e,r.memoizedState=Xi(1|t,n,a,i)}function qi(e,t){return Ji(8390656,8,e,t)}function Zi(e,t){return Ki(2048,8,e,t)}function Qi(e,t){return Ki(4,2,e,t)}function $i(e,t){return Ki(4,4,e,t)}function er(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ki(4,4,er.bind(null,t,e),n)}function nr(){}function ir(e,t){var n=Di();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Li(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rr(e,t){var n=Di();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Li(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function ar(e,t){var n=Pt;Pt=0!==n&&4>n?n:4,e(!0);var i=_i.transition;_i.transition={};try{e(!1),t()}finally{Pt=n,_i.transition=i}}function sr(){return Di().memoizedState}function or(e,t,n){var i=_s(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cr(e)?ur(t,n):(dr(e,t,n),null!==(e=ws(e,i,n=bs()))&&hr(e,t,i))}function lr(e,t,n){var i=_s(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cr(e))ur(t,r);else{dr(e,t,r);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(r.hasEagerState=!0,r.eagerState=o,Vt(o,s))return}catch(l){}null!==(e=ws(e,i,n=bs()))&&hr(e,t,i)}}function cr(e){var t=e.alternate;return e===Si||null!==t&&t===Si}function ur(e,t){Ei=Ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dr(e,t,n){null!==Ja&&0!==(1&e.mode)&&0===(2&Ya)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hr(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Lt(e,n)}}var pr={readContext:dn,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},fr={readContext:dn,useCallback:function(e,t){return Ni().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:qi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ji(4194308,4,er.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ji(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ji(4,2,e,t)},useMemo:function(e,t){var n=Ni();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ni();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=or.bind(null,Si,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ni().memoizedState=e},useState:Vi,useDebugValue:nr,useDeferredValue:function(e){var t=Vi(e),n=t[0],i=t[1];return qi(function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}},[e]),n},useTransition:function(){var e=Vi(!1),t=e[0];return e=ar.bind(null,e[1]),Ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Si,r=Ni();if(Wn){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ja)throw Error(s(349));0!==(30&wi)||Ui(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,qi(Gi.bind(null,i,a,e),[e]),i.flags|=2048,Xi(9,Hi.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Ni(),t=Ja.identifierPrefix;if(Wn){var n=jn;t=":"+t+"R"+(n=(In&~(1<<32-bt(In)-1)).toString(32)+n),0<(n=ki++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ti++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mr={readContext:dn,useCallback:ir,useContext:dn,useEffect:Zi,useImperativeHandle:tr,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:ji,useRef:Yi,useState:function(){return ji(Ii)},useDebugValue:nr,useDeferredValue:function(e){var t=ji(Ii),n=t[0],i=t[1];return Zi(function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}},[e]),n},useTransition:function(){return[ji(Ii)[0],Di().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Oi,useId:sr,unstable_isNewReconciler:!1},gr={readContext:dn,useCallback:ir,useContext:dn,useEffect:Zi,useImperativeHandle:tr,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:zi,useRef:Yi,useState:function(){return zi(Ii)},useDebugValue:nr,useDeferredValue:function(e){var t=zi(Ii),n=t[0],i=t[1];return Zi(function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}},[e]),n},useTransition:function(){return[zi(Ii)[0],Di().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Oi,useId:sr,unstable_isNewReconciler:!1};function vr(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r}}function xr(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yr,br,_r,wr,Sr="function"===typeof WeakMap?WeakMap:Map;function Mr(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){us||(us=!0,ds=i),xr(0,t)},n}function Ar(e,t,n){(n=gn(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){xr(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){xr(0,t),"function"!==typeof i&&(null===hs?hs=new Set([this]):hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Cr(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Sr;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Vs.bind(null,e,t,n),t.then(e,e))}function Er(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function kr(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function Tr(e){e.flags|=4}function Rr(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(J)yr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)F(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},br=function(){},_r=function(e,t,n,i,r){if((e=e.memoizedProps)!==i){var a=t.stateNode,s=di(li.current);n=U(a,n,e,i,r,s),(t.updateQueue=n)&&Tr(t)}},wr=function(e,t,n,i){n!==i&&Tr(t)};else if(K){yr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var a=r.stateNode;n&&i&&(a=Le(a,r.type,r.memoizedProps,r)),F(e,a)}else if(6===r.tag)a=r.stateNode,n&&i&&(a=Pe(a,r.memoizedProps,r)),F(e,a);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(a=r.child)&&(a.return=r),yr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Lr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var a=r.stateNode;n&&i&&(a=Le(a,r.type,r.memoizedProps,r)),ke(e,a)}else if(6===r.tag)a=r.stateNode,n&&i&&(a=Pe(a,r.memoizedProps,r)),ke(e,a);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(a=r.child)&&(a.return=r),Lr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};br=function(e,t){var n=t.stateNode;if(!Rr(e,t)){e=n.containerInfo;var i=Ee(e);Lr(i,t,!1,!1),n.pendingChildren=i,Tr(t),Te(e,i)}},_r=function(e,t,n,i,r){var a=e.stateNode,s=e.memoizedProps;if((e=Rr(e,t))&&s===i)t.stateNode=a;else{var o=t.stateNode,l=di(li.current),c=null;s!==i&&(c=U(o,n,s,i,r,l)),e&&null===c?t.stateNode=a:(a=Ce(a,c,n,s,i,t,e,o),O(a,n,i,r,l)&&Tr(t),t.stateNode=a,e?Tr(t):yr(a,t,!1,!1))}},wr=function(e,t,n,i){n!==i?(e=di(ui.current),n=di(li.current),t.stateNode=G(i,e,n,t),Tr(t)):t.stateNode=e.stateNode}}else br=function(){},_r=function(){},wr=function(){};function Pr(e,t){if(!Wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Br(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Nr(e,t,n){var i=t.pendingProps;switch(Un(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(t),null;case 1:case 17:return ft(t.type)&&mt(),Br(t),null;case 3:return i=t.stateNode,pi(),ot(dt),ot(ut),yi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Qn(t)?Tr(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Xn&&(Es(Xn),Xn=null))),br(e,t),Br(t),null;case 5:mi(t),n=di(ui.current);var r=t.type;if(null!==e&&null!=t.stateNode)_r(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Br(t),null}if(e=di(li.current),Qn(t)){if(!q)throw Error(s(175));e=Ge(t.stateNode,t.type,t.memoizedProps,n,e,t,!Vn),t.updateQueue=e,null!==e&&Tr(t)}else{var a=z(r,i,n,e,t);yr(a,t,!1,!1),t.stateNode=a,O(a,r,i,n,e)&&Tr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Br(t),null;case 6:if(e&&null!=t.stateNode)wr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(e=di(ui.current),n=di(li.current),Qn(t)){if(!q)throw Error(s(176));if(e=t.stateNode,i=t.memoizedProps,(n=We(e,i,t,!Vn))&&null!==(r=Hn))switch(a=0!==(1&r.mode),r.tag){case 3:Qe(r.stateNode.containerInfo,e,i,a);break;case 5:$e(r.type,r.memoizedProps,r.stateNode,e,i,a)}n&&Tr(t)}else t.stateNode=G(i,e,n,t)}return Br(t),null;case 13:if(ot(gi),i=t.memoizedState,Wn&&null!==Gn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Gn;e;)e=Fe(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=Qn(t),null===e){if(!i)throw Error(s(318));if(!q)throw Error(s(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(317));Ve(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Br(t),null}return null!==Xn&&(Es(Xn),Xn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?Qn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gi.current)?0===$a&&($a=3):Ds())),null!==t.updateQueue&&(t.flags|=4),Br(t),null);case 4:return pi(),br(e,t),null===e&&Q(t.stateNode.containerInfo),Br(t),null;case 10:return ln(t.type._context),Br(t),null;case 19:if(ot(gi),null===(r=t.memoizedState))return Br(t),null;if(i=0!==(128&t.flags),null===(a=r.rendering))if(i)Pr(r,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=vi(e))){for(t.flags|=128,Pr(r,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)r=e,(n=i).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return lt(gi,1&gi.current|2),t.child}e=e.sibling}null!==r.tail&&zt()>os&&(t.flags|=128,i=!0,Pr(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=vi(a))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Pr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!Wn)return Br(t),null}else 2*zt()-r.renderingStartTime>os&&1073741824!==n&&(t.flags|=128,i=!0,Pr(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=zt(),t.sibling=null,e=gi.current,lt(gi,i?1&e|2:1&e),t):(Br(t),null);case 22:case 23:return Ls(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Za)&&(Br(t),J&&6&t.subtreeFlags&&(t.flags|=8192)):Br(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}var Dr=o.ReactCurrentOwner,Ir=!1;function jr(e,t,n,i){t.child=null===e?si(t,null,n,i):ai(t,e.child,n,i)}function zr(e,t,n,i,r){n=n.render;var a=t.ref;return un(t,r),i=Pi(e,t,n,i,a,r),n=Bi(),null===e||Ir?(Wn&&n&&On(t),t.flags|=1,jr(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ra(e,t,r))}function Fr(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Qs(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=eo(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Or(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Qt)(s,i)&&e.ref===t.ref)return ra(e,t,r)}return t.flags|=1,(e=$s(a,i)).ref=t.ref,e.return=t,t.child=e}function Or(e,t,n,i,r){if(null!==e&&Qt(e.memoizedProps,i)&&e.ref===t.ref){if(Ir=!1,0===(e.lanes&r))return t.lanes=e.lanes,ra(e,t,r);0!==(131072&e.flags)&&(Ir=!0)}return Gr(e,t,n,i,r)}function Ur(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Qa,Za),Za|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Qa,Za),Za|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==a?a.baseLanes:n,lt(Qa,Za),Za|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,lt(Qa,Za),Za|=i;return jr(e,t,r,n),t.child}function Hr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gr(e,t,n,i,r){var a=ft(n)?ht:ut.current;return a=pt(t,a),un(t,r),n=Pi(e,t,n,i,a,r),i=Bi(),null===e||Ir?(Wn&&i&&On(t),t.flags|=1,jr(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ra(e,t,r))}function Wr(e,t,n,i,r){if(ft(n)){var a=!0;xt(t)}else a=!1;if(un(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Cn(t,n,i),kn(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=dn(c):c=pt(t,c=ft(n)?ht:ut.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==i||l!==c)&&En(t,s,i,c),pn=!1;var h=t.memoizedState;s.state=h,bn(t,i,s,r),l=t.memoizedState,o!==i||h!==l||dt.current||pn?("function"===typeof u&&(Sn(t,n,u,i),l=t.memoizedState),(o=pn||An(t,n,o,i,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,mn(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:en(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=dn(l):l=pt(t,l=ft(n)?ht:ut.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&En(t,s,i,l),pn=!1,h=t.memoizedState,s.state=h,bn(t,i,s,r);var f=t.memoizedState;o!==d||h!==f||dt.current||pn?("function"===typeof p&&(Sn(t,n,p,i),f=t.memoizedState),(c=pn||An(t,n,c,i,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Vr(e,t,n,i,a,r)}function Vr(e,t,n,i,r,a){Hr(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&yt(t,n,!1),ra(e,t,a);i=t.stateNode,Dr.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=ai(t,e.child,null,a),t.child=ai(t,null,o,a)):jr(e,t,o,a),t.memoizedState=i.state,r&&yt(t,n,!0),t.child}function Xr(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),hi(e,t.containerInfo)}function Yr(e,t,n,i,r){return $n(),ei(r),t.flags|=256,jr(e,t,n,i),t.child}var Jr={dehydrated:null,treeContext:null,retryLane:0};function Kr(e){return{baseLanes:e,cachePool:null}}function qr(e,t,n){var i,r=t.pendingProps,a=gi.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),lt(gi,1&a),null===e)return qn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:je(e)?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=a):o=no(a,r,0,null),e=to(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Kr(n),t.memoizedState=Jr,e):Zr(t,a));if(null!==(a=e.memoizedState)){if(null!==(i=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=no({mode:"visible",children:r.children},a,0,null),(o=to(o,a,n,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ai(t,e.child,null,n),t.child.memoizedState=Kr(n),t.memoizedState=Jr,o);if(0===(1&t.mode))t=ea(e,t,n,null);else if(je(i))t=ea(e,t,n,Error(s(419)));else if(r=0!==(n&e.childLanes),Ir||r){if(null!==(r=Ja)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(r=0!==(o&(r.suspendedLanes|n))?0:o)&&r!==a.retryLane&&(a.retryLane=r,ws(e,r,-1))}Ds(),t=ea(e,t,n,Error(s(421)))}else Ie(i)?(t.flags|=128,t.child=e.child,t=Ys.bind(null,e),ze(i,t),t=null):(n=a.treeContext,q&&(Gn=He(i),Hn=t,Wn=!0,Xn=null,Vn=!1,null!==n&&(Bn[Nn++]=In,Bn[Nn++]=jn,Bn[Nn++]=Dn,In=n.id,jn=n.overflow,Dn=t)),(t=Zr(t,t.pendingProps.children)).flags|=4096);return t}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Kr(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Jr,r):(n=Qr(e,t,r.children,n),t.memoizedState=null,n)}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Kr(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Jr,r):(n=Qr(e,t,r.children,n),t.memoizedState=null,n)}function Zr(e,t){return(t=no({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qr(e,t,n,i){var r=e.child;return e=r.sibling,n=$s(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $r(e,t,n,i,r){var a=t.mode,s=(e=e.child).sibling,o={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=$s(e,o)).subtreeFlags=14680064&e.subtreeFlags,null!==s?i=$s(s,i):(i=to(i,a,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function ea(e,t,n,i){return null!==i&&ei(i),ai(t,e.child,null,n),(e=Zr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),cn(e.return,t,n)}function na(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function ia(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(jr(e,t,i.children,n),0!==(2&(i=gi.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lt(gi,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===vi(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),na(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===vi(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ra(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ts|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=$s(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$s(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Un(t),t.tag){case 1:return ft(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pi(),ot(dt),ot(ut),yi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mi(t),null;case 13:if(ot(gi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(gi),null;case 4:return pi(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Ls(),null;default:return null}}var sa=!1,oa=!1,la="function"===typeof WeakSet?WeakSet:Set,ca=null;function ua(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ws(e,t,i)}else n.current=null}function da(e,t,n){try{n()}catch(i){Ws(e,t,i)}}var ha=!1;function pa(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&da(t,n,a)}r=r.next}while(r!==i)}}function fa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ma(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=B(n);else e=n;"function"===typeof t?t(e):t.current=e}}function ga(e,t,n){if(Wt&&"function"===typeof Wt.onCommitFiberUnmount)try{Wt.onCommitFiberUnmount(Gt,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&da(t,n,a),i=i.next}while(i!==e)}break;case 1:if(ua(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Ws(t,n,s)}break;case 5:ua(t,n);break;case 4:J?Ma(e,t,n):K&&K&&(t=t.stateNode.containerInfo,n=Ee(t),Re(t,n))}}function va(e,t,n){for(var i=t;;)if(ga(e,i,n),null===i.child||J&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function xa(e){var t=e.alternate;null!==t&&(e.alternate=null,xa(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ya(e){return 5===e.tag||3===e.tag||4===e.tag}function ba(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ya(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function _a(e){if(J){e:{for(var t=e.return;null!==t;){if(ya(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),Sa(e,n=ba(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,wa(e,n=ba(e),t);break;default:throw Error(s(161))}}}function wa(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==i&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function Sa(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==i&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function Ma(e,t,n){for(var i,r,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(s(160));switch(i=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag)va(e,a,n),r?ye(i,a.stateNode):xe(i,a.stateNode);else if(18===a.tag)r?qe(i,a.stateNode):Ke(i,a.stateNode);else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(ga(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function Aa(e,t){if(J){switch(t.tag){case 0:case 11:case 14:case 15:return pa(3,t,t.return),fa(3,t),void pa(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&me(n,a,r,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return n=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(q&&null!==e&&e.memoizedState.isDehydrated&&Ye(t.stateNode.containerInfo));case 13:case 19:return void Ca(t)}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:return pa(3,t,t.return),fa(3,t),void pa(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Ca(t);case 3:q&&null!==e&&e.memoizedState.isDehydrated&&Ye(t.stateNode.containerInfo)}e:if(K){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Re(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new la),t.forEach(function(t){var i=Js.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function Ea(e,t,n){ca=e,ka(e,t,n)}function ka(e,t,n){for(var i=0!==(1&e.mode);null!==ca;){var r=ca,a=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||sa;if(!s){var o=r.alternate,l=null!==o&&null!==o.memoizedState||oa;o=sa;var c=oa;if(sa=s,(oa=l)&&!c)for(ca=r;null!==ca;)l=(s=ca).child,22===s.tag&&null!==s.memoizedState?La(r):null!==l?(l.return=s,ca=l):La(r);for(;null!==a;)ca=a,ka(a,t,n),a=a.sibling;ca=r,sa=o,oa=c}Ta(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,ca=a):Ta(e)}}function Ta(e){for(;null!==ca;){var t=ca;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:oa||fa(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!oa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&_n(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=B(t.child.stateNode);break;case 1:n=t.child.stateNode}_n(t,o,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(q&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Je(d)}}}break;default:throw Error(s(163))}oa||512&t.flags&&ma(t)}catch(h){Ws(t,t.return,h)}}if(t===e){ca=null;break}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}function Ra(e){for(;null!==ca;){var t=ca;if(t===e){ca=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ca=n;break}ca=t.return}}function La(e){for(;null!==ca;){var t=ca;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fa(4,t)}catch(l){Ws(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Ws(t,r,l)}}var a=t.return;try{ma(t)}catch(l){Ws(t,a,l)}break;case 5:var s=t.return;try{ma(t)}catch(l){Ws(t,s,l)}}}catch(l){Ws(t,t.return,l)}if(t===e){ca=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ca=o;break}ca=t.return}}var Pa=0,Ba=1,Na=2,Da=3,Ia=4;if("function"===typeof Symbol&&Symbol.for){var ja=Symbol.for;Pa=ja("selector.component"),Ba=ja("selector.has_pseudo_class"),Na=ja("selector.role"),Da=ja("selector.test_id"),Ia=ja("selector.text")}function za(e){var t=Z(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=re(e)))throw Error(s(362));return e.stateNode.current}function Fa(e,t){switch(t.$$typeof){case Pa:if(e.type===t.value)return!0;break;case Ba:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=e[n++],a=t[r];if(5!==i.tag||!oe(i)){for(;null!=a&&Fa(i,a);)a=t[++r];if(r===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,r),i=i.sibling}}t=!1}return t;case Na:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Ia:if((5===e.tag||6===e.tag)&&(null!==(e=se(e))&&0<=e.indexOf(t.value)))return!0;break;case Da:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Oa(e){switch(e.$$typeof){case Pa:return"<"+(S(e.value)||"Unknown")+">";case Ba:return":has("+(Oa(e)||"")+")";case Na:return'[role="'+e.value+'"]';case Ia:return'"'+e.value+'"';case Da:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function Ua(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],a=e[i++],s=t[a];if(5!==r.tag||!oe(r)){for(;null!=s&&Fa(r,s);)s=t[++a];if(a===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,a),r=r.sibling}}return n}function Ha(e,t){if(!ie)throw Error(s(363));e=Ua(e=za(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)oe(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var Ga=Math.ceil,Wa=o.ReactCurrentDispatcher,Va=o.ReactCurrentOwner,Xa=o.ReactCurrentBatchConfig,Ya=0,Ja=null,Ka=null,qa=0,Za=0,Qa=st(0),$a=0,es=null,ts=0,ns=0,is=0,rs=null,as=null,ss=0,os=1/0;function ls(){os=zt()+500}var cs,us=!1,ds=null,hs=null,ps=!1,fs=null,ms=0,gs=0,vs=null,xs=-1,ys=0;function bs(){return 0!==(6&Ya)?zt():-1!==xs?xs:xs=zt()}function _s(e){return 0===(1&e.mode)?1:0!==(2&Ya)&&0!==qa?qa&-qa:null!==Zt.transition?(0===ys&&(e=St,0===(4194240&(St<<=1))&&(St=64),ys=e),ys):0!==(e=Pt)?e:$()}function ws(e,t,n){if(50<gs)throw gs=0,vs=null,Error(s(185));var i=Ss(e,t);return null===i?null:(Rt(i,t,n),0!==(2&Ya)&&i===Ja||(i===Ja&&(0===(2&Ya)&&(ns|=t),4===$a&&ks(i,qa)),Ms(i,n),1===t&&0===Ya&&0===(1&e.mode)&&(ls(),Yt&&qt())),i)}function Ss(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ms(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-bt(a),o=1<<s,l=r[s];-1===l?0!==(o&n)&&0===(o&i)||(r[s]=Et(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var i=Ct(e,e===Ja?qa:0);if(0===i)null!==n&&Dt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Dt(n),1===t)0===e.tag?function(e){Yt=!0,Kt(e)}(Ts.bind(null,e)):Kt(Ts.bind(null,e)),te?ne(function(){0===Ya&&qt()}):Nt(Ft,qt),n=null;else{switch(Bt(i)){case 1:n=Ft;break;case 4:n=Ot;break;case 16:default:n=Ut;break;case 536870912:n=Ht}n=Ks(n,As.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function As(e,t){if(xs=-1,ys=0,0!==(6&Ya))throw Error(s(327));var n=e.callbackNode;if(Hs()&&e.callbackNode!==n)return null;var i=Ct(e,e===Ja?qa:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Is(e,i);else{t=i;var r=Ya;Ya|=2;var a=Ns();for(Ja===e&&qa===t||(ls(),Ps(e,t));;)try{zs();break}catch(l){Bs(e,l)}sn(),Wa.current=a,Ya=r,null!==Ka?t=0:(Ja=null,qa=0,t=$a)}if(0!==t){if(2===t&&(0!==(r=kt(e))&&(i=r,t=Cs(e,r))),1===t)throw n=es,Ps(e,0),ks(e,i),Ms(e,zt()),n;if(6===t)ks(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Vt(a(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Is(e,i))&&(0!==(a=kt(e))&&(i=a,t=Cs(e,a))),1===t))throw n=es,Ps(e,0),ks(e,i),Ms(e,zt()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:Us(e,as);break;case 3:if(ks(e,i),(130023424&i)===i&&10<(t=ss+500-zt())){if(0!==Ct(e,0))break;if(((r=e.suspendedLanes)&i)!==i){bs(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=W(Us.bind(null,e,as),t);break}Us(e,as);break;case 4:if(ks(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-bt(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=zt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ga(i/1960))-i)){e.timeoutHandle=W(Us.bind(null,e,as),i);break}Us(e,as);break;default:throw Error(s(329))}}}return Ms(e,zt()),e.callbackNode===n?As.bind(null,e):null}function Cs(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(Ps(e,t).flags|=256),2!==(e=Is(e,t))&&(t=as,as=n,null!==t&&Es(t)),e}function Es(e){null===as?as=e:as.push.apply(as,e)}function ks(e,t){for(t&=~is,t&=~ns,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),i=1<<n;e[n]=-1,t&=~i}}function Ts(e){if(0!==(6&Ya))throw Error(s(327));Hs();var t=Ct(e,0);if(0===(1&t))return Ms(e,zt()),null;var n=Is(e,t);if(0!==e.tag&&2===n){var i=kt(e);0!==i&&(t=i,n=Cs(e,i))}if(1===n)throw n=es,Ps(e,0),ks(e,t),Ms(e,zt()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Us(e,as),Ms(e,zt()),null}function Rs(e){null!==fs&&0===fs.tag&&0===(6&Ya)&&Hs();var t=Ya;Ya|=1;var n=Xa.transition,i=Pt;try{if(Xa.transition=null,Pt=1,e)return e()}finally{Pt=i,Xa.transition=n,0===(6&(Ya=t))&&qt()}}function Ls(){Za=Qa.current,ot(Qa)}function Ps(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==X&&(e.timeoutHandle=X,V(n)),null!==Ka)for(n=Ka.return;null!==n;){var i=n;switch(Un(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mt();break;case 3:pi(),ot(dt),ot(ut),yi();break;case 5:mi(i);break;case 4:pi();break;case 13:case 19:ot(gi);break;case 10:ln(i.type._context);break;case 22:case 23:Ls()}n=n.return}if(Ja=e,Ka=e=$s(e.current,null),qa=Za=t,$a=0,es=null,is=ns=ts=0,as=rs=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(i=(n=hn[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var s=a.next;a.next=r,i.next=s}n.pending=i}hn=null}return e}function Bs(e,t){for(;;){var n=Ka;try{if(sn(),bi.current=pr,Ci){for(var i=Si.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Ci=!1}if(wi=0,Ai=Mi=Si=null,Ei=!1,ki=0,Va.current=null,null===n||null===n.return){$a=1,es=t,Ka=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=qa,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Er(o);if(null!==f){f.flags&=-257,kr(f,o,l,0,t),1&f.mode&&Cr(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){Cr(a,u,t),Ds();break e}c=Error(s(426))}else if(Wn&&1&l.mode){var v=Er(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),kr(v,o,l,0,t),ei(c);break e}}a=c,4!==$a&&($a=2),null===rs?rs=[a]:rs.push(a),c=vr(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,yn(l,Mr(0,c,t));break e;case 1:a=c;var x=l.type,y=l.stateNode;if(0===(128&l.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===hs||!hs.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t,yn(l,Ar(l,a,t));break e}}l=l.return}while(null!==l)}Os(n)}catch(b){t=b,Ka===n&&null!==n&&(Ka=n=n.return);continue}break}}function Ns(){var e=Wa.current;return Wa.current=pr,null===e?pr:e}function Ds(){0!==$a&&3!==$a&&2!==$a||($a=4),null===Ja||0===(268435455&ts)&&0===(268435455&ns)||ks(Ja,qa)}function Is(e,t){var n=Ya;Ya|=2;var i=Ns();for(Ja===e&&qa===t||Ps(e,t);;)try{js();break}catch(r){Bs(e,r)}if(sn(),Ya=n,Wa.current=i,null!==Ka)throw Error(s(261));return Ja=null,qa=0,$a}function js(){for(;null!==Ka;)Fs(Ka)}function zs(){for(;null!==Ka&&!It();)Fs(Ka)}function Fs(e){var t=cs(e.alternate,e,Za);e.memoizedProps=e.pendingProps,null===t?Os(e):Ka=t,Va.current=null}function Os(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Nr(n,t,Za)))return void(Ka=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Ka=n);if(null===e)return $a=6,void(Ka=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ka=t);Ka=t=e}while(null!==t);0===$a&&($a=5)}function Us(e,t){var n=Pt,i=Xa.transition;try{Xa.transition=null,Pt=1,function(e,t,n){do{Hs()}while(null!==fs);if(0!==(6&Ya))throw Error(s(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-bt(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,a),e===Ja&&(Ka=Ja=null,qa=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||ps||(ps=!0,Ks(Ut,function(){return Hs(),null})),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=Xa.transition,Xa.transition=null;var o=Pt;Pt=1;var l=Ya;Ya|=4,Va.current=null,function(e,t){for(I(e.containerInfo),ca=t;null!==ca;)if(t=(e=ca).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,ca=t;else for(;null!==ca;){e=ca;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,a=e.stateNode,o=a.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),r);a.__reactInternalSnapshotBeforeUpdate=o}break;case 3:J&&Ae(e.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(l){Ws(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,ca=t;break}ca=e.return}n=ha,ha=!1}(e,i),function(e,t){for(ca=t;null!==ca;){var n=(t=ca).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e;J?Ma(a,r,t):va(a,r,t);var s=r.alternate;null!==s&&(s.return=null),r.return=null}catch(_){Ws(r,t,_)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,ca=n;else for(;null!==ca;){t=ca;try{var o=t.flags;if(32&o&&J&&be(t.stateNode),512&o){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(ss=zt())}break;case 22:var d=null!==t.memoizedState,h=t.alternate,p=null!==h&&null!==h.memoizedState;if(n=t,J)e:if(i=n,r=d,a=null,J)for(var f=i;;){if(5===f.tag){if(null===a){a=f;var m=f.stateNode;r?_e(m):Se(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===a){var g=f.stateNode;r?we(g):Me(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===i)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===i)break;for(;null===f.sibling;){if(null===f.return||f.return===i)break e;a===f&&(a=null),f=f.return}a===f&&(a=null),f.sibling.return=f.return,f=f.sibling}if(d&&!p&&0!==(1&n.mode)){ca=n;for(var v=n.child;null!==v;){for(n=ca=v;null!==ca;){var x=(i=ca).child;switch(i.tag){case 0:case 11:case 14:case 15:pa(4,i,i.return);break;case 1:ua(i,i.return);var y=i.stateNode;if("function"===typeof y.componentWillUnmount){var b=i.return;try{y.props=i.memoizedProps,y.state=i.memoizedState,y.componentWillUnmount()}catch(_){Ws(i,b,_)}}break;case 5:ua(i,i.return);break;case 22:if(null!==i.memoizedState){Ra(n);continue}}null!==x?(x.return=i,ca=x):Ra(n)}v=v.sibling}}}switch(4102&o){case 2:_a(t),t.flags&=-3;break;case 6:_a(t),t.flags&=-3,Aa(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Aa(t.alternate,t);break;case 4:Aa(t.alternate,t)}}catch(_){Ws(t,t.return,_)}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}}(e,i),j(e.containerInfo),e.current=i,Ea(i,e,r),jt(),Ya=l,Pt=o,Xa.transition=a}else e.current=i;if(ps&&(ps=!1,fs=e,ms=r),a=e.pendingLanes,0===a&&(hs=null),function(e){if(Wt&&"function"===typeof Wt.onCommitFiberRoot)try{Wt.onCommitFiberRoot(Gt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Ms(e,zt()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(us)throw us=!1,e=ds,ds=null,e;0!==(1&ms)&&0!==e.tag&&Hs(),a=e.pendingLanes,0!==(1&a)?e===vs?gs++:(gs=0,vs=e):gs=0,qt()}(e,t,n)}finally{Xa.transition=i,Pt=n}return null}function Hs(){if(null!==fs){var e=Bt(ms),t=Xa.transition,n=Pt;try{if(Xa.transition=null,Pt=16>e?16:e,null===fs)var i=!1;else{if(e=fs,fs=null,ms=0,0!==(6&Ya))throw Error(s(331));var r=Ya;for(Ya|=4,ca=e.current;null!==ca;){var a=ca,o=a.child;if(0!==(16&ca.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ca=u;null!==ca;){var d=ca;switch(d.tag){case 0:case 11:case 15:pa(8,d,a)}var h=d.child;if(null!==h)h.return=d,ca=h;else for(;null!==ca;){var p=(d=ca).sibling,f=d.return;if(xa(d),d===u){ca=null;break}if(null!==p){p.return=f,ca=p;break}ca=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}ca=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,ca=o;else e:for(;null!==ca;){if(0!==(2048&(a=ca).flags))switch(a.tag){case 0:case 11:case 15:pa(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,ca=x;break e}ca=a.return}}var y=e.current;for(ca=y;null!==ca;){var b=(o=ca).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,ca=b;else e:for(o=y;null!==ca;){if(0!==(2048&(l=ca).flags))try{switch(l.tag){case 0:case 11:case 15:fa(9,l)}}catch(w){Ws(l,l.return,w)}if(l===o){ca=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,ca=_;break e}ca=l.return}}if(Ya=r,qt(),Wt&&"function"===typeof Wt.onPostCommitFiberRoot)try{Wt.onPostCommitFiberRoot(Gt,e)}catch(w){}i=!0}return i}finally{Pt=n,Xa.transition=t}}return!1}function Gs(e,t,n){vn(e,t=Mr(0,t=vr(n,t),1)),t=bs(),null!==(e=Ss(e,1))&&(Rt(e,1,t),Ms(e,t))}function Ws(e,t,n){if(3===e.tag)Gs(e,e,n);else for(;null!==t;){if(3===t.tag){Gs(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===hs||!hs.has(i))){vn(t,e=Ar(t,e=vr(n,e),1)),e=bs(),null!==(t=Ss(t,1))&&(Rt(t,1,e),Ms(t,e));break}}t=t.return}}function Vs(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=bs(),e.pingedLanes|=e.suspendedLanes&n,Ja===e&&(qa&n)===n&&(4===$a||3===$a&&(130023424&qa)===qa&&500>zt()-ss?Ps(e,0):is|=n),Ms(e,t)}function Xs(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Mt,0===(130023424&(Mt<<=1))&&(Mt=4194304)));var n=bs();null!==(e=Ss(e,t))&&(Rt(e,t,n),Ms(e,n))}function Ys(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Xs(e,n)}function Js(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Xs(e,n)}function Ks(e,t){return Nt(e,t)}function qs(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(e,t,n,i){return new qs(e,t,n,i)}function Qs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $s(e,t){var n=e.alternate;return null===n?((n=Zs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Qs(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case u:return to(n.children,r,a,t);case d:o=8,r|=8;break;case h:return(e=Zs(12,n,t,2|r)).elementType=h,e.lanes=a,e;case g:return(e=Zs(13,n,t,r)).elementType=g,e.lanes=a,e;case v:return(e=Zs(19,n,t,r)).elementType=v,e.lanes=a,e;case b:return no(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:o=10;break e;case f:o=9;break e;case m:o=11;break e;case x:o=14;break e;case y:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Zs(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function to(e,t,n,i){return(e=Zs(7,e,i,t)).lanes=n,e}function no(e,t,n,i){return(e=Zs(22,e,i,t)).elementType=b,e.lanes=n,e.stateNode={},e}function io(e,t,n){return(e=Zs(6,e,null,t)).lanes=n,e}function ro(e,t,n){return(t=Zs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ao(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=X,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tt(0),this.expirationTimes=Tt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.identifierPrefix=i,this.onRecoverableError=r,q&&(this.mutableSourceEagerHydrationData=null)}function so(e,t,n,i,r,a,s,o,l){return e=new ao(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Zs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},fn(a),e}function oo(e){if(!e)return ct;e:{if(A(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ft(n))return vt(e,n,t)}return t}function lo(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=k(t))?null:e.stateNode}function co(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uo(e,t){co(e,t),(e=e.alternate)&&co(e,t)}function ho(e){return null===(e=k(e))?null:e.stateNode}function po(){return null}return cs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Ir=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ir=!1,function(e,t,n){switch(t.tag){case 3:Xr(t),$n();break;case 5:fi(t);break;case 1:ft(t.type)&&xt(t);break;case 4:hi(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(lt(gi,1&gi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?qr(e,t,n):(lt(gi,1&gi.current),null!==(e=ra(e,t,n))?e.sibling:null);lt(gi,1&gi.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return ia(e,t,n);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(gi,gi.current),i)break;return null;case 22:case 23:return t.lanes=0,Ur(e,t,n)}return ra(e,t,n)}(e,t,n);Ir=0!==(131072&e.flags)}else Ir=!1,Wn&&0!==(1048576&t.flags)&&Fn(t,Pn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=pt(t,ut.current);un(t,n),r=Pi(null,t,i,e,r,n);var a=Bi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(i)?(a=!0,xt(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,fn(t),r.updater=Mn,t.stateNode=r,r._reactInternals=t,kn(t,i,e,n),t=Vr(null,t,i,!0,a,n)):(t.tag=0,Wn&&a&&On(t),jr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Qs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===x)return 14}return 2}(i),e=en(i,e),r){case 0:t=Gr(null,t,i,e,n);break e;case 1:t=Wr(null,t,i,e,n);break e;case 11:t=zr(null,t,i,e,n);break e;case 14:t=Fr(null,t,i,en(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Gr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 1:return i=t.type,r=t.pendingProps,Wr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 3:e:{if(Xr(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,mn(e,t),bn(t,i,null,n);var o=t.memoizedState;if(i=o.element,q&&a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Yr(e,t,i,n,r=Error(s(423)));break e}if(i!==r){t=Yr(e,t,i,n,r=Error(s(424)));break e}for(q&&(Gn=Ue(t.stateNode.containerInfo),Hn=t,Wn=!0,Xn=null,Vn=!1),n=si(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){t=ra(e,t,n);break e}jr(e,t,i,n)}t=t.child}return t;case 5:return fi(t),null===e&&qn(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,H(i,r)?o=null:null!==a&&H(i,a)&&(t.flags|=32),Hr(e,t),jr(e,t,o,n),t.child;case 6:return null===e&&qn(t),null;case 13:return qr(e,t,n);case 4:return hi(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ai(t,null,i,n):jr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,zr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 7:return jr(e,t,t.pendingProps,n),t.child;case 8:case 12:return jr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,on(0,i,o=r.value),null!==a)if(Vt(a.value,o)){if(a.children===r.children&&!dt.current){t=ra(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=gn(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),cn(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}jr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,un(t,n),i=i(r=dn(r)),t.flags|=1,jr(e,t,i,n),t.child;case 14:return r=en(i=t.type,t.pendingProps),Fr(e,t,i,r=en(i.type,r),n);case 15:return Or(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:en(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(i)?(e=!0,xt(t)):e=!1,un(t,n),Cn(t,i,r),kn(t,i,r,n),Vr(null,t,i,!0,e,n);case 19:return ia(e,t,n);case 22:return Ur(e,t,n)}throw Error(s(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(ws(e,134217728,bs()),uo(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=bs(),n=_s(e);ws(e,n,t),uo(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=At(t.pendingLanes);0!==n&&(Lt(t,1|n),Ms(t,zt()),0===(6&Ya)&&(ls(),qt()))}break;case 13:var i=bs();Rs(function(){return ws(e,1,i)}),uo(e,1)}},t.batchedUpdates=function(e,t){var n=Ya;Ya|=1;try{return e(t)}finally{0===(Ya=n)&&(ls(),Yt&&qt())}},t.createComponentSelector=function(e){return{$$typeof:Pa,value:e}},t.createContainer=function(e,t,n,i,r,a,s){return so(e,t,!1,null,0,i,0,a,s)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Ba,value:e}},t.createHydrationContainer=function(e,t,n,i,r,a,s,o,l){return(e=so(n,i,!0,e,0,a,0,o,l)).context=oo(null),n=e.current,(a=gn(i=bs(),r=_s(n))).callback=void 0!==t&&null!==t?t:null,vn(n,a),e.current.lanes=r,Rt(e,r,i),Ms(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Na,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Da,value:e}},t.createTextSelector=function(e){return{$$typeof:Ia,value:e}},t.deferredUpdates=function(e){var t=Pt,n=Xa.transition;try{return Xa.transition=null,Pt=16,e()}finally{Pt=t,Xa.transition=n}},t.discreteUpdates=function(e,t,n,i,r){var a=Pt,s=Xa.transition;try{return Xa.transition=null,Pt=1,e(t,n,i,r)}finally{Pt=a,Xa.transition=s,0===Ya&&ls()}},t.findAllNodes=Ha,t.findBoundingRects=function(e,t){if(!ie)throw Error(s(363));t=Ha(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,r=i+n.width,a=n.y,o=a+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,p=h+c.height;if(i>=u&&a>=h&&r<=d&&o<=p){e.splice(t,1);break}if(!(i!==u||n.width!==c.width||p<a||h>o)){h>a&&(c.height+=h-a,c.y=a),p<o&&(c.height=o-h),e.splice(t,1);break}if(!(a!==h||n.height!==c.height||d<i||u>r)){u>i&&(c.width+=u-i,c.x=i),d<r&&(c.width=r-u),e.splice(t,1);break}}return e},t.findHostInstance=lo,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=E(e))?R(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return lo(e)},t.flushControlled=function(e){var t=Ya;Ya|=1;var n=Xa.transition,i=Pt;try{Xa.transition=null,Pt=1,e()}finally{Pt=i,Xa.transition=n,0===(Ya=t)&&(ls(),qt())}},t.flushPassiveEffects=Hs,t.flushSync=Rs,t.focusWithin=function(e,t){if(!ie)throw Error(s(363));for(t=Ua(e=za(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!oe(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Pt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(s(363));var n=0,i=[];e=[za(e),0];for(var r=0;r<e.length;){var a=e[r++],o=e[r++],l=t[o];if((5!==a.tag||!oe(a))&&(Fa(a,l)&&(i.push(Oa(l)),++o>n&&(n=o)),o<t.length))for(a=a.child;null!==a;)e.push(a,o),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Oa(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?B(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ho,findFiberByHostInstance:e.findFiberByHostInstance||po,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Gt=t.inject(e),Wt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(s(363));e=Ha(e,t);var r=ue(e,n,i).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Pt;try{return Pt=e,t()}finally{Pt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var r=t.current,a=bs(),s=_s(r);return n=oo(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(a,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),vn(r,t),null!==(e=ws(r,s,a))&&xn(e,r,s),s},t}},488:(e,t,n)=>{"use strict";var i=n(959);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,s){if(s!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},599:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},654:(e,t,n)=>{"use strict";var i=n(950),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,a={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},733:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,B(w);else{var t=i(u);null!==t&&N(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,x(C),C=-1),f=!0;var a=p;try{for(b(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),b(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&N(_,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,A=null,C=-1,E=5,k=-1;function T(){return!(t.unstable_now()-k<E)}function R(){if(null!==A){var e=t.unstable_now();k=e;var n=!0;try{n=A(!0,e)}finally{n?S():(M=!1,A=null)}}else M=!1}if("function"===typeof y)S=function(){y(R)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,P=L.port2;L.port1.onmessage=R,S=function(){P.postMessage(null)}}else S=function(){v(R,0)};function B(e){A=e,M||(M=!0,S())}function N(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,B(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(g?(x(C),C=-1):g=!0,N(_,a-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,B(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,B(w);else{var t=i(u);null!==t&&N(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,x(C),C=-1),f=!0;var a=p;try{for(b(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),b(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&N(_,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,A=null,C=-1,E=5,k=-1;function T(){return!(t.unstable_now()-k<E)}function R(){if(null!==A){var e=t.unstable_now();k=e;var n=!0;try{n=A(!0,e)}finally{n?S():(M=!1,A=null)}}else M=!1}if("function"===typeof y)S=function(){y(R)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,P=L.port2;L.port1.onmessage=R,S=function(){P.postMessage(null)}}else S=function(){v(R,0)};function B(e){A=e,M||(M=!0,S())}function N(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,B(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(g?(x(C),C=-1):g=!0,N(_,a-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,B(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},773:(e,t,n)=>{"use strict";e.exports=n(850)},850:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,B(w);else{var t=i(u);null!==t&&N(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,x(C),C=-1),f=!0;var a=p;try{for(b(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),b(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&N(_,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,A=null,C=-1,E=5,k=-1;function T(){return!(t.unstable_now()-k<E)}function R(){if(null!==A){var e=t.unstable_now();k=e;var n=!0;try{n=A(!0,e)}finally{n?S():(M=!1,A=null)}}else M=!1}if("function"===typeof y)S=function(){y(R)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,P=L.port2;L.port1.onmessage=R,S=function(){P.postMessage(null)}}else S=function(){v(R,0)};function B(e){A=e,M||(M=!0,S())}function N(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,B(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(g?(x(C),C=-1):g=!0,N(_,a-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,B(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},878:(e,t,n)=>{"use strict";e.exports=n(153)},942:(e,t,n)=>{e.exports=n(488)()},950:(e,t,n)=>{"use strict";e.exports=n(49)},959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>zd,AddEquation:()=>id,AddOperation:()=>Bd,AdditiveAnimationBlendMode:()=>vp,AdditiveBlending:()=>$u,AlphaFormat:()=>xh,AlwaysCompare:()=>sf,AlwaysDepth:()=>Md,AlwaysStencilFunc:()=>Zp,AmbientLight:()=>wM,AnimationAction:()=>dA,AnimationClip:()=>XS,AnimationLoader:()=>tM,AnimationMixer:()=>pA,AnimationObjectGroup:()=>uA,AnimationUtils:()=>BS,ArcCurve:()=>Z_,ArrayCamera:()=>bb,ArrowHelper:()=>rC,AttachedBindMode:()=>Od,Audio:()=>KM,AudioAnalyser:()=>tA,AudioContext:()=>IM,AudioListener:()=>JM,AudioLoader:()=>jM,AxesHelper:()=>aC,BackSide:()=>Ju,BasicDepthPacking:()=>Sp,BasicShadowMap:()=>Gu,Bone:()=>d_,BooleanKeyframeTrack:()=>FS,Box2:()=>AA,Box3:()=>xm,Box3Helper:()=>$A,BoxGeometry:()=>Tv,BoxHelper:()=>QA,BufferAttribute:()=>Vg,BufferGeometry:()=>cv,BufferGeometryLoader:()=>TM,ByteType:()=>lh,Cache:()=>JS,Camera:()=>Dv,CameraHelper:()=>KA,CanvasTexture:()=>J_,CapsuleGeometry:()=>xw,CatmullRomCurve3:()=>iw,CineonToneMapping:()=>jd,CircleGeometry:()=>yw,ClampToEdgeWrapping:()=>Kd,Clock:()=>HM,Color:()=>Bg,ColorKeyframeTrack:()=>OS,ColorManagement:()=>qf,CompressedArrayTexture:()=>X_,CompressedCubeTexture:()=>Y_,CompressedTexture:()=>V_,CompressedTextureLoader:()=>nM,ConeGeometry:()=>_w,ConstantAlphaFactor:()=>_d,ConstantColorFactor:()=>yd,CubeCamera:()=>zv,CubeReflectionMapping:()=>Gd,CubeRefractionMapping:()=>Wd,CubeTexture:()=>Fv,CubeTextureLoader:()=>rM,CubeUVReflectionMapping:()=>Yd,CubicBezierCurve:()=>ow,CubicBezierCurve3:()=>lw,CubicInterpolant:()=>DS,CullFaceBack:()=>Ou,CullFaceFront:()=>Uu,CullFaceFrontBack:()=>Hu,CullFaceNone:()=>Fu,Curve:()=>K_,CurvePath:()=>mw,CustomBlending:()=>nd,CustomToneMapping:()=>Fd,CylinderGeometry:()=>bw,Cylindrical:()=>SA,Data3DTexture:()=>dm,DataArrayTexture:()=>cm,DataTexture:()=>h_,DataTextureLoader:()=>aM,DataUtils:()=>Hg,DecrementStencilOp:()=>Op,DecrementWrapStencilOp:()=>Hp,DefaultLoadingManager:()=>qS,DepthFormat:()=>wh,DepthStencilFormat:()=>Sh,DepthTexture:()=>Mb,DetachedBindMode:()=>Ud,DirectionalLight:()=>_M,DirectionalLightHelper:()=>XA,DiscreteInterpolant:()=>jS,DisplayP3ColorSpace:()=>Rp,DodecahedronGeometry:()=>Sw,DoubleSide:()=>Ku,DstAlphaFactor:()=>fd,DstColorFactor:()=>gd,DynamicCopyUsage:()=>ff,DynamicDrawUsage:()=>lf,DynamicReadUsage:()=>df,EdgesGeometry:()=>kw,EllipseCurve:()=>q_,EqualCompare:()=>ef,EqualDepth:()=>Ed,EqualStencilFunc:()=>Xp,EquirectangularReflectionMapping:()=>Vd,EquirectangularRefractionMapping:()=>Xd,Euler:()=>tg,EventDispatcher:()=>_f,ExtrudeGeometry:()=>rS,FileLoader:()=>eM,Float16BufferAttribute:()=>$g,Float32BufferAttribute:()=>ev,Float64BufferAttribute:()=>tv,FloatType:()=>ph,Fog:()=>Lb,FogExp2:()=>Rb,FramebufferTexture:()=>W_,FrontSide:()=>Yu,Frustum:()=>Yv,GLBufferAttribute:()=>xA,GLSL1:()=>gf,GLSL3:()=>vf,GreaterCompare:()=>nf,GreaterDepth:()=>Td,GreaterEqualCompare:()=>af,GreaterEqualDepth:()=>kd,GreaterEqualStencilFunc:()=>qp,GreaterStencilFunc:()=>Jp,GridHelper:()=>UA,Group:()=>_b,HalfFloatType:()=>fh,HemisphereLight:()=>lM,HemisphereLightHelper:()=>OA,IcosahedronGeometry:()=>sS,ImageBitmapLoader:()=>NM,ImageLoader:()=>iM,ImageUtils:()=>em,IncrementStencilOp:()=>Fp,IncrementWrapStencilOp:()=>Up,InstancedBufferAttribute:()=>g_,InstancedBufferGeometry:()=>kM,InstancedInterleavedBuffer:()=>vA,InstancedMesh:()=>M_,Int16BufferAttribute:()=>Kg,Int32BufferAttribute:()=>Zg,Int8BufferAttribute:()=>Xg,IntType:()=>dh,InterleavedBuffer:()=>Bb,InterleavedBufferAttribute:()=>Db,Interpolant:()=>NS,InterpolateDiscrete:()=>up,InterpolateLinear:()=>dp,InterpolateSmooth:()=>hp,InvertStencilOp:()=>Gp,KeepStencilOp:()=>jp,KeyframeTrack:()=>zS,LOD:()=>e_,LatheGeometry:()=>vw,Layers:()=>ng,LessCompare:()=>$p,LessDepth:()=>Ad,LessEqualCompare:()=>tf,LessEqualDepth:()=>Cd,LessEqualStencilFunc:()=>Yp,LessStencilFunc:()=>Vp,Light:()=>oM,LightProbe:()=>AM,Line:()=>L_,Line3:()=>kA,LineBasicMaterial:()=>A_,LineCurve:()=>cw,LineCurve3:()=>uw,LineDashedMaterial:()=>ES,LineLoop:()=>D_,LineSegments:()=>N_,LinearDisplayP3ColorSpace:()=>Lp,LinearEncoding:()=>_p,LinearFilter:()=>nh,LinearInterpolant:()=>IS,LinearMipMapLinearFilter:()=>sh,LinearMipMapNearestFilter:()=>rh,LinearMipmapLinearFilter:()=>ah,LinearMipmapNearestFilter:()=>ih,LinearSRGBColorSpace:()=>Tp,LinearToneMapping:()=>Dd,LinearTransfer:()=>Pp,Loader:()=>ZS,LoaderUtils:()=>EM,LoadingManager:()=>KS,LoopOnce:()=>op,LoopPingPong:()=>cp,LoopRepeat:()=>lp,LuminanceAlphaFormat:()=>_h,LuminanceFormat:()=>bh,MOUSE:()=>ju,Material:()=>Ig,MaterialLoader:()=>CM,MathUtils:()=>Df,Matrix3:()=>jf,Matrix4:()=>Vm,MaxEquation:()=>od,Mesh:()=>Ev,MeshBasicMaterial:()=>jg,MeshDepthMaterial:()=>fb,MeshDistanceMaterial:()=>mb,MeshLambertMaterial:()=>AS,MeshMatcapMaterial:()=>CS,MeshNormalMaterial:()=>MS,MeshPhongMaterial:()=>wS,MeshPhysicalMaterial:()=>_S,MeshStandardMaterial:()=>bS,MeshToonMaterial:()=>SS,MinEquation:()=>sd,MirroredRepeatWrapping:()=>qd,MixOperation:()=>Pd,MultiplyBlending:()=>td,MultiplyOperation:()=>Ld,NearestFilter:()=>Zd,NearestMipMapLinearFilter:()=>th,NearestMipMapNearestFilter:()=>$d,NearestMipmapLinearFilter:()=>eh,NearestMipmapNearestFilter:()=>Qd,NeverCompare:()=>Qp,NeverDepth:()=>Sd,NeverStencilFunc:()=>Wp,NoBlending:()=>Zu,NoColorSpace:()=>Ep,NoToneMapping:()=>Nd,NormalAnimationBlendMode:()=>gp,NormalBlending:()=>Qu,NotEqualCompare:()=>rf,NotEqualDepth:()=>Rd,NotEqualStencilFunc:()=>Kp,NumberKeyframeTrack:()=>US,Object3D:()=>gg,ObjectLoader:()=>RM,ObjectSpaceNormalMap:()=>Cp,OctahedronGeometry:()=>oS,OneFactor:()=>cd,OneMinusConstantAlphaFactor:()=>wd,OneMinusConstantColorFactor:()=>bd,OneMinusDstAlphaFactor:()=>md,OneMinusDstColorFactor:()=>vd,OneMinusSrcAlphaFactor:()=>pd,OneMinusSrcColorFactor:()=>dd,OrthographicCamera:()=>ox,P3Primaries:()=>Dp,PCFShadowMap:()=>Wu,PCFSoftShadowMap:()=>Vu,PMREMGenerator:()=>xx,Path:()=>gw,PerspectiveCamera:()=>Iv,Plane:()=>Wv,PlaneGeometry:()=>qv,PlaneHelper:()=>eC,PointLight:()=>yM,PointLightHelper:()=>IA,Points:()=>U_,PointsMaterial:()=>I_,PolarGridHelper:()=>HA,PolyhedronGeometry:()=>ww,PositionalAudio:()=>eA,PropertyBinding:()=>cA,PropertyMixer:()=>nA,QuadraticBezierCurve:()=>dw,QuadraticBezierCurve3:()=>hw,Quaternion:()=>fm,QuaternionKeyframeTrack:()=>GS,QuaternionLinearInterpolant:()=>HS,RED_GREEN_RGTC2_Format:()=>ap,RED_RGTC1_Format:()=>ip,REVISION:()=>Iu,RGBADepthPacking:()=>Mp,RGBAFormat:()=>yh,RGBAIntegerFormat:()=>kh,RGBA_ASTC_10x10_Format:()=>Zh,RGBA_ASTC_10x5_Format:()=>Jh,RGBA_ASTC_10x6_Format:()=>Kh,RGBA_ASTC_10x8_Format:()=>qh,RGBA_ASTC_12x10_Format:()=>Qh,RGBA_ASTC_12x12_Format:()=>$h,RGBA_ASTC_4x4_Format:()=>Oh,RGBA_ASTC_5x4_Format:()=>Uh,RGBA_ASTC_5x5_Format:()=>Hh,RGBA_ASTC_6x5_Format:()=>Gh,RGBA_ASTC_6x6_Format:()=>Wh,RGBA_ASTC_8x5_Format:()=>Vh,RGBA_ASTC_8x6_Format:()=>Xh,RGBA_ASTC_8x8_Format:()=>Yh,RGBA_BPTC_Format:()=>ep,RGBA_ETC2_EAC_Format:()=>Fh,RGBA_PVRTC_2BPPV1_Format:()=>Ih,RGBA_PVRTC_4BPPV1_Format:()=>Dh,RGBA_S3TC_DXT1_Format:()=>Rh,RGBA_S3TC_DXT3_Format:()=>Lh,RGBA_S3TC_DXT5_Format:()=>Ph,RGB_BPTC_SIGNED_Format:()=>tp,RGB_BPTC_UNSIGNED_Format:()=>np,RGB_ETC1_Format:()=>jh,RGB_ETC2_Format:()=>zh,RGB_PVRTC_2BPPV1_Format:()=>Nh,RGB_PVRTC_4BPPV1_Format:()=>Bh,RGB_S3TC_DXT1_Format:()=>Th,RGFormat:()=>Ch,RGIntegerFormat:()=>Eh,RawShaderMaterial:()=>yS,Ray:()=>Wm,Raycaster:()=>yA,Rec709Primaries:()=>Np,RectAreaLight:()=>SM,RedFormat:()=>Mh,RedIntegerFormat:()=>Ah,ReinhardToneMapping:()=>Id,RenderTarget:()=>om,RepeatWrapping:()=>Jd,ReplaceStencilOp:()=>zp,ReverseSubtractEquation:()=>ad,RingGeometry:()=>lS,SIGNED_RED_GREEN_RGTC2_Format:()=>sp,SIGNED_RED_RGTC1_Format:()=>rp,SRGBColorSpace:()=>kp,SRGBTransfer:()=>Bp,Scene:()=>Pb,ShaderChunk:()=>Zv,ShaderLib:()=>$v,ShaderMaterial:()=>Nv,ShadowMaterial:()=>xS,Shape:()=>Tw,ShapeGeometry:()=>cS,ShapePath:()=>sC,ShapeUtils:()=>tS,ShortType:()=>ch,Skeleton:()=>m_,SkeletonHelper:()=>NA,SkinnedMesh:()=>u_,Source:()=>nm,Sphere:()=>Im,SphereGeometry:()=>uS,Spherical:()=>wA,SphericalHarmonics3:()=>MM,SplineCurve:()=>pw,SpotLight:()=>fM,SpotLightHelper:()=>RA,Sprite:()=>qb,SpriteMaterial:()=>Ib,SrcAlphaFactor:()=>hd,SrcAlphaSaturateFactor:()=>xd,SrcColorFactor:()=>ud,StaticCopyUsage:()=>pf,StaticDrawUsage:()=>of,StaticReadUsage:()=>uf,StereoCamera:()=>UM,StreamCopyUsage:()=>mf,StreamDrawUsage:()=>cf,StreamReadUsage:()=>hf,StringKeyframeTrack:()=>WS,SubtractEquation:()=>rd,SubtractiveBlending:()=>ed,TOUCH:()=>zu,TangentSpaceNormalMap:()=>Ap,TetrahedronGeometry:()=>dS,Texture:()=>am,TextureLoader:()=>sM,TorusGeometry:()=>hS,TorusKnotGeometry:()=>pS,Triangle:()=>kg,TriangleFanDrawMode:()=>bp,TriangleStripDrawMode:()=>yp,TrianglesDrawMode:()=>xp,TubeGeometry:()=>fS,TwoPassDoubleSide:()=>qu,UVMapping:()=>Hd,Uint16BufferAttribute:()=>qg,Uint32BufferAttribute:()=>Qg,Uint8BufferAttribute:()=>Yg,Uint8ClampedBufferAttribute:()=>Jg,Uniform:()=>fA,UniformsGroup:()=>gA,UniformsLib:()=>Qv,UniformsUtils:()=>Bv,UnsignedByteType:()=>oh,UnsignedInt248Type:()=>vh,UnsignedIntType:()=>hh,UnsignedShort4444Type:()=>mh,UnsignedShort5551Type:()=>gh,UnsignedShortType:()=>uh,VSMShadowMap:()=>Xu,Vector2:()=>If,Vector3:()=>mm,Vector4:()=>sm,VectorKeyframeTrack:()=>VS,VideoTexture:()=>G_,WebGL1Renderer:()=>Tb,WebGL3DRenderTarget:()=>hm,WebGLArrayRenderTarget:()=>um,WebGLCoordinateSystem:()=>yf,WebGLCubeRenderTarget:()=>Ov,WebGLMultipleRenderTargets:()=>pm,WebGLRenderTarget:()=>lm,WebGLRenderer:()=>kb,WebGLUtils:()=>yb,WebGPUCoordinateSystem:()=>bf,WireframeGeometry:()=>mS,WrapAroundEnding:()=>mp,ZeroCurvatureEnding:()=>pp,ZeroFactor:()=>ld,ZeroSlopeEnding:()=>fp,ZeroStencilOp:()=>Ip,_SRGBAFormat:()=>xf,createCanvasElement:()=>Gf,sRGBEncoding:()=>wp});var t=n(950),i=n(352);function r(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function o(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(599);const u=["sri"],d=["page"],h=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function v(){return M(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return _("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:w(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function x(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function b(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function M(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,o="POP",l=null,u=d();function d(){return(s.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:o,location:f.location,delta:t})}function p(e){return A(e)}null==u&&(u=0,s.replaceState(c(c({},s.state),{},{idx:u}),""));let f={get action(){return o},get location(){return e(r,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(g,h),l=e,()=>{r.removeEventListener(g,h),l=null}},createHref:e=>t(r,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let i=_(f.location,e,t);n&&n(i,e),u=d()+1;let c=b(i,u),h=f.createHref(i);try{s.pushState(c,"",h)}catch(WE){if(WE instanceof DOMException&&"DataCloneError"===WE.name)throw WE;r.location.assign(h)}a&&l&&l({action:o,location:f.location,delta:1})},replace:function(e,t){o="REPLACE";let i=_(f.location,e,t);n&&n(i,e),u=d();let r=b(i,u),c=f.createHref(i);s.replaceState(r,"",c),a&&l&&l({action:o,location:f.location,delta:0})},go:e=>s.go(e)};return f}function A(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),x(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:w(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function C(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,i){let r=H(("string"===typeof t?S(t):t).pathname||"/",n);if(null==r)return null;let a=k(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=U(r);s=z(a[o],e,i)}return s}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=(e,r,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};s.relativePath.startsWith("/")&&(x(s.relativePath.startsWith(i),'Absolute route path "'.concat(s.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),s.relativePath=s.relativePath.slice(i.length));let o=Y([i,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(x(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),k(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of T(e.path))r(e,t,i);else r(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===i.length)return r?[a,""]:[a];let s=T(i.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),r&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var R=/^:[\w-]+$/,L=3,P=2,B=1,N=10,D=-2,I=e=>"*"===e;function j(e,t){let n=e.split("/"),i=n.length;return n.some(I)&&(i+=D),t&&(i+=P),n.filter(e=>!I(e)).reduce((e,t)=>e+(R.test(t)?L:""===t?B:N),i)}function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},a="/",s=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===a?t:t.slice(a.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),s.push({params:r,pathname:Y([a,u.pathname]),pathnameBase:J(Y([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=Y([a,u.pathnameBase]))}return s}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=O(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(WE){return y(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(WE,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function G(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function V(e){let t=W(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function X(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=S(e):(i=c({},e),x(!i.pathname||!i.pathname.includes("?"),G("?","pathname","search",i)),x(!i.pathname||!i.pathname.includes("#"),G("#","pathname","hash",i)),x(!i.search||!i.search.includes("#"),G("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof e?S(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:K(i),hash:q(r)}}(i,a),u=o&&"/"!==o&&o.endsWith("/"),d=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Q=["POST","PUT","PATCH","DELETE"],$=(new Set(Q),["GET",...Q]);new Set($),Symbol("ResetLoaderData");var ee=t.createContext(null);ee.displayName="DataRouter";var te=t.createContext(null);te.displayName="DataRouterState";var ne=t.createContext({isTransitioning:!1});ne.displayName="ViewTransition";var ie=t.createContext(new Map);ie.displayName="Fetchers";var re=t.createContext(null);re.displayName="Await";var ae=t.createContext(null);ae.displayName="Navigation";var se=t.createContext(null);se.displayName="Location";var oe=t.createContext({outlet:null,matches:[],isDataRoute:!1});oe.displayName="Route";var le=t.createContext(null);le.displayName="RouteError";function ce(){return null!=t.useContext(se)}function ue(){return x(ce(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(se).location}var de="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function he(e){t.useContext(ae).static||t.useLayoutEffect(e)}function pe(){let{isDataRoute:e}=t.useContext(oe);return e?function(){let{router:e}=we("useNavigate"),n=Me("useNavigate"),i=t.useRef(!1);he(()=>{i.current=!0});let r=t.useCallback(async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(i.current,de),i.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,c({fromRouteId:n},r)))},[e,n]);return r}():function(){x(ce(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ee),{basename:n,navigator:i}=t.useContext(ae),{matches:r}=t.useContext(oe),{pathname:a}=ue(),s=JSON.stringify(V(r)),o=t.useRef(!1);he(()=>{o.current=!0});let l=t.useCallback(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(y(o.current,de),!o.current)return;if("number"===typeof t)return void i.go(t);let l=X(t,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:Y([n,l.pathname])),(r.replace?i.replace:i.push)(l,r.state,r)},[n,i,s,a,e]);return l}()}t.createContext(null);function fe(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=t.useContext(oe),{pathname:r}=ue(),a=JSON.stringify(V(i));return t.useMemo(()=>X(e,JSON.parse(a),r,"path"===n),[e,a,r,n])}function me(e,n,i,r){x(ce(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=t.useContext(ae),{matches:s}=t.useContext(oe),o=s[s.length-1],l=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";Ee(u,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=ue();if(n){var m;let e="string"===typeof n?S(n):n;x("/"===d||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let g=p.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=C(e,{pathname:v});y(h||null!=b,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),y(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let _=be(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Y([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Y([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,i,r);return n&&_?t.createElement(se.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},_):_}function ge(){let e=Ae(),n=Z(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:s},"ErrorBoundary")," or"," ",t.createElement("code",{style:s},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:a},i):null,o)}var ve=t.createElement(ge,null),xe=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(oe.Provider,{value:this.props.routeContext},t.createElement(le.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ye(e){let{routeContext:n,match:i,children:r}=e,a=t.useContext(ee);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(oe.Provider,{value:n},r)}function be(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let r=e,a=null===i||void 0===i?void 0:i.errors;if(null!=a){let e=r.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));x(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let s=!1,o=-1;if(i)for(let t=0;t<r.length;t++){let e=r[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=t),e.route.id){let{loaderData:t,errors:n}=i,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){s=!0,r=o>=0?r.slice(0,o+1):[r[0]];break}}}return r.reduceRight((e,l,c)=>{let u,d=!1,h=null,p=null;i&&(u=a&&l.route.id?a[l.route.id]:void 0,h=l.route.errorElement||ve,s&&(o<0&&0===c?(Ee("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):o===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let f=n.concat(r.slice(0,c+1)),m=()=>{let n;return n=u?h:d?p:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(ye,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=i},children:n})};return i&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?t.createElement(xe,{location:i.location,revalidation:i.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}function _e(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function we(e){let n=t.useContext(ee);return x(n,_e(e)),n}function Se(e){let n=t.useContext(te);return x(n,_e(e)),n}function Me(e){let n=function(e){let n=t.useContext(oe);return x(n,_e(e)),n}(e),i=n.matches[n.matches.length-1];return x(i.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),i.route.id}function Ae(){var e;let n=t.useContext(le),i=Se("useRouteError"),r=Me("useRouteError");return void 0!==n?n:null===(e=i.errors)||void 0===e?void 0:e[r]}var Ce={};function Ee(e,t,n){t||Ce[e]||(Ce[e]=!0,y(!1,n))}t.memo(function(e){let{routes:t,future:n,state:i}=e;return me(t,void 0,i,n)});function ke(e){let{to:n,replace:i,state:r,relative:a}=e;x(ce(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=t.useContext(ae);y(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(oe),{pathname:l}=ue(),c=pe(),u=X(n,V(o),l,"path"===a),d=JSON.stringify(u);return t.useEffect(()=>{c(JSON.parse(d),{replace:i,state:r,relative:a})},[c,d,a,i,r]),null}function Te(e){x(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Re(e){let{basename:n="/",children:i=null,location:r,navigationType:a="POP",navigator:s,static:o=!1}=e;x(!ce(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);"string"===typeof r&&(r=S(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:f="default"}=r,m=t.useMemo(()=>{let e=H(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:f},navigationType:a}},[l,u,d,h,p,f,a]);return y(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:t.createElement(ae.Provider,{value:c},t.createElement(se.Provider,{children:i,value:m}))}function Le(e){let{children:t,location:n}=e;return me(Pe(t),n)}t.Component;function Pe(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return t.Children.forEach(e,(e,r)=>{if(!t.isValidElement(e))return;let a=[...n,r];if(e.type===t.Fragment)return void i.push.apply(i,Pe(e.props.children,a));x(e.type===Te,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),x(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Pe(e.props.children,a)),i.push(s)}),i}var Be="get",Ne="application/x-www-form-urlencoded";function De(e){return null!=e&&"string"===typeof e.tagName}var Ie=null;var je=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ze(e){return null==e||je.has(e)?e:(y(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ne,'"')),null)}function Fe(e,t){let n,i,r,a,s;if(De(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");i=s?H(s,t):null,n=e.getAttribute("method")||Be,r=ze(e.getAttribute("enctype"))||Ne,a=new FormData(e)}else if(function(e){return De(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return De(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(i=o?H(o,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Be,r=ze(e.getAttribute("formenctype"))||ze(s.getAttribute("enctype"))||Ne,a=new FormData(s,e),!function(){if(null===Ie)try{new FormData(document.createElement("form"),0),Ie=!1}catch(e){Ie=!0}return Ie}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,i)}}else{if(De(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Be,i=null,r=Ne,s=e}var o;return a&&"text/plain"===r&&(s=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:s}}function Oe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ue(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(WE){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(WE),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function He(e){return null!=e&&"string"===typeof e.page}function Ge(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function We(e,t,n,i,r,a){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Ve(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function Xe(e,t){let n=new Set,i=new Set(t);return e.reduce((e,r)=>{if(t&&!He(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(a)||(n.add(a),e.push({key:a,link:r})),e},[])}function Ye(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Je=new Set([100,101,204,205]);function Ke(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===H(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}t.Component;function qe(e){let{error:n,isOutsideRemixApp:i}=e;console.error(n);let r,a=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(n))return t.createElement(Ze,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),a);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(Ze,{title:"Application Error!",isOutsideRemixApp:i},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),a)}function Ze(e){var n;let{title:i,renderScripts:r,isOutsideRemixApp:a,children:s}=e,{routeModules:o}=nt();return null!==o.root&&void 0!==n&&n.Layout&&!a?s:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,i)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,r?t.createElement(ct,null):null)))}function Qe(e,t){return"lazy"===e.mode&&!0===t}function $e(){let e=t.useContext(ee);return Oe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function et(){let e=t.useContext(te);return Oe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tt=t.createContext(void 0);function nt(){let e=t.useContext(tt);return Oe(e,"You must render this element inside a <HydratedRouter> element"),e}function it(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function rt(e,t,n){if(n&&!lt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}function at(e){let{page:n}=e,i=r(e,d),{router:a}=$e(),s=t.useMemo(()=>C(a.routes,n,a.basename),[a.routes,n,a.basename]);return s?t.createElement(ot,c({page:n,matches:s},i)):null}function st(e){let{manifest:n,routeModules:i}=nt(),[r,a]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){return Xe((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await Ue(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ge).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,n,i).then(e=>{t||a(e)}),()=>{t=!0}},[e,n,i]),r}function ot(e){let{page:n,matches:i}=e,a=r(e,h),s=ue(),{manifest:o,routeModules:l}=nt(),{basename:u}=$e(),{loaderData:d,matches:p}=et(),f=t.useMemo(()=>We(n,i,p,o,s,"data"),[n,i,p,o,s]),m=t.useMemo(()=>We(n,i,p,o,s,"assets"),[n,i,p,o,s]),g=t.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(i.forEach(n=>{var i;let r=o.routes[n.route.id];r&&r.hasLoader&&(!f.some(e=>e.route.id===n.route.id)&&n.route.id in d&&null!==(i=l[n.route.id])&&void 0!==i&&i.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let r=Ke(n,u);return t&&e.size>0&&r.searchParams.set("_routes",i.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[u,d,s,o,f,i,n,l]),v=t.useMemo(()=>Ve(m,o),[m,o]),x=st(m);return t.createElement(t.Fragment,null,g.map(e=>t.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},a))),v.map(e=>t.createElement("link",c({key:e,rel:"modulepreload",href:e},a))),x.map(e=>{let{key:n,link:i}=e;return t.createElement("link",c({key:n},i))}))}tt.displayName="FrameworkContext";var lt=!1;function ct(e){let{manifest:n,serverHandoffString:i,isSpaMode:a,renderMeta:s,routeDiscovery:o,ssr:l}=nt(),{router:d,static:h,staticContext:p}=$e(),{matches:f}=et(),m=Qe(o,l);s&&(s.didRenderScripts=!0);let g=rt(f,null,a);t.useEffect(()=>{0},[]);let v=t.useMemo(()=>{var a;let s=p?"window.__reactRouterContext = ".concat(i,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(g.map((e,t)=>{let i="route".concat(t),r=n.routes[e.route.id];Oe(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=r,u=[...a?[{module:a,varName:"".concat(i,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===u.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=r(e,u),a=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(s.pop();s.length>0;)o.push("/".concat(s.join("/"))),s.pop();o.forEach(e=>{let n=C(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let l=[...a].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return c(c({},i),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(s),type:void 0})),t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ye(o),type:"module",async:!0})))},[]),x=lt?[]:(n.entry.imports.concat(Ve(g,n,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let b="object"===typeof n.sri?n.sri:{};return lt?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,m?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:b[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:b[n.entry.module],suppressHydrationWarning:!0}),x.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:b[n],suppressHydrationWarning:!0})),v)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var dt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{dt&&(window.__reactRouterVersion="7.6.3")}catch(rN){}function ht(e){let{basename:n,children:i,window:r}=e,a=t.useRef();null==a.current&&(a.current=v({window:r,v5Compat:!0}));let s=a.current,[o,l]=t.useState({action:s.action,location:s.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>s.listen(c),[s,c]),t.createElement(Re,{basename:n,children:i,location:o.location,navigationType:o.action,navigator:s})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=t.forwardRef(function(e,n){let i,{onClick:a,discover:s="render",prefetch:o="none",relative:l,reloadDocument:u,replace:d,state:h,target:f,to:m,preventScrollReset:g,viewTransition:v}=e,b=r(e,p),{basename:_}=t.useContext(ae),S="string"===typeof m&&pt.test(m),M=!1;if("string"===typeof m&&S&&(i=m,dt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=H(t.pathname,_);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:M=!0}catch(rN){y(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let A=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(ce(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=t.useContext(ae),{hash:a,pathname:s,search:o}=fe(e,{relative:n}),l=s;return"/"!==i&&(l="/"===s?i:Y([i,s])),r.createHref({pathname:l,search:o,hash:a})}(m,{relative:l}),[C,E,k]=function(e,n){let i=t.useContext(tt),[r,a]=t.useState(!1),[s,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,p=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{a(!0)},m=()=>{a(!1),o(!1)};return i?"intent"!==e?[s,p,{}]:[s,p,{onFocus:it(l,f),onBlur:it(c,m),onMouseEnter:it(u,f),onMouseLeave:it(d,m),onTouchStart:it(h,f)}]:[!1,p,{}]}(o,b),T=function(e){let{target:n,replace:i,state:r,preventScrollReset:a,relative:s,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=pe(),c=ue(),u=fe(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:w(c)===w(u);l(e,{replace:n,state:r,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,i,r,n,e,a,s,o])}(m,{replace:d,state:h,target:f,preventScrollReset:g,relative:l,viewTransition:v});let R=t.createElement("a",c(c(c({},b),k),{},{href:i||A,onClick:M||u?a:function(e){a&&a(e),e.defaultPrevented||T(e)},ref:ut(n,E),target:f,"data-discover":S||"render"!==s?void 0:"true"}));return C&&!S?t.createElement(t.Fragment,null,R,t.createElement(at,{page:A})):R});ft.displayName="Link";var mt=t.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:a=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:d,children:h}=e,p=r(e,f),m=fe(u,{relative:p.relative}),g=ue(),v=t.useContext(te),{navigator:y,basename:b}=t.useContext(ae),_=null!=v&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.useContext(ne);x(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xt("useViewTransitionState"),a=fe(e,{relative:n.relative});if(!i.isTransitioning)return!1;let s=H(i.currentLocation.pathname,r)||i.currentLocation.pathname,o=H(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=F(a.pathname,o)||null!=F(a.pathname,s)}(m)&&!0===d,w=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,S=g.pathname,M=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(S=S.toLowerCase(),M=M?M.toLowerCase():null,w=w.toLowerCase()),M&&b&&(M=H(M,b)||M);const A="/"!==w&&w.endsWith("/")?w.length-1:w.length;let C,E=S===w||!o&&S.startsWith(w)&&"/"===S.charAt(A),k=null!=M&&(M===w||!o&&M.startsWith(w)&&"/"===M.charAt(w.length)),T={isActive:E,isPending:k,isTransitioning:_},R=E?i:void 0;C="function"===typeof s?s(T):[s,E?"active":null,k?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let L="function"===typeof l?l(T):l;return t.createElement(ft,c(c({},p),{},{"aria-current":R,className:C,ref:n,style:L,to:u,viewTransition:d}),"function"===typeof h?h(T):h)});mt.displayName="NavLink";var gt=t.forwardRef((e,n)=>{let{discover:i="render",fetcherKey:a,navigate:s,reloadDocument:o,replace:l,state:u,method:d=Be,action:h,onSubmit:p,relative:f,preventScrollReset:g,viewTransition:v}=e,y=r(e,m),b=_t(),_=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=t.useContext(ae),r=t.useContext(oe);x(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s=c({},fe(e||".",{relative:n})),o=ue();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(s.pathname="/"===s.pathname?i:Y([i,s.pathname]));return w(s)}(h,{relative:f}),S="get"===d.toLowerCase()?"get":"post",M="string"===typeof h&&pt.test(h);return t.createElement("form",c(c({ref:n,method:S,action:_,onSubmit:o?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:a,method:n,navigate:s,replace:l,state:u,relative:f,preventScrollReset:g,viewTransition:v})}},y),{},{"data-discover":M||"render"!==i?void 0:"true"}))});function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xt(e){let n=t.useContext(ee);return x(n,vt(e)),n}gt.displayName="Form";var yt=0,bt=()=>"__".concat(String(++yt),"__");function _t(){let{router:e}=xt("useSubmit"),{basename:n}=t.useContext(ae),i=Me("useRouteId");return t.useCallback(async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:s,encType:o,formData:l,body:c}=Fe(t,n);if(!1===r.navigate){let t=r.fetcherKey||bt();await e.fetch(t,i,r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||s,formEncType:r.encType||o,flushSync:r.flushSync})}else await e.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||s,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,n,i])}const wt=["onSuccess","onError","useOneTap","promptMomentNotification","type","theme","size","text","shape","logo_alignment","width","locale","click_listener","containerProps"];const St=(0,t.createContext)(null);function Mt(e){let{clientId:n,nonce:i,onScriptLoadSuccess:r,onScriptLoadError:a,children:s}=e;const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{nonce:n,onScriptLoadSuccess:i,onScriptLoadError:r}=e,[a,s]=(0,t.useState)(!1),o=(0,t.useRef)(i);o.current=i;const l=(0,t.useRef)(r);return l.current=r,(0,t.useEffect)(()=>{const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=n,e.onload=()=>{var e;s(!0),null===(e=o.current)||void 0===e||e.call(o)},e.onerror=()=>{var e;s(!1),null===(e=l.current)||void 0===e||e.call(l)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[n]),a}({nonce:i,onScriptLoadSuccess:r,onScriptLoadError:a}),l=(0,t.useMemo)(()=>({clientId:n,scriptLoadedSuccessfully:o}),[n,o]);return t.createElement(St.Provider,{value:l},s)}function At(){const e=(0,t.useContext)(St);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function Ct(e){var t;return null!==(t=null===e||void 0===e?void 0:e.clientId)&&void 0!==t?t:null===e||void 0===e?void 0:e.client_id}const Et={large:40,medium:32,small:20};function kt(e){let{onSuccess:n,onError:i,useOneTap:a,promptMomentNotification:s,type:o="standard",theme:l="outline",size:u="large",text:d,shape:h,logo_alignment:p,width:f,locale:m,click_listener:g,containerProps:v}=e,x=r(e,wt);const y=(0,t.useRef)(null),{clientId:b,scriptLoadedSuccessfully:_}=At(),w=(0,t.useRef)(n);w.current=n;const S=(0,t.useRef)(i);S.current=i;const M=(0,t.useRef)(s);return M.current=s,(0,t.useEffect)(()=>{var e,t,n,i,r,s,v,A,C;if(_)return null===(n=null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.initialize(c({client_id:b,callback:e=>{var t;if(!(null===e||void 0===e?void 0:e.credential))return null===(t=S.current)||void 0===t?void 0:t.call(S);const{credential:n,select_by:i}=e;w.current({credential:n,clientId:Ct(e),select_by:i})}},x)),null===(s=null===(r=null===(i=null===window||void 0===window?void 0:window.google)||void 0===i?void 0:i.accounts)||void 0===r?void 0:r.id)||void 0===s||s.renderButton(y.current,{type:o,theme:l,size:u,text:d,shape:h,logo_alignment:p,width:f,locale:m,click_listener:g}),a&&(null===(C=null===(A=null===(v=null===window||void 0===window?void 0:window.google)||void 0===v?void 0:v.accounts)||void 0===A?void 0:A.id)||void 0===C||C.prompt(M.current)),()=>{var e,t,n;a&&(null===(n=null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.cancel())}},[b,_,a,o,l,u,d,h,p,f,m]),t.createElement("div",c(c({},v),{},{ref:y,style:c({height:Et[u]},null===v||void 0===v?void 0:v.style)}))}const Tt=new class{constructor(){this.baseURL="http://localhost:8000",this.token=localStorage.getItem("access_token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(this.baseURL).concat(e),i=c({headers:c({"Content-Type":"application/json"},t.headers)},t);this.token&&(i.headers.Authorization="Bearer ".concat(this.token));try{const e=await fetch(n,i);if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.detail||"HTTP error! status: ".concat(e.status))}const t=e.headers.get("content-type");return t&&t.includes("application/json")?await e.json():await e.text()}catch(WE){throw console.error("API request failed:",WE),WE}}async get(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString(),n=t?"".concat(e,"?").concat(t):e;return this.request(n,{method:"GET"})}async post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(e,{method:"POST",body:JSON.stringify(t)})}async postFormData(e,t){return this.request(e,{method:"POST",headers:{},body:t})}async put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(e,{method:"DELETE",body:Object.keys(t).length>0?JSON.stringify(t):void 0})}setToken(e){this.token=e,e?localStorage.setItem("access_token",e):localStorage.removeItem("access_token")}clearToken(){this.token=null,localStorage.removeItem("access_token")}};const Rt=new class{constructor(){this.currentUser=null,this.isAuthenticated=!1}async login(e,t){try{const n=new FormData;n.append("username",e),n.append("password",t);const i=await Tt.postFormData("/auth/token",n);if(i.access_token){Tt.setToken(i.access_token),localStorage.setItem("access_token",i.access_token);const e=await this.getCurrentUser();return this.currentUser=e,this.isAuthenticated=!0,localStorage.setItem("currentUser",JSON.stringify(e)),{success:!0,user:e,token:i.access_token}}return{success:!1,error:"Invalid response from server"}}catch(WE){return console.error("Login failed:",WE),{success:!1,error:WE.message||"Login failed"}}}async register(e){try{return{success:!0,user:await Tt.post("/auth/register",{username:e.username,password:e.password,firstname:e.fullName.split(" ")[0]||e.fullName,lastname:e.fullName.split(" ").slice(1).join(" ")||"",email:e.email})}}catch(WE){return console.error("Registration failed:",WE),{success:!1,error:WE.message||"Registration failed"}}}async getCurrentUser(){try{const t=await Tt.get("/auth/me");if(console.log("\ud83d\udd0d getCurrentUser response:",t),t.avatar&&"string"===typeof t.avatar)try{t.avatar=JSON.parse(t.avatar),console.log("\u2705 Avatar JSON parsed successfully:",t.avatar)}catch(e){console.error("\u274c Avatar JSON parse error:",e),t.avatar=null}return t}catch(WE){throw console.error("Failed to get current user:",WE),this.logout(),WE}}async forgotPassword(e){try{return{success:!0,message:(await Tt.post("/auth/forgot-password",{email:e})).message}}catch(WE){return console.error("Forgot password failed:",WE),{success:!1,error:WE.message||"Failed to send reset email"}}}async resetPassword(e,t){try{return{success:!0,message:(await Tt.post("/auth/reset-password",{token:e,new_password:t})).message}}catch(WE){return console.error("Reset password failed:",WE),{success:!1,error:WE.message||"Failed to reset password"}}}async googleLogin(e){try{const t=await Tt.post("/auth/google-auth",{id_token:e});if(t.access_token){Tt.setToken(t.access_token),localStorage.setItem("access_token",t.access_token);const e=await this.getCurrentUser();return this.currentUser=e,this.isAuthenticated=!0,localStorage.setItem("currentUser",JSON.stringify(e)),{success:!0,user:e,token:t.access_token}}return{success:!1,error:"Invalid response from server"}}catch(WE){return console.error("Google login failed:",WE),{success:!1,error:WE.message||"Google login failed"}}}async updateProfile(e){try{const t=await Tt.put("/auth/update-profile",{username:e.username,firstname:e.firstname,lastname:e.lastname,email:e.email});return t.success?(this.currentUser=c(c({},this.currentUser),t.user),localStorage.setItem("currentUser",JSON.stringify(this.currentUser)),{success:!0,message:t.message,user:t.user}):{success:!1,error:t.message||"Profil g\xfcncellenemedi"}}catch(WE){return console.error("Profile update failed:",WE),{success:!1,error:WE.message||"Profil g\xfcncellenirken bir hata olu\u015ftu"}}}async updateAvatar(e){try{var t;console.log("\ud83c\udfa8 AVATAR UPDATE START: Updating avatar with config:",e),console.log("\ud83d\udc64 Current user before update:",null===(t=this.currentUser)||void 0===t?void 0:t.user_id);const a=await Tt.put("/auth/update-avatar",{avatar:e});if(console.log("\ud83d\udce5 Avatar update response:",a),a.success){console.log("\u2705 Avatar saved to backend successfully"),console.log("\ud83d\udd04 GETTING FRESH USER DATA after avatar update...");try{var n,i;const e=await this.getCurrentUser();console.log("\ud83c\udd95 Fresh user data received:",{user_id:e.user_id,username:e.username,avatar_exists:!!e.avatar,avatar_type:typeof e.avatar}),console.log("\ud83d\udcbe Updating memory state..."),this.currentUser=e,console.log("\u2705 Memory state updated"),console.log("\ud83d\uddc4\ufe0f Updating localStorage..."),localStorage.setItem("currentUser",JSON.stringify(e)),console.log("\u2705 LocalStorage updated"),console.log("\ud83d\udd0d POST-UPDATE VERIFICATION:");const t=null===(n=this.currentUser)||void 0===n?void 0:n.avatar,r=null===(i=JSON.parse(localStorage.getItem("currentUser")||"{}"))||void 0===i?void 0:i.avatar;return console.log("  - Memory avatar exists:",!!t),console.log("  - LocalStorage avatar exists:",!!r),console.log("  - Memory vs Storage match:",JSON.stringify(t)===JSON.stringify(r)),console.log("\ud83c\udf89 AVATAR UPDATE COMPLETED SUCCESSFULLY - State synchronized!"),{success:!0,message:a.message,user:e}}catch(r){console.error("\u274c FAILED to fetch fresh user data:",r),console.log("\ud83d\udd04 Using FALLBACK avatar update strategy...");const t=c(c({},this.currentUser),{},{avatar:e});return console.log("\ud83d\udcbe Fallback: Updating memory state..."),this.currentUser=t,console.log("\ud83d\uddc4\ufe0f Fallback: Updating localStorage..."),localStorage.setItem("currentUser",JSON.stringify(t)),console.log("\ud83d\udd04 FALLBACK avatar update completed"),{success:!0,message:a.message,user:t}}}return console.error("\u274c Backend avatar update failed:",a.message),{success:!1,error:a.message||"Avatar g\xfcncellenemedi"}}catch(WE){return console.error("\u274c AVATAR UPDATE ERROR:",WE),{success:!1,error:WE.message||"Avatar g\xfcncellenirken bir hata olu\u015ftu"}}}logout(){console.log("\ud83d\udeaa Logging out user"),this.currentUser=null,this.isAuthenticated=!1,Tt.clearToken(),localStorage.removeItem("currentUser"),localStorage.removeItem("access_token"),console.log("\u2705 Logout completed, storage cleared")}async checkAuth(){const e=localStorage.getItem("access_token"),t=localStorage.getItem("currentUser");if(console.log("\ud83d\udd0d AUTH CHECK START: Checking authentication on startup..."),console.log("\ud83d\udcc4 Token exists:",!!e),console.log("\ud83d\udc64 Saved user exists:",!!t),e&&t)try{var n,i;Tt.setToken(e),console.log("\ud83d\udd04 FETCHING FRESH USER DATA from backend...");const t=await this.getCurrentUser();console.log("\ud83c\udd95 Fresh user data received:",{user_id:t.user_id,username:t.username,avatar_exists:!!t.avatar,avatar_type:typeof t.avatar}),console.log("\ud83d\udcbe Updating memory state with fresh data..."),this.currentUser=t,this.isAuthenticated=!0,console.log("\ud83d\uddc4\ufe0f Updating localStorage with fresh data..."),localStorage.setItem("currentUser",JSON.stringify(t)),console.log("\ud83d\udd0d AUTH CHECK VERIFICATION:");const r=null===(n=this.currentUser)||void 0===n?void 0:n.avatar,a=null===(i=JSON.parse(localStorage.getItem("currentUser")||"{}"))||void 0===i?void 0:i.avatar;return console.log("  - Memory avatar exists:",!!r),console.log("  - Storage avatar exists:",!!a),console.log("  - Avatar data synchronized:",JSON.stringify(r)===JSON.stringify(a)),r&&a?console.log("\ud83c\udfa8 AVATAR DATA PRESERVED during auth check!"):r||a?console.warn("\u26a0\ufe0f Avatar synchronization issue during auth check"):console.log("\ud83d\udcdd No avatar data found (expected for new users)"),console.log("\u2705 AUTH CHECK SUCCESSFUL - Fresh data loaded and synchronized"),t}catch(WE){return console.error("\u274c AUTH CHECK FAILED:",WE),console.log("\ud83e\uddf9 Clearing corrupted auth state..."),this.logout(),null}return console.log("\u26a0\ufe0f AUTH CHECK: No valid authentication found"),null}getUser(){return this.currentUser}isLoggedIn(){return this.isAuthenticated}async getDeleteAccountInfo(){try{return{success:!0,data:await Tt.post("/auth/delete-account/verify")}}catch(WE){return console.error("Get delete account info failed:",WE),{success:!1,message:WE.message||"Bilgi al\u0131namad\u0131"}}}async requestDeleteCode(e){try{return{success:!0,data:await Tt.post("/auth/delete-account/request-code",{password:e})}}catch(WE){return console.error("Request delete code failed:",WE),{success:!1,message:WE.message||"Kod g\xf6nderilemedi"}}}async deleteAccount(e,t){try{return{success:!0,data:await Tt.delete("/auth/delete-account/verify-and-delete",{verification_code:e,confirm_delete:t})}}catch(WE){return console.error("Delete account failed:",WE),{success:!1,message:WE.message||"Hesap silinemedi"}}}};var Lt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pt=t.createContext&&t.createContext(Lt),Bt=["attr","size","title"];function Nt(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dt.apply(this,arguments)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach(function(t){zt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zt(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e){return e&&e.map((e,n)=>t.createElement(e.tag,jt({key:n},e.attr),Ft(e.child)))}function Ot(e){return n=>t.createElement(Ut,Dt({attr:jt({},e.attr)},n),Ft(e.child))}function Ut(e){var n=n=>{var i,{attr:r,size:a,title:s}=e,o=Nt(e,Bt),l=a||n.size||"1em";return n.className&&(i=n.className),e.className&&(i=(i?i+" ":"")+e.className),t.createElement("svg",Dt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:i,style:jt(jt({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&t.createElement("title",null,s),e.children)};return void 0!==Pt?t.createElement(Pt.Consumer,null,e=>n(e)):n(Lt)}function Ht(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Gt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Wt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function Vt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function Xt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function Yt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(e)}function Jt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Kt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function qt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function Zt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Qt(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function $t(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]}]})(e)}function en(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function tn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function nn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(e)}function rn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function an(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"},child:[]}]})(e)}function sn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(e)}function on(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function ln(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function cn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(e)}function un(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(e)}function dn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function hn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function pn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function fn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function mn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(e)}function gn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function vn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(e)}function xn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function yn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function bn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function _n(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(e)}function wn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"},child:[]}]})(e)}function Sn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function Mn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"},child:[]}]})(e)}function An(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Cn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function En(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(e)}function kn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(e)}function Tn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"6",cy:"6",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"},child:[]},{tag:"line",attr:{x1:"20",y1:"4",x2:"8.12",y2:"15.88"},child:[]},{tag:"line",attr:{x1:"14.47",y1:"14.48",x2:"20",y2:"20"},child:[]},{tag:"line",attr:{x1:"8.12",y1:"8.12",x2:"12",y2:"12"},child:[]}]})(e)}function Rn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function Ln(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function Pn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function Bn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function Nn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 3 21 3 21 8"},child:[]},{tag:"line",attr:{x1:"4",y1:"20",x2:"21",y2:"3"},child:[]},{tag:"polyline",attr:{points:"21 16 21 21 16 21"},child:[]},{tag:"line",attr:{x1:"15",y1:"15",x2:"21",y2:"21"},child:[]},{tag:"line",attr:{x1:"4",y1:"4",x2:"9",y2:"9"},child:[]}]})(e)}function Dn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function In(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"},child:[]}]})(e)}function jn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]}]})(e)}function zn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]}]})(e)}function Fn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function On(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Un(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(e)}function Hn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function Gn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Wn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(e)}function Vn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Xn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function Yn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Jn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(e)}function Kn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},child:[]},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"},child:[]}]})(e)}function qn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},child:[]},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"},child:[]},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"},child:[]}]})(e)}function Zn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]},{tag:"path",attr:{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"},child:[]},{tag:"path",attr:{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"},child:[]},{tag:"path",attr:{d:"M10.71 5.05A16 16 0 0 1 22.58 9"},child:[]},{tag:"path",attr:{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"},child:[]},{tag:"path",attr:{d:"M8.53 16.11a6 6 0 0 1 6.95 0"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12.01",y2:"20"},child:[]}]})(e)}function Qn(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12.55a11 11 0 0 1 14.08 0"},child:[]},{tag:"path",attr:{d:"M1.42 9a16 16 0 0 1 21.16 0"},child:[]},{tag:"path",attr:{d:"M8.53 16.11a6 6 0 0 1 6.95 0"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12.01",y2:"20"},child:[]}]})(e)}function $n(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}function ei(e){return Ot({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(e)}function ti(e){return Ot({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"},child:[]},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"},child:[]}]})(e)}var ni=n(414);const ii=e=>{let{onLogin:n,isDarkMode:i,toggleTheme:r}=e;const[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)({username:"",password:"",fullName:"",email:""}),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),[x,y]=(0,t.useState)(""),[b,_]=(0,t.useState)(""),w=(0,t.useRef)(null),S=e=>{l(c(c({},o),{},{[e.target.name]:e.target.value}))},M=()=>{s(!a),d(""),p(""),l({username:"",password:"",fullName:"",email:""})};return(0,ni.jsxs)("div",{className:"login-page",children:[(0,ni.jsx)("button",{className:"modern-theme-toggle",onClick:r,title:i?"Light Mode'a Ge\xe7":"Dark Mode'a Ge\xe7",children:(0,ni.jsx)("div",{className:"toggle-icon-container",children:i?(0,ni.jsx)(Fn,{className:"toggle-icon"}):(0,ni.jsx)(Sn,{className:"toggle-icon"})})}),(0,ni.jsxs)("div",{className:"login-container",children:[(0,ni.jsxs)("div",{className:"login-info",children:[(0,ni.jsxs)("div",{className:"login-logo",children:[(0,ni.jsx)("img",{src:"/logo-500x500.png",alt:"PostureGuard Logo",className:"login-logo-img"}),(0,ni.jsx)("h1",{children:"PostureGuard"}),(0,ni.jsx)("span",{className:"login-tagline",children:"AI Powered Posture Analysis"})]}),(0,ni.jsxs)("div",{className:"app-features",children:[(0,ni.jsx)("p",{children:"PostureGuard, yapay zeka destekli teknolojisiyle duru\u015f bozukluklar\u0131n\u0131 tespit eder ve ki\u015fiselle\u015ftirilmi\u015f \xf6neriler sunar."}),(0,ni.jsxs)("div",{className:"feature-grid",children:[(0,ni.jsxs)("div",{className:"feature-card",children:[(0,ni.jsx)("div",{className:"feature-number",children:"01"}),(0,ni.jsx)("h4",{children:"Bilgisayarl\u0131 G\xf6r\xfc Analizi"}),(0,ni.jsx)("p",{children:"S\u0131n\u0131rs\u0131z analiz yetenekleriyle g\xfcvenilir ve ge\xe7erli AI destekli duru\u015f de\u011ferlendirmeleri"})]}),(0,ni.jsxs)("div",{className:"feature-card",children:[(0,ni.jsx)("div",{className:"feature-number",children:"02"}),(0,ni.jsx)("h4",{children:"Ger\xe7ek Zamanl\u0131 \u0130zleme"}),(0,ni.jsx)("p",{children:"An\u0131nda duru\u015f geri bildirimi ve canl\u0131 analiz ile acil d\xfczeltme \xf6nerileri"})]}),(0,ni.jsxs)("div",{className:"feature-card",children:[(0,ni.jsx)("div",{className:"feature-number",children:"03"}),(0,ni.jsx)("h4",{children:"Profesyonel Raporlar"}),(0,ni.jsx)("p",{children:"Detayl\u0131 ilerleme takibi ve kapsaml\u0131 raporlama ile geli\u015fiminizi izleyin"})]}),(0,ni.jsxs)("div",{className:"feature-card",children:[(0,ni.jsx)("div",{className:"feature-number",children:"04"}),(0,ni.jsx)("h4",{children:"G\xfcvenli Platform"}),(0,ni.jsx)("p",{children:"Kurumsal d\xfczeyde g\xfcvenlik \xf6nlemleri ile veri korumas\u0131"})]})]})]})]}),(0,ni.jsx)("div",{className:"login-form-section",children:(0,ni.jsxs)("div",{className:"login-form-container",children:[(0,ni.jsxs)("div",{className:"form-toggle",children:[(0,ni.jsx)("button",{className:"toggle-btn ".concat(a?"":"active"),onClick:()=>!a||M(),children:"Giri\u015f Yap"}),(0,ni.jsx)("button",{className:"toggle-btn ".concat(a?"active":""),onClick:()=>a||M(),children:"Kay\u0131t Ol"})]}),(0,ni.jsx)("h2",{children:a?"Hesap Olu\u015ftur":"Giri\u015f Yap"}),(0,ni.jsx)("p",{children:a?"PostureGuard'a kat\u0131l\u0131n ve duru\u015f sa\u011fl\u0131\u011f\u0131n\u0131z\u0131 iyile\u015ftirin":"PostureGuard hesab\u0131n\u0131za giri\u015f yap\u0131n"}),(0,ni.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),p(""),a){if(!o.fullName||!o.email)return void d("L\xfctfen t\xfcm alanlar\u0131 doldurun!");try{const e=await Rt.register(o);e.success?(p("Hesap ba\u015far\u0131yla olu\u015fturuldu! Giri\u015f yapabilirsiniz."),s(!1),l({username:o.username,password:o.password,fullName:"",email:""})):d(e.error||"Kay\u0131t i\u015flemi ba\u015far\u0131s\u0131z!")}catch(u){d("Kay\u0131t i\u015flemi s\u0131ras\u0131nda bir hata olu\u015ftu!")}}else try{const e=await Rt.login(o.username,o.password);e.success?(n(e.user),window.location.href="/"):d(e.error||"Giri\u015f i\u015flemi ba\u015far\u0131s\u0131z!")}catch(u){d("Giri\u015f i\u015flemi s\u0131ras\u0131nda bir hata olu\u015ftu!")}},className:"login-form",children:a?(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsxs)("div",{className:"modern-form-group",children:[(0,ni.jsx)("label",{className:"modern-label",children:"Ad Soyad"}),(0,ni.jsxs)("div",{className:"modern-input-container",children:[(0,ni.jsx)(Xn,{className:"input-icon"}),(0,ni.jsx)("input",{type:"text",name:"fullName",value:o.fullName,onChange:S,required:!0,placeholder:"Ad ve soyad\u0131n\u0131z\u0131 girin",className:"modern-input"})]})]}),(0,ni.jsxs)("div",{className:"modern-form-group",children:[(0,ni.jsx)("label",{className:"modern-label",children:"E-posta"}),(0,ni.jsxs)("div",{className:"modern-input-container",children:[(0,ni.jsx)(xn,{className:"input-icon"}),(0,ni.jsx)("input",{type:"email",name:"email",value:o.email,onChange:S,required:!0,placeholder:"E-posta adresinizi girin",className:"modern-input"})]})]}),(0,ni.jsxs)("div",{className:"modern-form-group",children:[(0,ni.jsx)("label",{className:"modern-label",children:"Kullan\u0131c\u0131 Ad\u0131"}),(0,ni.jsxs)("div",{className:"modern-input-container",children:[(0,ni.jsx)(Xn,{className:"input-icon"}),(0,ni.jsx)("input",{type:"text",name:"username",value:o.username,onChange:S,required:!0,placeholder:"Kullan\u0131c\u0131 ad\u0131n\u0131z\u0131 girin",className:"modern-input"})]})]}),(0,ni.jsxs)("div",{className:"modern-form-group",children:[(0,ni.jsx)("label",{className:"modern-label",children:"\u015eifre"}),(0,ni.jsxs)("div",{className:"modern-input-container",children:[(0,ni.jsx)(gn,{className:"input-icon"}),(0,ni.jsx)("input",{type:"password",name:"password",value:o.password,onChange:S,required:!0,placeholder:"\u015eifrenizi girin",className:"modern-input"})]})]}),u&&(0,ni.jsx)("div",{className:"error-message",children:u}),h&&(0,ni.jsx)("div",{className:"success-message",children:h}),(0,ni.jsx)("button",{type:"submit",className:"login-btn",children:"Hesap Olu\u015ftur"})]}):f?null:(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsxs)("div",{className:"modern-form-group",children:[(0,ni.jsx)("label",{className:"modern-label",children:"Kullan\u0131c\u0131 Ad\u0131"}),(0,ni.jsxs)("div",{className:"modern-input-container",style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,ni.jsx)(Xn,{className:"input-icon",style:{position:"absolute",left:"1.2rem",top:"50%",transform:"translateY(-50%)",fontSize:"1.1rem",color:"var(--text-muted)",zIndex:2,pointerEvents:"none"}}),(0,ni.jsx)("input",{type:"text",name:"username",value:o.username,onChange:S,required:!0,placeholder:"Kullan\u0131c\u0131 ad\u0131n\u0131z\u0131 girin",className:"modern-input",style:{width:"100%",padding:"1rem 1rem 1rem 3.5rem",border:"2px solid var(--border-primary)",borderRadius:"12px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"1rem",boxSizing:"border-box"}})]})]}),(0,ni.jsxs)("div",{className:"modern-form-group",children:[(0,ni.jsx)("label",{className:"modern-label",children:"\u015eifre"}),(0,ni.jsxs)("div",{className:"modern-input-container",style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,ni.jsx)(gn,{className:"input-icon",style:{position:"absolute",left:"1.2rem",top:"50%",transform:"translateY(-50%)",fontSize:"1.1rem",color:"var(--text-muted)",zIndex:2,pointerEvents:"none"}}),(0,ni.jsx)("input",{type:"password",name:"password",value:o.password,onChange:S,required:!0,placeholder:"\u015eifrenizi girin",className:"modern-input",style:{width:"100%",padding:"1rem 1rem 1rem 3.5rem",border:"2px solid var(--border-primary)",borderRadius:"12px",background:"var(--card-bg)",color:"var(--text-primary)",fontSize:"1rem",boxSizing:"border-box"}})]})]}),u&&(0,ni.jsx)("div",{className:"error-message",children:u}),h&&(0,ni.jsx)("div",{className:"success-message",children:h}),(0,ni.jsx)("button",{type:"submit",className:"login-btn",children:"Giri\u015f Yap"}),(0,ni.jsxs)("div",{className:"oauth-section",children:[(0,ni.jsx)("div",{className:"divider",children:(0,ni.jsx)("span",{className:"divider-text",children:"veya"})}),(0,ni.jsxs)("div",{className:"custom-google-btn-container",children:[(0,ni.jsxs)("button",{type:"button",className:"custom-google-btn",onClick:()=>{if(w.current){const e=w.current.querySelector('div[role="button"]');e&&e.click()}},children:[(0,ni.jsxs)("div",{className:"google-btn-content",children:[(0,ni.jsx)(ti,{className:"google-icon"}),(0,ni.jsx)("span",{className:"google-text",children:"Google ile Devam Et"})]}),(0,ni.jsx)("div",{className:"google-btn-shine"})]}),(0,ni.jsx)("div",{ref:w,style:{position:"absolute",opacity:0,pointerEvents:"none",width:"1px",height:"1px",overflow:"hidden"},children:(0,ni.jsx)(kt,{onSuccess:async e=>{try{const t=await Rt.googleLogin(e.credential);t.success?(n(t.user),window.location.href="/"):d(t.error||"Google ile giri\u015f ba\u015far\u0131s\u0131z!")}catch(u){d("Google ile giri\u015f s\u0131ras\u0131nda bir hata olu\u015ftu!")}},onError:()=>{d("Google ile giri\u015f ba\u015far\u0131s\u0131z oldu. L\xfctfen tekrar deneyin.")},useOneTap:!1,theme:"outline",size:"large",text:"continue_with",shape:"rectangular",locale:"tr"})})]})]}),(0,ni.jsx)("div",{style:{marginTop:"1rem",textAlign:"right"},children:(0,ni.jsx)("button",{type:"button",className:"forgot-link",style:{background:"none",border:"none",color:"#0ea5e9",cursor:"pointer",padding:0},onClick:()=>m(!f),children:"\u015eifremi Unuttum?"})})]})}),f&&!a&&(0,ni.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y(""),_(""),!g)return void _("L\xfctfen e-posta adresinizi girin.");const t=await Rt.forgotPassword(g);t.success?(y(t.message),_("")):(_(t.error||"Bir hata olu\u015ftu."),y(""))},className:"forgot-form",style:{marginTop:"1rem",background:"#f1f5f9",padding:"1rem",borderRadius:"8px"},children:[(0,ni.jsx)("label",{htmlFor:"forgotEmail",children:"\u015eifre s\u0131f\u0131rlama i\xe7in e-posta adresiniz:"}),(0,ni.jsx)("input",{type:"email",id:"forgotEmail",name:"forgotEmail",value:g,onChange:e=>v(e.target.value),required:!0,placeholder:"E-posta adresinizi girin",style:{margin:"0.5rem 0",padding:"0.5rem",borderRadius:"4px",border:"1px solid #cbd5e1",width:"100%"}}),(0,ni.jsx)("button",{type:"submit",className:"login-btn",style:{marginTop:"0.5rem"},children:"S\u0131f\u0131rlama Linki G\xf6nder"}),x&&(0,ni.jsx)("div",{className:"success-message",children:x}),b&&(0,ni.jsx)("div",{className:"error-message",children:b}),(0,ni.jsx)("div",{style:{marginTop:"0.5rem",textAlign:"right"},children:(0,ni.jsx)("button",{type:"button",style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:0},onClick:()=>m(!1),children:"Geri D\xf6n"})})]})]})})]})]})};const ri=new class{async analyzePosture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FULL_BODY";try{const n=new FormData;n.append("file",e),n.append("analysis_type",t);return{success:!0,data:await Tt.postFormData("/posture_analyzer/analyze_posture_enhanced",n)}}catch(WE){return console.error("Posture analysis failed:",WE),{success:!1,error:WE.message||"Posture analysis failed"}}}async calibratePosture(e){try{const t=new FormData;t.append("file",e);return{success:!0,data:await Tt.postFormData("/posture_analyzer/calibrate",t)}}catch(WE){return console.error("Posture calibration failed:",WE),{success:!1,error:WE.message||"Posture calibration failed"}}}async getUserProgress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;try{return{success:!0,data:await Tt.get("/posture_analyzer/user_progress?days=".concat(e))}}catch(WE){return console.error("Failed to get user progress:",WE),{success:!1,error:WE.message||"Failed to get user progress"}}}async getPostureInsights(){try{return{success:!0,data:await Tt.get("/posture_analyzer/posture_insights")}}catch(WE){return console.error("Failed to get posture insights:",WE),{success:!1,error:WE.message||"Failed to get posture insights"}}}async setPersonalGoals(e){try{return{success:!0,data:await Tt.post("/posture_analyzer/set_personal_goals",e)}}catch(WE){return console.error("Failed to set personal goals:",WE),{success:!1,error:WE.message||"Failed to set personal goals"}}}async getLivePostureStream(){try{return{success:!0,streamUrl:"/posture_analyzer/live-stream"}}catch(WE){return console.error("Live posture stream failed:",WE),{success:!1,error:WE.message||"Live posture stream failed"}}}async getPostureHistory(){try{return{success:!0,data:await Tt.get("/posture_analyzer/posture_trends")}}catch(WE){return console.error("Failed to get posture history:",WE),{success:!1,error:WE.message||"Failed to get posture history"}}}async healthCheck(){try{return{success:!0,data:await Tt.get("/posture_analyzer/health_check")}}catch(WE){return console.error("Health check failed:",WE),{success:!1,error:WE.message||"Health check failed"}}}};function ai(e){return e+.5|0}const si=(e,t,n)=>Math.max(Math.min(e,n),t);function oi(e){return si(ai(2.55*e),0,255)}function li(e){return si(ai(255*e),0,255)}function ci(e){return si(ai(e/2.55)/100,0,1)}function ui(e){return si(ai(100*e),0,100)}const di={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hi=[..."0123456789ABCDEF"],pi=e=>hi[15&e],fi=e=>hi[(240&e)>>4]+hi[15&e],mi=e=>(240&e)>>4===(15&e);function gi(e){var t=(e=>mi(e.r)&&mi(e.g)&&mi(e.b)&&mi(e.a))(e)?pi:fi;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const vi=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xi(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function yi(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function bi(e,t,n){const i=xi(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function _i(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),a=Math.min(t,n,i),s=(r+a)/2;let o,l,c;return r!==a&&(c=r-a,l=s>.5?c/(2-r-a):c/(r+a),o=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),o=60*o+.5),[0|o,l||0,s]}function wi(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(li)}function Si(e,t,n){return wi(xi,e,t,n)}function Mi(e){return(e%360+360)%360}function Ai(e){const t=vi.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?oi(+t[5]):li(+t[5]));const r=Mi(+t[2]),a=+t[3]/100,s=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return wi(bi,e,t,n)}(r,a,s):"hsv"===t[1]?function(e,t,n){return wi(yi,e,t,n)}(r,a,s):Si(r,a,s),{r:n[0],g:n[1],b:n[2],a:i}}const Ci={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ei={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ki;function Ti(e){ki||(ki=function(){const e={},t=Object.keys(Ei),n=Object.keys(Ci);let i,r,a,s,o;for(i=0;i<t.length;i++){for(s=o=t[i],r=0;r<n.length;r++)a=n[r],o=o.replace(a,Ci[a]);a=parseInt(Ei[s],16),e[o]=[a>>16&255,a>>8&255,255&a]}return e}(),ki.transparent=[0,0,0,0]);const t=ki[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Ri=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Li=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Pi=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Bi(e,t,n){if(e){let i=_i(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Si(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Ni(e,t){return e?Object.assign(t||{},e):e}function Di(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=li(e[3]))):(t=Ni(e,{r:0,g:0,b:0,a:1})).a=li(t.a),t}function Ii(e){return"r"===e.charAt(0)?function(e){const t=Ri.exec(e);let n,i,r,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?oi(e):si(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?oi(n):si(n,0,255)),i=255&(t[4]?oi(i):si(i,0,255)),r=255&(t[6]?oi(r):si(r,0,255)),{r:n,g:i,b:r,a:a}}}(e):Ai(e)}class ji{constructor(e){if(e instanceof ji)return e;const t=typeof e;let n;"object"===t?n=Di(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*di[e[1]],g:255&17*di[e[2]],b:255&17*di[e[3]],a:5===n?17*di[e[4]]:255}:7!==n&&9!==n||(t={r:di[e[1]]<<4|di[e[2]],g:di[e[3]]<<4|di[e[4]],b:di[e[5]]<<4|di[e[6]],a:9===n?di[e[7]]<<4|di[e[8]]:255})),t}(e)||Ti(e)||Ii(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ni(this._rgb);return e&&(e.a=ci(e.a)),e}set rgb(e){this._rgb=Di(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(ci(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?gi(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=_i(e),n=t[0],i=ui(t[1]),r=ui(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(ci(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const a=t===r?.5:t,s=2*a-1,o=n.a-i.a,l=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=a*n.a+(1-a)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Pi(ci(e.r)),r=Pi(ci(e.g)),a=Pi(ci(e.b));return{r:li(Li(i+n*(Pi(ci(t.r))-i))),g:li(Li(r+n*(Pi(ci(t.g))-r))),b:li(Li(a+n*(Pi(ci(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new ji(this.rgb)}alpha(e){return this._rgb.a=li(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=ai(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Bi(this._rgb,2,e),this}darken(e){return Bi(this._rgb,2,-e),this}saturate(e){return Bi(this._rgb,1,e),this}desaturate(e){return Bi(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=_i(e);n[0]=Mi(n[0]+t),n=Si(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function zi(){}const Fi=(()=>{let e=0;return()=>e++})();function Oi(e){return null===e||void 0===e}function Ui(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Hi(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Gi(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Wi(e,t){return Gi(e)?e:t}function Vi(e,t){return"undefined"===typeof e?t:e}const Xi=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Yi(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Ji(e,t,n,i){let r,a,s;if(Ui(e))if(a=e.length,i)for(r=a-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<a;r++)t.call(n,e[r],r);else if(Hi(e))for(s=Object.keys(e),a=s.length,r=0;r<a;r++)t.call(n,e[s[r]],s[r])}function Ki(e,t){let n,i,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],a=t[n],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function qi(e){if(Ui(e))return e.map(qi);if(Hi(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=qi(e[n[r]]);return t}return e}function Zi(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Qi(e,t,n,i){if(!Zi(e))return;const r=t[e],a=n[e];Hi(r)&&Hi(a)?$i(r,a,i):t[e]=qi(a)}function $i(e,t,n){const i=Ui(t)?t:[t],r=i.length;if(!Hi(e))return e;const a=(n=n||{}).merger||Qi;let s;for(let o=0;o<r;++o){if(s=i[o],!Hi(s))continue;const t=Object.keys(s);for(let i=0,r=t.length;i<r;++i)a(t[i],e,s,n)}return e}function er(e,t){return $i(e,t,{merger:tr})}function tr(e,t,n){if(!Zi(e))return;const i=t[e],r=n[e];Hi(i)&&Hi(r)?er(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=qi(r))}const nr={"":e=>e,x:e=>e.x,y:e=>e.y};function ir(e,t){const n=nr[t]||(nr[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function rr(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ar=e=>"undefined"!==typeof e,sr=e=>"function"===typeof e,or=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const lr=Math.PI,cr=2*lr,ur=cr+lr,dr=Number.POSITIVE_INFINITY,hr=lr/180,pr=lr/2,fr=lr/4,mr=2*lr/3,gr=Math.log10,vr=Math.sign;function xr(e,t,n){return Math.abs(e-t)<n}function yr(e){const t=Math.round(e);e=xr(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(gr(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function br(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function _r(e,t,n){let i,r,a;for(i=0,r=e.length;i<r;i++)a=e[i][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function wr(e){return e*(lr/180)}function Sr(e){return e*(180/lr)}function Mr(e){if(!Gi(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Ar(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let a=Math.atan2(i,n);return a<-.5*lr&&(a+=cr),{angle:a,distance:r}}function Cr(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Er(e,t){return(e-t+ur)%cr-lr}function kr(e){return(e%cr+cr)%cr}function Tr(e,t,n,i){const r=kr(e),a=kr(t),s=kr(n),o=kr(a-r),l=kr(s-r),c=kr(r-a),u=kr(r-s);return r===a||r===s||i&&a===s||o>l&&c<u}function Rr(e,t,n){return Math.max(t,Math.min(n,e))}function Lr(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Pr(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,a=0;for(;r-a>1;)i=a+r>>1,n(i)?a=i:r=i;return{lo:a,hi:r}}const Br=(e,t,n,i)=>Pr(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),Nr=(e,t,n)=>Pr(e,n,i=>e[i][t]>=n);const Dr=["push","pop","shift","splice","unshift"];function Ir(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(Dr.forEach(t=>{delete e[t]}),delete e._chartjs)}function jr(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const zr="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Fr(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];n=a,i||(i=!0,zr.call(window,()=>{i=!1,e.apply(t,n)}))}}const Or=e=>"start"===e?"left":"end"===e?"right":"center",Ur=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Hr(e,t,n){const i=t.length;let r=0,a=i;if(e._sorted){const{iScale:s,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=s.axis,{min:d,max:h,minDefined:p,maxDefined:f}=s.getUserBounds();if(p){if(r=Math.min(Br(l,u,d).lo,n?i:Br(t,u,s.getPixelForValue(d)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!Oi(e[o.axis]));r-=Math.max(0,e)}r=Rr(r,0,i-1)}if(f){let e=Math.max(Br(l,s.axis,h,!0).hi+1,n?0:Br(t,u,s.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!Oi(e[o.axis]));e+=Math.max(0,t)}a=Rr(e,r,i)-r}else a=i-r}return{start:r,count:a}}function Gr(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),a}const Wr=e=>0===e||1===e,Vr=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*cr/n),Xr=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*cr/n)+1,Yr={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*pr),easeOutSine:e=>Math.sin(e*pr),easeInOutSine:e=>-.5*(Math.cos(lr*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Wr(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Wr(e)?e:Vr(e,.075,.3),easeOutElastic:e=>Wr(e)?e:Xr(e,.075,.3),easeInOutElastic(e){const t=.1125;return Wr(e)?e:e<.5?.5*Vr(2*e,t,.45):.5+.5*Xr(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Yr.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Yr.easeInBounce(2*e):.5*Yr.easeOutBounce(2*e-1)+.5};function Jr(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Kr(e){return Jr(e)?e:new ji(e)}function qr(e){return Jr(e)?e:new ji(e).saturate(.5).darken(.1).hexString()}const Zr=["x","y","borderWidth","radius","tension"],Qr=["color","borderColor","backgroundColor"];const $r=new Map;function ea(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=$r.get(n);return i||(i=new Intl.NumberFormat(e,t),$r.set(n,i)),i}(t,n).format(e)}const ta={values:e=>Ui(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const s=gr(Math.abs(a)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),ea(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(gr(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?ta.numeric.call(this,e,t,n):""}};var na={formatters:ta};const ia=Object.create(null),ra=Object.create(null);function aa(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function sa(e,t,n){return"string"===typeof t?$i(aa(e,t),n):$i(aa(e,""),t)}class oa{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>qr(t.backgroundColor),this.hoverBorderColor=(e,t)=>qr(t.borderColor),this.hoverColor=(e,t)=>qr(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return sa(this,e,t)}get(e){return aa(this,e)}describe(e,t){return sa(ra,e,t)}override(e,t){return sa(ia,e,t)}route(e,t,n,i){const r=aa(this,e),a=aa(this,n),s="_"+t;Object.defineProperties(r,{[s]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=a[i];return Hi(e)?Object.assign({},t,e):Vi(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach(e=>e(this))}}var la=new oa({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Qr},numbers:{type:"number",properties:Zr}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:na.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ca(e,t,n,i,r){let a=t[r];return a||(a=t[r]=e.measureText(r).width,n.push(r)),a>i&&(i=a),i}function ua(e,t,n,i){let r=(i=i||{}).data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},a=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let s=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0===d||null===d||Ui(d)){if(Ui(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||Ui(h)||(s=ca(e,r,a,s,h))}else s=ca(e,r,a,s,d);e.restore();const p=a.length/2;if(p>n.length){for(l=0;l<p;l++)delete r[a[l]];a.splice(0,p)}return s}function da(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function ha(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function pa(e,t,n,i){fa(e,t,n,i,null)}function fa(e,t,n,i,r){let a,s,o,l,c,u,d,h;const p=t.pointStyle,f=t.rotation,m=t.radius;let g=(f||0)*hr;if(p&&"object"===typeof p&&(a=p.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:r?e.ellipse(n,i,r/2,m,0,0,cr):e.arc(n,i,m,0,cr),e.closePath();break;case"triangle":u=r?r/2:m,e.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=mr,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=mr,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,s=Math.cos(g+fr)*l,d=Math.cos(g+fr)*(r?r/2-c:l),o=Math.sin(g+fr)*l,h=Math.sin(g+fr)*(r?r/2-c:l),e.arc(n-d,i-o,c,g-lr,g-pr),e.arc(n+h,i-s,c,g-pr,g),e.arc(n+d,i+o,c,g,g+pr),e.arc(n-h,i+s,c,g+pr,g+lr),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*m,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}g+=fr;case"rectRot":d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+h,i-s),e.lineTo(n+d,i+o),e.lineTo(n-h,i+s),e.closePath();break;case"crossRot":g+=fr;case"cross":d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-s),e.lineTo(n-h,i+s);break;case"star":d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-s),e.lineTo(n-h,i+s),g+=fr,d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-s),e.lineTo(n-h,i+s);break;case"line":s=r?r/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(n-s,i-o),e.lineTo(n+s,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function ma(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function ga(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function va(e){e.restore()}function xa(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function ya(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function ba(e,t,n,i,r){if(r.strikethrough||r.underline){const a=e.measureText(i),s=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,c=n+a.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(s,u),e.lineTo(o,u),e.stroke()}}function _a(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function wa(e,t,n,i,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=Ui(t)?t:[t],o=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Oi(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<s.length;++l)c=s[l],a.backdrop&&_a(e,a.backdrop),o&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),Oi(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,n,i,a.maxWidth)),e.fillText(c,n,i,a.maxWidth),ba(e,n,i,c,a),i+=Number(r.lineHeight);e.restore()}function Sa(e,t){const{x:n,y:i,w:r,h:a,radius:s}=t;e.arc(n+s.topLeft,i+s.topLeft,s.topLeft,1.5*lr,lr,!0),e.lineTo(n,i+a-s.bottomLeft),e.arc(n+s.bottomLeft,i+a-s.bottomLeft,s.bottomLeft,lr,pr,!0),e.lineTo(n+r-s.bottomRight,i+a),e.arc(n+r-s.bottomRight,i+a-s.bottomRight,s.bottomRight,pr,0,!0),e.lineTo(n+r,i+s.topRight),e.arc(n+r-s.topRight,i+s.topRight,s.topRight,0,-pr,!0),e.lineTo(n+s.topLeft,i)}const Ma=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Aa=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ca(e,t){const n=(""+e).match(Ma);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Ea=e=>+e||0;function ka(e,t){const n={},i=Hi(t),r=i?Object.keys(t):t,a=Hi(e)?i?n=>Vi(e[n],e[t[n]]):t=>e[t]:()=>e;for(const s of r)n[s]=Ea(a(s));return n}function Ta(e){return ka(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ra(e){return ka(e,["topLeft","topRight","bottomLeft","bottomRight"])}function La(e){const t=Ta(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Pa(e,t){e=e||{},t=t||la.font;let n=Vi(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Vi(e.style,t.style);i&&!(""+i).match(Aa)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Vi(e.family,t.family),lineHeight:Ca(Vi(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Vi(e.weight,t.weight),string:""};return r.string=function(e){return!e||Oi(e.size)||Oi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Ba(e,t,n,i){let r,a,s,o=!0;for(r=0,a=e.length;r<a;++r)if(s=e[r],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),o=!1),void 0!==n&&Ui(s)&&(s=s[n%s.length],o=!1),void 0!==s))return i&&!o&&(i.cacheable=!1),s}function Na(e,t){return Object.assign(Object.create(e),t)}function Da(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Xa("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>Da([i,...e],t,r,n)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>Oa(n,i,()=>function(e,t,n,i){let r;for(const a of t)if(r=Xa(za(a,e),n),"undefined"!==typeof r)return Fa(e,r)?Wa(n,i,e,r):r}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Ya(e).includes(t),ownKeys:e=>Ya(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Ia(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:ja(e,i),setContext:t=>Ia(e,t,n,i),override:r=>Ia(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Oa(e,t,()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:a,_descriptors:s}=e;let o=i[t];sr(o)&&s.isScriptable(t)&&(o=function(e,t,n,i){const{_proxy:r,_context:a,_subProxy:s,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(a,s||i);o.delete(e),Fa(e,l)&&(l=Wa(r._scopes,r,e,l));return l}(t,o,e,n));Ui(o)&&o.length&&(o=function(e,t,n,i){const{_proxy:r,_context:a,_subProxy:s,_descriptors:o}=n;if("undefined"!==typeof a.index&&i(e))return t[a.index%t.length];if(Hi(t[0])){const n=t,i=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=Wa(i,r,e,l);t.push(Ia(n,a,s&&s[e],o))}}return t}(t,o,e,s.isIndexable));Fa(t,o)&&(o=Ia(o,r,a&&a[t],s));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function ja(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:sr(n)?n:()=>n,isIndexable:sr(i)?i:()=>i}}const za=(e,t)=>e?e+rr(t):t,Fa=(e,t)=>Hi(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Oa(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function Ua(e,t,n){return sr(e)?e(t,n):e}const Ha=(e,t)=>!0===e?t:"string"===typeof e?ir(t,e):void 0;function Ga(e,t,n,i,r){for(const a of t){const t=Ha(n,a);if(t){e.add(t);const a=Ua(t._fallback,n,r);if("undefined"!==typeof a&&a!==n&&a!==i)return a}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Wa(e,t,n,i){const r=t._rootScopes,a=Ua(t._fallback,n,i),s=[...e,...r],o=new Set;o.add(i);let l=Va(o,s,n,a||n,i);return null!==l&&(("undefined"===typeof a||a===n||(l=Va(o,s,a,l,i),null!==l))&&Da(Array.from(o),[""],r,a,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Ui(r)&&Hi(n))return n;return r||{}}(t,n,i)))}function Va(e,t,n,i,r){for(;n;)n=Ga(e,t,n,i,r);return n}function Xa(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Ya(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Ja(e,t,n,i){const{iScale:r}=e,{key:a="r"}=this._parsing,s=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],s[o]={r:r.parse(ir(u,a),c)};return s}const Ka=Number.EPSILON||1e-14,qa=(e,t)=>t<e.length&&!e[t].skip&&e[t],Za=e=>"x"===e?"y":"x";function Qa(e,t,n,i){const r=e.skip?t:e,a=t,s=n.skip?t:n,o=Cr(a,r),l=Cr(s,a);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:a.x-d*(s.x-r.x),y:a.y-d*(s.y-r.y)},next:{x:a.x+h*(s.x-r.x),y:a.y+h*(s.y-r.y)}}}function $a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Za(t),i=e.length,r=Array(i).fill(0),a=Array(i);let s,o,l,c=qa(e,0);for(s=0;s<i;++s)if(o=l,l=c,c=qa(e,s+1),l){if(c){const e=c[t]-l[t];r[s]=0!==e?(c[n]-l[n])/e:0}a[s]=o?c?vr(r[s-1])!==vr(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}!function(e,t,n){const i=e.length;let r,a,s,o,l,c=qa(e,0);for(let u=0;u<i-1;++u)l=c,c=qa(e,u+1),l&&c&&(xr(t[u],0,Ka)?n[u]=n[u+1]=0:(r=n[u]/t[u],a=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(a,2),o<=9||(s=3/Math.sqrt(o),n[u]=r*s*t[u],n[u+1]=a*s*t[u])))}(e,r,a),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Za(n),r=e.length;let a,s,o,l=qa(e,0);for(let c=0;c<r;++c){if(s=o,o=l,l=qa(e,c+1),!o)continue;const r=o[n],u=o[i];s&&(a=(r-s[n])/3,o["cp1".concat(n)]=r-a,o["cp1".concat(i)]=u-a*t[c]),l&&(a=(l[n]-r)/3,o["cp2".concat(n)]=r+a,o["cp2".concat(i)]=u+a*t[c])}}(e,a,t)}function es(e,t,n){return Math.max(Math.min(e,n),t)}function ts(e,t,n,i,r){let a,s,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)$a(e,r);else{let n=i?e[e.length-1]:e[0];for(a=0,s=e.length;a<s;++a)o=e[a],l=Qa(n,o,e[Math.min(a+1,s-(i?0:1))%s],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,i,r,a,s,o=ma(e[0],t);for(n=0,i=e.length;n<i;++n)s=a,a=o,o=n<i-1&&ma(e[n+1],t),a&&(r=e[n],s&&(r.cp1x=es(r.cp1x,t.left,t.right),r.cp1y=es(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=es(r.cp2x,t.left,t.right),r.cp2y=es(r.cp2y,t.top,t.bottom)))}(e,n)}function ns(){return"undefined"!==typeof window&&"undefined"!==typeof document}function is(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function rs(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const as=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const ss=["top","right","bottom","left"];function os(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const a=ss[r];i[a]=parseFloat(e[t+"-"+a+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function ls(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=as(n),a="border-box"===r.boxSizing,s=os(r,"padding"),o=os(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:a}=i;let s,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,a,e.target))s=r,o=a;else{const e=t.getBoundingClientRect();s=i.clientX-e.left,o=i.clientY-e.top,l=!0}return{x:s,y:o,box:l}}(e,n),d=s.left+(u&&o.left),h=s.top+(u&&o.top);let{width:p,height:f}=t;return a&&(p-=s.width+o.width,f-=s.height+o.height),{x:Math.round((l-d)/p*n.width/i),y:Math.round((c-h)/f*n.height/i)}}const cs=e=>Math.round(10*e)/10;function us(e,t,n,i){const r=as(e),a=os(r,"margin"),s=rs(r.maxWidth,e,"clientWidth")||dr,o=rs(r.maxHeight,e,"clientHeight")||dr,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const a=e&&is(e);if(a){const e=a.getBoundingClientRect(),s=as(a),o=os(s,"border","width"),l=os(s,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,i=rs(s.maxWidth,a,"clientWidth"),r=rs(s.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||dr,maxHeight:r||dr}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=os(r,"border","width"),t=os(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-a.width),u=Math.max(0,i?c/i:u-a.height),c=cs(Math.min(c,s,l.maxWidth)),u=cs(Math.min(u,o,l.maxHeight)),c&&!u&&(u=cs(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=cs(Math.floor(u*i))),{width:c,height:u}}function ds(e,t,n){const i=t||1,r=Math.floor(e.height*i),a=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height="".concat(e.height,"px"),s.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||s.height!==r||s.width!==a)&&(e.currentDevicePixelRatio=i,s.height=r,s.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0)}const hs=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};ns()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(rN){}return e}();function ps(e,t){const n=function(e,t){return as(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fs(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function ms(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function gs(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},s=fs(e,r,n),o=fs(r,a,n),l=fs(a,t,n),c=fs(s,o,n),u=fs(o,l,n);return fs(c,u,n)}function vs(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function xs(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function ys(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function bs(e){return"angle"===e?{between:Tr,compare:Er,normalize:kr}:{between:Lr,compare:(e,t)=>e-t,normalize:e=>e}}function _s(e){let{start:t,end:n,count:i,loop:r,style:a}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:a}}function ws(e,t,n){if(!n)return[e];const{property:i,start:r,end:a}=n,s=t.length,{compare:o,between:l,normalize:c}=bs(i),{start:u,end:d,loop:h,style:p}=function(e,t,n){const{property:i,start:r,end:a}=n,{between:s,normalize:o}=bs(i),l=t.length;let c,u,{start:d,end:h,loop:p}=e;if(p){for(d+=l,h+=l,c=0,u=l;c<u&&s(o(t[d%l][i]),r,a);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:p,style:e.style}}(e,t,n),f=[];let m,g,v,x=!1,y=null;const b=()=>x||l(r,v,m)&&0!==o(r,v),_=()=>!x||0===o(a,m)||l(a,v,m);for(let w=u,S=u;w<=d;++w)g=t[w%s],g.skip||(m=c(g[i]),m!==v&&(x=l(m,r,a),null===y&&b()&&(y=0===o(m,r)?w:S),null!==y&&_()&&(f.push(_s({start:y,end:w,loop:h,count:s,style:p})),y=null),S=w,v=m));return null!==y&&f.push(_s({start:y,end:d,loop:h,count:s,style:p})),f}function Ss(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const a=ws(i[r],e.points,t);a.length&&n.push(...a)}return n}function Ms(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),a=As(e.options),{_datasetIndex:s,options:{spanGaps:o}}=e,l=n.length,c=[];let u=a,d=t[0].start,h=d;function p(e,t,i,r){const a=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,d=t%l)}}for(const f of t){d=o?d:f.start;let e,t=n[d%l];for(h=d+1;h<=f.end;h++){const a=n[h%l];e=As(i.setContext(Na(r,{type:"segment",p0:t,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),Cs(e,u)&&p(d,h-1,f.loop,u),t=a,u=e}d<h-1&&p(d,h-1,f.loop,u)}return c}(e,t,n,i):t}function As(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Cs(e,t){if(!t)return!1;const n=[],i=function(e,t){return Jr(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Es(e,t,n){return e.options.clip?e[n]:t[n]}function ks(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Es(n,t,"left"),right:Es(n,t,"right"),top:Es(i,t,"top"),bottom:Es(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class Ts{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],a=t.duration;r.forEach(i=>i({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=zr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let a,s=r.length-1,o=!1;for(;s>=0;--s)a=r[s],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),o=!0):(r[s]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Rs=new Ts;const Ls="transparent",Ps={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=Kr(e||Ls),r=i.valid&&Kr(t||Ls);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Bs{constructor(e,t,n,i){const r=t[n];i=Ba([e.to,i,r,e.from]);const a=Ba([e.from,r,i]);this._active=!0,this._fn=e.fn||Ps[e.type||typeof a],this._easing=Yr[e.easing]||Yr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,a=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ba([e.to,t,i,e.from]),this._from=Ba([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,a=this._loop,s=this._to;let o;if(this._active=r!==s&&(a||t<n),!this._active)return this._target[i]=s,void this._notify(!0);t<0?this._target[i]=r:(o=t/n%2,o=a&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,s,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class Ns{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Hi(e))return;const t=Object.keys(la.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Hi(r))return;const a={};for(const e of t)a[e]=r[e];(Ui(r.properties)&&r.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,a)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),a=Object.keys(t),s=Date.now();let o;for(o=a.length-1;o>=0;--o){const l=a[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(r[l]=u=new Bs(d,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Rs.add(this._chart,n),!0):void 0}}function Ds(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:i?a:r,end:i?r:a}}function Is(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,a;for(r=0,a=i.length;r<a;++r)n.push(i[r].index);return n}function js(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,a="single"===i.mode;let s,o,l,c;if(null===t)return;let u=!1;for(s=0,o=r.length;s<o;++s){if(l=+r[s],l===n){if(u=!0,i.all)continue;break}c=e.values[l],Gi(c)&&(a||0===t||vr(t)===vr(c))&&(t+=c)}return u||i.all?t:0}function zs(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Fs(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function Os(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function Us(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:a,vScale:s,index:o}=i,l=a.axis,c=s.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(a,s,i),d=t.length;let h;for(let p=0;p<d;++p){const e=t[p],{[l]:n,[c]:a}=e;h=(e._stacks||(e._stacks={}))[c]=Fs(r,u,n),h[o]=a,h._top=Os(h,s,!0,i.type),h._bottom=Os(h,s,!1,i.type);(h._visualValues||(h._visualValues={}))[o]=a}}function Hs(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function Gs(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const Ws=e=>"reset"===e||"none"===e,Vs=(e,t)=>t?e:Object.assign({},e);class Xs{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=zs(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Gs(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=Vi(n.xAxisID,Hs(e,"x")),a=t.yAxisID=Vi(n.yAxisID,Hs(e,"y")),s=t.rAxisID=Vi(n.rAxisID,Hs(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,a,s),c=t.vAxisID=i(o,a,r,s);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ir(this._data,this),e._stacked&&Gs(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Hi(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",a="x"===i.axis?"x":"y",s=Object.keys(e),o=new Array(s.length);let l,c,u;for(l=0,c=s.length;l<c;++l)u=s[l],o[l]={[r]:u,[a]:e[u]};return o}(t,e)}else if(n!==t){if(n){Ir(n,this);const e=this._cachedMeta;Gs(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Dr.forEach(e=>{const t="_onData"+rr(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];const s=n.apply(this,r);return i._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...r)}),s}})}))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=zs(t.vScale,t),t.stack!==n.stack&&(i=!0,Gs(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(Us(this,t._parsed),t._stacked=zs(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:a}=n,s=r.axis;let o,l,c,u=0===e&&t===i.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Ui(i[e])?this.parseArrayData(n,i,e,t):Hi(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[s]||d&&l[s]<d[s];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),d=l);n._sorted=u}a&&Us(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:a}=e,s=r.axis,o=a.axis,l=r.getLabels(),c=r===a,u=new Array(i);let d,h,p;for(d=0,h=i;d<h;++d)p=d+n,u[d]={[s]:c||r.parse(l[p],p),[o]:a.parse(t[p],p)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:a}=e,s=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],s[o]={x:r.parse(u[0],c),y:a.parse(u[1],c)};return s}parseObjectData(e,t,n,i){const{xScale:r,yScale:a}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=t[d],l[c]={x:r.parse(ir(h,s),d),y:a.parse(ir(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,a=t[e.axis];return js({keys:Is(i,!0),values:t._stacks[e.axis]._visualValues},a,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let a=null===r?NaN:r;const s=i&&n._stacks[t.axis];i&&s&&(i.values=s,a=js(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,a=i.length,s=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Is(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(s);let d,h;function p(){h=i[d];const t=h[s.axis];return!Gi(h[e.axis])||c>t||u<t}for(d=0;d<a&&(p()||(this.updateRangeFromParsed(l,e,h,o),!r));++d);if(r)for(d=a-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,a;for(i=0,r=t.length;i<r;++i)a=t[i][e.axis],Gi(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Hi(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(Vi(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=Ds(e,n),r=Ds(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,a=[],s=this._drawStart||0,o=this._drawCount||i.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,s,o),c=s;c<s+o;++c){const t=i[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,r))}for(c=0;c<a.length;++c)a[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return Na(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Na(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,a=e+"-"+t,s=r[a],o=this.enableOptionSharing&&ar(n);if(s)return Vs(s,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(la.elements[e]),p=l.resolveNamedOptions(d,h,()=>this.getContext(n,i,t),u);return p.$shared&&(p.$shared=o,r[a]=Object.freeze(Vs(p,o))),p}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,a="animation-".concat(t),s=r[a];if(s)return s;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),a=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(a,this.getContext(e,n,t))}const l=new Ns(i,o&&o.animations);return o&&o._cacheable&&(r[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ws(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),a=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:a}}updateElement(e,t,n,i){Ws(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!Ws(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[s,o,l]of this._syncList)this[s](o,l);this._syncList=[];const i=n.length,r=t.length,a=Math.min(r,i);a&&this.parse(0,a),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,a=e+t;let s;const o=e=>{for(e.length+=t,s=e.length-1;s>=a;s--)e[s]=e[s-t]};for(o(r),s=e;s<a;++s)r[s]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&Gs(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ys(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=jr(i.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let i,r,a,s,o=t._length;const l=()=>{32767!==a&&-32768!==a&&(ar(s)&&(o=Math.min(o,Math.abs(a-s)||o)),s=a)};for(i=0,r=n.length;i<r;++i)a=t.getPixelForValue(n[i]),l();for(s=void 0,i=0,r=t.ticks.length;i<r;++i)a=t.getPixelForTick(i),l();return o}function Js(e,t,n,i){return Ui(e)?function(e,t,n,i){const r=n.parse(e[0],i),a=n.parse(e[1],i),s=Math.min(r,a),o=Math.max(r,a);let l=s,c=o;Math.abs(s)>Math.abs(o)&&(l=o,c=s),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:a,min:s,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function Ks(e,t,n,i){const r=e.iScale,a=e.vScale,s=r.getLabels(),o=r===a,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=t[c],d={},d[r.axis]=o||r.parse(s[c],c),l.push(Js(h,d,a,c));return l}function qs(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Zs(e,t,n,i){let r=t.borderSkipped;const a={};if(!r)return void(e.borderSkipped=a);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,a;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",a="start"):(r="start",a="end"),{start:n,end:i,reverse:t,top:r,bottom:a}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(a[Qs(u,s,o,l)]=!0,r=c)),a[Qs(r,s,o,l)]=!0,e.borderSkipped=a}function Qs(e,t,n,i){var r,a,s;return i?(s=n,e=$s(e=(r=e)===(a=t)?s:r===s?a:r,n,t)):e=$s(e,t,n),e}function $s(e,t,n){return"start"===e?t:"end"===e?n:e}function eo(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}o(Xs,"defaults",{}),o(Xs,"datasetElementType",null),o(Xs,"dataElementType",null);class to extends Xs{parsePrimitiveData(e,t,n,i){return Ks(e,t,n,i)}parseArrayData(e,t,n,i){return Ks(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:a}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?s:o,c="x"===a.axis?s:o,u=[];let d,h,p,f;for(d=n,h=n+i;d<h;++d)f=t[d],p={},p[r.axis]=r.parse(ir(f,l),d),u.push(Js(ir(f,c),p,a,d));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),a=r._custom,s=qs(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:a,_cachedMeta:{vScale:s}}=this,o=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,i);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||Oi(t[s.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[s.axis],m={horizontal:l,base:n.base,enableBorderRadius:!f||qs(t._custom)||a===f._top||a===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};d&&(m.options=u||this.resolveDataElementOptions(h,e[h].active?"active":i));const g=m.options||e[h].options;Zs(m,g,f,a),eo(m,g,c.ratio),this.updateElement(e[h],h,m,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=n.options.stacked,a=[],s=this._cachedMeta.controller.getParsed(t),o=s&&s[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),i=t&&t[e.vScale.axis];if(Oi(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===a.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Vi("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,a;for(r=0,a=t.data.length;r<a;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const s=e.barThickness;return{min:s||Ys(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:a}}=this,s=r||0,o=this.getParsed(e),l=o._custom,c=qs(l);let u,d,h=o[t.axis],p=0,f=n?this.applyStack(t,o,n):h;f!==h&&(p=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&vr(h)!==vr(l.barEnd)&&(p=0),p+=h);const m=Oi(r)||c?p:r;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):g,d=u-g,Math.abs(d)<a){d=function(e,t,n){return 0!==e?vr(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,s)*a,h===s&&(g-=d/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),p=Math.max(e,r);g=Math.max(Math.min(g,p),l),u=g+d,n&&!c&&(o._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(s)){const e=vr(d)*t.getLineWidthForValue(s)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,a=Vi(i.maxBarThickness,1/0);let s,o;const l=this._getAxisCount();if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,a=r[e];let s=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===s&&(s=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-s);const c=a-(a-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n*l):function(e,t,n,i){const r=n.barThickness;let a,s;return Oi(r)?(a=t.min*n.categoryPercentage,s=n.barPercentage):(a=r*i,s=1),{chunk:a/i,ratio:s,start:t.pixels[e]-a/2}}(e,t,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Vi(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+d;s=c.start+c.chunk*h+c.chunk/2,o=Math.min(a,c.chunk*c.ratio)}else s=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(a,t.min*t.ratio);return{base:s-o/2,head:s+o/2,center:s,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}o(to,"id","bar"),o(to,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(to,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class no extends Xs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let a=0;a<r.length;a++)r[a]._custom=this.resolveDataElementOptions(a+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let a=0;a<r.length;a++){const e=t[n+a];r[a]._custom=Vi(e[2],this.resolveDataElementOptions(a+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let a=0;a<r.length;a++){const e=t[n+a];r[a]._custom=Vi(e&&e.r&&+e.r,this.resolveDataElementOptions(a+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,a=this.getParsed(e),s=i.getLabelForValue(a.x),o=r.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+s+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:a,vScale:s}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,i),c=a.axis,u=s.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!r&&this.getParsed(d),h={},p=h[c]=r?a.getPixelForDecimal(.5):a.getPixelForValue(n[c]),f=h[u]=r?s.getBasePixel():s.getPixelForValue(n[u]);h.skip=isNaN(p)||isNaN(f),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":i),r&&(h.options.radius=0)),this.updateElement(t,d,h,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Vi(n&&n._custom,r),i}}o(no,"id","bubble"),o(no,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(no,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class io extends Xs{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,a,s=e=>+n[e];if(Hi(n[e])){const{key:e="value"}=this._parsing;s=t=>+ir(n[t],e)}for(r=e,a=e+t;r<a;++r)i._parsed[r]=s(r)}}_getRotation(){return wr(this.options.rotation-90)}_getCircumference(){return wr(this.options.circumference)}_getRotationExtents(){let e=cr,t=-cr;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),a=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-a)/2,0),o=Math.min((l=this.options.cutout,c=s,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(e,t,n){let i=1,r=1,a=0,s=0;if(t<cr){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),p=(e,t,i)=>Tr(e,o,l,!0)?1:Math.max(t,t*n,i,i*n),f=(e,t,i)=>Tr(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n),m=p(0,c,d),g=p(pr,u,h),v=f(lr,c,d),x=f(lr+pr,u,h);i=(m-v)/2,r=(g-x)/2,a=-(m+v)/2,s=-(g+x)/2}return{ratioX:i,ratioY:r,offsetX:a,offsetY:s}}(h,d,o),v=(n.width-a)/p,x=(n.height-a)/f,y=Math.max(Math.min(v,x)/2,0),b=Xi(this.options.radius,y),_=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,i.total=this.calculateTotal(),this.outerRadius=b-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/cr)}updateElements(e,t,n,i){const r="reset"===i,a=this.chart,s=a.chartArea,o=a.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,u=r&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,r);for(m=t;m<t+n;++m){const t=this._circumference(m,r),n=e[m],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};f&&(a.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,a,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?cr*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ea(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,a,s,o;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){a=n.getDatasetMeta(i),e=a.data,s=a.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)o=s.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Vi(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(io,"id","doughnut"),o(io,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(io,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),o(io,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class ro extends Xs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,a=this.chart._animationsDisabled;let{start:s,count:o}=Hr(t,i,a);this._drawStart=s,this._drawCount=o,Gr(t)&&(s=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(i,s,o,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:a,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),d=a.axis,h=s.axis,{spanGaps:p,segment:f}=this.options,m=br(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i,v=t+n,x=e.length;let y=t>0&&this.getParsed(t-1);for(let b=0;b<x;++b){const n=e[b],p=g?n:{};if(b<t||b>=v){p.skip=!0;continue}const x=this.getParsed(b),_=Oi(x[h]),w=p[d]=a.getPixelForValue(x[d],b),S=p[h]=r||_?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,x,o):x[h],b);p.skip=isNaN(w)||isNaN(S)||_,p.stop=b>0&&Math.abs(x[d]-y[d])>m,f&&(p.parsed=x,p.raw=l.data[b]),u&&(p.options=c||this.resolveDataElementOptions(b,n.active?"active":i)),g||this.updateElement(n,b,p,i),y=x}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}o(ro,"id","line"),o(ro,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(ro,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ao extends Xs{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=ea(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return Ja.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),a=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,i){const r="reset"===i,a=this.chart,s=a.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*lr;let d,h=u;const p=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,i,p);for(d=t;d<t+n;d++){const t=e[d];let n=h,f=h+this._computeAngle(d,i,p),m=a.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=f,r&&(s.animateScale&&(m=0),s.animateRotate&&(n=f=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(d,t.active?"active":i)};this.updateElement(t,d,g,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?wr(this.resolveDataElementOptions(e,t).angle||n):0}}o(ao,"id","polarArea"),o(ao,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(ao,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class so extends io{}o(so,"id","pie"),o(so,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class oo extends Xs{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return Ja.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,a="reset"===i;for(let s=t;s<t+n;s++){const t=e[s],n=this.resolveDataElementOptions(s,t.active?"active":i),o=r.getPointPositionForValue(s,this.getParsed(s).r),l=a?r.xCenter:o.x,c=a?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,s,u,i)}}}o(oo,"id","radar"),o(oo,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(oo,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class lo extends Xs{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,a=this.getParsed(e),s=i.getLabelForValue(a.x),o=r.getLabelForValue(a.y);return{label:n[e]||"",value:"("+s+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:a}=Hr(t,n,i);if(this._drawStart=r,this._drawCount=a,Gr(t)&&(r=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:a}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=n;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:s},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:a,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),d=this.includeOptions(i,u),h=a.axis,p=s.axis,{spanGaps:f,segment:m}=this.options,g=br(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let x=t>0&&this.getParsed(t-1);for(let y=t;y<t+n;++y){const t=e[y],n=this.getParsed(y),c=v?t:{},f=Oi(n[p]),b=c[h]=a.getPixelForValue(n[h],y),_=c[p]=r||f?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,n,o):n[p],y);c.skip=isNaN(b)||isNaN(_)||f,c.stop=y>0&&Math.abs(n[h]-x[h])>g,m&&(c.parsed=n,c.raw=l.data[y]),d&&(c.options=u||this.resolveDataElementOptions(y,t.active?"active":i)),v||this.updateElement(t,y,c,i),x=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,a)/2}}o(lo,"id","scatter"),o(lo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(lo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function co(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uo{static override(e){Object.assign(uo.prototype,e)}constructor(e){o(this,"options",void 0),this.options=e||{}}init(){}formats(){return co()}parse(){return co()}format(){return co()}add(){return co()}diff(){return co()}startOf(){return co()}endOf(){return co()}}var ho=uo;function po(e,t,n,i){const{controller:r,data:a,_sorted:s}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&s&&a.length){const s=o._reversePixels?Nr:Br;if(!i){const i=s(a,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,a=n.slice(0,i.lo+1).reverse().findIndex(e=>!Oi(e[t.axis]));i.lo-=Math.max(0,a);const s=n.slice(i.hi).findIndex(e=>!Oi(e[t.axis]));i.hi+=Math.max(0,s)}return i}if(r._sharedOptions){const e=a[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=s(a,t,n-i),r=s(a,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:a.length-1}}function fo(e,t,n,i,r){const a=e.getSortedVisibleDatasetMetas(),s=n[t];for(let o=0,l=a.length;o<l;++o){const{index:e,data:n}=a[o],{lo:l,hi:c}=po(a[o],t,s,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function mo(e,t,n,i,r){const a=[];if(!r&&!e.isPointInArea(t))return a;return fo(e,n,t,function(n,s,o){(r||ma(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&a.push({element:n,datasetIndex:s,index:o})},!0),a}function go(e,t,n,i,r,a){let s=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,a=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return fo(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,r);if(i&&!d)return;const h=n.getCenterPoint(r);if(!(!!a||e.isPointInArea(h))&&!d)return;const p=o(t,h);p<l?(s=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&s.push({element:n,datasetIndex:c,index:u})}),s}function vo(e,t,n,i,r,a){return a||e.isPointInArea(t)?"r"!==n||i?go(e,t,n,i,r,a):function(e,t,n,i){let r=[];return fo(e,n,t,function(e,n,a){const{startAngle:s,endAngle:o}=e.getProps(["startAngle","endAngle"],i),{angle:l}=Ar(e,{x:t.x,y:t.y});Tr(l,s,o)&&r.push({element:e,datasetIndex:n,index:a})}),r}(e,t,n,r):[]}function xo(e,t,n,i,r){const a=[],s="x"===n?"inXRange":"inYRange";let o=!1;return fo(e,n,t,(e,i,l)=>{e[s]&&e[s](t[n],r)&&(a.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,r))}),i&&!o?[]:a}var yo={evaluateInteractionItems:fo,modes:{index(e,t,n,i){const r=ls(t,e),a=n.axis||"x",s=n.includeInvisible||!1,o=n.intersect?mo(e,r,a,i,s):vo(e,r,a,!1,i,s),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const r=ls(t,e),a=n.axis||"xy",s=n.includeInvisible||!1;let o=n.intersect?mo(e,r,a,i,s):vo(e,r,a,!1,i,s);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,i)=>mo(e,ls(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=ls(t,e),a=n.axis||"xy",s=n.includeInvisible||!1;return vo(e,r,a,n.intersect,i,s)},x:(e,t,n,i)=>xo(e,ls(t,e),"x",n.intersect,i),y:(e,t,n,i)=>xo(e,ls(t,e),"y",n.intersect,i)}};const bo=["left","top","right","bottom"];function _o(e,t){return e.filter(e=>e.pos===t)}function wo(e,t){return e.filter(e=>-1===bo.indexOf(e.pos)&&e.box.axis===t)}function So(e,t){return e.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function Mo(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!bo.includes(i))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let a,s,o;for(a=0,s=e.length;a<s;++a){o=e[a];const{fullSize:s}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:s&&t.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:s&&t.availableHeight)}return n}function Ao(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Co(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Eo(e,t,n,i){const{pos:r,box:a}=n,s=e.maxPadding;if(!Hi(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[r]+=n.size}a.getPadding&&Co(s,a.getPadding());const o=Math.max(0,t.outerWidth-Ao(s,e,"left","right")),l=Math.max(0,t.outerHeight-Ao(s,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function ko(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function To(e,t,n,i){const r=[];let a,s,o,l,c,u;for(a=0,s=e.length,c=0;a<s;++a){o=e[a],l=o.box,l.update(o.width||t.w,o.height||t.h,ko(o.horizontal,t));const{same:s,other:d}=Eo(t,n,o,i);c|=s&&r.length,u=u||d,l.fullSize||r.push(o)}return c&&To(r,t,n,i)||u}function Ro(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Lo(e,t,n,i){const r=n.padding;let{x:a,y:s}=t;for(const o of e){const e=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=t.w*c,a=l.size||e.height;ar(l.start)&&(s=l.start),e.fullSize?Ro(e,r.left,s,n.outerWidth-r.right-r.left,a):Ro(e,t.left+l.placed,s,i,a),l.start=s,l.placed+=i,s=e.bottom}else{const i=t.h*c,s=l.size||e.width;ar(l.start)&&(a=l.start),e.fullSize?Ro(e,a,r.top,s,n.outerHeight-r.bottom-r.top):Ro(e,a,t.top+l.placed,s,i),l.start=a,l.placed+=i,a=e.right}}t.x=a,t.y=s}var Po={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=La(e.options.layout.padding),a=Math.max(t-r.width,0),s=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,i,r,a,s,o;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:a,options:{stack:s,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&a+s,stackWeight:o});return t}(e),n=So(t.filter(e=>e.box.fullSize),!0),i=So(_o(t,"left"),!0),r=So(_o(t,"right")),a=So(_o(t,"top"),!0),s=So(_o(t,"bottom")),o=wo(t,"x"),l=wo(t,"y");return{fullSize:n,leftAndTop:i.concat(a),rightAndBottom:r.concat(l).concat(s).concat(o),chartArea:_o(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:a.concat(s).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Ji(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},r);Co(h,La(i));const p=Object.assign({maxPadding:h,w:a,h:s,x:r.left,y:r.top},r),f=Mo(l.concat(c),d);To(o.fullSize,p,d,f),To(l,p,d,f),To(c,p,d,f)&&To(l,p,d,f),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),Lo(o.leftAndTop,p,d,f),p.x+=p.w,p.y+=p.h,Lo(o.rightAndBottom,p,d,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ji(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Bo{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class No extends Bo{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Do="$chartjs",Io={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},jo=e=>null===e||""===e;const zo=!!hs&&{passive:!0};function Fo(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,zo)}function Oo(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Uo(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Oo(n.addedNodes,i),t=t&&!Oo(n.removedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ho(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Oo(n.removedNodes,i),t=t&&!Oo(n.addedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Go=new Map;let Wo=0;function Vo(){const e=window.devicePixelRatio;e!==Wo&&(Wo=e,Go.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Xo(e,t,n){const i=e.canvas,r=i&&is(i);if(!r)return;const a=Fr((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()},window),s=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||a(n,i)});return s.observe(r),function(e,t){Go.size||window.addEventListener("resize",Vo),Go.set(e,t)}(e,a),s}function Yo(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Go.delete(e),Go.size||window.removeEventListener("resize",Vo)}(e)}function Jo(e,t,n){const i=e.canvas,r=Fr(t=>{null!==e.ctx&&n(function(e,t){const n=Io[e.type]||e.type,{x:i,y:r}=ls(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,zo)}(i,t,r),r}class Ko extends Bo{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Do]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",jo(r)){const t=ps(e,"width");void 0!==t&&(e.width=t)}if(jo(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=ps(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Do])return!1;const n=t[Do].initial;["height","width"].forEach(e=>{const i=n[e];Oi(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[Do],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:Uo,detach:Ho,resize:Xo}[t]||Jo;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Yo,detach:Yo,resize:Yo}[t]||Fo)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return us(e,t,n,i)}isAttached(e){const t=e&&is(e);return!(!t||!t.isConnected)}}class qo{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return br(this.x)&&br(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function Zo(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),a=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],s=a.length,o=a[0],l=a[s-1],c=[];if(s>r)return function(e,t,n,i){let r,a=0,s=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===s&&(t.push(e[r]),a++,s=n[a*i])}(t,c,a,s/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const a=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let s=0,o=a.length-1;s<o;s++){const e=a[s];if(e>r)return e}return Math.max(r,1)}(a,t,r);if(s>0){let e,n;const i=s>1?Math.round((l-o)/(s-1)):null;for(Qo(t,c,u,Oi(i)?0:o-i,o),e=0,n=s-1;e<n;e++)Qo(t,c,u,a[e],a[e+1]);return Qo(t,c,u,l,Oi(i)?t.length:l+i),c}return Qo(t,c,u),c}function Qo(e,t,n,i,r){const a=Vi(i,0),s=Math.min(Vi(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=a;c<0;)u++,c=Math.round(a+u*n);for(l=Math.max(a,0);l<s;l++)l===c&&(t.push(e[l]),u++,c=Math.round(a+u*n))}o(qo,"defaults",{}),o(qo,"defaultRoutes",void 0);const $o=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,el=(e,t)=>Math.min(t||e,e);function tl(e,t){const n=[],i=e.length/t,r=e.length;let a=0;for(;a<r;a+=i)n.push(e[Math.floor(a)]);return n}function nl(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),a=e._startPixel,s=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-a,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<a-o||c>s+o)))return c}function il(e){return e.drawTicks?e.tickLength:0}function rl(e,t){if(!e.display)return 0;const n=Pa(e.font,t),i=La(e.padding);return(Ui(e.text)?e.text.length:1)*n.lineHeight+i.height}function al(e,t,n){let i=Or(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class sl extends qo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Wi(e,Number.POSITIVE_INFINITY),t=Wi(t,Number.NEGATIVE_INFINITY),n=Wi(n,Number.POSITIVE_INFINITY),i=Wi(i,Number.NEGATIVE_INFINITY),{min:Wi(e,n),max:Wi(t,i),minDefined:Gi(e),maxDefined:Gi(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:a}=this.getUserBounds();if(r&&a)return{min:n,max:i};const s=this.getMatchingVisibleMetas();for(let o=0,l=s.length;o<l;++o)t=s[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),a||(i=Math.max(i,t.max));return n=a&&n>i?i:n,i=r&&n>i?n:i,{min:Wi(n,Wi(i,n)),max:Wi(i,Wi(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Yi(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:a}=this.options,s=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,a=Xi(t,(r-i)/2),s=(e,t)=>n&&0===e?0:e+t;return{min:s(i,-Math.abs(a)),max:s(r,a)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=s<this.ticks.length;this._convertTicksToLabels(o?tl(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=Zo(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Yi(this.options.afterUpdate,[this])}beforeSetDimensions(){Yi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Yi(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Yi(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Yi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Yi(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Yi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Yi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=el(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let a,s,o,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=Rr(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/n:h/(n-1),u+6>a&&(a=h/(n-(e.offset?.5:1)),s=this.maxHeight-il(e.grid)-t.padding-rl(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=Sr(Math.min(Math.asin(Rr((c.highest.height+6)/a,-1,1)),Math.asin(Rr(s/o,-1,1))-Math.asin(Rr(d/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Yi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Yi(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,a=this._isVisible(),s=this.isHorizontal();if(a){const a=rl(i,t.options.font);if(s?(e.width=this.maxWidth,e.height=il(r)+a):(e.height=this.maxHeight,e.width=il(r)+a),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:a}=this._getLabelSizes(),o=2*n.padding,l=wr(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const t=n.mirror?0:u*r.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*a.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:a},position:s}=this.options,o=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=i*e.width,d=n*t.height):(u=n*e.height,d=i*t.width):"start"===r?d=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-s+a)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+a)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+a,this.paddingBottom=i+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Yi(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Oi(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=tl(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,a=[],s=[],o=Math.floor(t/el(t,n));let l,c,u,d,h,p,f,m,g,v,x,y=0,b=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),i.font=p=h.string,f=r[p]=r[p]||{data:{},gc:[]},m=h.lineHeight,g=v=0,Oi(d)||Ui(d)){if(Ui(d))for(c=0,u=d.length;c<u;++c)x=d[c],Oi(x)||Ui(x)||(g=ca(i,f.data,f.gc,g,x),v+=m)}else g=ca(i,f.data,f.gc,g,d),v=m;a.push(g),s.push(v),y=Math.max(g,y),b=Math.max(v,b)}!function(e,t){Ji(e,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}(r,t);const _=a.indexOf(y),w=s.indexOf(b),S=e=>({width:a[e]||0,height:s[e]||0});return{first:S(0),last:S(t-1),widest:S(_),highest:S(w),widths:a,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Rr(this._alignToPixels?da(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Na(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return Na(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=wr(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,s=r?r.widest.width+a:0,o=r?r.highest.height+a:0;return this.isHorizontal()?o*n>s*i?s/n:o/i:o*i<s*n?o/n:s/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:a,border:s}=i,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=il(r),d=[],h=s.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,m=function(e){return da(n,e,p)};let g,v,x,y,b,_,w,S,M,A,C,E;if("top"===a)g=m(this.bottom),_=this.bottom-u,S=g-f,A=m(e.top)+f,E=e.bottom;else if("bottom"===a)g=m(this.top),A=e.top,E=m(e.bottom)-f,_=g+f,S=this.top+u;else if("left"===a)g=m(this.right),b=this.right-u,w=g-f,M=m(e.left)+f,C=e.right;else if("right"===a)g=m(this.left),M=e.left,C=m(e.right)-f,b=g+f,w=this.left+u;else if("x"===t){if("center"===a)g=m((e.top+e.bottom)/2+.5);else if(Hi(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}A=e.top,E=e.bottom,_=g+f,S=_+u}else if("y"===t){if("center"===a)g=m((e.left+e.right)/2);else if(Hi(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}b=g-f,w=b-u,M=e.left,C=e.right}const k=Vi(i.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/k));for(v=0;v<c;v+=T){const e=this.getContext(v),t=r.setContext(e),i=s.setContext(e),a=t.lineWidth,c=t.color,u=i.dash||[],h=i.dashOffset,p=t.tickWidth,f=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;x=nl(this,v,o),void 0!==x&&(y=da(n,x,a),l?b=w=M=C=y:_=S=A=E=y,d.push({tx1:b,ty1:_,tx2:w,ty2:S,x1:M,y1:A,x2:C,y2:E,width:a,color:c,borderDash:u,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,a=this.isHorizontal(),s=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,d=il(n.grid),h=d+c,p=u?-c:h,f=-wr(this.labelRotation),m=[];let g,v,x,y,b,_,w,S,M,A,C,E,k="middle";if("top"===i)_=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,b=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,b=e.x}else if("x"===t){if("center"===i)_=(e.top+e.bottom)/2+h;else if(Hi(i)){const e=Object.keys(i)[0],t=i[e];_=this.chart.scales[e].getPixelForValue(t)+h}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)b=(e.left+e.right)/2-h;else if(Hi(i)){const e=Object.keys(i)[0],t=i[e];b=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?k="top":"end"===o&&(k="bottom"));const T=this._getLabelSizes();for(g=0,v=s.length;g<v;++g){x=s[g],y=x.label;const e=r.setContext(this.getContext(g));S=this.getPixelForTick(g)+r.labelOffset,M=this._resolveTickFontOptions(g),A=M.lineHeight,C=Ui(y)?y.length:1;const t=C/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=w;if(a?(b=S,"inner"===w&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),E="top"===i?"near"===l||0!==f?-C*A+A/2:"center"===l?-T.highest.height/2-t*A+A:-T.highest.height+A/2:"near"===l||0!==f?A/2:"center"===l?T.highest.height/2-t*A:T.highest.height-C*A,u&&(E*=-1),0===f||e.showLabelBackdrop||(b+=A/2*Math.sin(f))):(_=S,E=(1-C)*A/2),e.showLabelBackdrop){const t=La(e.backdropPadding),n=T.heights[g],i=T.widths[g];let r=E-t.top,a=0-t.left;switch(k){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":a-=i/2;break;case"right":a-=i;break;case"inner":g===v-1?a-=i:g>0&&(a-=i/2)}d={left:a,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:y,font:M,textOffset:E,options:{rotation:f,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:k,translation:[b,_],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-wr(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,a=e+r,s=this._getLabelSizes().widest.width;let o,l;return"left"===t?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=s/2):(o="right",l+=s)):(l=this.right-a,"near"===n?o="right":"center"===n?(o="center",l-=s/2):(o="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=s/2):(o="left",l-=s)):(l=this.left+a,"near"===n?o="left":"center"===n?(o="center",l+=s/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,a;const s=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,a=i.length;r<a;++r){const e=i[r];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),a=n.display?r.width:0;if(!a)return;const s=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=da(e,this.left,a)-a/2,c=da(e,this.right,s)+s/2,u=d=o):(u=da(e,this.top,a)-a/2,d=da(e,this.bottom,s)+s/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&ga(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;wa(t,r.label,0,r.textOffset,n,e)}n&&va(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=Pa(n.font),a=La(n.padding),s=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||Hi(t)?(o+=a.bottom,Ui(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=a.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,i){const{top:r,left:a,bottom:s,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,p,f=0;const m=s-r,g=o-a;if(e.isHorizontal()){if(h=Ur(i,a,o),Hi(n)){const e=Object.keys(n)[0],i=n[e];p=u[e].getPixelForValue(i)+m-t}else p="center"===n?(c.bottom+c.top)/2+m-t:$o(e,n,t);d=o-a}else{if(Hi(n)){const e=Object.keys(n)[0],i=n[e];h=u[e].getPixelForValue(i)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:$o(e,n,t);p=Ur(i,s,r),f="left"===n?-pr:pr}return{titleX:h,titleY:p,maxWidth:d,rotation:f}}(this,o,t,s);wa(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:al(s,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Vi(e.grid&&e.grid.z,-1),i=Vi(e.border&&e.border.z,0);return this._isVisible()&&this.draw===sl.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,a;for(r=0,a=t.length;r<a;++r){const a=t[r];a[n]!==this.id||e&&a.type!==e||i.push(a)}return i}_resolveTickFontOptions(e){return Pa(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ol{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=$i(Object.create(null),[n?la.get(n):{},la.get(t),e.defaults]);la.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),a=[e].concat(i).join("."),s=t[n].split("."),o=s.pop(),l=s.join(".");la.route(a,r,l,o)})}(t,e.defaultRoutes);e.descriptors&&la.describe(t,e.descriptors)}(e,a,n),this.override&&la.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in la[i]&&(delete la[i][n],this.override&&delete ia[n])}}class ll{constructor(){this.controllers=new ol(Xs,"datasets",!0),this.elements=new ol(qo,"elements"),this.plugins=new ol(Object,"plugins"),this.scales=new ol(sl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Ji(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=rr(e);Yi(n["before"+i],[],n),t[e](n),Yi(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var cl=new ll;class ul{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Yi(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){Oi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Vi(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(cl.plugins.items);for(let a=0;a<i.length;a++)n.push(cl.getPlugin(i[a]));const r=e.plugins||[];for(let a=0;a<r.length;a++){const e=r[a];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:a}=t;const s=[],o=e.getContext();for(const l of r){const t=l.id,r=dl(n[t],i);null!==r&&s.push({plugin:l,options:hl(e.config,{plugin:l,local:a[t]},r,o)})}return s}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function dl(e,t){return t||!1!==e?!0===e?{}:e:null}function hl(e,t,n,i){let{plugin:r,local:a}=t;const s=e.pluginScopeKeys(r),o=e.getOptionScopes(n,s);return a&&r.defaults&&o.push(r.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pl(e,t){const n=la.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function fl(e){if("x"===e||"y"===e||"r"===e)return e}function ml(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function gl(e){if(fl(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n){const t=r.axis||ml(r.position)||e.length>1&&fl(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function vl(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function xl(e,t){const n=ia[e.type]||{scales:{}},i=t.scales||{},r=pl(e.type,t),a=Object.create(null);return Object.keys(i).forEach(t=>{const s=i[t];if(!Hi(s))return console.error("Invalid scale configuration for scale: ".concat(t));if(s._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=gl(t,s,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return vl(e,"x",n[0])||vl(e,"y",n[0])}return{}}(t,e),la.scales[s.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};a[t]=er(Object.create(null),[{axis:o},s,c[o],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,s=n.indexAxis||pl(r,t),o=(ia[r]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),r=n[t+"AxisID"]||t;a[r]=a[r]||Object.create(null),er(a[r],[{axis:t},i[r],o[e]])})}),Object.keys(a).forEach(e=>{const t=a[e];er(t,[la.scales[t.type],la.scale])}),a}function yl(e){const t=e.options||(e.options={});t.plugins=Vi(t.plugins,{}),t.scales=xl(e,t)}function bl(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const _l=new Map,wl=new Set;function Sl(e,t){let n=_l.get(e);return n||(n=t(),_l.set(e,n),wl.add(n)),n}const Ml=(e,t,n)=>{const i=ir(t,n);void 0!==i&&e.add(i)};class Al{constructor(e){this._config=function(e){return(e=e||{}).data=bl(e.data),yl(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=bl(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yl(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Sl(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return Sl("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return Sl("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return Sl("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,a=this._cachedScopes(e,n),s=a.get(t);if(s)return s;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>Ml(o,e,t))),t.forEach(e=>Ml(o,i,e)),t.forEach(e=>Ml(o,ia[r]||{},e)),t.forEach(e=>Ml(o,la,e)),t.forEach(e=>Ml(o,ra,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),wl.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,ia[t]||{},la.datasets[t]||{},{type:t},la,ra]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:a,subPrefixes:s}=Cl(this._resolverCache,e,i);let o=a;if(function(e,t){const{isScriptable:n,isIndexable:i}=ja(e);for(const r of t){const t=n(r),a=i(r),s=(a||t)&&e[r];if(t&&(sr(s)||El(s))||a&&Ui(s))return!0}return!1}(a,t)){r.$shared=!1;o=Ia(a,n=sr(n)?n():n,this.createResolver(e,n,s))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=Cl(this._resolverCache,e,n);return Hi(t)?Ia(r,t,void 0,i):r}}function Cl(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let a=i.get(r);if(!a){a={resolver:Da(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(r,a)}return a}const El=e=>Hi(e)&&Object.getOwnPropertyNames(e).some(t=>sr(e[t]));const kl=["top","bottom","left","right","chartArea"];function Tl(e,t){return"top"===e||"bottom"===e||-1===kl.indexOf(e)&&"x"===t}function Rl(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Ll(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Yi(n&&n.onComplete,[e],t)}function Pl(e){const t=e.chart,n=t.options.animation;Yi(n&&n.onProgress,[e],t)}function Bl(e){return ns()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Nl={},Dl=e=>{const t=Bl(e);return Object.values(Nl).filter(e=>e.canvas===t).pop()};function Il(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const a=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=a)}}}class jl{static register(){cl.add(...arguments),zl()}static unregister(){cl.remove(...arguments),zl()}constructor(e,t){const n=this.config=new Al(t),i=Bl(e),r=Dl(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!ns()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?No:Ko}(i)),this.platform.updateConfig(n);const s=this.platform.acquireContext(i,a.aspectRatio),o=s&&s.canvas,l=o&&o.height,c=o&&o.width;this.id=Fi(),this.ctx=s,this.canvas=o,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ul,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),a.resizeDelay||0),this._dataChanges=[],Nl[this.id]=this,s&&o?(Rs.listen(this,"complete",Ll),Rs.listen(this,"progress",Pl),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return Oi(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return cl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ds(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ha(this.canvas,this.ctx),this}stop(){return Rs.stop(this),this}resize(e,t){Rs.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,t,r),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ds(this,s,!0)&&(this.notifyPlugins("resize",{size:a}),Yi(n.onResize,[this,a],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Ji(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],i=gl(e,n),r="r"===i,a="x"===i;return{options:n,dposition:r?"chartArea":a?"bottom":"left",dtype:r?"radialLinear":a?"category":"linear"}}))),Ji(r,t=>{const r=t.options,a=r.id,s=gl(a,r),o=Vi(r.type,t.dtype);void 0!==r.position&&Tl(r.position,s)===Tl(t.dposition)||(r.position=t.dposition),i[a]=!0;let l=null;if(a in n&&n[a].type===o)l=n[a];else{l=new(cl.getScale(o))({id:a,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),Ji(i,(e,t)=>{e||delete n[t]}),Ji(n,e=>{Po.configure(this,e,e.options),Po.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Rl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const a=i.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=i.indexAxis||pl(a,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=cl.getController(a),{datasetElementType:i,dataElementType:s}=la.datasets[a];Object.assign(t,{dataElementType:cl.getElement(s),datasetElementType:i&&cl.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Ji(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||Ji(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Rl("z","_idx"));const{_active:s,_lastEvent:o}=this;o?this._eventHandler(o,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Ji(this.scales,e=>{Po.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);or(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){Il(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!or(i,n(r)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Po.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Ji(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,sr(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Rs.has(this)?this.attached&&!Rs.running(this)&&Rs.start(this):(this.draw(),Ll({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=ks(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&ga(t,i),e.controller.draw(),i&&va(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ma(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=yo.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Na(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,i);ar(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Rs.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ha(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Nl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Ji(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const s=()=>{i("attach",s),this.attached=!0,this.resize(),n("resize",r),n("detach",a)};a=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",s)},t.isAttached(this.canvas)?s():a()}unbindEvents(){Ji(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ji(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,a,s,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),s=0,o=e.length;s<o;++s){a=e[s];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!Ki(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),a=r(t,e),s=n?e:r(e,t);a.length&&this.updateHoverStyle(a,i.mode,!1),s.length&&i.mode&&this.updateHoverStyle(s,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,a=t,s=this._getActiveElements(e,i,n,a),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Yi(r.onHover,[e,s,this],this),o&&Yi(r.onClick,[e,s,this],this));const c=!Ki(s,i);return(c||t)&&(this._active=s,this._updateHoverStyles(s,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function zl(){return Ji(jl.instances,e=>e._plugins.invalidate())}function Fl(e,t,n,i){const r=ka(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(n-t)/2,s=Math.min(a,i*t/2),o=e=>{const t=(n-Math.min(a,e))*i/2;return Rr(e,0,Math.min(a,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Rr(r.innerStart,0,s),innerEnd:Rr(r.innerEnd,0,s)}}function Ol(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Ul(e,t,n,i,r,a){const{x:s,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let p=0;const f=r-l;if(i){const e=((u>0?u-i:0)+(d>0?d-i:0))/2;p=(f-(0!==e?f*e/(e+i):f))/2}const m=(f-Math.max(.001,f*d-n/lr)/d)/2,g=l+m+p,v=r-m-p,{outerStart:x,outerEnd:y,innerStart:b,innerEnd:_}=Fl(t,h,d,v-g),w=d-x,S=d-y,M=g+x/w,A=v-y/S,C=h+b,E=h+_,k=g+b/C,T=v-_/E;if(e.beginPath(),a){const t=(M+A)/2;if(e.arc(s,o,d,M,t),e.arc(s,o,d,t,A),y>0){const t=Ol(S,A,s,o);e.arc(t.x,t.y,y,A,v+pr)}const n=Ol(E,v,s,o);if(e.lineTo(n.x,n.y),_>0){const t=Ol(E,T,s,o);e.arc(t.x,t.y,_,v+pr,T+Math.PI)}const i=(v-_/h+(g+b/h))/2;if(e.arc(s,o,h,v-_/h,i,!0),e.arc(s,o,h,i,g+b/h,!0),b>0){const t=Ol(C,k,s,o);e.arc(t.x,t.y,b,k+Math.PI,g-pr)}const r=Ol(w,g,s,o);if(e.lineTo(r.x,r.y),x>0){const t=Ol(w,M,s,o);e.arc(t.x,t.y,x,g-pr,M)}}else{e.moveTo(s,o);const t=Math.cos(M)*d+s,n=Math.sin(M)*d+o;e.lineTo(t,n);const i=Math.cos(A)*d+s,r=Math.sin(A)*d+o;e.lineTo(i,r)}e.closePath()}function Hl(e,t,n,i,r){const{fullCircles:a,startAngle:s,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:p}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(a){Ul(e,t,n,i,m,r);for(let t=0;t<a;++t)e.stroke();isNaN(o)||(m=s+(o%cr||cr))}f&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:a,y:s,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(a,s,o,i-c,n+c),l>r?(c=r/l,e.arc(a,s,l,n+c,i-c,!0)):e.arc(a,s,r,n+pr,i-pr),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-s>=lr&&0===p&&"miter"!==u&&function(e,t,n){const{startAngle:i,x:r,y:a,outerRadius:s,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/s,kr(i-n));if(e.beginPath(),e.arc(r,a,s-c/2,i+d/2,n-d/2),o>0){const t=Math.min(c/o,kr(i-n));e.arc(r,a,o+c/2,n-t/2,i+t/2,!0)}else{const t=Math.min(c/2,s*kr(i-n));if("round"===u)e.arc(r,a,t,n-lr/2,i+lr/2,!0);else if("bevel"===u){const s=2*t*t,o=-s*Math.cos(n+lr/2)+r,l=-s*Math.sin(n+lr/2)+a,c=s*Math.cos(i+lr/2)+r,u=s*Math.sin(i+lr/2)+a;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),a||(Ul(e,t,n,i,m,r),e.stroke())}o(jl,"defaults",la),o(jl,"instances",Nl),o(jl,"overrides",ia),o(jl,"registry",cl),o(jl,"version","4.5.0"),o(jl,"getChart",Dl);class Gl extends qo{constructor(e){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:a}=Ar(i,{x:e,y:t}),{startAngle:s,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=Vi(u,o-s),p=Tr(r,s,o)&&s!==o,f=h>=cr||p,m=Lr(a,l+d,c+d);return f&&m}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:a,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(a+s+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>cr?Math.floor(n/cr):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*i,Math.sin(s)*i);const o=i*(1-Math.sin(Math.min(lr,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:a,startAngle:s,circumference:o}=t;let l=t.endAngle;if(a){Ul(e,t,n,i,l,r);for(let t=0;t<a;++t)e.fill();isNaN(o)||(l=s+(o%cr||cr))}Ul(e,t,n,i,l,r),e.fill()}(e,this,o,r,a),Hl(e,this,o,r,a),e.restore()}}function Wl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Vi(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Vi(n.borderDash,t.borderDash)),e.lineDashOffset=Vi(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Vi(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Vi(n.borderWidth,t.borderWidth),e.strokeStyle=Vi(n.borderColor,t.borderColor)}function Vl(e,t,n){e.lineTo(n.x,n.y)}function Xl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:a=i-1}=n,{start:s,end:o}=t,l=Math.max(r,s),c=Math.min(a,o),u=r<s&&a<s||r>o&&a>o;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function Yl(e,t,n,i){const{points:r,options:a}=t,{count:s,start:o,loop:l,ilen:c}=Xl(r,n,i),u=function(e){return e.stepped?xa:e.tension||"monotone"===e.cubicInterpolationMode?ya:Vl}(a);let d,h,p,{move:f=!0,reverse:m}=i||{};for(d=0;d<=c;++d)h=r[(o+(m?c-d:d))%s],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):u(e,p,h,m,a.stepped),p=h);return l&&(h=r[(o+(m?c:0))%s],u(e,p,h,m,a.stepped)),!!l}function Jl(e,t,n,i){const r=t.points,{count:a,start:s,ilen:o}=Xl(r,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,p,f,m,g=0,v=0;const x=e=>(s+(c?o-e:e))%a,y=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(d=r[x(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=r[x(u)],d.skip)continue;const t=d.x,n=d.y,i=0|t;i===h?(n<p?p=n:n>f&&(f=n),g=(v*g+t)/++v):(y(),e.lineTo(t,n),h=i,v=0,p=f=n),m=n}y()}function Kl(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Jl:Yl}o(Gl,"id","arc"),o(Gl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),o(Gl,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(Gl,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const ql="function"===typeof Path2D;function Zl(e,t,n,i){ql&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),Wl(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:a}=t,s=Kl(t);for(const o of r)Wl(e,a,o.style),e.beginPath(),s(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class Ql extends qo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;ts(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const a=!!e._loop,{start:s,end:o}=function(e,t,n,i){let r=0,a=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(a+=r);a>r&&e[a%t].skip;)a--;return a%=t,{start:r,end:a}}(n,r,a,i);return Ms(e,!0===i?[{start:s,end:o,loop:a}]:function(e,t,n,i){const r=e.length,a=[];let s,o=t,l=e[t];for(s=t+1;s<=n;++s){const n=e[s%r];n.skip||n.stop?l.skip||(i=!1,a.push({start:t%r,end:(s-1)%r,loop:i}),t=o=n.stop?s:null):(o=s,l.skip&&(t=s)),l=n}return null!==o&&a.push({start:t%r,end:o%r,loop:i}),a}(n,s,o<s?o+r:o,!!e._fullLoop&&0===s&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,a=Ss(this,{property:t,start:i,end:i});if(!a.length)return;const s=[],o=function(e){return e.stepped?ms:e.tension||"monotone"===e.cubicInterpolationMode?gs:fs}(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:u}=a[l],d=r[c],h=r[u];if(d===h){s.push(d);continue}const p=o(d,h,Math.abs((i-d[t])/(h[t]-d[t])),n.stepped);p[t]=e[t],s.push(p)}return 1===s.length?s[0]:s}pathSegment(e,t,n){return Kl(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=Kl(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const s of i)a&=r(e,this,s,{start:t,end:t+n-1});return!!a}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Zl(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function $l(e,t,n,i){const r=e.options,{[n]:a}=e.getProps([n],i);return Math.abs(t-a)<r.radius+r.hitRadius}o(Ql,"id","line"),o(Ql,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(Ql,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(Ql,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class ec extends qo{constructor(e){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:a}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return $l(this,e,"x",t)}inYRange(e,t){return $l(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!ma(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,pa(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function tc(e,t){const{x:n,y:i,base:r,width:a,height:s}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=s/2,o=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=a/2,o=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function nc(e,t,n,i){return e?0:Rr(t,n,i)}function ic(e){const t=tc(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,a=Ta(i);return{t:nc(r.top,a.top,0,n),r:nc(r.right,a.right,0,t),b:nc(r.bottom,a.bottom,0,n),l:nc(r.left,a.left,0,t)}}(e,n/2,i/2),a=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,a=Ra(r),s=Math.min(t,n),o=e.borderSkipped,l=i||Hi(r);return{topLeft:nc(!l||o.top||o.left,a.topLeft,0,s),topRight:nc(!l||o.top||o.right,a.topRight,0,s),bottomLeft:nc(!l||o.bottom||o.left,a.bottomLeft,0,s),bottomRight:nc(!l||o.bottom||o.right,a.bottomRight,0,s)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function rc(e,t,n,i){const r=null===t,a=null===n,s=e&&!(r&&a)&&tc(e,i);return s&&(r||Lr(t,s.left,s.right))&&(a||Lr(n,s.top,s.bottom))}function ac(e,t){e.rect(t.x,t.y,t.w,t.h)}function sc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-i,s=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+a,h:e.h+s,radius:e.radius}}o(ec,"id","point"),o(ec,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(ec,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class oc extends qo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:a}=ic(this),s=(o=a.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Sa:ac;var o;e.save(),a.w===r.w&&a.h===r.h||(e.beginPath(),s(e,sc(a,t,r)),e.clip(),s(e,sc(r,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,sc(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return rc(this,e,t,n)}inXRange(e,t){return rc(this,e,null,t)}inYRange(e,t){return rc(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}o(oc,"id","bar"),o(oc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(oc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function lc(e,t,n,i){if(i)return;let r=t[e],a=n[e];return"angle"===e&&(r=kr(r),a=kr(a)),{property:e,start:r,end:a}}function cc(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function uc(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function dc(e,t){let n=[],i=!1;return Ui(e)?(i=!0,n=e):n=function(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,a=[];return t.segments.forEach(e=>{let{start:t,end:s}=e;s=cc(t,s,r);const o=r[t],l=r[s];null!==i?(a.push({x:o.x,y:i}),a.push({x:l.x,y:i})):null!==n&&(a.push({x:n,y:o.y}),a.push({x:n,y:l.y}))}),a}(e,t),n.length?new Ql({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function hc(e){return e&&!1!==e.fill}function pc(e,t,n){let i=e[t].fill;const r=[t];let a;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Gi(i))return i;if(a=e[i],!a)return!1;if(a.visible)return i;r.push(i),i=a.fill}return!1}function fc(e,t,n){const i=function(e){const t=e.options,n=t.fill;let i=Vi(n&&n.target,n);void 0===i&&(i=!!t.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(e);if(Hi(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Gi(r)&&Math.floor(r)===r?function(e,t,n,i){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=i)return!1;return n}(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function mc(e,t,n){const i=[];for(let r=0;r<n.length;r++){const a=n[r],{first:s,last:o,point:l}=gc(a,t,"x");if(!(!l||s&&o))if(s)i.unshift(l);else if(e.push(l),!o)break}e.push(...i)}function gc(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],a=e.segments,s=e.points;let o=!1,l=!1;for(let c=0;c<a.length;c++){const e=a[c],t=s[e.start][n],i=s[e.end][n];if(Lr(r,t,i)){o=r===t,l=r===i;break}}return{first:o,last:l,point:i}}class vc{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:r,radius:a}=this;return t=t||{start:0,end:cr},e.arc(i,r,a,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function xc(e){const{chart:t,fill:n,line:i}=e;if(Gi(n))return function(e,t){const n=e.getDatasetMeta(t),i=n&&e.isDatasetVisible(t);return i?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:i}=e,r=[],a=i.segments,s=i.points,o=function(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const e=i[r];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(dc({x:null,y:t.bottom},i));for(let l=0;l<a.length;l++){const e=a[l];for(let t=e.start;t<=e.end;t++)mc(r,s[t],o)}return new Ql({points:r,options:{}})}(e);if("shape"===n)return!0;const r=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,a=i.reverse?t.max:t.min,s=function(e,t,n){let i;return i="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:Hi(e)?e.value:t.getBaseValue(),i}(n,t,a),o=[];if(i.grid.circular){const e=t.getPointPositionForValue(0,a);return new vc({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(s)})}for(let l=0;l<r;++l)o.push(t.getPointPositionForValue(l,s));return o}(e);return function(e){const{scale:t={},fill:n}=e,i=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:Hi(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Gi(i)){const e=t.isHorizontal();return{x:e?i:null,y:e?null:i}}return null}(e)}(e);return r instanceof vc?r:dc(r,i)}function yc(e,t,n){const i=xc(t),{chart:r,index:a,line:s,scale:o,axis:l}=t,c=s.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:p=d}=u||{},f=r.getDatasetMeta(a),m=ks(r,f);i&&s.points.length&&(ga(e,n),function(e,t){const{line:n,target:i,above:r,below:a,area:s,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let u=a;a!==r&&("x"===c?(bc(e,i,s.top),wc(e,{line:n,target:i,color:r,scale:o,property:c,clip:l}),e.restore(),e.save(),bc(e,i,s.bottom)):"y"===c&&(_c(e,i,s.left),wc(e,{line:n,target:i,color:a,scale:o,property:c,clip:l}),e.restore(),e.save(),_c(e,i,s.right),u=r));wc(e,{line:n,target:i,color:u,scale:o,property:c,clip:l}),e.restore()}(e,{line:s,target:i,above:h,below:p,area:n,scale:o,axis:l,clip:m}),va(e))}function bc(e,t,n){const{segments:i,points:r}=t;let a=!0,s=!1;e.beginPath();for(const o of i){const{start:i,end:l}=o,c=r[i],u=r[cc(i,l,r)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,o,{move:s}),s?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function _c(e,t,n){const{segments:i,points:r}=t;let a=!0,s=!1;e.beginPath();for(const o of i){const{start:i,end:l}=o,c=r[i],u=r[cc(i,l,r)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),s=!!t.pathSegment(e,o,{move:s}),s?e.closePath():e.lineTo(n,u.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function wc(e,t){const{line:n,target:i,property:r,color:a,scale:s,clip:o}=t,l=function(e,t,n){const i=e.segments,r=e.points,a=t.points,s=[];for(const o of i){let{start:e,end:i}=o;i=cc(e,i,r);const l=lc(n,r[e],r[i],o.loop);if(!t.segments){s.push({source:o,target:l,start:r[e],end:r[i]});continue}const c=Ss(t,l);for(const t of c){const e=lc(n,a[t.start],a[t.end],t.loop),i=ws(o,r,e);for(const r of i)s.push({source:r,target:t,start:{[n]:uc(l,e,"start",Math.max)},end:{[n]:uc(l,e,"end",Math.min)}})}}return s}(n,i,r);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:t=a}={}}=c,l=!0!==i;e.save(),e.fillStyle=t,Sc(e,s,o,l&&lc(r,d,h)),e.beginPath();const p=!!n.pathSegment(e,c);let f;if(l){p?e.closePath():Mc(e,i,h,r);const t=!!i.pathSegment(e,u,{move:p,reverse:!0});f=p&&t,f||Mc(e,i,d,r)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function Sc(e,t,n,i){const r=t.chart.chartArea,{property:a,start:s,end:o}=i||{};if("x"===a||"y"===a){let t,i,l,c;"x"===a?(t=s,i=r.top,l=o,c=r.bottom):(t=r.left,i=s,l=r.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),i=Math.max(i,n.top),c=Math.min(c,n.bottom)),e.rect(t,i,l-t,c-i),e.clip()}}function Mc(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var Ac={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let a,s,o,l;for(s=0;s<i;++s)a=e.getDatasetMeta(s),o=a.dataset,l=null,o&&o.options&&o instanceof Ql&&(l={visible:e.isDatasetVisible(s),index:s,fill:fc(o,s,i),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=l,r.push(l);for(s=0;s<i;++s)l=r[s],l&&!1!==l.fill&&(l.fill=pc(r,s,n.propagate))},beforeDraw(e,t,n){const i="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let s=r.length-1;s>=0;--s){const t=r[s].$filler;t&&(t.line.updateControlPoints(a,t.axis),i&&t.fill&&yc(e.ctx,t,a))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const t=i[r].$filler;hc(t)&&yc(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;hc(i)&&"beforeDatasetDraw"===n.drawTime&&yc(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Cc=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class Ec extends qo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Yi(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=Pa(n.font),r=i.size,a=this._computeTitleHeight(),{boxWidth:s,itemHeight:o}=Cc(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,r,s,o)+10):(c=this.maxHeight,l=this._fitCols(a,i,s,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:a,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+s;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,p)=>{const f=n+t/2+r.measureText(e.text).width;(0===p||l[l.length-1]+f+2*s>a)&&(u+=c,l[l.length-(p>0?0:1)]=0,h+=c,d++),o[p]={left:0,top:h,row:d,width:f,height:i},l[l.length-1]+=f+s}),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:a,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let u=s,d=0,h=0,p=0,f=0;return this.legendItems.forEach((e,a)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,i,r){const a=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+i.measureText(r).width}(i,e,t,n),s=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=kc(t,n));return i}(r,i,t.lineHeight);return{itemWidth:a,itemHeight:s}}(n,t,r,e,i);a>0&&h+g+2*s>c&&(u+=d+s,l.push({width:d,height:h}),p+=d+s,f++,d=h=0),o[a]={left:p,top:h,col:f,width:m,height:g},d=Math.max(d,m),h+=g+s}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,a=vs(r,this.left,this.width);if(this.isHorizontal()){let r=0,s=Ur(n,this.left+i,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,s=Ur(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+e+i,o.left=a.leftForLtr(a.x(s),o.width),s+=o.width+i}else{let r=0,s=Ur(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,s=Ur(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),o.top=s,o.left+=this.left+i,o.left=a.leftForLtr(a.x(o.left),o.width),s+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;ga(e,this),this._draw(),va(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:a}=e,s=la.color,o=vs(e.rtl,this.left,this.width),l=Pa(a.font),{padding:c}=a,u=l.size,d=u/2;let h;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:m}=Cc(a,u),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:Ur(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:Ur(r,this.top+v+c,this.bottom-t[0].height),line:0},xs(this.ctx,e.textDirection);const x=m+c;this.legendItems.forEach((y,b)=>{i.strokeStyle=y.fontColor,i.fillStyle=y.fontColor;const _=i.measureText(y.text).width,w=o.textAlign(y.textAlign||(y.textAlign=a.textAlign)),S=p+d+_;let M=h.x,A=h.y;o.setWidth(this.width),g?b>0&&M+S+c>this.right&&(A=h.y+=x,h.line++,M=h.x=Ur(r,this.left+c,this.right-n[h.line])):b>0&&A+x>this.bottom&&(M=h.x=M+t[h.line].width+c,h.line++,A=h.y=Ur(r,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;i.save();const r=Vi(n.lineWidth,1);if(i.fillStyle=Vi(n.fillStyle,s),i.lineCap=Vi(n.lineCap,"butt"),i.lineDashOffset=Vi(n.lineDashOffset,0),i.lineJoin=Vi(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Vi(n.strokeStyle,s),i.setLineDash(Vi(n.lineDash,[])),a.usePointStyle){const s={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,p/2);fa(i,s,l,t+d,a.pointStyleWidth&&p)}else{const a=t+Math.max((u-f)/2,0),s=o.leftForLtr(e,p),l=Ra(n.borderRadius);i.beginPath(),Object.values(l).some(e=>0!==e)?Sa(i,{x:s,y:a,w:p,h:f,radius:l}):i.rect(s,a,p,f),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(M),A,y),M=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(w,M+p+d,g?M+S:this.right,e.rtl),function(e,t,n){wa(i,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(M),A,y),g)h.x+=S+c;else if("string"!==typeof y.text){const e=l.lineHeight;h.y+=kc(y,e)+c}else h.y+=x}),ys(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Pa(t.font),i=La(t.padding);if(!t.display)return;const r=vs(e.rtl,this.left,this.width),a=this.ctx,s=t.position,o=n.size/2,l=i.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=Ur(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+Ur(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Ur(s,u,u+d);a.textAlign=r.textAlign(Or(s)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,wa(a,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=Pa(e.font),n=La(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Lr(e,this.left,this.right)&&Lr(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Lr(e,i.left,i.left+i.width)&&Lr(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Yi(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Yi(t.onHover,[e,n,this],this)}else n&&Yi(t.onClick,[e,n,this],this)}}function kc(e,t){return t*(e.text?e.text.length:0)}var Tc={id:"legend",_element:Ec,start(e,t,n){const i=e.legend=new Ec({ctx:e.ctx,options:n,chart:e});Po.configure(e,i,n),Po.addBox(e,i)},stop(e){Po.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Po.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:a,useBorderRadius:s,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=La(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:s&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Rc extends qo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=Ui(n.text)?n.text.length:1;this._padding=La(n.padding);const r=i*Pa(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:a}=this,s=a.align;let o,l,c,u=0;return this.isHorizontal()?(l=Ur(s,n,r),c=t+e,o=r-n):("left"===a.position?(l=n+e,c=Ur(s,i,t),u=-.5*lr):(l=r-e,c=Ur(s,t,i),u=.5*lr),o=i-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Pa(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:s,rotation:o}=this._drawArgs(i);wa(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:o,textAlign:Or(t.align),textBaseline:"middle",translation:[r,a]})}}var Lc={id:"title",_element:Rc,start(e,t,n){!function(e,t){const n=new Rc({ctx:e.ctx,options:t,chart:e});Po.configure(e,n,t),Po.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Po.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Po.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Pc={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++a}}if(0===a||0===i.size)return!1;const s=[...i].reduce((e,t)=>e+t)/i.size;return{x:s,y:r/a}},nearest(e,t){if(!e.length)return!1;let n,i,r,a=t.x,s=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=Cr(t,i.getCenterPoint());e<o&&(o=e,r=i)}}if(r){const e=r.tooltipPosition();a=e.x,s=e.y}return{x:a,y:s}}};function Bc(e,t){return t&&(Ui(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Nc(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Dc(e,t){const{element:n,datasetIndex:i,index:r}=t,a=e.getDatasetMeta(i).controller,{label:s,value:o}=a.getLabelAndValue(r);return{chart:e,label:s,parsed:a.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:o,dataset:a.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Ic(e,t){const n=e.chart.ctx,{body:i,footer:r,title:a}=e,{boxWidth:s,boxHeight:o}=t,l=Pa(t.bodyFont),c=Pa(t.titleFont),u=Pa(t.footerFont),d=a.length,h=r.length,p=i.length,f=La(t.padding);let m=f.height,g=0,v=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){m+=p*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let x=0;const y=function(e){g=Math.max(g,n.measureText(e).width+x)};return n.save(),n.font=c.string,Ji(e.title,y),n.font=l.string,Ji(e.beforeBody.concat(e.afterBody),y),x=t.displayColors?s+2+t.boxPadding:0,Ji(i,e=>{Ji(e.before,y),Ji(e.lines,y),Ji(e.after,y)}),x=0,n.font=u.string,Ji(e.footer,y),n.restore(),g+=f.width,{width:g,height:m}}function jc(e,t,n,i){const{x:r,width:a}=n,{width:s,chartArea:{left:o,right:l}}=e;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=a/2?c="left":r>=s-a/2&&(c="right"),function(e,t,n,i){const{x:r,width:a}=i,s=n.caretSize+n.caretPadding;return"left"===e&&r+a+s>t.width||"right"===e&&r-a-s<0||void 0}(c,e,t,n)&&(c="center"),c}function zc(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||jc(e,t,n,i),yAlign:i}}function Fc(e,t,n,i){const{caretSize:r,caretPadding:a,cornerRadius:s}=e,{xAlign:o,yAlign:l}=n,c=r+a,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Ra(s);let f=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o);const m=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(u,h)+r:"right"===o&&(f+=Math.max(d,p)+r),{x:Rr(f,0,i.width-t.width),y:Rr(m,0,i.height-t.height)}}function Oc(e,t,n){const i=La(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function Uc(e){return Bc([],Nc(e))}function Hc(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Gc={beforeTitle:zi,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:zi,beforeBody:zi,beforeLabel:zi,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Oi(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:zi,afterBody:zi,beforeFooter:zi,footer:zi,afterFooter:zi};function Wc(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?Gc[t].call(n,i):r}class Vc extends qo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new Ns(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Na(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=Wc(n,"beforeTitle",this,e),r=Wc(n,"title",this,e),a=Wc(n,"afterTitle",this,e);let s=[];return s=Bc(s,Nc(i)),s=Bc(s,Nc(r)),s=Bc(s,Nc(a)),s}getBeforeBody(e,t){return Uc(Wc(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Ji(e,e=>{const t={before:[],lines:[],after:[]},r=Hc(n,e);Bc(t.before,Nc(Wc(r,"beforeLabel",this,e))),Bc(t.lines,Wc(r,"label",this,e)),Bc(t.after,Nc(Wc(r,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return Uc(Wc(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=Wc(n,"beforeFooter",this,e),r=Wc(n,"footer",this,e),a=Wc(n,"afterFooter",this,e);let s=[];return s=Bc(s,Nc(i)),s=Bc(s,Nc(r)),s=Bc(s,Nc(a)),s}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],a=[];let s,o,l=[];for(s=0,o=t.length;s<o;++s)l.push(Dc(this.chart,t[s]));return e.filter&&(l=l.filter((t,i,r)=>e.filter(t,i,r,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),Ji(l,t=>{const n=Hc(e.callbacks,t);i.push(Wc(n,"labelColor",this,t)),r.push(Wc(n,"labelPointStyle",this,t)),a.push(Wc(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,a=[];if(i.length){const e=Pc[n.position].call(this,i,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=Ic(this,n),s=Object.assign({},e,t),o=zc(this.chart,n,s),l=Fc(n,s,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:a,cornerRadius:s}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Ra(s),{x:d,y:h}=e,{width:p,height:f}=t;let m,g,v,x,y,b;return"center"===r?(y=h+f/2,"left"===i?(m=d,g=m-a,x=y+a,b=y-a):(m=d+p,g=m+a,x=y-a,b=y+a),v=m):(g="left"===i?d+Math.max(o,c)+a:"right"===i?d+p-Math.max(l,u)-a:this.caretX,"top"===r?(x=h,y=x-a,m=g-a,v=g+a):(x=h+f,y=x+a,m=g+a,v=g-a),b=x),{x1:m,x2:g,x3:v,y1:x,y2:y,y3:b}}drawTitle(e,t,n){const i=this.title,r=i.length;let a,s,o;if(r){const l=vs(n.rtl,this.x,this.width);for(e.x=Oc(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=Pa(n.titleFont),s=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,o=0;o<r;++o)t.fillText(i[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s,o+1===r&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,t,n,i,r){const a=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=Pa(r.bodyFont),u=Oc(this,"left",r),d=i.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,p=t.y+h;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=i.leftForLtr(d,l)+l/2,c=p+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,pa(e,t,n,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,pa(e,t,n,c)}else{e.lineWidth=Hi(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=i.leftForLtr(d,l),n=i.leftForLtr(i.xPlus(d,1),l-2),s=Ra(a.borderRadius);Object.values(s).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Sa(e,{x:t,y:p,w:l,h:o,radius:s}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Sa(e,{x:n,y:p+1,w:l-2,h:o-2,radius:s}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,p,l,o),e.strokeRect(t,p,l,o),e.fillStyle=a.backgroundColor,e.fillRect(n,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:a,displayColors:s,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=Pa(n.bodyFont);let d=u.lineHeight,h=0;const p=vs(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+d/2),e.y+=d+r},m=p.textAlign(a);let g,v,x,y,b,_,w;for(t.textAlign=a,t.textBaseline="middle",t.font=u.string,e.x=Oc(this,m,n),t.fillStyle=n.bodyColor,Ji(this.beforeBody,f),h=s&&"right"!==m?"center"===a?l/2+c:l+2+c:0,y=0,_=i.length;y<_;++y){for(g=i[y],v=this.labelTextColors[y],t.fillStyle=v,Ji(g.before,f),x=g.lines,s&&x.length&&(this._drawColorBox(t,e,y,p,n),d=Math.max(u.lineHeight,o)),b=0,w=x.length;b<w;++b)f(x[b]),d=u.lineHeight;Ji(g.after,f)}h=0,d=u.lineHeight,Ji(this.afterBody,f),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let a,s;if(r){const o=vs(n.rtl,this.x,this.width);for(e.x=Oc(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",a=Pa(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,s=0;s<r;++s)t.fillText(i[s],o.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:a}=this,{x:s,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Ra(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(s+u,o),"top"===a&&this.drawCaret(e,t,n,i),t.lineTo(s+l-d,o),t.quadraticCurveTo(s+l,o,s+l,o+d),"center"===a&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(s+l,o+c-p),t.quadraticCurveTo(s+l,o+c,s+l-p,o+c),"bottom"===a&&this.drawCaret(e,t,n,i),t.lineTo(s+h,o+c),t.quadraticCurveTo(s,o+c,s,o+c-h),"center"===a&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(s,o+u),t.quadraticCurveTo(s,o,s+u,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Pc[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=Ic(this,e),s=Object.assign({},n,this._size),o=zc(t,e,s),l=Fc(e,s,o,t);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=La(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),xs(e,t.textDirection),r.y+=a.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),ys(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),r=!Ki(n,i),a=this._positionChanged(i,t);(r||a)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],a=this._getActiveElements(e,r,t,n),s=this._positionChanged(a,e),o=t||!Ki(a,r)||s;return o&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const a=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,a=Pc[r.position].call(this,e,t);return!1!==a&&(n!==a.x||i!==a.y)}}o(Vc,"positioners",Pc);var Xc={id:"tooltip",_element:Vc,positioners:Pc,afterInit(e,t,n){n&&(e.tooltip=new Vc({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Gc},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Yc(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function Jc(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Kc extends sl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Oi(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Rr(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Yc(n,e,Vi(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)i.push({value:a});return i}getLabelForValue(e){return Jc.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function qc(e,t){const n=[],{bounds:i,step:r,min:a,max:s,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=r||1,p=c-1,{min:f,max:m}=t,g=!Oi(a),v=!Oi(s),x=!Oi(l),y=(m-f)/(u+1);let b,_,w,S,M=yr((m-f)/p/h)*h;if(M<1e-14&&!g&&!v)return[{value:f},{value:m}];S=Math.ceil(m/M)-Math.floor(f/M),S>p&&(M=yr(S*M/p/h)*h),Oi(o)||(b=Math.pow(10,o),M=Math.ceil(M*b)/b),"ticks"===i?(_=Math.floor(f/M)*M,w=Math.ceil(m/M)*M):(_=f,w=m),g&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((s-a)/r,M/1e3)?(S=Math.round(Math.min((s-a)/M,c)),M=(s-a)/S,_=a,w=s):x?(_=g?a:_,w=v?s:w,S=l-1,M=(w-_)/S):(S=(w-_)/M,S=xr(S,Math.round(S),M/1e3)?Math.round(S):Math.ceil(S));const A=Math.max(Mr(M),Mr(_));b=Math.pow(10,Oi(o)?A:o),_=Math.round(_*b)/b,w=Math.round(w*b)/b;let C=0;for(g&&(d&&_!==a?(n.push({value:a}),_<a&&C++,xr(Math.round((_+C*M)*b)/b,a,Zc(a,y,e))&&C++):_<a&&C++);C<S;++C){const e=Math.round((_+C*M)*b)/b;if(v&&e>s)break;n.push({value:e})}return v&&d&&w!==s?n.length&&xr(n[n.length-1].value,s,Zc(s,y,e))?n[n.length-1].value=s:n.push({value:s}):v&&w!==s||n.push({value:w}),n}function Zc(e,t,n){let{horizontal:i,minRotation:r}=n;const a=wr(r),s=(i?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/s,o)}o(Kc,"id","category"),o(Kc,"defaults",{ticks:{callback:Jc}});class Qc extends sl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Oi(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const a=e=>i=t?i:e,s=e=>r=n?r:e;if(e){const e=vr(i),t=vr(r);e<0&&t<0?s(0):e>0&&t>0&&a(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);s(r+t),e||a(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=qc({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&_r(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return ea(e,this.chart.options.locale,this.options.ticks.format)}}class $c extends Qc{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gi(e)?e:0,this.max=Gi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=wr(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}o($c,"id","linear"),o($c,"defaults",{ticks:{callback:na.formatters.numeric}});const eu=e=>Math.floor(gr(e)),tu=(e,t)=>Math.pow(10,eu(e)+t);function nu(e){return 1===e/Math.pow(10,eu(e))}function iu(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function ru(e,t){let{min:n,max:i}=t;n=Wi(e.min,n);const r=[],a=eu(n);let s=function(e,t){let n=eu(t-e);for(;iu(e,t,n)>10;)n++;for(;iu(e,t,n)<10;)n--;return Math.min(n,eu(e))}(n,i),o=s<0?Math.pow(10,Math.abs(s)):1;const l=Math.pow(10,s),c=a>s?Math.pow(10,a):0,u=Math.round((n-c)*o)/o,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,s)),p=Wi(e.min,Math.round((c+d+h*Math.pow(10,s))*o)/o);for(;p<i;)r.push({value:p,major:nu(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),p=Math.round((c+d+h*Math.pow(10,s))*o)/o;const f=Wi(e.max,p);return r.push({value:f,major:nu(f),significand:h}),r}class au extends sl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Qc.prototype.parse.apply(this,[e,t]);if(0!==n)return Gi(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gi(e)?Math.max(0,e):null,this.max=Gi(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Gi(this._userMin)&&(this.min=e===tu(this.min,0)?tu(this.min,-1):tu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,a=e=>i=t?i:e;n===i&&(n<=0?(r(1),a(10)):(r(tu(n,-1)),a(tu(i,1)))),n<=0&&r(tu(i,-1)),i<=0&&a(tu(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=ru({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&_r(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":ea(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=gr(e),this._valueRange=gr(this.max)-gr(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(gr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function su(e){const t=e.ticks;if(t.display&&e.display){const e=La(t.backdropPadding);return Vi(t.font&&t.font.size,la.font.size)+e.height}return 0}function ou(e,t,n){return n=Ui(n)?n:[n],{w:ua(e,t.string,n),h:n.length*t.lineHeight}}function lu(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function cu(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],a=e._pointLabels.length,s=e.options.pointLabels,o=s.centerPointLabels?lr/a:0;for(let l=0;l<a;l++){const a=s.setContext(e.getPointLabelContext(l));r[l]=a.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],o),u=Pa(a.font),d=ou(e.ctx,u,e._pointLabels[l]);i[l]=d;const h=kr(e.getIndexAngle(l)+o),p=Math.round(Sr(h));uu(n,t,h,lu(p,c.x,d.w,0,180),lu(p,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,a=e.options,{centerPointLabels:s,display:o}=a.pointLabels,l={extra:su(a)/2,additionalAngle:s?lr/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=du(e,u,l);i.push(r),"auto"===o&&(r.visible=hu(r,c),r.visible&&(c=r))}return i}(e,i,r)}function uu(e,t,n,i,r){const a=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let o=0,l=0;i.start<t.l?(o=(t.l-i.start)/a,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/a,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/s,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function du(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:a,padding:s,size:o}=n,l=e.getPointPosition(t,i+r+s,a),c=Math.round(Sr(kr(l.angle+pr))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function hu(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:a}=e;return!(ma({x:n,y:i},t)||ma({x:n,y:a},t)||ma({x:r,y:i},t)||ma({x:r,y:a},t))}function pu(e,t,n){const{left:i,top:r,right:a,bottom:s}=n,{backdropColor:o}=t;if(!Oi(o)){const n=Ra(t.borderRadius),l=La(t.backdropPadding);e.fillStyle=o;const c=i-l.left,u=r-l.top,d=a-i+l.width,h=s-r+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),Sa(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function fu(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,cr);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let a=1;a<i;a++)n=e.getPointPosition(a,t),r.lineTo(n.x,n.y)}}o(au,"id","logarithmic"),o(au,"defaults",{ticks:{callback:na.formatters.logarithmic,major:{enabled:!0}}});class mu extends Qc{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=La(su(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Gi(e)&&!isNaN(e)?e:0,this.max=Gi(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/su(this.options))}generateTickLabels(e){Qc.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=Yi(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?cu(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return kr(e*(cr/(this._pointLabels.length||1))+wr(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Oi(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Oi(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Na(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-pr+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),fu(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,a=this._pointLabels.length;let s,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const a=i.setContext(e.getPointLabelContext(r));pu(n,a,t);const s=Pa(a.font),{x:o,y:l,textAlign:c}=t;wa(n,e._pointLabels[r],o,l+s.lineHeight/2,s,{color:a.color,textAlign:c,textBaseline:"middle"})}}(this,a),i.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),s=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const a=e.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!i||!o||!l||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=l,a.setLineDash(r.dash||[]),a.lineDashOffset=r.dashOffset,a.beginPath(),fu(e,n,s,i),a.closePath(),a.stroke(),a.restore())}(this,s,o,a,l)}}),n.display){for(e.save(),s=a-1;s>=0;s--){const i=n.setContext(this.getPointLabelContext(s)),{color:r,lineWidth:a}=i;a&&r&&(e.lineWidth=a,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(s,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((i,s)=>{if(0===s&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(s)),l=Pa(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[s].value),o.showLabelBackdrop){e.font=l.string,a=e.measureText(i.label).width,e.fillStyle=o.backdropColor;const t=La(o.backdropPadding);e.fillRect(-a/2-t.left,-r-l.size/2-t.top,a+t.width,l.size+t.height)}wa(e,i.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}o(mu,"id","radialLinear"),o(mu,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:na.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),o(mu,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(mu,"descriptors",{angleLines:{_fallback:"grid"}});const gu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vu=Object.keys(gu);function xu(e,t){return e-t}function yu(e,t){if(Oi(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:a}=e._parseOpts;let s=t;return"function"===typeof i&&(s=i(s)),Gi(s)||(s="string"===typeof i?n.parse(s,i):n.parse(s)),null===s?null:(r&&(s="week"!==r||!br(a)&&!0!==a?n.startOf(s,r):n.startOf(s,"isoWeek",a)),+s)}function bu(e,t,n,i){const r=vu.length;for(let a=vu.indexOf(e);a<r-1;++a){const e=gu[vu[a]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return vu[a]}return vu[r-1]}function _u(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=Pr(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function wu(e,t,n){const i=[],r={},a=t.length;let s,o;for(s=0;s<a;++s)o=t[s],r[o]=s,i.push({value:o,major:!1});return 0!==a&&n?function(e,t,n,i){const r=e._adapter,a=+r.startOf(t[0].value,i),s=t[t.length-1].value;let o,l;for(o=a;o<=s;o=+r.add(o,1,i))l=n[o],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class Su extends sl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new ho(e.adapters.date);i.init(t),er(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:yu(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:a,maxDefined:s}=this.getUserBounds();function o(e){a||isNaN(e.min)||(i=Math.min(i,e.min)),s||isNaN(e.max)||(r=Math.max(r,e.max))}a&&s||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),i=Gi(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Gi(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,a=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?bu(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let a=vu.length-1;a>=vu.indexOf(n);a--){const n=vu[a];if(gu[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return vu[n?vu.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=vu.indexOf(e)+1,n=vu.length;t<n;++t)if(gu[vu[t]].common)return vu[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&a.reverse(),wu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;i=Rr(i,0,a),r=Rr(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,a=r.unit||bu(r.minUnit,t,n,this._getLabelCapacity(t)),s=Vi(i.ticks.stepSize,1),o="week"===a&&r.isoWeekday,l=br(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":a),e.diff(n,t,a)>1e5*s)throw new Error(t+" and "+n+" are too far apart with stepSize of "+s+" "+a);const p="data"===i.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,s,a),d++)_u(c,u,p);return u!==n&&"ticks"!==i.bounds&&1!==d||_u(c,u,p),Object.keys(c).sort(xu).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,a=r.ticks.callback;if(a)return Yi(a,[e,t,n],this);const s=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&s[o],u=l&&s[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,i||(h?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=wr(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),a=Math.sin(i),s=this._resolveTickFontOptions(0).size;return{w:n*r+s*a,h:n*a+s*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,wu(this,[e],this._majorUnit),i),a=this._getLabelSize(r),s=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(yu(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jr(e.sort(xu))}}function Mu(e,t,n){let i,r,a,s,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=Br(e,"pos",t)),({pos:i,time:a}=e[o]),({pos:r,time:s}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=Br(e,"time",t)),({time:i,pos:a}=e[o]),({time:r,pos:s}=e[l]));const c=r-i;return c?a+(s-a)*(t-i)/c:a}o(Su,"id","time"),o(Su,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Au extends Su{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Mu(t,this.min),this._tableRange=Mu(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let a,s,o,l,c;for(a=0,s=e.length;a<s;++a)l=e[a],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,s=i.length;a<s;++a)c=i[a+1],o=i[a-1],l=i[a],Math.round((c+o)/2)!==l&&r.push({time:l,pos:a/(s-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Mu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Mu(this._table,n*this._tableRange+this._minPos,!0)}}o(Au,"id","timeseries"),o(Au,"defaults",Su.defaults);const Cu=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Eu="label";function ku(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Tu(e,t){e.labels=t}function Ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eu;const i=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):c({},t)})}function Lu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eu;const n={labels:[],datasets:[]};return Tu(n,e.labels),Ru(n,e.datasets,t),n}function Pu(e,n){const{height:i=150,width:a=300,redraw:s=!1,datasetIdKey:o,type:l,data:u,options:d,plugins:h=[],fallbackContent:p,updateMode:f}=e,m=r(e,Cu),g=(0,t.useRef)(null),v=(0,t.useRef)(null),x=()=>{g.current&&(v.current=new jl(g.current,{type:l,data:Lu(u,o),options:d&&c({},d),plugins:h}),ku(n,v.current))},y=()=>{ku(n,null),v.current&&(v.current.destroy(),v.current=null)};return(0,t.useEffect)(()=>{!s&&v.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(v.current,d)},[s,d]),(0,t.useEffect)(()=>{!s&&v.current&&Tu(v.current.config.data,u.labels)},[s,u.labels]),(0,t.useEffect)(()=>{!s&&v.current&&u.datasets&&Ru(v.current.config.data,u.datasets,o)},[s,u.datasets]),(0,t.useEffect)(()=>{v.current&&(s?(y(),setTimeout(x)):v.current.update(f))},[s,d,u.labels,u.datasets,f]),(0,t.useEffect)(()=>{v.current&&(y(),setTimeout(x))},[l]),(0,t.useEffect)(()=>(x(),()=>y()),[]),t.createElement("canvas",c({ref:g,role:"img",height:i,width:a},m),p)}const Bu=(0,t.forwardRef)(Pu);function Nu(e,n){return jl.register(n),(0,t.forwardRef)((n,i)=>t.createElement(Bu,c(c({},n),{},{ref:i,type:e})))}const Du=Nu("line",ro),Iu="158",ju={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},zu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Fu=0,Ou=1,Uu=2,Hu=3,Gu=0,Wu=1,Vu=2,Xu=3,Yu=0,Ju=1,Ku=2,qu=2,Zu=0,Qu=1,$u=2,ed=3,td=4,nd=5,id=100,rd=101,ad=102,sd=103,od=104,ld=200,cd=201,ud=202,dd=203,hd=204,pd=205,fd=206,md=207,gd=208,vd=209,xd=210,yd=211,bd=212,_d=213,wd=214,Sd=0,Md=1,Ad=2,Cd=3,Ed=4,kd=5,Td=6,Rd=7,Ld=0,Pd=1,Bd=2,Nd=0,Dd=1,Id=2,jd=3,zd=4,Fd=5,Od="attached",Ud="detached",Hd=300,Gd=301,Wd=302,Vd=303,Xd=304,Yd=306,Jd=1e3,Kd=1001,qd=1002,Zd=1003,Qd=1004,$d=1004,eh=1005,th=1005,nh=1006,ih=1007,rh=1007,ah=1008,sh=1008,oh=1009,lh=1010,ch=1011,uh=1012,dh=1013,hh=1014,ph=1015,fh=1016,mh=1017,gh=1018,vh=1020,xh=1021,yh=1023,bh=1024,_h=1025,wh=1026,Sh=1027,Mh=1028,Ah=1029,Ch=1030,Eh=1031,kh=1033,Th=33776,Rh=33777,Lh=33778,Ph=33779,Bh=35840,Nh=35841,Dh=35842,Ih=35843,jh=36196,zh=37492,Fh=37496,Oh=37808,Uh=37809,Hh=37810,Gh=37811,Wh=37812,Vh=37813,Xh=37814,Yh=37815,Jh=37816,Kh=37817,qh=37818,Zh=37819,Qh=37820,$h=37821,ep=36492,tp=36494,np=36495,ip=36283,rp=36284,ap=36285,sp=36286,op=2200,lp=2201,cp=2202,up=2300,dp=2301,hp=2302,pp=2400,fp=2401,mp=2402,gp=2500,vp=2501,xp=0,yp=1,bp=2,_p=3e3,wp=3001,Sp=3200,Mp=3201,Ap=0,Cp=1,Ep="",kp="srgb",Tp="srgb-linear",Rp="display-p3",Lp="display-p3-linear",Pp="linear",Bp="srgb",Np="rec709",Dp="p3",Ip=0,jp=7680,zp=7681,Fp=7682,Op=7683,Up=34055,Hp=34056,Gp=5386,Wp=512,Vp=513,Xp=514,Yp=515,Jp=516,Kp=517,qp=518,Zp=519,Qp=512,$p=513,ef=514,tf=515,nf=516,rf=517,af=518,sf=519,of=35044,lf=35048,cf=35040,uf=35045,df=35049,hf=35041,pf=35046,ff=35050,mf=35042,gf="100",vf="300 es",xf=1035,yf=2e3,bf=2001;class _f{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const wf=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Sf=1234567;const Mf=Math.PI/180,Af=180/Math.PI;function Cf(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(wf[255&e]+wf[e>>8&255]+wf[e>>16&255]+wf[e>>24&255]+"-"+wf[255&t]+wf[t>>8&255]+"-"+wf[t>>16&15|64]+wf[t>>24&255]+"-"+wf[63&n|128]+wf[n>>8&255]+"-"+wf[n>>16&255]+wf[n>>24&255]+wf[255&i]+wf[i>>8&255]+wf[i>>16&255]+wf[i>>24&255]).toLowerCase()}function Ef(e,t,n){return Math.max(t,Math.min(n,e))}function kf(e,t){return(e%t+t)%t}function Tf(e,t,n){return(1-n)*e+n*t}function Rf(e){return 0===(e&e-1)&&0!==e}function Lf(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Pf(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Bf(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Nf(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Df={DEG2RAD:Mf,RAD2DEG:Af,generateUUID:Cf,clamp:Ef,euclideanModulo:kf,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Tf,damp:function(e,t,n,i){return Tf(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(kf(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Sf=e);let t=Sf+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Mf},radToDeg:function(e){return e*Af},isPowerOfTwo:Rf,ceilPowerOfTwo:Lf,floorPowerOfTwo:Pf,setQuaternionFromProperEuler:function(e,t,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+i)/2),u=s((t+i)/2),d=a((t-i)/2),h=s((t-i)/2),p=a((i-t)/2),f=s((i-t)/2);switch(r){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Nf,denormalize:Bf};class If{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;If.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ef(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jf{constructor(e,t,n,i,r,a,s,o,l){jf.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l)}set(e,t,n,i,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],x=i[4],y=i[7],b=i[2],_=i[5],w=i[8];return r[0]=a*f+s*v+o*b,r[3]=a*m+s*x+o*_,r[6]=a*g+s*y+o*w,r[1]=l*f+c*v+u*b,r[4]=l*m+c*x+u*_,r[7]=l*g+c*y+u*w,r[2]=d*f+h*v+p*b,r[5]=d*m+h*x+p*_,r[8]=d*g+h*y+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*r*c+n*s*o+i*r*l-i*a*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,d=s*o-c*r,h=l*r-a*o,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(s*n-i*a)*f,e[3]=d*f,e[4]=(c*t-i*o)*f,e[5]=(i*r-s*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(zf.makeScale(e,t)),this}rotate(e){return this.premultiply(zf.makeRotation(-e)),this}translate(e,t){return this.premultiply(zf.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const zf=new jf;function Ff(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Of={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Uf(e,t){return new Of[e](t)}function Hf(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Gf(){const e=Hf("canvas");return e.style.display="block",e}const Wf={};function Vf(e){e in Wf||(Wf[e]=!0,console.warn(e))}const Xf=(new jf).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Yf=(new jf).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Jf={[Tp]:{transfer:Pp,primaries:Np,toReference:e=>e,fromReference:e=>e},[kp]:{transfer:Bp,primaries:Np,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Lp]:{transfer:Pp,primaries:Dp,toReference:e=>e.applyMatrix3(Yf),fromReference:e=>e.applyMatrix3(Xf)},[Rp]:{transfer:Bp,primaries:Dp,toReference:e=>e.convertSRGBToLinear().applyMatrix3(Yf),fromReference:e=>e.applyMatrix3(Xf).convertLinearToSRGB()}},Kf=new Set([Tp,Lp]),qf={enabled:!0,_workingColorSpace:Tp,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Kf.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=Jf[t].toReference;return(0,Jf[n].fromReference)(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Jf[e].primaries},getTransfer:function(e){return e===Ep?Pp:Jf[e].transfer}};function Zf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Qf(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let $f;class em{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===$f&&($f=Hf("canvas")),$f.width=e.width,$f.height=e.height;const n=$f.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=$f}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Hf("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Zf(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Zf(t[e]/255)):t[e]=Zf(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let tm=0;class nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:tm++}),this.uuid=Cf(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(im(i[t].image)):e.push(im(i[t]))}else e=im(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function im(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?em.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rm=0;class am extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:am.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:am.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kd,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kd,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nh,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ah,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yh,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:oh,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:am.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ep;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rm++}),this.uuid=Cf(),this.name="",this.source=new nm(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new If(0,0),this.repeat=new If(1,1),this.center=new If(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jf,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(Vf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===wp?kp:Ep),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Hd)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jd:e.x=e.x-Math.floor(e.x);break;case Kd:e.x=e.x<0?0:1;break;case qd:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Jd:e.y=e.y-Math.floor(e.y);break;case Kd:e.y=e.y<0?0:1;break;case qd:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Vf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===kp?wp:_p}set encoding(e){Vf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===wp?kp:Ep}}am.DEFAULT_IMAGE=null,am.DEFAULT_MAPPING=Hd,am.DEFAULT_ANISOTROPY=1;class sm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;sm.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,x=(c+d)/4,y=(u+f)/4,b=(p+m)/4;return e>o&&e>v?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=x/n,r=y/n):o>v?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=x/i,r=b/i):v<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=y/r,i=b/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class om extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sm(0,0,e,t),this.scissorTest=!1,this.viewport=new sm(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(Vf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===wp?kp:Ep),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nh,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new am(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new nm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class lm extends om{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class cm extends am{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Zd,this.minFilter=Zd,this.wrapR=Kd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class um extends lm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new cm(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class dm extends am{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Zd,this.minFilter=Zd,this.wrapR=Kd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hm extends lm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new dm(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class pm extends lm{constructor(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;const t=this.texture;this.texture=[];for(let n=0;n<e;n++)this.texture[n]=t.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class fm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,s){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[a+0],h=r[a+1],p=r[a+2],f=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==d||l!==h||c!==p){let e=1-s;const t=o*d+l*h+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+p*r,u=u*e+f*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[a],d=r[a+1],h=r[a+2],p=r[a+3];return e[t]=s*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-s*h,e[t+2]=l*p+c*h+s*d-o*u,e[t+3]=c*p-s*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),d=o(n/2),h=o(i/2),p=o(r/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ef(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+i*l-r*o,this._y=i*c+a*o+r*s-n*l,this._z=r*c+a*l+n*o-i*s,this._w=a*c-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class mm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;mm.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(vm.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(vm.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*i-s*n),c=2*(s*t-r*i),u=2*(r*n-a*t);return this.x=t+o*l+a*u-s*c,this.y=n+o*c+s*l-r*u,this.z=i+o*u+r*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return gm.copy(this).projectOnVector(e),this.sub(gm)}reflect(e){return this.sub(gm.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ef(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gm=new mm,vm=new fm;class xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(bm.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(bm.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=bm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,bm):bm.fromBufferAttribute(i,t),bm.applyMatrix4(e.matrixWorld),this.expandByPoint(bm);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),_m.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),_m.copy(n.boundingBox)),_m.applyMatrix4(e.matrixWorld),this.union(_m)}const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,bm),bm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(km),Tm.subVectors(this.max,km),wm.subVectors(e.a,km),Sm.subVectors(e.b,km),Mm.subVectors(e.c,km),Am.subVectors(Sm,wm),Cm.subVectors(Mm,Sm),Em.subVectors(wm,Mm);let t=[0,-Am.z,Am.y,0,-Cm.z,Cm.y,0,-Em.z,Em.y,Am.z,0,-Am.x,Cm.z,0,-Cm.x,Em.z,0,-Em.x,-Am.y,Am.x,0,-Cm.y,Cm.x,0,-Em.y,Em.x,0];return!!Pm(t,wm,Sm,Mm,Tm)&&(t=[1,0,0,0,1,0,0,0,1],!!Pm(t,wm,Sm,Mm,Tm)&&(Rm.crossVectors(Am,Cm),t=[Rm.x,Rm.y,Rm.z],Pm(t,wm,Sm,Mm,Tm)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bm).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(bm).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ym[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ym[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ym[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ym[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ym[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ym[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ym[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ym[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ym)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ym=[new mm,new mm,new mm,new mm,new mm,new mm,new mm,new mm],bm=new mm,_m=new xm,wm=new mm,Sm=new mm,Mm=new mm,Am=new mm,Cm=new mm,Em=new mm,km=new mm,Tm=new mm,Rm=new mm,Lm=new mm;function Pm(e,t,n,i,r){for(let a=0,s=e.length-3;a<=s;a+=3){Lm.fromArray(e,a);const s=r.x*Math.abs(Lm.x)+r.y*Math.abs(Lm.y)+r.z*Math.abs(Lm.z),o=t.dot(Lm),l=n.dot(Lm),c=i.dot(Lm);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Bm=new xm,Nm=new mm,Dm=new mm;class Im{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Bm.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Nm.subVectors(e,this.center);const t=Nm.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Nm,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Dm.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Nm.copy(e.center).add(Dm)),this.expandByPoint(Nm.copy(e.center).sub(Dm))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const jm=new mm,zm=new mm,Fm=new mm,Om=new mm,Um=new mm,Hm=new mm,Gm=new mm;class Wm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jm)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=jm.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jm.copy(this.origin).addScaledVector(this.direction,t),jm.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){zm.copy(e).add(t).multiplyScalar(.5),Fm.copy(t).sub(e).normalize(),Om.copy(this.origin).sub(zm);const r=.5*e.distanceTo(t),a=-this.direction.dot(Fm),s=Om.dot(this.direction),o=-Om.dot(Fm),l=Om.lengthSq(),c=Math.abs(1-a*a);let u,d,h,p;if(c>0)if(u=a*o-s,d=a*s-o,p=r*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*s)+d*(a*u+d+2*o)+l}else d=r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-a*r+s)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(a*r+s)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=a>0?-r:r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(zm).addScaledVector(Fm,d),h}intersectSphere(e,t){jm.subVectors(e.center,this.origin);const n=jm.dot(this.direction),i=jm.dot(jm)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||s>i?null:((s>n||n!==n)&&(n=s),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,jm)}intersectTriangle(e,t,n,i,r){Um.subVectors(t,e),Hm.subVectors(n,e),Gm.crossVectors(Um,Hm);let a,s=this.direction.dot(Gm);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Om.subVectors(this.origin,e);const o=a*this.direction.dot(Hm.crossVectors(Om,Hm));if(o<0)return null;const l=a*this.direction.dot(Um.cross(Om));if(l<0)return null;if(o+l>s)return null;const c=-a*Om.dot(Gm);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Vm{constructor(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m){Vm.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m)}set(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Vm).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Xm.setFromMatrixColumn(e,0).length(),r=1/Xm.setFromMatrixColumn(e,1).length(),a=1/Xm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*s,t[4]=-a*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Jm,e,Km)}lookAt(e,t,n){const i=this.elements;return Qm.subVectors(e,t),0===Qm.lengthSq()&&(Qm.z=1),Qm.normalize(),qm.crossVectors(n,Qm),0===qm.lengthSq()&&(1===Math.abs(n.z)?Qm.x+=1e-4:Qm.z+=1e-4,Qm.normalize(),qm.crossVectors(n,Qm)),qm.normalize(),Zm.crossVectors(Qm,qm),i[0]=qm.x,i[4]=Zm.x,i[8]=Qm.x,i[1]=qm.y,i[5]=Zm.y,i[9]=Qm.y,i[2]=qm.z,i[6]=Zm.z,i[10]=Qm.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],x=n[7],y=n[11],b=n[15],_=i[0],w=i[4],S=i[8],M=i[12],A=i[1],C=i[5],E=i[9],k=i[13],T=i[2],R=i[6],L=i[10],P=i[14],B=i[3],N=i[7],D=i[11],I=i[15];return r[0]=a*_+s*A+o*T+l*B,r[4]=a*w+s*C+o*R+l*N,r[8]=a*S+s*E+o*L+l*D,r[12]=a*M+s*k+o*P+l*I,r[1]=c*_+u*A+d*T+h*B,r[5]=c*w+u*C+d*R+h*N,r[9]=c*S+u*E+d*L+h*D,r[13]=c*M+u*k+d*P+h*I,r[2]=p*_+f*A+m*T+g*B,r[6]=p*w+f*C+m*R+g*N,r[10]=p*S+f*E+m*L+g*D,r[14]=p*M+f*k+m*P+g*I,r[3]=v*_+x*A+y*T+b*B,r[7]=v*w+x*C+y*R+b*N,r[11]=v*S+x*E+y*L+b*D,r[15]=v*M+x*k+y*P+b*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*o*u-i*l*u-r*s*d+n*l*d+i*s*h-n*o*h)+e[7]*(+t*o*h-t*l*d+r*a*d-i*a*h+i*l*c-r*o*c)+e[11]*(+t*l*u-t*s*h-r*a*u+n*a*h+r*s*c-n*l*c)+e[15]*(-i*s*c-t*o*u+t*s*d+i*a*u-n*a*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*o*h-s*m*h-u*o*g+s*d*g,x=p*d*l-c*m*l-p*o*h+a*m*h+c*o*g-a*d*g,y=c*f*l-p*u*l+p*s*h-a*f*h-c*s*g+a*u*g,b=p*u*o-c*f*o-p*s*d+a*f*d+c*s*m-a*u*m,_=t*v+n*x+i*y+r*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(f*d*r-u*m*r-f*i*h+n*m*h+u*i*g-n*d*g)*w,e[2]=(s*m*r-f*o*r+f*i*l-n*m*l-s*i*g+n*o*g)*w,e[3]=(u*o*r-s*d*r-u*i*l+n*d*l+s*i*h-n*o*h)*w,e[4]=x*w,e[5]=(c*m*r-p*d*r+p*i*h-t*m*h-c*i*g+t*d*g)*w,e[6]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*g-t*o*g)*w,e[7]=(a*d*r-c*o*r+c*i*l-t*d*l-a*i*h+t*o*h)*w,e[8]=y*w,e[9]=(p*u*r-c*f*r-p*n*h+t*f*h+c*n*g-t*u*g)*w,e[10]=(a*f*r-p*s*r+p*n*l-t*f*l-a*n*g+t*s*g)*w,e[11]=(c*s*r-a*u*r-c*n*l+t*u*l+a*n*h-t*s*h)*w,e[12]=b*w,e[13]=(c*f*i-p*u*i+p*n*d-t*f*d-c*n*m+t*u*m)*w,e[14]=(p*s*i-a*f*i-p*n*o+t*f*o+a*n*m-t*s*m)*w,e[15]=(a*u*i-c*s*i+c*n*o-t*u*o-a*n*d+t*s*d)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,c*s+n,c*o-i*a,0,l*o-i*s,c*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,u=s+s,d=r*l,h=r*c,p=r*u,f=a*c,m=a*u,g=s*u,v=o*l,x=o*c,y=o*u,b=n.x,_=n.y,w=n.z;return i[0]=(1-(f+g))*b,i[1]=(h+y)*b,i[2]=(p-x)*b,i[3]=0,i[4]=(h-y)*_,i[5]=(1-(d+g))*_,i[6]=(m+v)*_,i[7]=0,i[8]=(p+x)*w,i[9]=(m-v)*w,i[10]=(1-(d+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Xm.set(i[0],i[1],i[2]).length();const a=Xm.set(i[4],i[5],i[6]).length(),s=Xm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Ym.copy(this);const o=1/r,l=1/a,c=1/s;return Ym.elements[0]*=o,Ym.elements[1]*=o,Ym.elements[2]*=o,Ym.elements[4]*=l,Ym.elements[5]*=l,Ym.elements[6]*=l,Ym.elements[8]*=c,Ym.elements[9]*=c,Ym.elements[10]*=c,t.setFromRotationMatrix(Ym),n.x=r,n.y=a,n.z=s,this}makePerspective(e,t,n,i,r,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yf;const o=this.elements,l=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,p;if(s===yf)h=-(a+r)/(a-r),p=-2*a*r/(a-r);else{if(s!==bf)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-a/(a-r),p=-a*r/(a-r)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yf;const o=this.elements,l=1/(t-e),c=1/(n-i),u=1/(a-r),d=(t+e)*l,h=(n+i)*c;let p,f;if(s===yf)p=(a+r)*u,f=-2*u;else{if(s!==bf)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=r*u,f=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=f,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Xm=new mm,Ym=new Vm,Jm=new mm(0,0,0),Km=new mm(1,1,1),qm=new mm,Zm=new mm,Qm=new mm,$m=new Vm,eg=new fm;class tg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tg.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(Ef(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ef(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ef(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-Ef(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Ef(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Ef(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return $m.makeRotationFromQuaternion(e),this.setFromRotationMatrix($m,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return eg.setFromEuler(this),this.setFromQuaternion(eg,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}tg.DEFAULT_ORDER="XYZ";class ng{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let ig=0;const rg=new mm,ag=new fm,sg=new Vm,og=new mm,lg=new mm,cg=new mm,ug=new fm,dg=new mm(1,0,0),hg=new mm(0,1,0),pg=new mm(0,0,1),fg={type:"added"},mg={type:"removed"};class gg extends _f{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ig++}),this.uuid=Cf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gg.DEFAULT_UP.clone();const e=new mm,t=new tg,n=new fm,i=new mm(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Vm},normalMatrix:{value:new jf}}),this.matrix=new Vm,this.matrixWorld=new Vm,this.matrixAutoUpdate=gg.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=gg.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ng,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ag.setFromAxisAngle(e,t),this.quaternion.multiply(ag),this}rotateOnWorldAxis(e,t){return ag.setFromAxisAngle(e,t),this.quaternion.premultiply(ag),this}rotateX(e){return this.rotateOnAxis(dg,e)}rotateY(e){return this.rotateOnAxis(hg,e)}rotateZ(e){return this.rotateOnAxis(pg,e)}translateOnAxis(e,t){return rg.copy(e).applyQuaternion(this.quaternion),this.position.add(rg.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(dg,e)}translateY(e){return this.translateOnAxis(hg,e)}translateZ(e){return this.translateOnAxis(pg,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(sg.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?og.copy(e):og.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),lg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sg.lookAt(lg,og,this.up):sg.lookAt(og,lg,this.up),this.quaternion.setFromRotationMatrix(sg),i&&(sg.extractRotation(i.matrixWorld),ag.setFromRotationMatrix(sg),this.quaternion.premultiply(ag.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(fg)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(mg)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),sg.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),sg.multiply(e.parent.matrixWorld)),e.applyMatrix4(sg),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(e,t);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lg,e,cg),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lg,ug,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}gg.DEFAULT_UP=new mm(0,1,0),gg.DEFAULT_MATRIX_AUTO_UPDATE=!0,gg.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const vg=new mm,xg=new mm,yg=new mm,bg=new mm,_g=new mm,wg=new mm,Sg=new mm,Mg=new mm,Ag=new mm,Cg=new mm;let Eg=!1;class kg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mm;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),vg.subVectors(e,t),i.cross(vg);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){vg.subVectors(i,t),xg.subVectors(n,t),yg.subVectors(e,t);const a=vg.dot(vg),s=vg.dot(xg),o=vg.dot(yg),l=xg.dot(xg),c=xg.dot(yg),u=a*l-s*s;if(0===u)return r.set(-2,-1,-1);const d=1/u,h=(l*o-s*c)*d,p=(a*c-s*o)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,bg),bg.x>=0&&bg.y>=0&&bg.x+bg.y<=1}static getUV(e,t,n,i,r,a,s,o){return!1===Eg&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Eg=!0),this.getInterpolation(e,t,n,i,r,a,s,o)}static getInterpolation(e,t,n,i,r,a,s,o){return this.getBarycoord(e,t,n,i,bg),o.setScalar(0),o.addScaledVector(r,bg.x),o.addScaledVector(a,bg.y),o.addScaledVector(s,bg.z),o}static isFrontFacing(e,t,n,i){return vg.subVectors(n,t),xg.subVectors(e,t),vg.cross(xg).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vg.subVectors(this.c,this.b),xg.subVectors(this.a,this.b),.5*vg.cross(xg).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return kg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return kg.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return!1===Eg&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Eg=!0),kg.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}getInterpolation(e,t,n,i,r){return kg.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return kg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return kg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,s;_g.subVectors(i,n),wg.subVectors(r,n),Mg.subVectors(e,n);const o=_g.dot(Mg),l=wg.dot(Mg);if(o<=0&&l<=0)return t.copy(n);Ag.subVectors(e,i);const c=_g.dot(Ag),u=wg.dot(Ag);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(_g,a);Cg.subVectors(e,r);const h=_g.dot(Cg),p=wg.dot(Cg);if(p>=0&&h<=p)return t.copy(r);const f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(wg,s);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return Sg.subVectors(r,i),s=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(Sg,s);const g=1/(m+f+d);return a=f*g,s=d*g,t.copy(n).addScaledVector(_g,a).addScaledVector(wg,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Tg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rg={h:0,s:0,l:0},Lg={h:0,s:0,l:0};function Pg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Bg{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kp;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,qf.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qf.workingColorSpace;return this.r=e,this.g=t,this.b=n,qf.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qf.workingColorSpace;if(e=kf(e,1),t=Ef(t,0,1),n=Ef(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Pg(r,i,e+1/3),this.g=Pg(r,i,e),this.b=Pg(r,i,e-1/3)}return qf.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kp;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=t[1],s=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kp;const n=Tg[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zf(e.r),this.g=Zf(e.g),this.b=Zf(e.b),this}copyLinearToSRGB(e){return this.r=Qf(e.r),this.g=Qf(e.g),this.b=Qf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kp;return qf.fromWorkingColorSpace(Ng.copy(this),e),65536*Math.round(Ef(255*Ng.r,0,255))+256*Math.round(Ef(255*Ng.g,0,255))+Math.round(Ef(255*Ng.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kp;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qf.workingColorSpace;qf.fromWorkingColorSpace(Ng.copy(this),t);const n=Ng.r,i=Ng.g,r=Ng.b,a=Math.max(n,i,r),s=Math.min(n,i,r);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qf.workingColorSpace;return qf.fromWorkingColorSpace(Ng.copy(this),t),e.r=Ng.r,e.g=Ng.g,e.b=Ng.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kp;qf.fromWorkingColorSpace(Ng.copy(this),e);const t=Ng.r,n=Ng.g,i=Ng.b;return e!==kp?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(Rg),this.setHSL(Rg.h+e,Rg.s+t,Rg.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Rg),e.getHSL(Lg);const n=Tf(Rg.h,Lg.h,t),i=Tf(Rg.s,Lg.s,t),r=Tf(Rg.l,Lg.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ng=new Bg;Bg.NAMES=Tg;let Dg=0;class Ig extends _f{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Dg++}),this.uuid=Cf(),this.name="",this.type="Material",this.blending=Qu,this.side=Yu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=hd,this.blendDst=pd,this.blendEquation=id,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bg(0,0,0),this.blendAlpha=0,this.depthFunc=Cd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Zp,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jp,this.stencilZFail=jp,this.stencilZPass=jp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Qu&&(n.blending=this.blending),this.side!==Yu&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==hd&&(n.blendSrc=this.blendSrc),this.blendDst!==pd&&(n.blendDst=this.blendDst),this.blendEquation!==id&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Cd&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Zp&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==jp&&(n.stencilFail=this.stencilFail),this.stencilZFail!==jp&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==jp&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class jg extends Ig{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ld,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zg=Fg();function Fg(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function Og(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ef(e,-65504,65504),zg.floatView[0]=e;const t=zg.uint32View[0],n=t>>23&511;return zg.baseTable[n]+((8388607&t)>>zg.shiftTable[n])}function Ug(e){const t=e>>10;return zg.uint32View[0]=zg.mantissaTable[zg.offsetTable[t]+(1023&e)]+zg.exponentTable[t],zg.floatView[0]}const Hg={toHalfFloat:Og,fromHalfFloat:Ug},Gg=new mm,Wg=new If;class Vg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=of,this.updateRange={offset:0,count:-1},this.gpuType=ph,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Wg.fromBufferAttribute(this,t),Wg.applyMatrix3(e),this.setXY(t,Wg.x,Wg.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Gg.fromBufferAttribute(this,t),Gg.applyMatrix3(e),this.setXYZ(t,Gg.x,Gg.y,Gg.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Gg.fromBufferAttribute(this,t),Gg.applyMatrix4(e),this.setXYZ(t,Gg.x,Gg.y,Gg.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Gg.fromBufferAttribute(this,t),Gg.applyNormalMatrix(e),this.setXYZ(t,Gg.x,Gg.y,Gg.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Gg.fromBufferAttribute(this,t),Gg.transformDirection(e),this.setXYZ(t,Gg.x,Gg.y,Gg.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Bf(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Nf(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Bf(t,this.array)),t}setX(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Bf(t,this.array)),t}setY(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Bf(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Bf(t,this.array)),t}setW(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array),i=Nf(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array),i=Nf(i,this.array),r=Nf(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==of&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class Xg extends Vg{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Yg extends Vg{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Jg extends Vg{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Kg extends Vg{constructor(e,t,n){super(new Int16Array(e),t,n)}}class qg extends Vg{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Zg extends Vg{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Qg extends Vg{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class $g extends Vg{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Ug(this.array[e*this.itemSize]);return this.normalized&&(t=Bf(t,this.array)),t}setX(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize]=Og(t),this}getY(e){let t=Ug(this.array[e*this.itemSize+1]);return this.normalized&&(t=Bf(t,this.array)),t}setY(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize+1]=Og(t),this}getZ(e){let t=Ug(this.array[e*this.itemSize+2]);return this.normalized&&(t=Bf(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize+2]=Og(t),this}getW(e){let t=Ug(this.array[e*this.itemSize+3]);return this.normalized&&(t=Bf(t,this.array)),t}setW(e,t){return this.normalized&&(t=Nf(t,this.array)),this.array[e*this.itemSize+3]=Og(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array)),this.array[e+0]=Og(t),this.array[e+1]=Og(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array),i=Nf(i,this.array)),this.array[e+0]=Og(t),this.array[e+1]=Og(n),this.array[e+2]=Og(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array),i=Nf(i,this.array),r=Nf(r,this.array)),this.array[e+0]=Og(t),this.array[e+1]=Og(n),this.array[e+2]=Og(i),this.array[e+3]=Og(r),this}}class ev extends Vg{constructor(e,t,n){super(new Float32Array(e),t,n)}}class tv extends Vg{constructor(e,t,n){super(new Float64Array(e),t,n)}}let nv=0;const iv=new Vm,rv=new gg,av=new mm,sv=new xm,ov=new xm,lv=new mm;class cv extends _f{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nv++}),this.uuid=Cf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ff(e)?Qg:qg)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new jf).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return iv.makeRotationFromQuaternion(e),this.applyMatrix4(iv),this}rotateX(e){return iv.makeRotationX(e),this.applyMatrix4(iv),this}rotateY(e){return iv.makeRotationY(e),this.applyMatrix4(iv),this}rotateZ(e){return iv.makeRotationZ(e),this.applyMatrix4(iv),this}translate(e,t,n){return iv.makeTranslation(e,t,n),this.applyMatrix4(iv),this}scale(e,t,n){return iv.makeScale(e,t,n),this.applyMatrix4(iv),this}lookAt(e){return rv.lookAt(e),rv.updateMatrix(),this.applyMatrix4(rv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(av).negate(),this.translate(av.x,av.y,av.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ev(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new xm);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new mm(-1/0,-1/0,-1/0),new mm(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];sv.setFromBufferAttribute(e),this.morphTargetsRelative?(lv.addVectors(this.boundingBox.min,sv.min),this.boundingBox.expandByPoint(lv),lv.addVectors(this.boundingBox.max,sv.max),this.boundingBox.expandByPoint(lv)):(this.boundingBox.expandByPoint(sv.min),this.boundingBox.expandByPoint(sv.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Im);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new mm,1/0);if(e){const n=this.boundingSphere.center;if(sv.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];ov.setFromBufferAttribute(n),this.morphTargetsRelative?(lv.addVectors(sv.min,ov.min),sv.expandByPoint(lv),lv.addVectors(sv.max,ov.max),sv.expandByPoint(lv)):(sv.expandByPoint(ov.min),sv.expandByPoint(ov.max))}sv.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)lv.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(lv));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)lv.fromBufferAttribute(a,t),s&&(av.fromBufferAttribute(e,t),lv.add(av)),i=Math.max(i,n.distanceToSquared(lv))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Vg(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let A=0;A<s;A++)l[A]=new mm,c[A]=new mm;const u=new mm,d=new mm,h=new mm,p=new If,f=new If,m=new If,g=new mm,v=new mm;function x(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(r),v.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let A=0,C=y.length;A<C;++A){const e=y[A],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)x(n[i+0],n[i+1],n[i+2])}const b=new mm,_=new mm,w=new mm,S=new mm;function M(e){w.fromArray(r,3*e),S.copy(w);const t=l[e];b.copy(t),b.sub(w.multiplyScalar(w.dot(t))).normalize(),_.crossVectors(S,t);const n=_.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let A=0,C=y.length;A<C;++A){const e=y[A],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)M(n[i+0]),M(n[i+1]),M(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Vg(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new mm,r=new mm,a=new mm,s=new mm,o=new mm,l=new mm,c=new mm,u=new mm;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)lv.fromBufferAttribute(e,t),lv.normalize(),e.setXYZ(t,lv.x,lv.y,lv.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)a[o++]=n[s++]}return new Vg(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new cv,n=this.index.array,i=this.attributes;for(const s in i){const r=e(i[s],n);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const i=[],a=r[s];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);i.push(r)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const uv=new Vm,dv=new Wm,hv=new Im,pv=new mm,fv=new mm,mv=new mm,gv=new mm,vv=new mm,xv=new mm,yv=new If,bv=new If,_v=new If,wv=new mm,Sv=new mm,Mv=new mm,Av=new mm,Cv=new mm;class Ev extends gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jg;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){xv.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],o=r[n];0!==i&&(vv.fromBufferAttribute(o,e),a?xv.addScaledVector(vv,i):xv.addScaledVector(vv.sub(t),i))}t.add(xv)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),hv.copy(n.boundingSphere),hv.applyMatrix4(r),dv.copy(e.ray).recast(e.near),!1===hv.containsPoint(dv.origin)){if(null===dv.intersectSphere(hv,pv))return;if(dv.origin.distanceToSquared(pv)>(e.far-e.near)**2)return}uv.copy(r).invert(),dv.copy(e.ray).applyMatrix4(uv),null!==n.boundingBox&&!1===dv.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,dv)}}_computeIntersections(e,t,n){let i;const r=this.geometry,a=this.material,s=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,d=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const r=d[p],o=a[r.materialIndex];for(let a=Math.max(r.start,h.start),d=Math.min(s.count,Math.min(r.start+r.count,h.start+h.count));a<d;a+=3){i=kv(this,o,e,n,l,c,u,s.getX(a),s.getX(a+1),s.getX(a+2)),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);r<o;r+=3){i=kv(this,a,e,n,l,c,u,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const r=d[p],s=a[r.materialIndex];for(let a=Math.max(r.start,h.start),d=Math.min(o.count,Math.min(r.start+r.count,h.start+h.count));a<d;a+=3){i=kv(this,s,e,n,l,c,u,a,a+1,a+2),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);r<s;r+=3){i=kv(this,a,e,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function kv(e,t,n,i,r,a,s,o,l,c){e.getVertexPosition(o,fv),e.getVertexPosition(l,mv),e.getVertexPosition(c,gv);const u=function(e,t,n,i,r,a,s,o){let l;if(l=t.side===Ju?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,t.side===Yu,o),null===l)return null;Cv.copy(o),Cv.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Cv);return c<n.near||c>n.far?null:{distance:c,point:Cv.clone(),object:e}}(e,t,n,i,fv,mv,gv,Av);if(u){r&&(yv.fromBufferAttribute(r,o),bv.fromBufferAttribute(r,l),_v.fromBufferAttribute(r,c),u.uv=kg.getInterpolation(Av,fv,mv,gv,yv,bv,_v,new If)),a&&(yv.fromBufferAttribute(a,o),bv.fromBufferAttribute(a,l),_v.fromBufferAttribute(a,c),u.uv1=kg.getInterpolation(Av,fv,mv,gv,yv,bv,_v,new If),u.uv2=u.uv1),s&&(wv.fromBufferAttribute(s,o),Sv.fromBufferAttribute(s,l),Mv.fromBufferAttribute(s,c),u.normal=kg.getInterpolation(Av,fv,mv,gv,wv,Sv,Mv,new mm),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new mm,materialIndex:0};kg.getNormal(fv,mv,gv,e.normal),u.face=e}return u}class Tv extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,i,r,a,p,f,m,g,v){const x=a/m,y=p/g,b=a/2,_=p/2,w=f/2,S=m+1,M=g+1;let A=0,C=0;const E=new mm;for(let s=0;s<M;s++){const a=s*y-_;for(let o=0;o<S;o++){const d=o*x-b;E[e]=d*i,E[t]=a*r,E[n]=w,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=f>0?1:-1,c.push(E.x,E.y,E.z),u.push(o/m),u.push(1-s/g),A+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=d+e+S*s,n=d+e+S*(s+1),i=d+(e+1)+S*(s+1),r=d+(e+1)+S*s;o.push(t,n,r),o.push(n,i,r),C+=6}s.addGroup(h,C,v),h+=C,d+=A}p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,i,a,2),p("x","z","y",1,-1,e,n,-t,i,a,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new ev(l,3)),this.setAttribute("normal",new ev(c,3)),this.setAttribute("uv",new ev(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tv(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Rv(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Lv(e){const t={};for(let n=0;n<e.length;n++){const i=Rv(e[n]);for(const e in i)t[e]=i[e]}return t}function Pv(e){return null===e.getRenderTarget()?e.outputColorSpace:qf.workingColorSpace}const Bv={clone:Rv,merge:Lv};class Nv extends Ig{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rv(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Dv extends gg{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vm,this.projectionMatrix=new Vm,this.projectionMatrixInverse=new Vm,this.coordinateSystem=yf}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Iv extends Dv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Af*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Mf*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Af*Math.atan(Math.tan(.5*Mf*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Mf*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/s,i*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const jv=-90;class zv extends gg{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Iv(jv,1,e,t);i.layers=this.layers,this.add(i);const r=new Iv(jv,1,e,t);r.layers=this.layers,this.add(r);const a=new Iv(jv,1,e,t);a.layers=this.layers,this.add(a);const s=new Iv(jv,1,e,t);s.layers=this.layers,this.add(s);const o=new Iv(jv,1,e,t);o.layers=this.layers,this.add(o);const l=new Iv(jv,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,a,s,o]=t;for(const l of t)this.remove(l);if(e===yf)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==bf)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,s,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,o),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Fv extends am{constructor(e,t,n,i,r,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Gd,n,i,r,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ov extends lm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(Vf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===wp?kp:Ep),this.texture=new Fv(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:nh}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Tv(5,5,5),s=new Nv({name:"CubemapFromEquirect",uniforms:Rv(n),vertexShader:i,fragmentShader:r,side:Ju,blending:Zu});s.uniforms.tEquirect.value=t;const o=new Ev(a,s),l=t.minFilter;t.minFilter===ah&&(t.minFilter=nh);return new zv(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}const Uv=new mm,Hv=new mm,Gv=new jf;class Wv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Uv.subVectors(n,t).cross(Hv.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Uv),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Gv.getNormalMatrix(e),i=this.coplanarPoint(Uv).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Vv=new Im,Xv=new mm;class Yv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wv,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wv,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Wv,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Wv,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Wv;this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yf;const n=this.planes,i=e.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],x=i[14],y=i[15];if(n[0].setComponents(o-r,d-l,m-h,y-g).normalize(),n[1].setComponents(o+r,d+l,m+h,y+g).normalize(),n[2].setComponents(o+a,d+c,m+p,y+v).normalize(),n[3].setComponents(o-a,d-c,m-p,y-v).normalize(),n[4].setComponents(o-s,d-u,m-f,y-x).normalize(),t===yf)n[5].setComponents(o+s,d+u,m+f,y+x).normalize();else{if(t!==bf)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,f,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Vv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Vv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Vv)}intersectsSprite(e){return Vv.center.set(0,0,0),Vv.radius=.7071067811865476,Vv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vv)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Xv.x=i.normal.x>0?e.max.x:e.min.x,Xv.y=i.normal.y>0?e.max.y:e.min.y,Xv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Xv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Jv(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Kv(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=i.get(t);void 0===a?i.set(t,function(t,i){const r=t.array,a=t.usage,s=e.createBuffer();let o;if(e.bindBuffer(i,s),e.bufferData(i,r,a),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=e.HALF_FLOAT}else o=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(!function(t,i,r){const a=i.array,s=i.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}(a.buffer,t,r),a.version=t.version)}}}class qv extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,s=Math.floor(n),o=Math.floor(i),l=s+1,c=o+1,u=e/s,d=t/o,h=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*d-a;for(let t=0;t<l;t++){const n=t*u-r;p.push(n,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new ev(p,3)),this.setAttribute("normal",new ev(f,3)),this.setAttribute("uv",new ev(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qv(e.width,e.height,e.widthSegments,e.heightSegments)}}const Zv={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Qv={common:{diffuse:{value:new Bg(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jf},alphaMap:{value:null},alphaMapTransform:{value:new jf},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jf}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jf}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jf}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jf},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jf},normalScale:{value:new If(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jf},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jf}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jf}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jf}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bg(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jf},alphaTest:{value:0},uvTransform:{value:new jf}},sprite:{diffuse:{value:new Bg(16777215)},opacity:{value:1},center:{value:new If(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jf},alphaMap:{value:null},alphaMapTransform:{value:new jf},alphaTest:{value:0}}},$v={basic:{uniforms:Lv([Qv.common,Qv.specularmap,Qv.envmap,Qv.aomap,Qv.lightmap,Qv.fog]),vertexShader:Zv.meshbasic_vert,fragmentShader:Zv.meshbasic_frag},lambert:{uniforms:Lv([Qv.common,Qv.specularmap,Qv.envmap,Qv.aomap,Qv.lightmap,Qv.emissivemap,Qv.bumpmap,Qv.normalmap,Qv.displacementmap,Qv.fog,Qv.lights,{emissive:{value:new Bg(0)}}]),vertexShader:Zv.meshlambert_vert,fragmentShader:Zv.meshlambert_frag},phong:{uniforms:Lv([Qv.common,Qv.specularmap,Qv.envmap,Qv.aomap,Qv.lightmap,Qv.emissivemap,Qv.bumpmap,Qv.normalmap,Qv.displacementmap,Qv.fog,Qv.lights,{emissive:{value:new Bg(0)},specular:{value:new Bg(1118481)},shininess:{value:30}}]),vertexShader:Zv.meshphong_vert,fragmentShader:Zv.meshphong_frag},standard:{uniforms:Lv([Qv.common,Qv.envmap,Qv.aomap,Qv.lightmap,Qv.emissivemap,Qv.bumpmap,Qv.normalmap,Qv.displacementmap,Qv.roughnessmap,Qv.metalnessmap,Qv.fog,Qv.lights,{emissive:{value:new Bg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zv.meshphysical_vert,fragmentShader:Zv.meshphysical_frag},toon:{uniforms:Lv([Qv.common,Qv.aomap,Qv.lightmap,Qv.emissivemap,Qv.bumpmap,Qv.normalmap,Qv.displacementmap,Qv.gradientmap,Qv.fog,Qv.lights,{emissive:{value:new Bg(0)}}]),vertexShader:Zv.meshtoon_vert,fragmentShader:Zv.meshtoon_frag},matcap:{uniforms:Lv([Qv.common,Qv.bumpmap,Qv.normalmap,Qv.displacementmap,Qv.fog,{matcap:{value:null}}]),vertexShader:Zv.meshmatcap_vert,fragmentShader:Zv.meshmatcap_frag},points:{uniforms:Lv([Qv.points,Qv.fog]),vertexShader:Zv.points_vert,fragmentShader:Zv.points_frag},dashed:{uniforms:Lv([Qv.common,Qv.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zv.linedashed_vert,fragmentShader:Zv.linedashed_frag},depth:{uniforms:Lv([Qv.common,Qv.displacementmap]),vertexShader:Zv.depth_vert,fragmentShader:Zv.depth_frag},normal:{uniforms:Lv([Qv.common,Qv.bumpmap,Qv.normalmap,Qv.displacementmap,{opacity:{value:1}}]),vertexShader:Zv.meshnormal_vert,fragmentShader:Zv.meshnormal_frag},sprite:{uniforms:Lv([Qv.sprite,Qv.fog]),vertexShader:Zv.sprite_vert,fragmentShader:Zv.sprite_frag},background:{uniforms:{uvTransform:{value:new jf},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Zv.background_vert,fragmentShader:Zv.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Zv.backgroundCube_vert,fragmentShader:Zv.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Zv.cube_vert,fragmentShader:Zv.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zv.equirect_vert,fragmentShader:Zv.equirect_frag},distanceRGBA:{uniforms:Lv([Qv.common,Qv.displacementmap,{referencePosition:{value:new mm},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zv.distanceRGBA_vert,fragmentShader:Zv.distanceRGBA_frag},shadow:{uniforms:Lv([Qv.lights,Qv.fog,{color:{value:new Bg(0)},opacity:{value:1}}]),vertexShader:Zv.shadow_vert,fragmentShader:Zv.shadow_frag}};$v.physical={uniforms:Lv([$v.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jf},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jf},clearcoatNormalScale:{value:new If(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jf},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jf},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jf},sheen:{value:0},sheenColor:{value:new Bg(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jf},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jf},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jf},transmissionSamplerSize:{value:new If},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jf},attenuationDistance:{value:0},attenuationColor:{value:new Bg(0)},specularColor:{value:new Bg(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jf},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jf},anisotropyVector:{value:new If},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jf}}]),vertexShader:Zv.meshphysical_vert,fragmentShader:Zv.meshphysical_frag};const ex={r:0,b:0,g:0};function tx(e,t,n,i,r,a,s){const o=new Bg(0);let l,c,u=!0===a?0:1,d=null,h=0,p=null;function f(t,n){t.getRGB(ex,Pv(e)),i.buffers.color.setClear(ex.r,ex.g,ex.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(a,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){v=(m.backgroundBlurriness>0?n:t).get(v)}null===v?f(o,u):v&&v.isColor&&(f(v,1),g=!0);const x=e.xr.getEnvironmentBlendMode();"additive"===x?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===x&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Yd)?(void 0===c&&(c=new Ev(new Tv(1,1,1),new Nv({name:"BackgroundCubeMaterial",uniforms:Rv($v.backgroundCube.uniforms),vertexShader:$v.backgroundCube.vertexShader,fragmentShader:$v.backgroundCube.fragmentShader,side:Ju,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=qf.getTransfer(v.colorSpace)!==Bp,d===v&&h===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Ev(new qv(2,2),new Nv({name:"BackgroundMaterial",uniforms:Rv($v.background.uniforms),vertexShader:$v.background.vertexShader,fragmentShader:$v.background.fragmentShader,side:Yu,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=qf.getTransfer(v.colorSpace)!==Bp,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),d===v&&h===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function nx(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,o={},l=p(null);let c=l,u=!1;function d(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],i=[];for(let a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function x(t,n,i,r,a,s,o){!0===o?e.vertexAttribIPointer(t,n,i,a,s):e.vertexAttribPointer(t,n,i,r,a,s)}function y(){b(),u=!0,c!==l&&(c=l,d(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,y,b){let _=!1;if(s){const t=function(t,n,r){const s=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=p(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=u);return u}(y,h,l);c!==t&&(c=t,d(c.object)),_=function(e,t,n,i){const r=c.attributes,a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const t=r[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==i}(r,y,h,b),_&&function(e,t,n,i){const r={},a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[l]=n,s++}}c.attributes=r,c.attributesNum=s,c.index=i}(r,y,h,b)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,_=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(_||u)&&(u=!1,function(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const a=c[t];if(a.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,p=!0===i.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||s.gpuType===dh);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)g(a.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,d,t,i*h,(c+l/a.locationSize*e)*h,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)g(a.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,d,t,l*h,l/a.locationSize*e*h,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}v()}(r,l,h,y),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function ix(e,t,n,i){const r=i.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,i){e.drawArrays(a,t,i),n.update(i,a,1)},this.renderInstances=function(i,s,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,i,s,o),n.update(s,a,o)}}function rx(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),x=d>0,y=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:y,floatVertexTextures:x&&y,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function ax(e){const t=this;let n=null,i=0,r=!1,a=!1;const s=new Wv,o=new jf,l={value:null,needsUpdate:!1};function c(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==a;++n,l+=4)s.copy(e[n]).applyMatrix4(r,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,o,u){const d=s.clippingPlanes,h=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(!r||null===d||0===d.length||a&&!p)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=a?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=c(d,o,t,u);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function sx(e){let t=new WeakMap;function n(e,t){return t===Vd?e.mapping=Gd:t===Xd&&(e.mapping=Wd),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping;if(a===Vd||a===Xd){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const s=new Ov(a.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class ox extends Dv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const lx=[.125,.215,.35,.446,.526,.582],cx=20,ux=new ox,dx=new Bg;let hx=null,px=0,fx=0;const mx=(1+Math.sqrt(5))/2,gx=1/mx,vx=[new mm(1,1,1),new mm(-1,1,1),new mm(1,1,-1),new mm(-1,1,-1),new mm(0,mx,gx),new mm(0,mx,-gx),new mm(gx,0,mx),new mm(-gx,0,mx),new mm(mx,gx,0),new mm(-mx,gx,0)];class xx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;hx=this._renderer.getRenderTarget(),px=this._renderer.getActiveCubeFace(),fx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=wx(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_x(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(hx,px,fx),e.scissorTest=!1,bx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Gd||e.mapping===Wd?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),hx=this._renderer.getRenderTarget(),px=this._renderer.getActiveCubeFace(),fx=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:nh,minFilter:nh,generateMipmaps:!1,type:fh,format:yh,colorSpace:Tp,depthBuffer:!1},i=yx(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=yx(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const a=e-4+1+lx.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);n.push(a);let o=1/a;s>e-4?o=lx[s-e+4-1]:0===s&&(o=0),i.push(o);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*h),x=new Float32Array(m*p*h),y=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,f*p*e),x.set(d,m*p*e);const r=[e,e,e,e,e,e];y.set(r,g*p*e)}const b=new cv;b.setAttribute("position",new Vg(v,f)),b.setAttribute("uv",new Vg(x,m)),b.setAttribute("faceIndex",new Vg(y,g)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(cx),r=new mm(0,1,0),a=new Nv({name:"SphericalGaussianBlur",defines:{n:cx,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Zu,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return i}_compileMaterial(e){const t=new Ev(this._lodPlanes[0],e);this._renderer.compile(t,ux)}_sceneToCubeUV(e,t,n,i){const r=new Iv(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(dx),o.toneMapping=Nd,o.autoClear=!1;const u=new jg({name:"PMREM.Background",side:Ju,depthWrite:!1,depthTest:!1}),d=new Ev(new Tv,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(dx),h=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(r.up.set(0,a[f],0),r.lookAt(s[f],0,0)):1===t?(r.up.set(0,0,a[f]),r.lookAt(0,s[f],0)):(r.up.set(0,a[f],0),r.lookAt(0,0,s[f]));const n=this._cubeSize;bx(i,t*n,f>2?n:0,n,n),o.setRenderTarget(i),h&&o.render(d,r),o.render(e,r)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Gd||e.mapping===Wd;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=wx()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_x());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new Ev(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;bx(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,ux)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=vx[(i-1)%vx.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Ev(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,p=r/h,f=isFinite(r)?1+Math.floor(3*p):cx;f>cx&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(cx));const m=[];let g=0;for(let y=0;y<cx;++y){const e=y/p,t=Math.exp(-e*e/2);m.push(t),0===y?g+=t:y<f&&(g+=2*t)}for(let y=0;y<m.length;y++)m[y]=m[y]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const x=this._sizeLods[i];bx(t,3*x*(i>v-4?i-v+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(t),o.render(c,ux)}}function yx(e,t,n){const i=new lm(e,t,n);return i.texture.mapping=Yd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function bx(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function _x(){return new Nv({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Zu,depthTest:!1,depthWrite:!1})}function wx(){return new Nv({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Zu,depthTest:!1,depthWrite:!1})}function Sx(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,s=a===Vd||a===Xd,o=a===Gd||a===Wd;if(s||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new xx(e)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(a)){null===n&&(n=new xx(e));const a=s?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,a),r.addEventListener("dispose",i),a.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Mx(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Ax(e,t,n,i){const r={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);for(const n in o.morphAttributes){const e=o.morphAttributes[n];for(let n=0,i=e.length;n<i;n++)t.remove(e[n])}o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const o=new(Ff(n)?Qg:qg)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const a in i)t.update(i[a],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const a in r){const n=r[a];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function Cx(e,t,n,i){const r=i.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(a,i,s,t*o),n.update(i,a,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,s,i*o,c),n.update(l,a,c)}}function Ex(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function kx(e,t){return e[0]-t[0]}function Tx(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Rx(e,t,n){const i={},r=new Float32Array(8),a=new WeakMap,s=new sm,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==h?h.length:0;let f=a.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==c.morphAttributes.position,x=void 0!==c.morphAttributes.normal,y=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],_=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===x&&(S=2),!0===y&&(S=3);let M=c.attributes.position.count*S,A=1;M>t.maxTextureSize&&(A=Math.ceil(M/t.maxTextureSize),M=t.maxTextureSize);const C=new Float32Array(M*A*4*p),E=new cm(C,M,A,p);E.type=ph,E.needsUpdate=!0;const k=4*S;for(let R=0;R<p;R++){const L=b[R],P=_[R],B=w[R],N=M*A*4*R;for(let D=0;D<L.count;D++){const I=D*k;!0===v&&(s.fromBufferAttribute(L,D),C[N+I+0]=s.x,C[N+I+1]=s.y,C[N+I+2]=s.z,C[N+I+3]=0),!0===x&&(s.fromBufferAttribute(P,D),C[N+I+4]=s.x,C[N+I+5]=s.y,C[N+I+6]=s.z,C[N+I+7]=0),!0===y&&(s.fromBufferAttribute(B,D),C[N+I+8]=s.x,C[N+I+9]=s.y,C[N+I+10]=s.z,C[N+I+11]=4===B.itemSize?s.w:1)}}function T(){E.dispose(),a.delete(c),c.removeEventListener("dispose",T)}f={count:p,texture:E,size:new If(M,A)},a.set(c,f),c.addEventListener("dispose",T)}let m=0;for(let j=0;j<d.length;j++)m+=d[j];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const z=void 0===d?0:d.length;let F=i[c.id];if(void 0===F||F.length!==z){F=[];for(let W=0;W<z;W++)F[W]=[W,0];i[c.id]=F}for(let V=0;V<z;V++){const X=F[V];X[0]=V,X[1]=d[V]}F.sort(Tx);for(let Y=0;Y<8;Y++)Y<z&&F[Y][1]?(o[Y][0]=F[Y][0],o[Y][1]=F[Y][1]):(o[Y][0]=Number.MAX_SAFE_INTEGER,o[Y][1]=0);o.sort(kx);const O=c.morphAttributes.position,U=c.morphAttributes.normal;let H=0;for(let J=0;J<8;J++){const K=o[J],q=K[0],Z=K[1];q!==Number.MAX_SAFE_INTEGER&&Z?(O&&c.getAttribute("morphTarget"+J)!==O[q]&&c.setAttribute("morphTarget"+J,O[q]),U&&c.getAttribute("morphNormal"+J)!==U[q]&&c.setAttribute("morphNormal"+J,U[q]),r[J]=Z,H+=Z):(O&&!0===c.hasAttribute("morphTarget"+J)&&c.deleteAttribute("morphTarget"+J),U&&!0===c.hasAttribute("morphNormal"+J)&&c.deleteAttribute("morphNormal"+J),r[J]=0)}const G=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(e,"morphTargetBaseInfluence",G),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function Lx(e,t,n,i){let r=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const o=i.render.frame,l=s.geometry,c=t.get(s,l);if(r.get(c)!==o&&(t.update(c),r.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),r.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,o))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==o&&(e.update(),r.set(e,o))}return c},dispose:function(){r=new WeakMap}}}const Px=new am,Bx=new cm,Nx=new dm,Dx=new Fv,Ix=[],jx=[],zx=new Float32Array(16),Fx=new Float32Array(9),Ox=new Float32Array(4);function Ux(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=Ix[r];if(void 0===a&&(a=new Float32Array(r),Ix[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function Hx(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Gx(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Wx(e,t){let n=jx[t];void 0===n&&(n=new Int32Array(t),jx[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Vx(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Xx(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hx(n,t))return;e.uniform2fv(this.addr,t),Gx(n,t)}}function Yx(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Hx(n,t))return;e.uniform3fv(this.addr,t),Gx(n,t)}}function Jx(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hx(n,t))return;e.uniform4fv(this.addr,t),Gx(n,t)}}function Kx(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Hx(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Gx(n,t)}else{if(Hx(n,i))return;Ox.set(i),e.uniformMatrix2fv(this.addr,!1,Ox),Gx(n,i)}}function qx(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Hx(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Gx(n,t)}else{if(Hx(n,i))return;Fx.set(i),e.uniformMatrix3fv(this.addr,!1,Fx),Gx(n,i)}}function Zx(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Hx(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Gx(n,t)}else{if(Hx(n,i))return;zx.set(i),e.uniformMatrix4fv(this.addr,!1,zx),Gx(n,i)}}function Qx(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function $x(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hx(n,t))return;e.uniform2iv(this.addr,t),Gx(n,t)}}function ey(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Hx(n,t))return;e.uniform3iv(this.addr,t),Gx(n,t)}}function ty(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hx(n,t))return;e.uniform4iv(this.addr,t),Gx(n,t)}}function ny(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function iy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hx(n,t))return;e.uniform2uiv(this.addr,t),Gx(n,t)}}function ry(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Hx(n,t))return;e.uniform3uiv(this.addr,t),Gx(n,t)}}function ay(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hx(n,t))return;e.uniform4uiv(this.addr,t),Gx(n,t)}}function sy(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||Px,r)}function oy(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Nx,r)}function ly(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Dx,r)}function cy(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Bx,r)}function uy(e,t){e.uniform1fv(this.addr,t)}function dy(e,t){const n=Ux(t,this.size,2);e.uniform2fv(this.addr,n)}function hy(e,t){const n=Ux(t,this.size,3);e.uniform3fv(this.addr,n)}function py(e,t){const n=Ux(t,this.size,4);e.uniform4fv(this.addr,n)}function fy(e,t){const n=Ux(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function my(e,t){const n=Ux(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function gy(e,t){const n=Ux(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function vy(e,t){e.uniform1iv(this.addr,t)}function xy(e,t){e.uniform2iv(this.addr,t)}function yy(e,t){e.uniform3iv(this.addr,t)}function by(e,t){e.uniform4iv(this.addr,t)}function _y(e,t){e.uniform1uiv(this.addr,t)}function wy(e,t){e.uniform2uiv(this.addr,t)}function Sy(e,t){e.uniform3uiv(this.addr,t)}function My(e,t){e.uniform4uiv(this.addr,t)}function Ay(e,t,n){const i=this.cache,r=t.length,a=Wx(n,r);Hx(i,a)||(e.uniform1iv(this.addr,a),Gx(i,a));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||Px,a[s])}function Cy(e,t,n){const i=this.cache,r=t.length,a=Wx(n,r);Hx(i,a)||(e.uniform1iv(this.addr,a),Gx(i,a));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||Nx,a[s])}function Ey(e,t,n){const i=this.cache,r=t.length,a=Wx(n,r);Hx(i,a)||(e.uniform1iv(this.addr,a),Gx(i,a));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||Dx,a[s])}function ky(e,t,n){const i=this.cache,r=t.length,a=Wx(n,r);Hx(i,a)||(e.uniform1iv(this.addr,a),Gx(i,a));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||Bx,a[s])}class Ty{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Vx;case 35664:return Xx;case 35665:return Yx;case 35666:return Jx;case 35674:return Kx;case 35675:return qx;case 35676:return Zx;case 5124:case 35670:return Qx;case 35667:case 35671:return $x;case 35668:case 35672:return ey;case 35669:case 35673:return ty;case 5125:return ny;case 36294:return iy;case 36295:return ry;case 36296:return ay;case 35678:case 36198:case 36298:case 36306:case 35682:return sy;case 35679:case 36299:case 36307:return oy;case 35680:case 36300:case 36308:case 36293:return ly;case 36289:case 36303:case 36311:case 36292:return cy}}(t.type)}}class Ry{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return uy;case 35664:return dy;case 35665:return hy;case 35666:return py;case 35674:return fy;case 35675:return my;case 35676:return gy;case 5124:case 35670:return vy;case 35667:case 35671:return xy;case 35668:case 35672:return yy;case 35669:case 35673:return by;case 5125:return _y;case 36294:return wy;case 36295:return Sy;case 36296:return My;case 35678:case 36198:case 36298:case 36306:case 35682:return Ay;case 35679:case 36299:case 36307:return Cy;case 35680:case 36300:case 36308:case 36293:return Ey;case 36289:case 36303:case 36311:case 36292:return ky}}(t.type)}}class Ly{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}}}const Py=/(\w+)(\])?(\[|\.)?/g;function By(e,t){e.seq.push(t),e.map[t.id]=t}function Ny(e,t,n){const i=e.name,r=i.length;for(Py.lastIndex=0;;){const a=Py.exec(i),s=Py.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){By(n,void 0===c?new Ty(o,e,t):new Ry(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new Ly(o),By(n,e)),n=e}}}class Dy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Ny(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function Iy(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let jy=0;function zy(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let s=r;s<a;s++){const e=s+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function Fy(e,t){const n=function(e){const t=qf.getPrimaries(qf.workingColorSpace),n=qf.getPrimaries(e);let i;switch(t===n?i="":t===Dp&&n===Np?i="LinearDisplayP3ToLinearSRGB":t===Np&&n===Dp&&(i="LinearSRGBToLinearDisplayP3"),e){case Tp:case Lp:return[i,"LinearTransferOETF"];case kp:case Rp:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[i,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function Oy(e,t){let n;switch(t){case Dd:n="Linear";break;case Id:n="Reinhard";break;case jd:n="OptimizedCineon";break;case zd:n="ACESFilmic";break;case Fd:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Uy(e){return""!==e}function Hy(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Gy(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Wy=/^[ \t]*#include +<([\w\d./]+)>/gm;function Vy(e){return e.replace(Wy,Yy)}const Xy=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Yy(e,t){let n=Zv[t];if(void 0===n){const e=Xy.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Zv[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Vy(n)}const Jy=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ky(e){return e.replace(Jy,qy)}function qy(e,t,n,i){let r="";for(let a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Zy(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Qy(e,t,n,i){const r=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Wu?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Vu?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Xu&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Gd:case Wd:t="ENVMAP_TYPE_CUBE";break;case Yd:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Wd&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Ld:t="ENVMAP_BLENDING_MULTIPLY";break;case Pd:t="ENVMAP_BLENDING_MIX";break;case Bd:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Uy).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),m=r.createProgram();let g,v,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Uy).join("\n"),g.length>0&&(g+="\n"),v=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(Uy).join("\n"),v.length>0&&(v+="\n")):(g=[Zy(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Uy).join("\n"),v=[p,Zy(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Nd?"#define TONE_MAPPING":"",n.toneMapping!==Nd?Zv.tonemapping_pars_fragment:"",n.toneMapping!==Nd?Oy("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Zv.colorspace_pars_fragment,Fy("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Uy).join("\n")),s=Vy(s),s=Hy(s,n),s=Gy(s,n),o=Vy(o),o=Hy(o,n),o=Gy(o,n),s=Ky(s),o=Ky(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===vf?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===vf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=x+g+s,b=x+v+o,_=Iy(r,r.VERTEX_SHADER,y),w=Iy(r,r.FRAGMENT_SHADER,b);function S(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(m).trim(),i=r.getShaderInfoLog(_).trim(),a=r.getShaderInfoLog(w).trim();let s=!0,o=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,m,_,w);else{const e=zy(r,_,"vertex"),t=zy(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==a||(o=!1);o&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:i,prefix:g},fragmentShader:{log:a,prefix:v}})}r.deleteShader(_),r.deleteShader(w),M=new Dy(r,m),A=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(r,m)}let M,A;r.attachShader(m,_),r.attachShader(m,w),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),this.getUniforms=function(){return void 0===M&&S(this),M},this.getAttributes=function(){return void 0===A&&S(this),A};let C=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===C&&(C=r.getProgramParameter(m,37297)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=jy++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}let $y=0;class eb{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new tb(e),t.set(e,n)),n}}class tb{constructor(e){this.id=$y++,this.code=e,this.usedTimes=0}}function nb(e,t,n,i,r,a,s){const o=new ng,l=new eb,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":"uv".concat(e)}return{getParameters:function(a,o,c,g,v){const x=g.fog,y=v.geometry,b=a.isMeshStandardMaterial?g.environment:null,_=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),w=_&&_.mapping===Yd?_.image.height:null,S=f[a.type];null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const M=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,A=void 0!==M?M.length:0;let C,E,k,T,R=0;if(void 0!==y.morphAttributes.position&&(R=1),void 0!==y.morphAttributes.normal&&(R=2),void 0!==y.morphAttributes.color&&(R=3),S){const e=$v[S];C=e.vertexShader,E=e.fragmentShader}else C=a.vertexShader,E=a.fragmentShader,l.update(a),k=l.getVertexShaderID(a),T=l.getFragmentShaderID(a);const L=e.getRenderTarget(),P=!0===v.isInstancedMesh,B=!!a.map,N=!!a.matcap,D=!!_,I=!!a.aoMap,j=!!a.lightMap,z=!!a.bumpMap,F=!!a.normalMap,O=!!a.displacementMap,U=!!a.emissiveMap,H=!!a.metalnessMap,G=!!a.roughnessMap,W=a.anisotropy>0,V=a.clearcoat>0,X=a.iridescence>0,Y=a.sheen>0,J=a.transmission>0,K=W&&!!a.anisotropyMap,q=V&&!!a.clearcoatMap,Z=V&&!!a.clearcoatNormalMap,Q=V&&!!a.clearcoatRoughnessMap,$=X&&!!a.iridescenceMap,ee=X&&!!a.iridescenceThicknessMap,te=Y&&!!a.sheenColorMap,ne=Y&&!!a.sheenRoughnessMap,ie=!!a.specularMap,re=!!a.specularColorMap,ae=!!a.specularIntensityMap,se=J&&!!a.transmissionMap,oe=J&&!!a.thicknessMap,le=!!a.gradientMap,ce=!!a.alphaMap,ue=a.alphaTest>0,de=!!a.alphaHash,he=!!a.extensions,pe=!!y.attributes.uv1,fe=!!y.attributes.uv2,me=!!y.attributes.uv3;let ge=Nd;return a.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(ge=e.toneMapping)),{isWebGL2:u,shaderID:S,shaderType:a.type,shaderName:a.name,vertexShader:C,fragmentShader:E,defines:a.defines,customVertexShaderID:k,customFragmentShaderID:T,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:P,instancingColor:P&&null!==v.instanceColor,supportsVertexTextures:h,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:Tp,map:B,matcap:N,envMap:D,envMapMode:D&&_.mapping,envMapCubeUVHeight:w,aoMap:I,lightMap:j,bumpMap:z,normalMap:F,displacementMap:h&&O,emissiveMap:U,normalMapObjectSpace:F&&a.normalMapType===Cp,normalMapTangentSpace:F&&a.normalMapType===Ap,metalnessMap:H,roughnessMap:G,anisotropy:W,anisotropyMap:K,clearcoat:V,clearcoatMap:q,clearcoatNormalMap:Z,clearcoatRoughnessMap:Q,iridescence:X,iridescenceMap:$,iridescenceThicknessMap:ee,sheen:Y,sheenColorMap:te,sheenRoughnessMap:ne,specularMap:ie,specularColorMap:re,specularIntensityMap:ae,transmission:J,transmissionMap:se,thicknessMap:oe,gradientMap:le,opaque:!1===a.transparent&&a.blending===Qu,alphaMap:ce,alphaTest:ue,alphaHash:de,combine:a.combine,mapUv:B&&m(a.map.channel),aoMapUv:I&&m(a.aoMap.channel),lightMapUv:j&&m(a.lightMap.channel),bumpMapUv:z&&m(a.bumpMap.channel),normalMapUv:F&&m(a.normalMap.channel),displacementMapUv:O&&m(a.displacementMap.channel),emissiveMapUv:U&&m(a.emissiveMap.channel),metalnessMapUv:H&&m(a.metalnessMap.channel),roughnessMapUv:G&&m(a.roughnessMap.channel),anisotropyMapUv:K&&m(a.anisotropyMap.channel),clearcoatMapUv:q&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:Z&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Q&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:$&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:ee&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:te&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ne&&m(a.sheenRoughnessMap.channel),specularMapUv:ie&&m(a.specularMap.channel),specularColorMapUv:re&&m(a.specularColorMap.channel),specularIntensityMapUv:ae&&m(a.specularIntensityMap.channel),transmissionMapUv:se&&m(a.transmissionMap.channel),thicknessMapUv:oe&&m(a.thicknessMap.channel),alphaMapUv:ce&&m(a.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(F||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUv1s:pe,vertexUv2s:fe,vertexUv3s:me,pointsUvs:!0===v.isPoints&&!!y.attributes.uv&&(B||ce),fog:!!x,useFog:!0===a.fog,fogExp2:x&&x.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:A,morphTextureStride:R,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,useLegacyLights:e._useLegacyLights,decodeVideoTexture:B&&!0===a.map.isVideoTexture&&qf.getTransfer(a.map.colorSpace)===Bp,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===Ku,flipSided:a.side===Ju,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:he&&!0===a.extensions.derivatives,extensionFragDepth:he&&!0===a.extensions.fragDepth,extensionDrawBuffers:he&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:he&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=$v[t];n=Bv.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new Qy(e,n,t,a),c.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function ib(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function rb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ab(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function sb(){const e=[];let t=0;const n=[],i=[],r=[];function a(n,i,r,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?i.push(u):!0===s.transparent?r.push(u):n.push(u)},unshift:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?i.unshift(u):!0===s.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||rb),i.length>1&&i.sort(t||ab),r.length>1&&r.sort(t||ab)}}}function ob(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new sb,e.set(t,[r])):n>=i.length?(r=new sb,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function lb(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new mm,color:new Bg};break;case"SpotLight":n={position:new mm,direction:new mm,color:new Bg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new mm,color:new Bg,distance:0,decay:0};break;case"HemisphereLight":n={direction:new mm,skyColor:new Bg,groundColor:new Bg};break;case"RectAreaLight":n={color:new Bg,position:new mm,halfWidth:new mm,halfHeight:new mm}}return e[t.id]=n,n}}}let cb=0;function ub(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function db(e,t){const n=new lb,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new If};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new If,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new mm);const a=new mm,s=new Vm,o=new Vm;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0,x=0,y=0,b=0;a.sort(ub);const _=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,w=t.intensity,S=t.distance,M=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*w*_,l+=s.g*w*_,c+=s.b*w*_;else if(t.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],w);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=M,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(w*_),e.distance=S,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[h]=e;const a=t.shadow;if(t.map&&(r.spotLightMap[x]=t.map,x++,a.updateMatrices(t),t.castShadow&&y++),r.spotLightMatrix[h]=a.matrix,t.castShadow){const e=i.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,r.spotShadow[h]=e,r.spotShadowMap[h]=M,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=M,r.pointShadowMatrix[d]=t.shadow.matrix,g++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*_),e.groundColor.copy(t.groundColor).multiplyScalar(w*_),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Qv.LTC_FLOAT_1,r.rectAreaLTC2=Qv.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Qv.LTC_HALF_1,r.rectAreaLTC2=Qv.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const w=r.hash;w.directionalLength===u&&w.pointLength===d&&w.spotLength===h&&w.rectAreaLength===p&&w.hemiLength===f&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===x&&w.numLightProbes===b||(r.directional.length=u,r.spot.length=h,r.rectArea.length=p,r.point.length=d,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+x-y,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=y,r.numLightProbes=b,w.directionalLength=u,w.pointLength=d,w.spotLength=h,w.rectAreaLength=p,w.hemiLength=f,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=x,w.numLightProbes=b,r.version=cb++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o.identity(),s.copy(t.matrixWorld),s.premultiply(d),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),i++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:r}}function hb(e,t){const n=new db(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function pb(e,t){let n=new WeakMap;return{get:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=n.get(i);let s;return void 0===a?(s=new hb(e,t),n.set(i,[s])):r>=a.length?(s=new hb(e,t),a.push(s)):s=a[r],s},dispose:function(){n=new WeakMap}}}class fb extends Ig{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Sp,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mb extends Ig{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function gb(e,t,n){let i=new Yv;const r=new If,a=new If,s=new sm,o=new fb({depthPacking:Mp}),l=new mb,c={},u=n.maxTextureSize,d={[Yu]:Ju,[Ju]:Yu,[Ku]:Ku},h=new Nv({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new If},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new cv;f.setAttribute("position",new Vg(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ev(f,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Wu;let v=this.type;function x(n,i){const a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new lm(r.x,r.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,p,m,null)}function y(t,n,i,r){let a=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=a.clone(),i[t]=r),a=r}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=r===Xu?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=i}return a}function b(n,r,a,s,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===Xu)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=y(n,u,s,o);e.renderBufferDirect(a,null,i,t,n,c)}}}else if(r.visible){const t=y(n,r,s,o);e.renderBufferDirect(a,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],r,a,s,o)}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(Zu),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=v!==Xu&&this.type===Xu,f=v===Xu&&this.type!==Xu;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const d=c.getFrameExtents();if(r.multiply(d),a.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(a.x=Math.floor(u/d.x),r.x=a.x*d.x,c.mapSize.x=a.x),r.y>u&&(a.y=Math.floor(u/d.y),r.y=a.y*d.y,c.mapSize.y=a.y)),null===c.map||!0===p||!0===f){const e=this.type!==Xu?{minFilter:Zd,magFilter:Zd}:{};null!==c.map&&c.map.dispose(),c.map=new lm(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),c.updateMatrices(l,e),i=c.getFrustum(),b(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===Xu&&x(c,o),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function vb(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new sm;let i=null;const r=new sm(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?H(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case Sd:e.depthFunc(e.NEVER);break;case Md:e.depthFunc(e.ALWAYS);break;case Ad:e.depthFunc(e.LESS);break;case Cd:e.depthFunc(e.LEQUAL);break;case Ed:e.depthFunc(e.EQUAL);break;case kd:e.depthFunc(e.GEQUAL);break;case Td:e.depthFunc(e.GREATER);break;case Rd:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){let t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,x=null,y=null,b=null,_=null,w=new Bg(0,0,0),S=0,M=!1,A=null,C=null,E=null,k=null,T=null;const R=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,P=0;const B=e.getParameter(e.VERSION);-1!==B.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(B)[1]),L=P>=1):-1!==B.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),L=P>=2);let N=null,D={};const I=e.getParameter(e.SCISSOR_BOX),j=e.getParameter(e.VIEWPORT),z=(new sm).fromArray(I),F=(new sm).fromArray(j);function O(t,n,r,a){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<r;l++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const U={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function G(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}U[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(U[e.TEXTURE_2D_ARRAY]=O(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),U[e.TEXTURE_3D]=O(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),a.setClear(1),s.setClear(0),H(e.DEPTH_TEST),a.setFunc(Cd),Y(!1),J(Ou),H(e.CULL_FACE),X(Zu);const W={[id]:e.FUNC_ADD,[rd]:e.FUNC_SUBTRACT,[ad]:e.FUNC_REVERSE_SUBTRACT};if(i)W[sd]=e.MIN,W[od]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(W[sd]=e.MIN_EXT,W[od]=e.MAX_EXT)}const V={[ld]:e.ZERO,[cd]:e.ONE,[ud]:e.SRC_COLOR,[hd]:e.SRC_ALPHA,[xd]:e.SRC_ALPHA_SATURATE,[gd]:e.DST_COLOR,[fd]:e.DST_ALPHA,[dd]:e.ONE_MINUS_SRC_COLOR,[pd]:e.ONE_MINUS_SRC_ALPHA,[vd]:e.ONE_MINUS_DST_COLOR,[md]:e.ONE_MINUS_DST_ALPHA,[yd]:e.CONSTANT_COLOR,[bd]:e.ONE_MINUS_CONSTANT_COLOR,[_d]:e.CONSTANT_ALPHA,[wd]:e.ONE_MINUS_CONSTANT_ALPHA};function X(t,n,i,r,a,s,o,l,c,u){if(t!==Zu){if(!1===f&&(H(e.BLEND),f=!0),t===nd)a=a||n,s=s||i,o=o||r,n===g&&a===y||(e.blendEquationSeparate(W[n],W[a]),g=n,y=a),i===v&&r===x&&s===b&&o===_||(e.blendFuncSeparate(V[i],V[r],V[s],V[o]),v=i,x=r,b=s,_=o),!1!==l.equals(w)&&c===S||(e.blendColor(l.r,l.g,l.b,c),w.copy(l),S=c),m=t,M=!1;else if(t!==m||u!==M){if(g===id&&y===id||(e.blendEquation(e.FUNC_ADD),g=id,y=id),u)switch(t){case Qu:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case $u:e.blendFunc(e.ONE,e.ONE);break;case ed:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case td:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Qu:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case $u:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case ed:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case td:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,x=null,b=null,_=null,w.set(0,0,0),S=0,m=t,M=u}}else!0===f&&(G(e.BLEND),f=!1)}function Y(t){A!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),A=t)}function J(t){t!==Fu?(H(e.CULL_FACE),t!==C&&(t===Ou?e.cullFace(e.BACK):t===Uu?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),C=t}function K(t,n,i){t?(H(e.POLYGON_OFFSET_FILL),k===n&&T===i||(e.polygonOffset(n,i),k=n,T=i)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:a,stencil:s},enable:H,disable:G,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let a=h,s=!1;if(i)if(a=d.get(r),void 0===a&&(a=[],d.set(r,a)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:X,setMaterial:function(t,n){t.side===Ku?G(e.CULL_FACE):H(e.CULL_FACE);let i=t.side===Ju;n&&(i=!i),Y(i),t.blending===Qu&&!1===t.transparent?X(Zu):X(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);const o=t.stencilWrite;s.setTest(o),o&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),K(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Y,setCullFace:J,setLineWidth:function(t){t!==E&&(L&&e.lineWidth(t),E=t)},setPolygonOffset:K,setScissorTest:function(t){t?H(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+R-1),N!==t&&(e.activeTexture(t),N=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===N?e.TEXTURE0+R-1:N);let r=D[i];void 0===r&&(r={type:void 0,texture:void 0},D[i]=r),r.type===t&&r.texture===n||(N!==i&&(e.activeTexture(i),N=i),e.bindTexture(t,n||U[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=D[N];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(WE){console.error("THREE.WebGLState:",WE)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},N=null,D={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,x=null,y=null,b=null,_=null,w=new Bg(0,0,0),S=0,M=!1,A=null,C=null,E=null,k=null,T=null,z.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),r.reset(),a.reset(),s.reset()}}}function xb(e,t,n,i,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(G){}function x(e,t){return v?new OffscreenCanvas(e,t):Hf("canvas")}function y(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?Pf:Math.floor,a=i(r*e.width),s=i(r*e.height);void 0===m&&(m=x(a,s));const o=n?x(a,s):m;o.width=a,o.height=s;return o.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return Rf(e.width)&&Rf(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==Zd&&e.minFilter!==nh}function w(t){e.generateMipmap(t)}function S(n,i,r,a){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(l=e.R8UI),r===e.UNSIGNED_SHORT&&(l=e.R16UI),r===e.UNSIGNED_INT&&(l=e.R32UI),r===e.BYTE&&(l=e.R8I),r===e.SHORT&&(l=e.R16I),r===e.INT&&(l=e.R32I)),i===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA){const t=s?Pp:qf.getTransfer(a);r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=t===Bp?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function M(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==Zd&&e.minFilter!==nh?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(t){return t===Zd||t===Qd||t===eh?e.NEAREST:e.LINEAR}function C(e){const t=e.target;t.removeEventListener("dispose",C),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=g.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&k(e),0===Object.keys(r).length&&g.delete(n)}i.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=t.texture,r=i.get(t),a=i.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(r.__webglFramebuffer[i]))for(let t=0;t<r.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(r.__webglFramebuffer[i][t]);else e.deleteFramebuffer(r.__webglFramebuffer[i]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[i])}else{if(Array.isArray(r.__webglFramebuffer))for(let t=0;t<r.__webglFramebuffer.length;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=i.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),i.remove(n[o])}i.remove(n),i.remove(t)}(n)}function k(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete g.get(r)[n.__cacheKey],s.memory.textures--}let T=0;function R(t,r){const a=i.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void I(a,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}const L={[Jd]:e.REPEAT,[Kd]:e.CLAMP_TO_EDGE,[qd]:e.MIRRORED_REPEAT},P={[Zd]:e.NEAREST,[Qd]:e.NEAREST_MIPMAP_NEAREST,[eh]:e.NEAREST_MIPMAP_LINEAR,[nh]:e.LINEAR,[ih]:e.LINEAR_MIPMAP_NEAREST,[ah]:e.LINEAR_MIPMAP_LINEAR},B={[Qp]:e.NEVER,[sf]:e.ALWAYS,[$p]:e.LESS,[tf]:e.LEQUAL,[ef]:e.EQUAL,[af]:e.GEQUAL,[nf]:e.GREATER,[rf]:e.NOTEQUAL};function N(n,a,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,L[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,L[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,L[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,P[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,P[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===Kd&&a.wrapT===Kd||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A(a.minFilter)),a.minFilter!==Zd&&a.minFilter!==nh&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,B[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===Zd)return;if(a.minFilter!==eh&&a.minFilter!==ah)return;if(a.type===ph&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===fh&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function D(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));const r=n.source;let a=g.get(r);void 0===a&&(a={},g.set(r,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&k(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return i}function I(t,r,s){let l=e.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=e.TEXTURE_3D);const c=D(t,r),d=r.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=i.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=qf.getPrimaries(qf.workingColorSpace),i=r.colorSpace===Ep?null:qf.getPrimaries(r.colorSpace),p=r.colorSpace===Ep||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=function(e){return!o&&(e.wrapS!==Kd||e.wrapT!==Kd||e.minFilter!==Zd&&e.minFilter!==nh)}(r)&&!1===b(r.image);let m=y(r.image,f,!1,u);m=H(r,m);const g=b(m)||o,v=a.convert(r.format,r.colorSpace);let x,A=a.convert(r.type),C=S(r.internalFormat,v,A,r.colorSpace,r.isVideoTexture);N(l,r,g);const E=r.mipmaps,k=o&&!0!==r.isVideoTexture,T=void 0===h.__version||!0===c,R=M(r,m,g);if(r.isDepthTexture)C=e.DEPTH_COMPONENT,o?C=r.type===ph?e.DEPTH_COMPONENT32F:r.type===hh?e.DEPTH_COMPONENT24:r.type===vh?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:r.type===ph&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===wh&&C===e.DEPTH_COMPONENT&&r.type!==uh&&r.type!==hh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=hh,A=a.convert(r.type)),r.format===Sh&&C===e.DEPTH_COMPONENT&&(C=e.DEPTH_STENCIL,r.type!==vh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=vh,A=a.convert(r.type))),T&&(k?n.texStorage2D(e.TEXTURE_2D,1,C,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,C,m.width,m.height,0,v,A,null));else if(r.isDataTexture)if(E.length>0&&g){k&&T&&n.texStorage2D(e.TEXTURE_2D,R,C,E[0].width,E[0].height);for(let t=0,i=E.length;t<i;t++)x=E[t],k?n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,v,A,x.data):n.texImage2D(e.TEXTURE_2D,t,C,x.width,x.height,0,v,A,x.data);r.generateMipmaps=!1}else k?(T&&n.texStorage2D(e.TEXTURE_2D,R,C,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,v,A,m.data)):n.texImage2D(e.TEXTURE_2D,0,C,m.width,m.height,0,v,A,m.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){k&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,C,E[0].width,E[0].height,m.depth);for(let t=0,i=E.length;t<i;t++)x=E[t],r.format!==yh?null!==v?k?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,m.depth,v,x.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,C,x.width,x.height,m.depth,0,x.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,m.depth,v,A,x.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,C,x.width,x.height,m.depth,0,v,A,x.data)}else{k&&T&&n.texStorage2D(e.TEXTURE_2D,R,C,E[0].width,E[0].height);for(let t=0,i=E.length;t<i;t++)x=E[t],r.format!==yh?null!==v?k?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,v,x.data):n.compressedTexImage2D(e.TEXTURE_2D,t,C,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,v,A,x.data):n.texImage2D(e.TEXTURE_2D,t,C,x.width,x.height,0,v,A,x.data)}else if(r.isDataArrayTexture)k?(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,C,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,v,A,m.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,C,m.width,m.height,m.depth,0,v,A,m.data);else if(r.isData3DTexture)k?(T&&n.texStorage3D(e.TEXTURE_3D,R,C,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,v,A,m.data)):n.texImage3D(e.TEXTURE_3D,0,C,m.width,m.height,m.depth,0,v,A,m.data);else if(r.isFramebufferTexture){if(T)if(k)n.texStorage2D(e.TEXTURE_2D,R,C,m.width,m.height);else{let t=m.width,i=m.height;for(let r=0;r<R;r++)n.texImage2D(e.TEXTURE_2D,r,C,t,i,0,v,A,null),t>>=1,i>>=1}}else if(E.length>0&&g){k&&T&&n.texStorage2D(e.TEXTURE_2D,R,C,E[0].width,E[0].height);for(let t=0,i=E.length;t<i;t++)x=E[t],k?n.texSubImage2D(e.TEXTURE_2D,t,0,0,v,A,x):n.texImage2D(e.TEXTURE_2D,t,C,v,A,x);r.generateMipmaps=!1}else k?(T&&n.texStorage2D(e.TEXTURE_2D,R,C,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,v,A,m)):n.texImage2D(e.TEXTURE_2D,0,C,v,A,m);_(r,g)&&w(l),h.__version=d.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function j(t,r,s,o,l,c){const u=a.convert(s.format,s.colorSpace),d=a.convert(s.type),p=S(s.internalFormat,u,d,s.colorSpace);if(!i.get(r).__hasExternalTextures){const t=Math.max(1,r.width>>c),i=Math.max(1,r.height>>c);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,c,p,t,i,r.depth,0,u,d,null):n.texImage2D(l,c,p,t,i,0,u,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),U(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,i.get(s).__webglTexture,0,O(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,i.get(s).__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function z(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=!0===o?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||U(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===ph?r=e.DEPTH_COMPONENT32F:t.type===hh&&(r=e.DEPTH_COMPONENT24));const i=O(n);U(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=O(n);i&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):U(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const s=t[r],o=a.convert(s.format,s.colorSpace),l=a.convert(s.type),c=S(s.internalFormat,o,l,s.colorSpace),u=O(n);i&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):U(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function F(t){const r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),R(r.depthTexture,0);const a=i.get(r.depthTexture).__webglTexture,s=O(r);if(r.depthTexture.format===wh)U(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==Sh)throw new Error("Unknown depthTexture format");U(r)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),z(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),z(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function O(e){return Math.min(d,e.samples)}function U(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,n){const i=e.colorSpace,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===xf||i!==Tp&&i!==Ep&&(qf.getTransfer(i)===Bp?!1===o?!0===t.has("EXT_sRGB")&&r===yh?(e.format=xf,e.minFilter=nh,e.generateMipmaps=!1):n=em.sRGBToLinear(n):r===yh&&a===oh||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const e=T;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=R,this.setTexture2DArray=function(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?I(a,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?I(a,t,r):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?function(t,r,s){if(6!==r.image.length)return;const l=D(t,r),u=r.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const d=i.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=qf.getPrimaries(qf.workingColorSpace),i=r.colorSpace===Ep?null:qf.getPrimaries(r.colorSpace),h=r.colorSpace===Ep||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=r.isCompressedTexture||r.image[0].isCompressedTexture,f=r.image[0]&&r.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=p||f?f?r.image[e].image:r.image[e]:y(r.image[e],!1,!0,c),m[e]=H(r,m[e]);const g=m[0],v=b(g)||o,x=a.convert(r.format,r.colorSpace),A=a.convert(r.type),C=S(r.internalFormat,x,A,r.colorSpace),E=o&&!0!==r.isVideoTexture,k=void 0===d.__version||!0===l;let T,R=M(r,g,v);if(N(e.TEXTURE_CUBE_MAP,r,v),p){E&&k&&n.texStorage2D(e.TEXTURE_CUBE_MAP,R,C,g.width,g.height);for(let t=0;t<6;t++){T=m[t].mipmaps;for(let i=0;i<T.length;i++){const a=T[i];r.format!==yh?null!==x?E?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,x,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,C,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,a.width,a.height,x,A,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,C,a.width,a.height,0,x,A,a.data)}}}else{T=r.mipmaps,E&&k&&(T.length>0&&R++,n.texStorage2D(e.TEXTURE_CUBE_MAP,R,C,m[0].width,m[0].height));for(let t=0;t<6;t++)if(f){E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,x,A,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,m[t].width,m[t].height,0,x,A,m[t].data);for(let i=0;i<T.length;i++){const r=T[i].image[t].image;E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,x,A,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,C,r.width,r.height,0,x,A,r.data)}}else{E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,x,A,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,x,A,m[t]);for(let i=0;i<T.length;i++){const r=T[i];E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,x,A,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,C,x,A,r.image[t])}}}_(r,v)&&w(e.TEXTURE_CUBE_MAP),d.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(s,t,r):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+r)},this.rebindTextures=function(t,n,r){const a=i.get(t);void 0!==n&&j(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&F(t)},this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=b(t)||o;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===U(t)){const i=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=S(r.internalFormat,s,o,r.colorSpace,!0===t.isXRRenderTarget),u=O(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),z(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),N(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)j(c.__webglFramebuffer[n][i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else j(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);_(l,p)&&w(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const r=t.texture;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),N(e.TEXTURE_2D,s,p),j(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),_(s,p)&&w(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),N(i,l,p),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)j(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,i,n);else j(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i,0);_(l,p)&&w(i),n.unbindTexture()}t.depthBuffer&&F(t)},this.updateRenderTargetMipmap=function(t){const r=b(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(_(o,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),w(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===U(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),d){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=j,this.useMultisampledRTT=U}function yb(e,t,n){const i=n.isWebGL2;return{convert:function(n){let r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ep;const s=qf.getTransfer(a);if(n===oh)return e.UNSIGNED_BYTE;if(n===mh)return e.UNSIGNED_SHORT_4_4_4_4;if(n===gh)return e.UNSIGNED_SHORT_5_5_5_1;if(n===lh)return e.BYTE;if(n===ch)return e.SHORT;if(n===uh)return e.UNSIGNED_SHORT;if(n===dh)return e.INT;if(n===hh)return e.UNSIGNED_INT;if(n===ph)return e.FLOAT;if(n===fh)return i?e.HALF_FLOAT:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===xh)return e.ALPHA;if(n===yh)return e.RGBA;if(n===bh)return e.LUMINANCE;if(n===_h)return e.LUMINANCE_ALPHA;if(n===wh)return e.DEPTH_COMPONENT;if(n===Sh)return e.DEPTH_STENCIL;if(n===xf)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===Mh)return e.RED;if(n===Ah)return e.RED_INTEGER;if(n===Ch)return e.RG;if(n===Eh)return e.RG_INTEGER;if(n===kh)return e.RGBA_INTEGER;if(n===Th||n===Rh||n===Lh||n===Ph)if(s===Bp){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Th)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Rh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Lh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ph)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Th)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Rh)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Lh)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ph)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Bh||n===Nh||n===Dh||n===Ih){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===Bh)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Nh)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Dh)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ih)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===jh)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===zh||n===Fh){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===zh)return s===Bp?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Fh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Oh||n===Uh||n===Hh||n===Gh||n===Wh||n===Vh||n===Xh||n===Yh||n===Jh||n===Kh||n===qh||n===Zh||n===Qh||n===$h){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Oh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Uh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Hh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Gh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Wh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Vh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Xh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Yh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Jh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Kh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===qh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Zh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Qh)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===$h)return s===Bp?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ep||n===tp||n===np){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===ep)return s===Bp?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===tp)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===np)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===ip||n===rp||n===ap||n===sp){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===ep)return r.COMPRESSED_RED_RGTC1_EXT;if(n===rp)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===ap)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===sp)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===vh?i?e.UNSIGNED_INT_24_8:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class bb extends Iv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class _b extends gg{constructor(){super(),this.isGroup=!0,this.type="Group"}}const wb={type:"move"};class Sb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new _b,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new _b,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new mm,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new mm),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new _b,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new mm,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new mm),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),i=this._getHandJoint(l,a);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(wb)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new _b;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Mb extends am{constructor(e,t,n,i,r,a,s,o,l,c){if((c=void 0!==c?c:wh)!==wh&&c!==Sh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===wh&&(n=hh),void 0===n&&c===Sh&&(n=vh),super(null,i,r,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:Zd,this.minFilter=void 0!==o?o:Zd,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Ab extends _f{constructor(e,t){super();const n=this;let i=null,r=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],x=[],y=new Iv;y.layers.enable(1),y.viewport=new sm;const b=new Iv;b.layers.enable(2),b.viewport=new sm;const _=[y,b],w=new bb;w.layers.enable(1),w.layers.enable(2);let S=null,M=null;function A(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function C(){i.removeEventListener("select",A),i.removeEventListener("selectstart",A),i.removeEventListener("selectend",A),i.removeEventListener("squeeze",A),i.removeEventListener("squeezestart",A),i.removeEventListener("squeezeend",A),i.removeEventListener("end",C),i.removeEventListener("inputsourceschange",E);for(let e=0;e<v.length;e++){const t=x[e];null!==t&&(x[e]=null,v[e].disconnect(t))}S=null,M=null,e.setRenderTarget(m),h=null,d=null,u=null,i=null,g=null,P.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function E(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=x.indexOf(n);i>=0&&(x[i]=null,v[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=x.indexOf(n);if(-1===i){for(let e=0;e<v.length;e++){if(e>=x.length){x.push(n),i=e;break}if(null===x[e]){x[e]=n,i=e;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new Sb,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new Sb,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new Sb,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",C),i.addEventListener("inputsourceschange",E),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),g=new lm(h.framebufferWidth,h.framebufferHeight,{format:yh,type:oh,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,a=null,s=null;f.depth&&(s=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?Sh:wh,a=f.stencil?vh:hh);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(o),i.updateRenderState({layers:[d]}),g=new lm(d.textureWidth,d.textureHeight,{format:yh,type:oh,depthTexture:new Mb(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),P.setContext(i),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const k=new mm,T=new mm;function R(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;w.near=b.near=y.near=e.near,w.far=b.far=y.far=e.far,S===w.near&&M===w.far||(i.updateRenderState({depthNear:w.near,depthFar:w.far}),S=w.near,M=w.far);const t=e.parent,n=w.cameras;R(w,t);for(let i=0;i<n.length;i++)R(n[i],t);2===n.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),T.setFromMatrixPosition(n.matrixWorld);const i=k.distanceTo(T),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=s*u,p=s*d,f=i/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,v=o+f,x=h-m,y=p+(i-m),b=l*o/v*g,_=c*o/v*g;e.projectionMatrix.makePerspective(x,y,b,_,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(w,y,b):w.projectionMatrix.copy(y.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Af*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,w,t)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let L=null;const P=new Jv;P.setAnimationLoop(function(t,i){if(c=i.getViewerPose(l||a),p=i,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let a=null;if(null!==h)a=h.getViewport(r);else{const t=u.getViewSubImage(d,r);a=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=_[i];void 0===s&&(s=new Iv,s.layers.enable(i),s.viewport=new sm,_[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===i&&(w.matrix.copy(s.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===n&&w.cameras.push(s)}}for(let e=0;e<v.length;e++){const t=x[e],n=v[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}L&&L(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null}),this.setAnimationLoop=function(e){L=e},this.dispose=function(){}}}function Cb(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===Ju&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===Ju&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const a=t.get(r).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Pv(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,a,s,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform));e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));const r=t.get(i).envMap;r&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Ju&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,o)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,a,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Eb(e,t,n,i){let r={},a={},s=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n){const i=e.value;if(void 0===n[t]){if("number"===typeof i)n[t]=i;else{const e=Array.isArray(i)?i:[i],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());n[t]=r}return!0}if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],r=Array.isArray(i)?i:[i];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(r[t]))return n.copy(r[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,d){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;let r=0;for(let a=0,s=t.length;a<s;a++){const e=t[a],s={boundary:0,storage:0},o=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=o.length;t<n;t++){const e=c(o[t]);s.boundary+=e.boundary,s.storage+=e.storage}if(e.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,a>0){r=n%i;0!==r&&i-r-s.boundary<0&&(n+=i-r,e.__offset=n)}n+=s.storage}r=n%i,r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",u));const p=d.program;i.updateUBOMapping(n,p);const f=t.render.frame;a[n.id]!==f&&(!function(t){const n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,s=i.length;r<s;r++){const t=i[r];if(!0===l(t,r,a)){const n=t.__offset,i=Array.isArray(t.value)?t.value:[t.value];let r=0;for(let a=0;a<i.length;a++){const s=i[a],o=c(s);"number"===typeof s?(t.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,n+r,t.__data)):s.isMatrix3?(t.__data[0]=s.elements[0],t.__data[1]=s.elements[1],t.__data[2]=s.elements[2],t.__data[3]=s.elements[0],t.__data[4]=s.elements[3],t.__data[5]=s.elements[4],t.__data[6]=s.elements[5],t.__data[7]=s.elements[0],t.__data[8]=s.elements[6],t.__data[9]=s.elements[7],t.__data[10]=s.elements[8],t.__data[11]=s.elements[0]):(s.toArray(t.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,n,t.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},a={}}}}class kb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=Gf(),context:n=null,depth:i=!0,stencil:r=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let d;this.isWebGLRenderer=!0,d=null!==n?n.getContextAttributes().alpha:a;const h=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kp,this._useLegacyLights=!1,this.toneMapping=Nd,this.toneMappingExposure=1;const x=this;let y=!1,b=0,_=0,w=null,S=-1,M=null;const A=new sm,C=new sm;let E=null;const k=new Bg(0);let T=0,R=t.width,L=t.height,P=1,B=null,N=null;const D=new sm(0,0,R,L),I=new sm(0,0,R,L);let j=!1;const z=new Yv;let F=!1,O=!1,U=null;const H=new Vm,G=new If,W=new mm,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===w?P:1}let Y,J,K,q,Z,Q,$,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ve=n;function xe(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Iu)),t.addEventListener("webglcontextlost",_e,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",Se,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&t.shift(),ve=xe(t,e),null===ve)throw xe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&ve instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(WE){throw console.error("THREE.WebGLRenderer: "+WE.message),WE}function ye(){Y=new Mx(ve),J=new rx(ve,Y,e),Y.init(J),fe=new yb(ve,Y,J),K=new vb(ve,Y,J),q=new Ex(ve),Z=new ib,Q=new xb(ve,Y,K,Z,J,fe,q),$=new sx(x),ee=new Sx(x),te=new Kv(ve,J),me=new nx(ve,Y,te,J),ne=new Ax(ve,te,q,me),ie=new Lx(ve,ne,te,q),de=new Rx(ve,J,Q),le=new ax(Z),re=new nb(x,$,ee,Y,J,me,le),ae=new Cb(x,Z),se=new ob,oe=new pb(Y,J),ue=new tx(x,$,ee,K,ie,d,o),ce=new gb(x,ie,J),ge=new Eb(ve,q,J,K),he=new ix(ve,Y,q,J),pe=new Cx(ve,Y,q,J),q.programs=re.programs,x.capabilities=J,x.extensions=Y,x.properties=Z,x.renderLists=se,x.shadowMap=ce,x.state=K,x.info=q}ye();const be=new Ab(x,ve);function _e(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const e=q.autoReset,t=ce.enabled,n=ce.autoUpdate,i=ce.needsUpdate,r=ce.type;ye(),q.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=i,ce.type=r}function Se(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Me(e){const t=e.target;t.removeEventListener("dispose",Me),function(e){(function(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach(function(e){re.releaseProgram(e)}),e.isShaderMaterial&&re.releaseShaderCache(e))})(e),Z.remove(e)}(t)}function Ae(e,t,n){!0===e.transparent&&e.side===Ku&&!1===e.forceSinglePass?(e.side=Ju,e.needsUpdate=!0,Ne(e,t,n),e.side=Yu,e.needsUpdate=!0,Ne(e,t,n),e.side=Ku):Ne(e,t,n)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=Y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(R,L,!1))},this.getSize=function(e){return e.set(R,L)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(R=e,L=n,t.width=Math.floor(e*P),t.height=Math.floor(n*P),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(R*P,L*P).floor()},this.setDrawingBufferSize=function(e,n,i){R=e,L=n,P=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,i){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,i),K.viewport(A.copy(D).multiplyScalar(P).floor())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,n,i){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,i),K.scissor(C.copy(I).multiplyScalar(P).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(e){K.setScissorTest(j=e)},this.setOpaqueSort=function(e){B=e},this.setTransparentSort=function(e){N=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==w){const t=w.texture.format;e=t===kh||t===Eh||t===Ah}if(e){const e=w.texture.type,t=e===oh||e===hh||e===uh||e===vh||e===mh||e===gh,n=ue.getClearColor(),i=ue.getClearAlpha(),r=n.r,a=n.g,s=n.b;t?(h[0]=r,h[1]=a,h[2]=s,h[3]=i,ve.clearBufferuiv(ve.COLOR,0,h)):(p[0]=r,p[1]=a,p[2]=s,p[3]=i,ve.clearBufferiv(ve.COLOR,0,p))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",_e,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",Se,!1),se.dispose(),oe.dispose(),Z.dispose(),$.dispose(),ee.dispose(),ie.dispose(),me.dispose(),ge.dispose(),re.dispose(),be.dispose(),be.removeEventListener("sessionstart",Ee),be.removeEventListener("sessionend",ke),U&&(U.dispose(),U=null),Te.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=V);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=V);Q.resetTextureUnits();const a=t.fog,s=i.isMeshStandardMaterial?t.environment:null,o=null===w?x.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:Tp,l=(i.isMeshStandardMaterial?ee:$).get(i.envMap||s),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=Nd;i.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(f=x.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,y=Z.get(i),b=m.state.lights;if(!0===F&&(!0===O||e!==M)){const t=e===M&&i.id===S;le.setState(i,e,t)}let _=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==o||r.isInstancedMesh&&!1===y.instancing?_=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?_=!0:r.isSkinnedMesh||!0!==y.skinning?r.isInstancedMesh&&!0===y.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===y.instancingColor&&null!==r.instanceColor||y.envMap!==l||!0===i.fog&&y.fog!==a?_=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===le.numPlanes&&y.numIntersection===le.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==d||y.morphNormals!==h||y.morphColors!==p||y.toneMapping!==f||!0===J.isWebGL2&&y.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,y.__version=i.version);let A=y.currentProgram;!0===_&&(A=Ne(i,t,r));let C=!1,E=!1,k=!1;const T=A.getUniforms(),R=y.uniforms;K.useProgram(A.program)&&(C=!0,E=!0,k=!0);i.id!==S&&(S=i.id,E=!0);if(C||M!==e){T.setValue(ve,"projectionMatrix",e.projectionMatrix),T.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=T.map.cameraPosition;void 0!==t&&t.setValue(ve,W.setFromMatrixPosition(e.matrixWorld)),J.logarithmicDepthBuffer&&T.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&T.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),M!==e&&(M=e,E=!0,k=!0)}if(r.isSkinnedMesh){T.setOptional(ve,r,"bindMatrix"),T.setOptional(ve,r,"bindMatrixInverse");const e=r.skeleton;e&&(J.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),T.setValue(ve,"boneTexture",e.boneTexture,Q),T.setValue(ve,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const B=n.morphAttributes;(void 0!==B.position||void 0!==B.normal||void 0!==B.color&&!0===J.isWebGL2)&&de.update(r,n,A);(E||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,T.setValue(ve,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);E&&(T.setValue(ve,"toneMappingExposure",x.toneMappingExposure),y.needsLights&&(D=k,(N=R).ambientLightColor.needsUpdate=D,N.lightProbe.needsUpdate=D,N.directionalLights.needsUpdate=D,N.directionalLightShadows.needsUpdate=D,N.pointLights.needsUpdate=D,N.pointLightShadows.needsUpdate=D,N.spotLights.needsUpdate=D,N.spotLightShadows.needsUpdate=D,N.rectAreaLights.needsUpdate=D,N.hemisphereLights.needsUpdate=D),a&&!0===i.fog&&ae.refreshFogUniforms(R,a),ae.refreshMaterialUniforms(R,i,P,L,U),Dy.upload(ve,De(y),R,Q));var N,D;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Dy.upload(ve,De(y),R,Q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&T.setValue(ve,"center",r.center);if(T.setValue(ve,"modelViewMatrix",r.modelViewMatrix),T.setValue(ve,"normalMatrix",r.normalMatrix),T.setValue(ve,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(J.isWebGL2){const n=e[t];ge.update(n,A),ge.bind(n,A)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return A}(e,t,n,i,r);K.setMaterial(i,s);let l=n.index,c=1;if(!0===i.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let g;me.setup(r,i,o,n,l);let v=he;if(null!==l&&(g=te.get(l),v=pe,v.setIndex(g)),r.isMesh)!0===i.wireframe?(K.setLineWidth(i.wireframeLinewidth*X()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),K.setLineWidth(e*X()),r.isLineSegments?v.setMode(ve.LINES):r.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else r.isPoints?v.setMode(ve.POINTS):r.isSprite&&v.setMode(ve.TRIANGLES);if(r.isInstancedMesh)v.renderInstances(h,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,f,t)}else v.render(h,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),m=oe.get(n),m.init(),v.push(m),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),m.setupLights(x._useLegacyLights);const i=new Set;return e.traverse(function(e){const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];Ae(a,n,e),i.add(a)}else Ae(t,n,e),i.add(t)}),v.pop(),m=null,i},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){Z.get(e).currentProgram.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==Y.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ce=null;function Ee(){Te.stop()}function ke(){Te.start()}const Te=new Jv;function Re(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){i&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ie.update(e),r=e.material;r.visible&&f.push(e,t,r,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||z.intersectsObject(e))){const t=ie.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(r)){const i=t.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&f.push(e,t,o,n,W.z,s)}}else r.visible&&f.push(e,t,r,n,W.z,null)}const r=e.children;for(let a=0,s=r.length;a<s;a++)Re(r[a],t,n,i)}function Le(e,t,n,i){const r=e.opaque,a=e.transmissive,s=e.transparent;m.setupLightsView(n),!0===F&&le.setGlobalState(x.clippingPlanes,n),a.length>0&&function(e,t,n,i){const r=!0===n.isScene?n.overrideMaterial:null;if(null!==r)return;const a=J.isWebGL2;null===U&&(U=new lm(1,1,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")?fh:oh,minFilter:ah,samples:a?4:0}));x.getDrawingBufferSize(G),a?U.setSize(G.x,G.y):U.setSize(Pf(G.x),Pf(G.y));const s=x.getRenderTarget();x.setRenderTarget(U),x.getClearColor(k),T=x.getClearAlpha(),T<1&&x.setClearColor(16777215,.5);x.clear();const o=x.toneMapping;x.toneMapping=Nd,Pe(e,n,i),Q.updateMultisampleRenderTarget(U),Q.updateRenderTargetMipmap(U);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],r=e.object,a=e.geometry,s=e.material,o=e.group;if(s.side===Ku&&r.layers.test(i.layers)){const e=s.side;s.side=Ju,s.needsUpdate=!0,Be(r,n,i,a,s,o),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(Q.updateMultisampleRenderTarget(U),Q.updateRenderTargetMipmap(U));x.setRenderTarget(s),x.setClearColor(k,T),x.toneMapping=o}(r,a,t,n),i&&K.viewport(A.copy(i)),r.length>0&&Pe(r,t,n),a.length>0&&Pe(a,t,n),s.length>0&&Pe(s,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Pe(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===i?a.material:i,c=a.group;s.layers.test(n.layers)&&Be(s,t,n,o,l,c)}}function Be(e,t,n,i,r,a){e.onBeforeRender(x,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(x,t,n,i,e,a),!0===r.transparent&&r.side===Ku&&!1===r.forceSinglePass?(r.side=Ju,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,a),r.side=Yu,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,a),r.side=Ku):x.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(x,t,n,i,r,a)}function Ne(e,t,n){!0!==t.isScene&&(t=V);const i=Z.get(e),r=m.state.lights,a=m.state.shadowsArray,s=r.state.version,o=re.getParameters(e,r.state,a,t,n),l=re.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ee:$).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",Me),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===s)return Ie(e,o),u}else o.uniforms=re.getUniforms(e),e.onBuild(n,o,x),e.onBeforeCompile(o,x),u=re.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const d=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),Ie(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function De(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Dy.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ie(e,t){const n=Z.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Te.setAnimationLoop(function(e){Ce&&Ce(e)}),"undefined"!==typeof self&&Te.setContext(self),this.setAnimationLoop=function(e){Ce=e,be.setAnimationLoop(e),null===e?Te.stop():Te.start()},be.addEventListener("sessionstart",Ee),be.addEventListener("sessionend",ke),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,w),m=oe.get(e,v.length),m.init(),v.push(m),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(H),O=this.localClippingEnabled,F=le.init(this.clippingPlanes,O),f=se.get(e,g.length),f.init(),g.push(f),Re(e,t,0,x.sortObjects),f.finish(),!0===x.sortObjects&&f.sort(B,N),this.info.render.frame++,!0===F&&le.beginShadows();const n=m.state.shadowsArray;if(ce.render(n,e,t),!0===F&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(f,e),m.setupLights(x._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Le(f,e,i,i.viewport)}}else Le(f,e,t);null!==w&&(Q.updateMultisampleRenderTarget(w),Q.updateRenderTargetMipmap(w)),!0===e.isScene&&e.onAfterRender(x,e,t),me.resetDefaultState(),S=-1,M=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;const i=Z.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;w=e,b=t,_=n;let i=!0,r=null,a=!1,s=!1;if(e){const o=Z.get(e);void 0!==o.__useDefaultFramebuffer?(K.bindFramebuffer(ve.FRAMEBUFFER,null),i=!1):void 0===o.__webglFramebuffer?Q.setupRenderTarget(e):o.__hasExternalTextures&&Q.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],a=!0):r=J.isWebGL2&&e.samples>0&&!1===Q.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,A.copy(e.viewport),C.copy(e.scissor),E=e.scissorTest}else A.copy(D).multiplyScalar(P).floor(),C.copy(I).multiplyScalar(P).floor(),E=j;if(K.bindFramebuffer(ve.FRAMEBUFFER,r)&&J.drawBuffers&&i&&K.drawBuffers(e,r),K.viewport(A),K.scissor(C),K.setScissorTest(E),a){const i=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=Z.get(e.texture),r=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}S=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){K.bindFramebuffer(ve.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==yh&&fe.convert(o)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===fh&&(Y.has("EXT_color_buffer_half_float")||J.isWebGL2&&Y.has("EXT_color_buffer_float"));if(l!==oh&&fe.convert(l)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==ph||!(J.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ve.readPixels(t,n,i,r,fe.convert(o),fe.convert(l),a)}finally{const e=null!==w?Z.get(w).__webglFramebuffer:null;K.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);Q.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,r,a),K.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=t.image.width,a=t.image.height,s=fe.convert(n.format),o=fe.convert(n.type);Q.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,s,o,t.image),0===i&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),K.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=fe.convert(i.format),c=fe.convert(i.type);let u;if(i.isData3DTexture)Q.setTexture3D(i,0),u=ve.TEXTURE_3D;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(i,0),u=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,i.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,i.unpackAlignment);const d=ve.getParameter(ve.UNPACK_ROW_LENGTH),h=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),p=ve.getParameter(ve.UNPACK_SKIP_PIXELS),f=ve.getParameter(ve.UNPACK_SKIP_ROWS),m=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,g.data)):ve.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,d),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,h),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,p),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,f),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&ve.generateMipmap(u),K.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Q.setTextureCube(e,0):e.isData3DTexture?Q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Q.setTexture2DArray(e,0):Q.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){b=0,_=0,w=null,K.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return yf}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Rp?"display-p3":"srgb",t.unpackColorSpace=qf.workingColorSpace===Lp?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===kp?wp:_p}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===wp?kp:Tp}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Tb extends kb{}Tb.prototype.isWebGL1Renderer=!0;class Rb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new Bg(e),this.density=t}clone(){return new Rb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Lb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Bg(e),this.near=t,this.far=n}clone(){return new Lb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Pb extends gg{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Bb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=of,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Cf()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cf()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cf()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Nb=new mm;class Db{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.applyMatrix4(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.applyNormalMatrix(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.transformDirection(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}setX(e,t){return this.normalized&&(t=Nf(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Nf(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Nf(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Nf(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Bf(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Bf(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Bf(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Bf(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array),i=Nf(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Nf(t,this.array),n=Nf(n,this.array),i=Nf(i,this.array),r=Nf(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Vg(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Db(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ib extends Ig{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bg(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jb;const zb=new mm,Fb=new mm,Ob=new mm,Ub=new If,Hb=new If,Gb=new Vm,Wb=new mm,Vb=new mm,Xb=new mm,Yb=new If,Jb=new If,Kb=new If;class qb extends gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ib;if(super(),this.isSprite=!0,this.type="Sprite",void 0===jb){jb=new cv;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Bb(e,5);jb.setIndex([0,1,2,0,2,3]),jb.setAttribute("position",new Db(t,3,0,!1)),jb.setAttribute("uv",new Db(t,2,3,!1))}this.geometry=jb,this.material=e,this.center=new If(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fb.setFromMatrixScale(this.matrixWorld),Gb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ob.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fb.multiplyScalar(-Ob.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;Zb(Wb.set(-.5,-.5,0),Ob,a,Fb,i,r),Zb(Vb.set(.5,-.5,0),Ob,a,Fb,i,r),Zb(Xb.set(.5,.5,0),Ob,a,Fb,i,r),Yb.set(0,0),Jb.set(1,0),Kb.set(1,1);let s=e.ray.intersectTriangle(Wb,Vb,Xb,!1,zb);if(null===s&&(Zb(Vb.set(-.5,.5,0),Ob,a,Fb,i,r),Jb.set(0,1),s=e.ray.intersectTriangle(Wb,Xb,Vb,!1,zb),null===s))return;const o=e.ray.origin.distanceTo(zb);o<e.near||o>e.far||t.push({distance:o,point:zb.clone(),uv:kg.getInterpolation(zb,Wb,Vb,Xb,Yb,Jb,Kb,new If),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Zb(e,t,n,i,r,a){Ub.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Hb.x=a*Ub.x-r*Ub.y,Hb.y=r*Ub.x+a*Ub.y):Hb.copy(Ub),e.copy(t),e.x+=Hb.x,e.y+=Hb.y,e.applyMatrix4(Gb)}const Qb=new mm,$b=new mm;class e_ extends gg{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Qb.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Qb);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Qb.setFromMatrixPosition(e.matrixWorld),$b.setFromMatrixPosition(this.matrixWorld);const n=Qb.distanceTo($b)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const t_=new mm,n_=new sm,i_=new sm,r_=new mm,a_=new Vm,s_=new mm,o_=new Im,l_=new Vm,c_=new Wm;class u_ extends Ev{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Od,this.bindMatrix=new Vm,this.bindMatrixInverse=new Vm,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new xm),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,s_),this.boundingBox.expandByPoint(s_)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Im),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,s_),this.boundingSphere.expandByPoint(s_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),o_.copy(this.boundingSphere),o_.applyMatrix4(i),!1!==e.ray.intersectsSphere(o_)&&(l_.copy(i).invert(),c_.copy(e.ray).applyMatrix4(l_),null!==this.boundingBox&&!1===c_.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,c_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sm,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Od?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ud?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;n_.fromBufferAttribute(i.attributes.skinIndex,e),i_.fromBufferAttribute(i.attributes.skinWeight,e),t_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=i_.getComponent(r);if(0!==e){const i=n_.getComponent(r);a_.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(r_.copy(t_).applyMatrix4(a_),e)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class d_ extends gg{constructor(){super(),this.isBone=!0,this.type="Bone"}}class h_ extends am{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Zd,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Zd,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const p_=new Vm,f_=new Vm;class m_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Cf(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Vm)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Vm;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const i=e[r]?e[r].matrixWorld:f_;p_.multiplyMatrices(i,t[r]),p_.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new m_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Lf(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new h_(t,e,e,yh,ph);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new d_),this.bones.push(r),this.boneInverses.push((new Vm).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class g_ extends Vg{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const v_=new Vm,x_=new Vm,y_=[],b_=new xm,__=new Vm,w_=new Ev,S_=new Im;class M_ extends Ev{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new g_(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,__)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new xm),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,v_),b_.copy(e.boundingBox).applyMatrix4(v_),this.boundingBox.union(b_)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Im),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,v_),S_.copy(e.boundingSphere).applyMatrix4(v_),this.boundingSphere.union(S_)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(w_.geometry=this.geometry,w_.material=this.material,void 0!==w_.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),S_.copy(this.boundingSphere),S_.applyMatrix4(n),!1!==e.ray.intersectsSphere(S_)))for(let r=0;r<i;r++){this.getMatrixAt(r,v_),x_.multiplyMatrices(n,v_),w_.matrixWorld=x_,w_.raycast(e,y_);for(let e=0,n=y_.length;e<n;e++){const n=y_[e];n.instanceId=r,n.object=this,t.push(n)}y_.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new g_(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class A_ extends Ig{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bg(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const C_=new mm,E_=new mm,k_=new Vm,T_=new Wm,R_=new Im;class L_ extends gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A_;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)C_.fromBufferAttribute(t,e-1),E_.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=C_.distanceTo(E_);e.setAttribute("lineDistance",new ev(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),R_.copy(n.boundingSphere),R_.applyMatrix4(i),R_.radius+=r,!1===e.ray.intersectsSphere(R_))return;k_.copy(i).invert(),T_.copy(e.ray).applyMatrix4(k_);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new mm,c=new mm,u=new mm,d=new mm,h=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,a.start),i=Math.min(p.count,a.start+a.count)-1;n<i;n+=h){const i=p.getX(n),r=p.getX(n+1);l.fromBufferAttribute(f,i),c.fromBufferAttribute(f,r);if(T_.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(d);a<e.near||a>e.far||t.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),i=Math.min(f.count,a.start+a.count)-1;n<i;n+=h){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(T_.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const P_=new mm,B_=new mm;class N_ extends L_{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)P_.fromBufferAttribute(t,e),B_.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+P_.distanceTo(B_);e.setAttribute("lineDistance",new ev(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class D_ extends L_{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class I_ extends Ig{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bg(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const j_=new Vm,z_=new Wm,F_=new Im,O_=new mm;class U_ extends gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new I_;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),F_.copy(n.boundingSphere),F_.applyMatrix4(i),F_.radius+=r,!1===e.ray.intersectsSphere(F_))return;j_.copy(i).invert(),z_.copy(e.ray).applyMatrix4(j_);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),r=Math.min(l.count,a.start+a.count);n<r;n++){const r=l.getX(n);O_.fromBufferAttribute(c,r),H_(O_,r,o,i,e,t,this)}}else{for(let n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);n<r;n++)O_.fromBufferAttribute(c,n),H_(O_,n,o,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function H_(e,t,n,i,r,a,s){const o=z_.distanceSqToPoint(e);if(o<n){const n=new mm;z_.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}class G_ extends am{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:nh,this.magFilter=void 0!==r?r:nh,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class W_ extends am{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Zd,this.minFilter=Zd,this.generateMipmaps=!1,this.needsUpdate=!0}}class V_ extends am{constructor(e,t,n,i,r,a,s,o,l,c,u,d){super(null,a,s,o,l,c,i,r,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class X_ extends V_{constructor(e,t,n,i,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Kd}}class Y_ extends V_{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Gd),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class J_ extends am{constructor(e,t,n,i,r,a,s,o,l){super(e,t,n,i,r,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class K_{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let s,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),s=n[i]-a,s<0)o=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===a)return i/(r-1);const c=n[i];return(i+(a-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),s=this.getPoint(r),o=t||(a.isVector2?new If:new mm);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new mm,i=[],r=[],a=[],s=new mm,o=new Vm;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new mm)}r[0]=new mm,a[0]=new mm;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),a[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),a[h]=a[h-1].clone(),s.crossVectors(i[h-1],i[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(Ef(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(o.makeRotationAxis(s,e))}a[h].crossVectors(i[h],r[h])}if(!0===t){let t=Math.acos(Ef(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class q_ extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new If,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Z_ extends q_{constructor(e,t,n,i,r,a){super(e,t,n,n,i,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Q_(){let e=0,t=0,n=0,i=0;function r(r,a,s,o){e=r,t=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(i-t)/(s+o)+(i-n)/o;l*=s,c*=s,r(t,n,l,c)},calc:function(r){const a=r*r;return e+t*r+n*a+i*(a*r)}}}const $_=new mm,ew=new Q_,tw=new Q_,nw=new Q_;class iw extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let a,s,o=Math.floor(r),l=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:0===l&&o===i-1&&(o=i-2,l=1),this.closed||o>0?a=n[(o-1)%i]:($_.subVectors(n[0],n[1]).add(n[0]),a=$_);const c=n[o%i],u=n[(o+1)%i];if(this.closed||o+2<i?s=n[(o+2)%i]:($_.subVectors(n[i-1],n[i-2]).add(n[i-1]),s=$_),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),ew.initNonuniformCatmullRom(a.x,c.x,u.x,s.x,t,n,i),tw.initNonuniformCatmullRom(a.y,c.y,u.y,s.y,t,n,i),nw.initNonuniformCatmullRom(a.z,c.z,u.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(ew.initCatmullRom(a.x,c.x,u.x,s.x,this.tension),tw.initCatmullRom(a.y,c.y,u.y,s.y,this.tension),nw.initCatmullRom(a.z,c.z,u.z,s.z,this.tension));return t.set(ew.calc(l),tw.calc(l),nw.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new mm).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function rw(e,t,n,i,r){const a=.5*(i-t),s=.5*(r-n),o=e*e;return(2*n-2*i+a+s)*(e*o)+(-3*n+3*i-2*a-s)*o+a*e+n}function aw(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function sw(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class ow extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new If,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new If,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new If;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(sw(e,n.x,i.x,r.x,a.x),sw(e,n.y,i.y,r.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class lw extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mm,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new mm;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(sw(e,n.x,i.x,r.x,a.x),sw(e,n.y,i.y,r.y,a.y),sw(e,n.z,i.z,r.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class cw extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new If,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uw extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dw extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new If,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new If;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If,n=this.v0,i=this.v1,r=this.v2;return t.set(aw(e,n.x,i.x,r.x),aw(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hw extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mm;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm,n=this.v0,i=this.v1,r=this.v2;return t.set(aw(e,n.x,i.x,r.x),aw(e,n.y,i.y,r.y),aw(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pw extends K_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If,n=this.points,i=(n.length-1)*e,r=Math.floor(i),a=i-r,s=n[0===r?r:r-1],o=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(rw(a,s.x,o.x,l.x,c.x),rw(a,s.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new If).fromArray(n))}return this}}var fw=Object.freeze({__proto__:null,ArcCurve:Z_,CatmullRomCurve3:iw,CubicBezierCurve:ow,CubicBezierCurve3:lw,EllipseCurve:q_,LineCurve:cw,LineCurve3:uw,QuadraticBezierCurve:dw,QuadraticBezierCurve3:hw,SplineCurve:pw});class mw extends K_{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new fw[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,a=this.curves[r],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new fw[n.type]).fromJSON(n))}return this}}class gw extends mw{constructor(e){super(),this.type="Path",this.currentPoint=new If,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new cw(this.currentPoint.clone(),new If(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new dw(this.currentPoint.clone(),new If(e,t),new If(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,a){const s=new ow(this.currentPoint.clone(),new If(e,t),new If(n,i),new If(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new pw(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,i,r,a),this}absarc(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}ellipse(e,t,n,i,r,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,a,s,o),this}absellipse(e,t,n,i,r,a,s,o){const l=new q_(e,t,n,i,r,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class vw extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new If(0,-.5),new If(.5,0),new If(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Ef(i,0,2*Math.PI);const r=[],a=[],s=[],o=[],l=[],c=1/t,u=new mm,d=new If,h=new mm,p=new mm,f=new mm;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),o.push(h.x,h.y,h.z),f.copy(p)}for(let v=0;v<=t;v++){const r=n+v*c*i,h=Math.sin(r),p=Math.cos(r);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*p,a.push(u.x,u.y,u.z),d.x=v/t,d.y=n/(e.length-1),s.push(d.x,d.y);const i=o[3*n+0]*h,r=o[3*n+1],c=o[3*n+0]*p;l.push(i,r,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,i=n,a=n+e.length,s=n+e.length+1,o=n+1;r.push(i,a,o),r.push(s,o,a)}this.setIndex(r),this.setAttribute("position",new ev(a,3)),this.setAttribute("uv",new ev(s,2)),this.setAttribute("normal",new ev(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vw(e.points,e.segments,e.phiStart,e.phiLength)}}class xw extends vw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new gw;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new xw(e.radius,e.length,e.capSegments,e.radialSegments)}}class yw extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],a=[],s=[],o=[],l=new mm,c=new If;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const r=n+u/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new ev(a,3)),this.setAttribute("normal",new ev(s,3)),this.setAttribute("uv",new ev(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class bw extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const r=p,a=new If,f=new mm;let v=0;const x=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*y,0),d.push(0,y,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=i;e++){const t=e/i*o+s,n=Math.cos(t),r=Math.sin(t);f.x=x*r,f.y=m*y,f.z=x*n,u.push(f.x,f.y,f.z),d.push(0,y,0),a.x=.5*n+.5,a.y=.5*r*y+.5,h.push(a.x,a.y),p++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new mm,v=new mm;let x=0;const y=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,x=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*o+s,l=Math.sin(r),f=Math.cos(r);v.x=x*l,v.y=-g*n+m,v.z=x*f,u.push(v.x,v.y,v.z),a.set(l,y,f).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=f[t][e],i=f[t+1][e],r=f[t+1][e+1],a=f[t][e+1];c.push(n,i,a),c.push(i,r,a),x+=6}l.addGroup(g,x,0),g+=x}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new ev(u,3)),this.setAttribute("normal",new ev(d,3)),this.setAttribute("uv",new ev(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bw(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _w extends bw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}static fromJSON(e){return new _w(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ww extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],a=[];function s(e,t,n,i){const r=i+1,a=[];for(let s=0;s<=r;s++){a[s]=[];const i=e.clone().lerp(n,s/r),o=t.clone().lerp(n,s/r),l=r-s;for(let e=0;e<=l;e++)a[s][e]=0===e&&s===r?i:i.clone().lerp(o,e/l)}for(let s=0;s<r;s++)for(let e=0;e<2*(r-s)-1;e++){const t=Math.floor(e/2);e%2===0?(o(a[s][t+1]),o(a[s+1][t]),o(a[s][t])):(o(a[s][t+1]),o(a[s+1][t+1]),o(a[s+1][t]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new mm,i=new mm,r=new mm;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],i),l(t[a+2],r),s(n,i,r,e)}(i),function(e){const t=new mm;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new mm;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];const n=u(e)/2/Math.PI+.5,i=d(e)/Math.PI+.5;a.push(n,1-i)}(function(){const e=new mm,t=new mm,n=new mm,i=new mm,s=new If,o=new If,l=new If;for(let d=0,h=0;d<r.length;d+=9,h+=6){e.set(r[d+0],r[d+1],r[d+2]),t.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),s.set(a[h+0],a[h+1]),o.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);c(s,h+0,e,p),c(o,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),s=Math.min(t,n,i);r>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new ev(r,3)),this.setAttribute("normal",new ev(r.slice(),3)),this.setAttribute("uv",new ev(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ww(e.vertices,e.indices,e.radius,e.details)}}class Sw extends ww{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sw(e.radius,e.detail)}}const Mw=new mm,Aw=new mm,Cw=new mm,Ew=new kg;class kw extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(Mf*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=Ew;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),Ew.getNormal(Cw),u[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(o.x*i),",").concat(Math.round(o.y*i),",").concat(Math.round(o.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],a=Ew[c[e]],s=Ew[c[t]],o="".concat(n,"_").concat(i),p="".concat(i,"_").concat(n);p in d&&d[p]?(Cw.dot(d[p].normal)<=r&&(h.push(a.x,a.y,a.z),h.push(s.x,s.y,s.z)),d[p]=null):o in d||(d[o]={index0:l[e],index1:l[t],normal:Cw.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];Mw.fromBufferAttribute(s,t),Aw.fromBufferAttribute(s,n),h.push(Mw.x,Mw.y,Mw.z),h.push(Aw.x,Aw.y,Aw.z)}this.setAttribute("position",new ev(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Tw extends gw{constructor(e){super(e),this.uuid=Cf(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new gw).fromJSON(n))}return this}}const Rw=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let a=Lw(e,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,d,h,p;if(i&&(a=function(e,t,n,i){const r=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*i,l=a<s-1?t[a+1]*i:e.length,c=Lw(e,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Hw(c));for(r.sort(zw),a=0;a<r.length;a++)n=Fw(r[a],n);return n}(e,t,a,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)d=e[t],h=e[t+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-o,u-l),p=0!==p?32767/p:0}return Bw(a,s,n,o,l,p,0),s};function Lw(e,t,n,i,r){let a,s;if(r===function(e,t,n,i){let r=0;for(let a=t,s=n-i;a<n;a+=i)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)s=Qw(a,e[a],e[a+1],s);else for(a=n-i;a>=t;a-=i)s=Qw(a,e[a],e[a+1],s);return s&&Xw(s,s.next)&&($w(s),s=s.next),s}function Pw(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Xw(i,i.next)&&0!==Vw(i.prev,i,i.next))i=i.next;else{if($w(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Bw(e,t,n,i,r,a,s){if(!e)return;!s&&a&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=Uw(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,a,s,o,l,c=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ,i);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(s>1)}(r)}(e,i,r,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?Dw(e,i,r,a):Nw(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),$w(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?Bw(e=Iw(Pw(e),t,n),t,n,i,r,a,2):2===s&&jw(e,t,n,i,r,a):Bw(Pw(e),t,n,i,r,a,1);break}}function Nw(e){const t=e.prev,n=e,i=e.next;if(Vw(t,n,i)>=0)return!1;const r=t.x,a=n.x,s=i.x,o=t.y,l=n.y,c=i.y,u=r<a?r<s?r:s:a<s?a:s,d=o<l?o<c?o:c:l<c?l:c,h=r>a?r>s?r:s:a>s?a:s,p=o>l?o>c?o:c:l>c?l:c;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Gw(r,o,a,l,s,c,f.x,f.y)&&Vw(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Dw(e,t,n,i){const r=e.prev,a=e,s=e.next;if(Vw(r,a,s)>=0)return!1;const o=r.x,l=a.x,c=s.x,u=r.y,d=a.y,h=s.y,p=o<l?o<c?o:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=o>l?o>c?o:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=Uw(p,f,t,n,i),x=Uw(m,g,t,n,i);let y=e.prevZ,b=e.nextZ;for(;y&&y.z>=v&&b&&b.z<=x;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==s&&Gw(o,u,l,d,c,h,y.x,y.y)&&Vw(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&Gw(o,u,l,d,c,h,b.x,b.y)&&Vw(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=v;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==r&&y!==s&&Gw(o,u,l,d,c,h,y.x,y.y)&&Vw(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=x;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&Gw(o,u,l,d,c,h,b.x,b.y)&&Vw(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Iw(e,t,n){let i=e;do{const r=i.prev,a=i.next.next;!Xw(r,a)&&Yw(r,i,i.next,a)&&qw(r,a)&&qw(a,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),$w(i),$w(i.next),i=e=a),i=i.next}while(i!==e);return Pw(i)}function jw(e,t,n,i,r,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Ww(s,e)){let o=Zw(s,e);return s=Pw(s,s.next),o=Pw(o,o.next),Bw(s,t,n,i,r,a,0),void Bw(o,t,n,i,r,a,0)}e=e.next}s=s.next}while(s!==e)}function zw(e,t){return e.x-t.x}function Fw(e,t){const n=function(e,t){let n,i=t,r=-1/0;const a=e.x,s=e.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){const e=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=a&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===a))return n}i=i.next}while(i!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,d=1/0;i=n;do{a>=i.x&&i.x>=l&&a!==i.x&&Gw(s<c?a:r,s,l,c,s<c?r:a,s,i.x,i.y)&&(u=Math.abs(s-i.y)/(a-i.x),qw(i,e)&&(u<d||u===d&&(i.x>n.x||i.x===n.x&&Ow(n,i)))&&(n=i,d=u)),i=i.next}while(i!==o);return n}(e,t);if(!n)return t;const i=Zw(n,e);return Pw(i,i.next),Pw(n,n.next)}function Ow(e,t){return Vw(e.prev,e,t.prev)<0&&Vw(t.next,e,e.next)<0}function Uw(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Hw(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Gw(e,t,n,i,r,a,s,o){return(r-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(i-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(r-s)*(i-o)}function Ww(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Yw(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(qw(e,t)&&qw(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Vw(e.prev,e,t.prev)||Vw(e,t.prev,t))||Xw(e,t)&&Vw(e.prev,e,e.next)>0&&Vw(t.prev,t,t.next)>0)}function Vw(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Xw(e,t){return e.x===t.x&&e.y===t.y}function Yw(e,t,n,i){const r=Kw(Vw(e,t,n)),a=Kw(Vw(e,t,i)),s=Kw(Vw(n,i,e)),o=Kw(Vw(n,i,t));return r!==a&&s!==o||(!(0!==r||!Jw(e,n,t))||(!(0!==a||!Jw(e,i,t))||(!(0!==s||!Jw(n,e,i))||!(0!==o||!Jw(n,t,i)))))}function Jw(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Kw(e){return e>0?1:e<0?-1:0}function qw(e,t){return Vw(e.prev,e,e.next)<0?Vw(e,t,e.next)>=0&&Vw(e,e.prev,t)>=0:Vw(e,t,e.prev)<0||Vw(e,e.next,t)<0}function Zw(e,t){const n=new eS(e.i,e.x,e.y),i=new eS(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Qw(e,t,n,i){const r=new eS(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function $w(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function eS(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class tS{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return tS.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];nS(e),iS(n,e);let a=e.length;t.forEach(nS);for(let o=0;o<t.length;o++)i.push(a),a+=t[o].length,iS(n,t[o]);const s=Rw(n,i);for(let o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}}function nS(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function iS(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class rS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tw([new If(.5,.5),new If(-.5,.5),new If(-.5,-.5),new If(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let s=0,o=e.length;s<o;s++){a(e[s])}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:aS;let g,v,x,y,b,_=!1;f&&(g=f.getSpacedPoints(o),_=!0,c=!1,v=f.computeFrenetFrames(o,!1),x=new mm,y=new mm,b=new mm),c||(p=0,u=0,d=0,h=0);const w=e.extractPoints(s);let S=w.shape;const M=w.holes;if(!tS.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];tS.isClockWise(t)&&(M[e]=t.reverse())}}const A=tS.triangulateShape(S,M),C=S;for(let t=0,n=M.length;t<n;t++){const e=M[t];S=S.concat(e)}function E(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const k=S.length,T=A.length;function R(e,t,n){let i,r,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+o*o,d=s*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-o/d,f=t.y+s/d,m=((n.x-c/h-p)*c-(n.y+l/h-f)*l)/(s*c-o*l);i=p+s*m-e.x,r=f+o*m-e.y;const g=i*i+r*r;if(g<=2)return new If(i,r);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=s,a=Math.sqrt(u)):(i=s,r=o,a=Math.sqrt(u/2))}return new If(i/a,r/a)}const L=[];for(let t=0,n=C.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[t]=R(C[t],C[i],C[r]);const P=[];let B,N=L.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];B=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),B[t]=R(e[t],e[i],e[r]);P.push(B),N=N.concat(B)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=C.length;t<r;t++){const e=E(C[t],L[t],i);j(e.x,e.y,-n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];B=P[t];for(let t=0,r=e.length;t<r;t++){const r=E(e[t],B[t],i);j(r.x,r.y,-n)}}}const D=d+h;for(let t=0;t<k;t++){const e=c?E(S[t],N[t],D):S[t];_?(y.copy(v.normals[0]).multiplyScalar(e.x),x.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(y).add(x),j(b.x,b.y,b.z)):j(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<k;e++){const n=c?E(S[e],N[e],D):S[e];_?(y.copy(v.normals[t]).multiplyScalar(n.x),x.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(y).add(x),j(b.x,b.y,b.z)):j(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=C.length;t<r;t++){const e=E(C[t],L[t],i);j(e.x,e.y,l+n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];B=P[t];for(let t=0,r=e.length;t<r;t++){const r=E(e[t],B[t],i);_?j(r.x,r.y+g[o-1].y,g[o-1].x+n):j(r.x,r.y,l+n)}}}function I(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=k*e,a=k*(e+1);F(t+i+n,t+r+n,t+r+a,t+i+a)}}}function j(e,t,n){a.push(e),a.push(t),a.push(n)}function z(e,t,r){O(e),O(t),O(r);const a=i.length/3,s=m.generateTopUV(n,i,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[2])}function F(e,t,r,a){O(e),O(t),O(a),O(t),O(r),O(a);const s=i.length/3,o=m.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);U(o[0]),U(o[1]),U(o[3]),U(o[1]),U(o[2]),U(o[3])}function O(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function U(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=k*e;for(let n=0;n<T;n++){const e=A[n];z(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=k*e;for(let n=0;n<T;n++){const e=A[n];z(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<T;e++){const t=A[e];z(t[2],t[1],t[0])}for(let e=0;e<T;e++){const t=A[e];z(t[0]+k*o,t[1]+k*o,t[2]+k*o)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;I(C,t),t+=C.length;for(let n=0,i=M.length;n<i;n++){const e=M[n];I(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new ev(i,3)),this.setAttribute("uv",new ev(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new fw[i.type]).fromJSON(i)),new rS(n,e.options)}}const aS={generateTopUV:function(e,t,n,i,r){const a=t[3*n],s=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new If(a,s),new If(o,l),new If(c,u)]},generateSideWallUV:function(e,t,n,i,r,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new If(s,1-l),new If(c,1-d),new If(h,1-f),new If(m,1-v)]:[new If(o,1-l),new If(u,1-d),new If(p,1-f),new If(g,1-v)]}};class sS extends ww{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sS(e.radius,e.detail)}}class oS extends ww{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oS(e.radius,e.detail)}}class lS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const s=[],o=[],l=[],c=[];let u=e;const d=(t-e)/i,h=new mm,p=new If;for(let f=0;f<=i;f++){for(let e=0;e<=n;e++){const i=r+e/n*a;h.x=u*Math.cos(i),h.y=u*Math.sin(i),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(let f=0;f<i;f++){const e=f*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,a=i+n+1,o=i+n+2,l=i+1;s.push(r,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new ev(o,3)),this.setAttribute("normal",new ev(l,3)),this.setAttribute("uv",new ev(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tw([new If(0,.5),new If(-.5,-.5),new If(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,o,c),s+=o,o=0;function l(e){const s=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===tS.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===tS.isClockWise(e)&&(u[t]=e.reverse())}const d=tS.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),a.push(e.x,e.y)}for(let t=0,i=d.length;t<i;t++){const e=d[t],i=e[0]+s,r=e[1]+s,a=e[2]+s;n.push(i,r,a),o+=3}}this.setIndex(n),this.setAttribute("position",new ev(i,3)),this.setAttribute("normal",new ev(r,3)),this.setAttribute("uv",new ev(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new cS(n,e.curveSegments)}}class uS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new mm,d=new mm,h=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let x=0;0===g&&0===a?x=.5/t:g===n&&o===Math.PI&&(x=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(a+v*s),u.y=e*Math.cos(a+v*s),u.z=e*Math.sin(i+o*r)*Math.sin(a+v*s),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),m.push(o+x,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],i=c[g][e],r=c[g+1][e],s=c[g+1][e+1];(0!==g||a>0)&&h.push(t,i,s),(g!==n-1||o<Math.PI)&&h.push(i,r,s)}this.setIndex(h),this.setAttribute("position",new ev(p,3)),this.setAttribute("normal",new ev(f,3)),this.setAttribute("uv",new ev(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uS(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class dS extends ww{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dS(e.radius,e.detail)}}class hS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],o=[],l=[],c=new mm,u=new mm,d=new mm;for(let h=0;h<=n;h++)for(let a=0;a<=i;a++){const p=a/i*r,f=h/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),s.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),o.push(d.x,d.y,d.z),l.push(a/i),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=i;e++){const t=(i+1)*h+e-1,n=(i+1)*(h-1)+e-1,r=(i+1)*(h-1)+e,s=(i+1)*h+e;a.push(t,n,s),a.push(n,r,s)}this.setIndex(a),this.setAttribute("position",new ev(s,3)),this.setAttribute("normal",new ev(o,3)),this.setAttribute("uv",new ev(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class pS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],l=[],c=[],u=new mm,d=new mm,h=new mm,p=new mm,f=new mm,m=new mm,g=new mm;for(let x=0;x<=n;++x){const s=x/n*r*Math.PI*2;v(s,r,a,e,h),v(s+.01,r,a,e,p),m.subVectors(p,h),g.addVectors(p,h),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,a=-t*Math.cos(r),s=t*Math.sin(r);u.x=h.x+(a*g.x+s*f.x),u.y=h.y+(a*g.y+s*f.y),u.z=h.z+(a*g.z+s*f.z),o.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(x/n),c.push(e/i)}}for(let x=1;x<=n;x++)for(let e=1;e<=i;e++){const t=(i+1)*(x-1)+(e-1),n=(i+1)*x+(e-1),r=(i+1)*x+e,a=(i+1)*(x-1)+e;s.push(t,n,a),s.push(n,r,a)}function v(e,t,n,i,r){const a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new ev(o,3)),this.setAttribute("normal",new ev(l,3)),this.setAttribute("uv",new ev(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class fS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hw(new mm(-1,-1,0),new mm(-1,1,0),new mm(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new mm,o=new mm,l=new If;let c=new mm;const u=[],d=[],h=[],p=[];function f(r){c=e.getPointAt(r/t,c);const l=a.normals[r],h=a.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+r*h.x,o.y=a*l.y+r*h.y,o.z=a*l.z+r*h.z,o.normalize(),d.push(o.x,o.y,o.z),s.x=c.x+n*o.x,s.y=c.y+n*o.y,s.z=c.z+n*o.z,u.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),a=(i+1)*e+t,s=(i+1)*(e-1)+t;p.push(n,r,s),p.push(r,a,s)}}()}(),this.setIndex(p),this.setAttribute("position",new ev(u,3)),this.setAttribute("normal",new ev(d,3)),this.setAttribute("uv",new ev(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new fS((new fw[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class mS extends cv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new mm,r=new mm;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=s.getX(e+l),c=s.getX(e+(l+1)%3);i.fromBufferAttribute(a,o),r.fromBufferAttribute(a,c),!0===gS(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;i.fromBufferAttribute(a,s),r.fromBufferAttribute(a,l),!0===gS(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new ev(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function gS(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var vS=Object.freeze({__proto__:null,BoxGeometry:Tv,CapsuleGeometry:xw,CircleGeometry:yw,ConeGeometry:_w,CylinderGeometry:bw,DodecahedronGeometry:Sw,EdgesGeometry:kw,ExtrudeGeometry:rS,IcosahedronGeometry:sS,LatheGeometry:vw,OctahedronGeometry:oS,PlaneGeometry:qv,PolyhedronGeometry:ww,RingGeometry:lS,ShapeGeometry:cS,SphereGeometry:uS,TetrahedronGeometry:dS,TorusGeometry:hS,TorusKnotGeometry:pS,TubeGeometry:fS,WireframeGeometry:mS});class xS extends Ig{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bg(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class yS extends Nv{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bS extends Ig{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Bg(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ap,this.normalScale=new If(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _S extends bS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new If(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ef(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bg(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bg(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bg(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wS extends Ig{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bg(16777215),this.specular=new Bg(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ap,this.normalScale=new If(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ld,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SS extends Ig{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bg(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ap,this.normalScale=new If(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MS extends Ig{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ap,this.normalScale=new If(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class AS extends Ig{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ap,this.normalScale=new If(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ld,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class CS extends Ig{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bg(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ap,this.normalScale=new If(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ES extends A_{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function kS(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function TS(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RS(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n}function LS(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,s=0;s!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r}function PS(e,t,n,i){let r=1,a=e[0];for(;void 0!==a&&void 0===a[i];)a=e[r++];if(void 0===a)return;let s=a[i];if(void 0!==s)if(Array.isArray(s))do{s=a[i],void 0!==s&&(t.push(a.time),n.push.apply(n,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[i],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{s=a[i],void 0!==s&&(t.push(a.time),n.push(s)),a=e[r++]}while(void 0!==a)}const BS={convertArray:kS,isTypedArray:TS,getKeyframeOrder:RS,sortedArray:LS,flattenJSON:PS,subclip:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const a=e.clone();a.name=t;const s=[];for(let l=0;l<a.tracks.length;++l){const e=a.tracks[l],t=e.getValueSize(),o=[],c=[];for(let a=0;a<e.times.length;++a){const s=e.times[a]*r;if(!(s<n||s>=i)){o.push(e.times[a]);for(let n=0;n<t;++n)c.push(e.values[a*t+n])}}0!==o.length&&(e.times=kS(o,e.times.constructor),e.values=kS(c,e.values.constructor),s.push(e))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,a=t/i;for(let s=0;s<r;++s){const t=n.tracks[s],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===r)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=t.times.length-1;let h;if(a<=t.times[0]){const e=o,n=l-o;h=t.values.slice(e,n)}else if(a>=t.times[d]){const e=d*l+o,n=e+l-o;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,i=l-o;e.evaluate(a),h=e.resultBuffer.slice(n,i)}if("quaternion"===i){(new fm).fromArray(h).normalize().conjugate().toArray(h)}const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)fm.multiplyQuaternionsFlat(r.values,t,h,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=h[n]}}}return e.blendMode=vp,e}};class NS{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=r)){const s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}for(;n<a;){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let a=0;a!==i;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class DS extends NS{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pp,endingEnd:pp}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case fp:r=e,s=2*t-n;break;case mp:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case fp:a=e,o=2*n-t;break;case mp:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,x=(-1-h)*m+(1.5+h)*f+.5*p,y=h*m-h*f;for(let b=0;b!==s;++b)r[b]=g*a[c+b]+v*a[l+b]+x*a[o+b]+y*a[u+b];return r}}class IS extends NS{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(i-t),u=1-c;for(let d=0;d!==s;++d)r[d]=a[l+d]*u+a[o+d]*c;return r}}class jS extends NS{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class zS{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=kS(t,this.TimeBufferType),this.values=kS(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:kS(e.times,Array),values:kS(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new jS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new IS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new DS(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case up:t=this.InterpolantFactoryMethodDiscrete;break;case dp:t=this.InterpolantFactoryMethodLinear;break;case hp:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return up;case this.InterpolantFactoryMethodLinear:return dp;case this.InterpolantFactoryMethodSmooth:return hp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==r;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,a),e=!1;break}a=t}if(void 0!==i&&TS(i))for(let s=0,o=i.length;s!==o;++s){const t=i[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===hp,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const i=s*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,s=0;s!==n;++s)t[i+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}zS.prototype.TimeBufferType=Float32Array,zS.prototype.ValueBufferType=Float32Array,zS.prototype.DefaultInterpolation=dp;class FS extends zS{}FS.prototype.ValueTypeName="bool",FS.prototype.ValueBufferType=Array,FS.prototype.DefaultInterpolation=up,FS.prototype.InterpolantFactoryMethodLinear=void 0,FS.prototype.InterpolantFactoryMethodSmooth=void 0;class OS extends zS{}OS.prototype.ValueTypeName="color";class US extends zS{}US.prototype.ValueTypeName="number";class HS extends NS{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(i-t);let l=e*s;for(let c=l+s;l!==c;l+=4)fm.slerpFlat(r,0,a,l-s,a,l,o);return r}}class GS extends zS{InterpolantFactoryMethodLinear(e){return new HS(this.times,this.values,this.getValueSize(),e)}}GS.prototype.ValueTypeName="quaternion",GS.prototype.DefaultInterpolation=dp,GS.prototype.InterpolantFactoryMethodSmooth=void 0;class WS extends zS{}WS.prototype.ValueTypeName="string",WS.prototype.ValueBufferType=Array,WS.prototype.DefaultInterpolation=up,WS.prototype.InterpolantFactoryMethodLinear=void 0,WS.prototype.InterpolantFactoryMethodSmooth=void 0;class VS extends zS{}VS.prototype.ValueTypeName="vector";class XS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gp;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Cf(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,s=n.length;a!==s;++a)t.push(YS(n[a]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=n.length;r!==a;++r)t.push(zS.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,a=[];for(let s=0;s<r;s++){let e=[],o=[];e.push((s+r-1)%r,s,(s+1)%r),o.push(0,1,0);const l=RS(e);e=LS(e,1,l),o=LS(o,1,l),i||0!==e[0]||(e.push(r),o.push(o[0])),a.push(new US(".morphTargetInfluences["+t[s].name+"]",e,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){const t=e[s],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const a=[];for(const s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],s=[];PS(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},i=[],r=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],a=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),a.push(i.morphTarget===r?1:0)}i.push(new US(".morphTargetInfluence["+r+"]",t,a))}o=t.length*a}else{const r=".bones["+t[c].name+"]";n(VS,r+".position",e,"pos",i),n(GS,r+".quaternion",e,"rot",i),n(VS,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function YS(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return US;case"vector":case"vector2":case"vector3":case"vector4":return VS;case"color":return OS;case"quaternion":return GS;case"bool":case"boolean":return FS;case"string":return WS}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];PS(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const JS={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class KS{constructor(e,t,n){const i=this;let r,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const qS=new KS;class ZS{constructor(e){this.manager=void 0!==e?e:qS,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ZS.DEFAULT_MATERIAL_NAME="__DEFAULT";const QS={};class $S extends Error{constructor(e,t){super(e),this.response=t}}class eM extends ZS{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=JS.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==QS[e])return void QS[e].push({onLoad:t,onProgress:n,onError:i});QS[e]=[],QS[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=QS[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){!function t(){i.read().then(i=>{let{done:r,value:l}=i;if(r)e.close();else{o+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}})}()}});return new Response(l)}throw new $S('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,s));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{JS.add(e,t);const n=QS[e];delete QS[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=QS[e];if(void 0===n)throw this.manager.itemError(e),t;delete QS[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new eM(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(rN){i?i(rN):console.error(rN),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=XS.parse(e[n]);t.push(i)}return t}}class nM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=this,a=[],s=new V_,o=new eM(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],function(e){const n=r.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=nh),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,i)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)c(u);else o.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=nh),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,i);return s}}class iM extends ZS{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=JS.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s=Hf("img");function o(){c(),JS.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class rM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=new Fv;r.colorSpace=kp;const a=new iM(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(e[n],function(e){r.images[n]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)o(l);return r}}class aM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new h_,s=new eM(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(e){let n;try{n=r.parse(e)}catch(WE){if(void 0===i)return void console.error(WE);i(WE)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Kd,a.wrapT=void 0!==n.wrapT?n.wrapT:Kd,a.magFilter=void 0!==n.magFilter?n.magFilter:nh,a.minFilter=void 0!==n.minFilter?n.minFilter:nh,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?a.colorSpace=n.colorSpace:void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=ah),1===n.mipmapCount&&(a.minFilter=nh),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,i),a}}class sM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=new am,a=new iM(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class oM extends gg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Bg(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class lM extends oM{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(gg.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bg(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const cM=new Vm,uM=new mm,dM=new mm;class hM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new If(512,512),this.map=null,this.mapPass=null,this.matrix=new Vm,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Yv,this._frameExtents=new If(1,1),this._viewportCount=1,this._viewports=[new sm(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;uM.setFromMatrixPosition(e.matrixWorld),t.position.copy(uM),dM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dM),t.updateMatrixWorld(),cM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cM),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(cM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pM extends hM{constructor(){super(new Iv(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Af*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fM extends oM{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(gg.DEFAULT_UP),this.updateMatrix(),this.target=new gg,this.distance=n,this.angle=i,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new pM}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const mM=new Vm,gM=new mm,vM=new mm;class xM extends hM{constructor(){super(new Iv(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new If(4,2),this._viewportCount=6,this._viewports=[new sm(2,1,1,1),new sm(0,1,1,1),new sm(3,1,1,1),new sm(1,1,1,1),new sm(3,0,1,1),new sm(1,0,1,1)],this._cubeDirections=[new mm(1,0,0),new mm(-1,0,0),new mm(0,0,1),new mm(0,0,-1),new mm(0,1,0),new mm(0,-1,0)],this._cubeUps=[new mm(0,1,0),new mm(0,1,0),new mm(0,1,0),new mm(0,1,0),new mm(0,0,1),new mm(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),gM.setFromMatrixPosition(e.matrixWorld),n.position.copy(gM),vM.copy(n.position),vM.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(vM),n.updateMatrixWorld(),i.makeTranslation(-gM.x,-gM.y,-gM.z),mM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mM)}}class yM extends oM{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new xM}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class bM extends hM{constructor(){super(new ox(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _M extends oM{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gg.DEFAULT_UP),this.updateMatrix(),this.target=new gg,this.shadow=new bM}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class wM extends oM{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class SM extends oM{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class MM{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new mm)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class AM extends oM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new MM;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class CM extends ZS{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,a=new eM(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(rN){i?i(rN):console.error(rN),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=CM.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new Bg).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new Bg).setHex(t.value);break;case"v2":i.uniforms[r].value=(new If).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new mm).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new sm).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new jf).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Vm).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new If).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new If).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:xS,SpriteMaterial:Ib,RawShaderMaterial:yS,ShaderMaterial:Nv,PointsMaterial:I_,MeshPhysicalMaterial:_S,MeshStandardMaterial:bS,MeshPhongMaterial:wS,MeshToonMaterial:SS,MeshNormalMaterial:MS,MeshLambertMaterial:AS,MeshDepthMaterial:fb,MeshDistanceMaterial:mb,MeshBasicMaterial:jg,MeshMatcapMaterial:CS,LineDashedMaterial:ES,LineBasicMaterial:A_,Material:Ig}[e]}}class EM{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(rN){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class kM extends cv{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class TM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new eM(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(rN){i?i(rN):console.error(rN),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],a=new Uint32Array(r).buffer;return n[t]=a,a}(e,r.buffer),s=Uf(r.type,a),o=new Bb(s,r.stride);return o.uuid=r.uuid,t[i]=o,o}const r=e.isInstancedBufferGeometry?new kM:new cv,a=e.data.index;if(void 0!==a){const e=Uf(a.type,a.array);r.setIndex(new Vg(e,1))}const s=e.data.attributes;for(const u in s){const t=s[u];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new Db(r,t.itemSize,t.offset,t.normalized)}else{const e=Uf(t.type,t.array);n=new(t.isInstancedBufferAttribute?g_:Vg)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),r.setAttribute(u,n)}const o=e.data.morphAttributes;if(o)for(const u in o){const t=o[u],n=[];for(let r=0,a=t.length;r<a;r++){const a=t[r];let s;if(a.isInterleavedBufferAttribute){const t=i(e.data,a.data);s=new Db(t,a.itemSize,a.offset,a.normalized)}else{const e=Uf(a.type,a.array);s=new Vg(e,a.itemSize,a.normalized)}void 0!==a.name&&(s.name=a.name),n.push(s)}r.morphAttributes[u]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,d=l.length;u!==d;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new mm;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new Im(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class RM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=this,a=""===this.path?EM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new eM(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(WE){return void 0!==i&&i(WE),void console.error("THREE:ObjectLoader: Can't parse "+e+".",WE.message)}const s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(a,t)},n,i)}async loadAsync(e,t){const n=""===this.path?EM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new eM(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),a=JSON.parse(r),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,i,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new Tw).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let r=0,a=e.length;r<a;r++){const t=(new m_).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new TM;for(let r=0,a=e.length;r<a;r++){let a;const s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;default:s.type in vS?a=vS[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new CM;r.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=XS.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function a(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Uf(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new KS(t);r=new iM(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=a(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new h_(n.data,n.width,n.height)))}i[n.uuid]=new nm(e)}else{const e=a(n.url);i[n.uuid]=new nm(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:Uf(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new iM(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],a=i.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new h_(i.data,i.width,i.height)))}n[i.uuid]=new nm(e)}else{const e=await r(i.url);n[i.uuid]=new nm(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,a=e.length;r<a;r++){const a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=t[a.image],o=s.data;let l;Array.isArray(o)?(l=new Fv,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new h_:new am,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,LM)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],PM),l.wrapT=n(a.wrap[1],PM)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,BM)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,BM)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),i[a.uuid]=l}return i}parseObject(e,t,n,i,r){let a,s,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new Pb,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Bg(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Lb(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Rb(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Iv(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ox(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new wM(e.color,e.intensity);break;case"DirectionalLight":a=new _M(e.color,e.intensity);break;case"PointLight":a=new yM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new SM(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new fM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new lM(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new AM).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),o=c(e.material),a=new u_(s,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),o=c(e.material),a=new Ev(s,o);break;case"InstancedMesh":s=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;a=new M_(s,o,t),a.instanceMatrix=new g_(new Float32Array(n.array),16),void 0!==i&&(a.instanceColor=new g_(new Float32Array(i.array),i.itemSize));break;case"LOD":a=new e_;break;case"Line":a=new L_(l(e.geometry),c(e.material));break;case"LineLoop":a=new D_(l(e.geometry),c(e.material));break;case"LineSegments":a=new N_(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new U_(l(e.geometry),c(e.material));break;case"Sprite":a=new qb(c(e.material));break;case"Group":a=new _b;break;case"Bone":a=new d_;break;default:a=new gg}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=a.getObjectByProperty("uuid",n.object);void 0!==i&&a.addLevel(i,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}}const LM={UVMapping:Hd,CubeReflectionMapping:Gd,CubeRefractionMapping:Wd,EquirectangularReflectionMapping:Vd,EquirectangularRefractionMapping:Xd,CubeUVReflectionMapping:Yd},PM={RepeatWrapping:Jd,ClampToEdgeWrapping:Kd,MirroredRepeatWrapping:qd},BM={NearestFilter:Zd,NearestMipmapNearestFilter:Qd,NearestMipmapLinearFilter:eh,LinearFilter:nh,LinearMipmapNearestFilter:ih,LinearMipmapLinearFilter:ah};class NM extends ZS{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=JS.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){JS.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}let DM;class IM{static getContext(){return void 0===DM&&(DM=new(window.AudioContext||window.webkitAudioContext)),DM}static setContext(e){DM=e}}class jM extends ZS{constructor(e){super(e)}load(e,t,n,i){const r=this,a=new eM(this.manager);function s(t){i?i(t):console.error(t),r.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{const n=e.slice(0);IM.getContext().decodeAudioData(n,function(e){t(e)},s)}catch(rN){s(rN)}},n,i)}}const zM=new Vm,FM=new Vm,OM=new Vm;class UM{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Iv,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Iv,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,OM.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(Mf*t.fov*.5)/t.zoom;let a,s;FM.elements[12]=-n,zM.elements[12]=n,a=-r*t.aspect+i,s=r*t.aspect+i,OM.elements[0]=2*t.near/(s-a),OM.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(OM),a=-r*t.aspect-i,s=r*t.aspect-i,OM.elements[0]=2*t.near/(s-a),OM.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(OM)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(FM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(zM)}}class HM{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=GM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=GM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function GM(){return("undefined"===typeof performance?Date:performance).now()}const WM=new mm,VM=new fm,XM=new mm,YM=new mm;class JM extends gg{constructor(){super(),this.type="AudioListener",this.context=IM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new HM}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(WM,VM,XM),YM.set(0,0,-1).applyQuaternion(VM),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(WM.x,e),t.positionY.linearRampToValueAtTime(WM.y,e),t.positionZ.linearRampToValueAtTime(WM.z,e),t.forwardX.linearRampToValueAtTime(YM.x,e),t.forwardY.linearRampToValueAtTime(YM.y,e),t.forwardZ.linearRampToValueAtTime(YM.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(WM.x,WM.y,WM.z),t.setOrientation(YM.x,YM.y,YM.z,n.x,n.y,n.z)}}class KM extends gg{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const qM=new mm,ZM=new fm,QM=new mm,$M=new mm;class eA extends KM{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(qM,ZM,QM),$M.set(0,0,1).applyQuaternion(ZM);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(qM.x,e),t.positionY.linearRampToValueAtTime(qM.y,e),t.positionZ.linearRampToValueAtTime(qM.z,e),t.orientationX.linearRampToValueAtTime($M.x,e),t.orientationY.linearRampToValueAtTime($M.y,e),t.orientationZ.linearRampToValueAtTime($M.z,e)}else t.setPosition(qM.x,qM.y,qM.z),t.setOrientation($M.x,$M.y,$M.z)}}class tA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class nA{constructor(e,t,n){let i,r,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)n[r+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){fm.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const a=this._workIndex*r;fm.multiplyQuaternionsFlat(e,a,e,t,e,n),fm.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,r){const a=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*a+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[n+a]*i}}}const iA="\\[\\]\\.:\\/",rA=new RegExp("["+iA+"]","g"),aA="[^"+iA+"]",sA="[^"+iA.replace("\\.","")+"]",oA=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",aA)+/(WCOD+)?/.source.replace("WCOD",sA)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aA)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aA)+"$"),lA=["material","materials","bones","map"];class cA{constructor(e,t,n){this.path=t,this.parsedPath=n||cA.parseTrackName(t),this.node=cA.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new cA.Composite(e,t,n):new cA(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rA,"")}static parseTrackName(e){const t=oA.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==lA.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=cA.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}cA.Composite=class{constructor(e,t,n){const i=n||cA.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},cA.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},cA.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},cA.prototype.GetterByBindingType=[cA.prototype._getValue_direct,cA.prototype._getValue_array,cA.prototype._getValue_arrayElement,cA.prototype._getValue_toArray],cA.prototype.SetterByBindingTypeAndVersioning=[[cA.prototype._setValue_direct,cA.prototype._setValue_direct_setNeedsUpdate,cA.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[cA.prototype._setValue_array,cA.prototype._setValue_array_setNeedsUpdate,cA.prototype._setValue_array_setMatrixWorldNeedsUpdate],[cA.prototype._setValue_arrayElement,cA.prototype._setValue_arrayElement_setNeedsUpdate,cA.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[cA.prototype._setValue_fromArray,cA.prototype._setValue_fromArray_setNeedsUpdate,cA.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uA{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Cf(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let s,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=o++,t[d]=h,e.push(u);for(let e=0,t=a;e!==t;++e)r[e].push(new cA(u,n[e],i[e]))}else if(h<l){s=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[d]=o,e[o]=u;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[o];let s=t[h];t[h]=a,void 0===s&&(s=new cA(u,n[e],i[e])),t[o]=s}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=r){const a=r++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[l];t[l]=i,t[a]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const s=--r,o=e[s],c=--a,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[c];t[l]=i,t[s]=r,t.pop()}}else{const r=--a,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,a.push(e),s.push(t),r.push(u);for(let d=c,h=o.length;d!==h;++d){const n=o[d];u[d]=new cA(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}class dA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,a=r.length,s=new Array(a),o={endingStart:pp,endingEnd:pp};for(let l=0;l!==a;++l){const e=r[l].createInterpolant(null);s[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=lp,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,a=n/i;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===vp)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulate(i,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=n===cp;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(n===op){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=fp,i.endingEnd=fp):(i.endingStart=e?this.zeroSlopeAtStart?fp:pp:mp,i.endingEnd=t?this.zeroSlopeAtEnd?fp:pp:mp)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=n,this}}const hA=new Float32Array(1);class pA extends _f{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,a[u]=l;else{if(l=a[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}const i=t&&t._propertyBindings[u].binding.parsedPath;l=new nA(cA.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),a[u]=l}s[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new IS(new Float32Array(2),new Float32Array(2),1,hA),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let a="string"===typeof e?XS.findByName(i,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:gp),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new dA(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?XS.findByName(n,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,a)}const s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class fA{constructor(e){this.value=e}clone(){return new fA(void 0===this.value.clone?this.value:this.value.clone())}}let mA=0;class gA extends _f{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:mA++}),this.name="",this.usage=of,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return(new this.constructor).copy(this)}}class vA extends Bb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class xA{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class yA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Wm(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new ng,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return _A(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(bA),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)_A(e[i],this,n,t);return n.sort(bA),n}}function bA(e,t){return e.distance-t.distance}function _A(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)_A(i[e],t,n,!0)}}class wA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ef(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class SA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const MA=new If;class AA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new If(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new If(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=MA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,MA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const CA=new mm,EA=new mm;class kA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){CA.subVectors(e,this.start),EA.subVectors(this.end,this.start);const n=EA.dot(EA);let i=EA.dot(CA)/n;return t&&(i=Ef(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const TA=new mm;class RA extends gg{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new cv,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){const e=a/o*Math.PI*2,t=s/o*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new ev(i,3));const r=new A_({fog:!1,toneMapped:!1});this.cone=new N_(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),TA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(TA),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const LA=new mm,PA=new Vm,BA=new Vm;class NA extends N_{constructor(e){const t=DA(e),n=new cv,i=[],r=[],a=new Bg(0,0,1),s=new Bg(0,1,0);for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}n.setAttribute("position",new ev(i,3)),n.setAttribute("color",new ev(r,3));super(n,new A_({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");BA.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(PA.multiplyMatrices(BA,e.matrixWorld),LA.setFromMatrixPosition(PA),i.setXYZ(a,LA.x,LA.y,LA.z),PA.multiplyMatrices(BA,e.parent.matrixWorld),LA.setFromMatrixPosition(PA),i.setXYZ(a+1,LA.x,LA.y,LA.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function DA(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,DA(e.children[n]));return t}class IA extends Ev{constructor(e,t,n){super(new uS(t,4,2),new jg({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const jA=new mm,zA=new Bg,FA=new Bg;class OA extends gg{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new oS(t);i.rotateY(.5*Math.PI),this.material=new jg({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new Vg(a,3)),this.add(new Ev(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");zA.copy(this.light.color),FA.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?zA:FA;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jA.setFromMatrixPosition(this.light.matrixWorld).negate())}}class UA extends N_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Bg(n),i=new Bg(i);const r=t/2,a=e/t,s=e/2,o=[],l=[];for(let u=0,d=0,h=-s;u<=t;u++,h+=a){o.push(-s,0,h,s,0,h),o.push(h,0,-s,h,0,s);const e=u===r?n:i;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const c=new cv;c.setAttribute("position",new ev(o,3)),c.setAttribute("color",new ev(l,3));super(c,new A_({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class HA extends N_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new Bg(r),a=new Bg(a);const s=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(i,0,l);const u=1&c?r:a;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?r:a,l=e-e/n*c;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,a=Math.cos(n)*l;s.push(r,0,a),o.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,a=Math.cos(n)*l,s.push(r,0,a),o.push(t.r,t.g,t.b)}}const l=new cv;l.setAttribute("position",new ev(s,3)),l.setAttribute("color",new ev(o,3));super(l,new A_({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const GA=new mm,WA=new mm,VA=new mm;class XA extends gg{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new cv;i.setAttribute("position",new ev([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new A_({fog:!1,toneMapped:!1});this.lightPlane=new L_(i,r),this.add(this.lightPlane),i=new cv,i.setAttribute("position",new ev([0,0,0,0,0,1],3)),this.targetLine=new L_(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),GA.setFromMatrixPosition(this.light.matrixWorld),WA.setFromMatrixPosition(this.light.target.matrixWorld),VA.subVectors(WA,GA),this.lightPlane.lookAt(WA),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(WA),this.targetLine.scale.z=VA.length()}}const YA=new mm,JA=new Dv;class KA extends N_{constructor(e){const t=new cv,n=new A_({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={};function s(e,t){o(e),o(t)}function o(e){i.push(0,0,0),r.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new ev(i,3)),t.setAttribute("color",new ev(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Bg(16755200),c=new Bg(16711680),u=new Bg(43775),d=new Bg(16777215),h=new Bg(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,i,r){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;JA.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),qA("c",t,e,JA,0,0,-1),qA("t",t,e,JA,0,0,1),qA("n1",t,e,JA,-1,-1,-1),qA("n2",t,e,JA,1,-1,-1),qA("n3",t,e,JA,-1,1,-1),qA("n4",t,e,JA,1,1,-1),qA("f1",t,e,JA,-1,-1,1),qA("f2",t,e,JA,1,-1,1),qA("f3",t,e,JA,-1,1,1),qA("f4",t,e,JA,1,1,1),qA("u1",t,e,JA,.7,1.1,-1),qA("u2",t,e,JA,-.7,1.1,-1),qA("u3",t,e,JA,0,2,-1),qA("cf1",t,e,JA,-1,0,1),qA("cf2",t,e,JA,1,0,1),qA("cf3",t,e,JA,0,-1,1),qA("cf4",t,e,JA,0,1,1),qA("cn1",t,e,JA,-1,0,-1),qA("cn2",t,e,JA,1,0,-1),qA("cn3",t,e,JA,0,-1,-1),qA("cn4",t,e,JA,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function qA(e,t,n,i,r,a,s){YA.set(r,a,s).unproject(i);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],YA.x,YA.y,YA.z)}}const ZA=new xm;class QA extends N_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new cv;r.setIndex(new Vg(n,1)),r.setAttribute("position",new Vg(i,3)),super(r,new A_({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ZA.setFromObject(this.object),ZA.isEmpty())return;const t=ZA.min,n=ZA.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $A extends N_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new cv;i.setIndex(new Vg(n,1)),i.setAttribute("position",new ev([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new A_({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class eC extends L_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new cv;i.setAttribute("position",new ev([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new A_({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new cv;r.setAttribute("position",new ev([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Ev(r,new jg({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const tC=new mm;let nC,iC;class rC extends gg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mm(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mm(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===nC&&(nC=new cv,nC.setAttribute("position",new ev([0,0,0,0,1,0],3)),iC=new bw(0,.5,1,5,1),iC.translate(0,-.5,0)),this.position.copy(t),this.line=new L_(nC,new A_({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ev(iC,new jg({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{tC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(tC,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class aC extends N_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new cv;n.setAttribute("position",new ev(t,3)),n.setAttribute("color",new ev([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new A_({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new Bg,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sC{constructor(){this.type="ShapePath",this.color=new Bg,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new gw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,a=0;a<n;r=a++){let n=t[r],s=t[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],o=-o,s=t[r],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return i}const n=tS.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,a,s;const o=[];if(1===i.length)return a=i[0],s=new Tw,s.curves=a.curves,o.push(s),o;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,p=[],f=0;u[f]=void 0,p[f]=[];for(let m=0,g=i.length;m<g;m++)a=i[m],d=a.getPoints(),r=n(d),r=e?!r:r,r?(!l&&u[f]&&f++,u[f]={s:new Tw,p:d},u[f].s.curves=a.curves,l&&f++,p[f]=[]):p[f].push({h:a,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new Tw;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let t=0,i=u.length;t<i;t++)c[t]=[];for(let i=0,r=u.length;i<r;i++){const r=p[i];for(let a=0;a<r.length;a++){const s=r[a];let o=!0;for(let r=0;r<u.length;r++)t(s.p,u[r].p)&&(i!==r&&n++,o?(o=!1,c[r].push(s)):e=!0);o&&c[i].push(s)}}n>0&&!1===e&&(p=c)}for(let m=0,g=u.length;m<g;m++){s=u[m].s,o.push(s),h=p[m];for(let e=0,t=h.length;e<t;e++)s.holes.push(h[e].h)}return o}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Iu}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Iu);var oC=n(878);function lC(e){let t;const n=new Set,i=(e,i)=>{const r="function"===typeof e?e(t):e;if(r!==t){const e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,a={setState:i,getState:r,subscribe:(e,i,a)=>i||a?function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=i(t);function o(){const n=i(t);if(!a(s,n)){const t=s;e(s=n,t)}}return n.add(o),()=>n.delete(o)}(e,i,a):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,a),a}const cC="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;var uC=n(235),dC=n.n(uC),hC=n(773);const pC=[];function fC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function mC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const s of pC)if(fC(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!n)throw s.promise}const r={keys:t,equal:i.equal,remove:()=>{const e=pC.indexOf(r);-1!==e&&pC.splice(e,1)},promise:(a=e,"object"===typeof a&&"function"===typeof a.then?e:e(...t)).then(e=>{r.response=e,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(e=>r.error=e)};var a;if(pC.push(r),!n)throw r.promise}const gC=["args","attach"],vC=["args","children"],xC=["args","children"],yC=["children","key","ref"],bC=["children","key","ref"],_C=["params"];const wC={};var SC,MC;const AC=e=>"colorSpace"in e||"outputColorSpace"in e,CC=()=>{var e;return null!=(e=wC.ColorManagement)?e:null},EC=e=>e&&e.isOrthographicCamera,kC="undefined"!==typeof window&&(null!=(SC=window.document)&&SC.createElement||"ReactNative"===(null==(MC=window.navigator)?void 0:MC.product))?t.useLayoutEffect:t.useEffect;function TC(e){const n=t.useRef(e);return kC(()=>{n.current=e},[e]),n}function RC(e){let{set:t}=e;return kC(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class LC extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}LC.getDerivedStateFromError=()=>({error:!0});const PC="__default",BC=new Map,NC=e=>e&&!!e.memoized&&!!e.changes;function DC(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const IC=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},jC={obj:e=>e===Object(e)&&!jC.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(jC.str(e)||jC.num(e))return e===t;const a=jC.obj(e);if(a&&"reference"===i)return e===t;const s=jC.arr(e);if(s&&"reference"===n)return e===t;if((s||a)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(a&&"shallow"===n&&"shallow"===i){for(o in r?t:e)if(!jC.equ(e[o],t[o],{strict:r,objects:"reference"}))return!1}else for(o in r?t:e)if(e[o]!==t[o])return!1;if(jC.und(o)){if(s&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function zC(e){const t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}function FC(e,t){return e.__r3f=c({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function OC(e,t){let n=e;if(t.includes("-")){const i=t.split("-"),r=i.pop();return n=i.reduce((e,t)=>e[t],e),{target:n,key:r}}return{target:n,key:t}}const UC=/-\d+$/;function HC(e,t,n){if(jC.str(n)){if(UC.test(n)){const t=n.replace(UC,""),{target:i,key:r}=OC(e,t);Array.isArray(i[r])||(i[r]=[])}const{target:i,key:r}=OC(e,n);t.__r3f.previousAttach=i[r],i[r]=t}else t.__r3f.previousAttach=n(e,t)}function GC(e,t,n){var i,r;if(jC.str(n)){const{target:i,key:r}=OC(e,n),a=t.__r3f.previousAttach;void 0===a?delete i[r]:i[r]=a}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function WC(e,t){let{children:n,key:i,ref:a}=t,s=r(t,yC),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{children:l,key:u,ref:d}=o,h=r(o,bC),p=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var f;const m=null!=(f=null==e?void 0:e.__r3f)?f:{},g=Object.entries(s),v=[];if(p){const e=Object.keys(h);for(let t=0;t<e.length;t++)s.hasOwnProperty(e[t])||g.unshift([e[t],PC+"remove"])}g.forEach(t=>{let[n,i]=t;var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===n)return;if(jC.equ(i,h[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return v.push([n,i,!0,[]]);let a=[];n.includes("-")&&(a=n.split("-")),v.push([n,i,!1,a]);for(const e in s){const t=s[e];e.startsWith("".concat(n,"-"))&&v.push([e,t,!1,e.split("-")])}});const x=c({},s);return m.memoizedProps&&m.memoizedProps.args&&(x.args=m.memoizedProps.args),m.memoizedProps&&m.memoizedProps.attach&&(x.attach=m.memoizedProps.attach),{memoized:x,changes:v}}const VC="undefined"!==typeof process&&!1;function XC(e,t){var n,i,r;const a=null!=(n=e.__r3f)?n:{},s=a.root,o=null!=(i=null==s||null==s.getState?void 0:s.getState())?i:{},{memoized:l,changes:c}=NC(t)?t:WC(e,t),u=a.eventCount;e.__r3f&&(e.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[t,n,i,r]=c[d];if(AC(e)){const e=3001,i="srgb",r="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?i:r):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?i:r)}let s=e,l=s[t];if(r.length&&(l=r.reduce((e,t)=>e[t],e),!l||!l.set)){const[n,...i]=r.reverse();s=i.reverse().reduce((e,t)=>e[t],e),t=n}if(n===PC+"remove")if(s.constructor){let e=BC.get(s.constructor);e||(e=new s.constructor,BC.set(s.constructor,e)),n=e[t]}else n=0;if(i)n?a.handlers[t]=n:delete a.handlers[t],a.eventCount=Object.keys(a.handlers).length;else if(l&&l.set&&(l.copy||l instanceof ng)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&(VC?l.constructor.name===n.constructor.name:l.constructor===n.constructor))l.copy(n);else if(void 0!==n){const e=l instanceof Bg;!e&&l.setScalar?l.setScalar(n):l instanceof ng&&n instanceof ng?l.mask=n.mask:l.set(n),CC()||o.linear||!e||l.convertSRGBToLinear()}}else if(s[t]=n,s[t]instanceof am&&s[t].format===yh&&s[t].type===oh){const e=s[t];AC(e)&&AC(o.gl)?e.colorSpace=o.gl.outputColorSpace:e.encoding=o.gl.outputEncoding}YC(e)}if(a.parent&&o.internal&&e.raycast&&u!==a.eventCount){const t=o.internal.interaction.indexOf(e);t>-1&&o.internal.interaction.splice(t,1),a.eventCount&&o.internal.interaction.push(e)}return!(1===c.length&&"onUpdate"===c[0][0])&&c.length&&null!=(r=e.__r3f)&&r.parent&&JC(e),e}function YC(e){var t,n;const i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function JC(e){null==e.onUpdate||e.onUpdate(e)}function KC(e,t){e.manual||(EC(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function qC(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function ZC(e,t,n,i){const r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function QC(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const i=e.eventObject.__r3f,r=null==i?void 0:i.handlers;if(n.hovered.delete(qC(e)),null!=i&&i.eventCount){const n=c(c({},e),{},{intersections:t});null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(e,t){for(let n=0;n<t.length;n++){const i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))})}}return function(a){const{onPointerMissed:s,internal:o}=e.getState();o.lastEvent.current=a;const l="onPointerMove"===r,u="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,d=function(t,n){const i=e.getState(),r=new Set,a=[],s=n?n(i.internal.interaction):i.internal.interaction;for(let e=0;e<s.length;e++){const t=IC(s[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let o=s.flatMap(function(e){const n=IC(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var i}).sort((e,t)=>{const n=IC(e.object),i=IC(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=qC(e);return!r.has(t)&&(r.add(t),!0)});i.events.filter&&(o=i.events.filter(o,i));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push(c(c({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())r.has(qC(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),h=u?function(t){const{internal:n}=e.getState(),i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(a):0;"onPointerDown"===r&&(o.initialClick=[a.offsetX,a.offsetY],o.initialHits=d.map(e=>e.eventObject)),u&&!d.length&&h<=2&&(i(a,o.interaction),s&&s(a)),l&&n(d),function(t,i,r,a){const s=e.getState();if(t.length){const e={stopped:!1};for(const o of t){const l=IC(o.object)||s,{raycaster:u,pointer:d,camera:h,internal:p}=l,f=new mm(d.x,d.y,0).unproject(h),m=e=>{var t,n;return null!=(t=null==(n=p.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},g=e=>{const t={intersection:o,target:i.target};p.capturedMap.has(e)?p.capturedMap.get(e).set(o.eventObject,t):p.capturedMap.set(e,new Map([[o.eventObject,t]])),i.target.setPointerCapture(e)},v=e=>{const t=p.capturedMap.get(e);t&&ZC(p.capturedMap,o.eventObject,t,e)};let x={};for(let e in i){let t=i[e];"function"!==typeof t&&(x[e]=t)}let y=c(c(c({},o),x),{},{pointer:d,intersections:t,stopped:e.stopped,delta:r,unprojectedPoint:f,ray:u.ray,camera:h,stopPropagation(){const r="pointerId"in i&&p.capturedMap.get(i.pointerId);(!r||r.has(o.eventObject))&&(y.stopped=e.stopped=!0,p.hovered.size&&Array.from(p.hovered.values()).find(e=>e.eventObject===o.eventObject))&&n([...t.slice(0,t.indexOf(o)),o])},target:{hasPointerCapture:m,setPointerCapture:g,releasePointerCapture:v},currentTarget:{hasPointerCapture:m,setPointerCapture:g,releasePointerCapture:v},nativeEvent:i});if(a(y),!0===e.stopped)break}}}(d,a,h,function(e){const t=e.eventObject,n=t.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const t=qC(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{const n=s[r];n?u&&!o.initialHits.includes(t)||(i(a,o.interaction.filter(e=>!o.initialHits.includes(e))),n(e)):u&&o.initialHits.includes(t)&&i(a,o.interaction.filter(e=>!o.initialHits.includes(e)))}})}}}}const $C=e=>!(null==e||!e.render),eE=t.createContext(null),tE=(e,n)=>{const i=function(e){const n="function"===typeof e?lC(e):e,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,r]=(0,t.useReducer)(e=>e+1,0),a=n.getState(),s=(0,t.useRef)(a),o=(0,t.useRef)(e),l=(0,t.useRef)(i),c=(0,t.useRef)(!1),u=(0,t.useRef)();let d;void 0===u.current&&(u.current=e(a));let h=!1;(s.current!==a||o.current!==e||l.current!==i||c.current)&&(d=e(a),h=!i(u.current,d)),cC(()=>{h&&(u.current=d),s.current=a,o.current=e,l.current=i,c.current=!1});const p=(0,t.useRef)(a);cC(()=>{const e=()=>{try{const e=n.getState(),t=o.current(e);l.current(u.current,t)||(s.current=e,u.current=t,r())}catch(WE){c.current=!0,r()}},t=n.subscribe(e);return n.getState()!==p.current&&e(),t},[]);const f=h?d:u.current;return(0,t.useDebugValue)(f),f};return Object.assign(i,n),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[i,n];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},i}((i,r)=>{const a=new mm,s=new mm,o=new mm;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:l,top:c,left:u}=n,d=i/l;t instanceof mm?o.copy(t):o.set(...t);const h=e.getWorldPosition(a).distanceTo(o);if(EC(e))return{width:i/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,r=n*(i/l);return{width:r,height:n,top:c,left:u,factor:i/r,distance:h,aspect:d}}}let u;const d=e=>i(t=>({performance:c(c({},t.performance),{},{current:e})})),h=new If,p={set:i,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:(e,t)=>n(e,t,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new HM,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();u&&clearTimeout(u),e.performance.current!==e.performance.min&&d(e.performance.min),u=setTimeout(()=>d(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>i(t=>c(c({},t),{},{events:c(c({},t.events),e)})),setSize:(e,t,n,a,o)=>{const u=r().camera,d={width:e,height:t,top:a||0,left:o||0,updateStyle:n};i(e=>({size:d,viewport:c(c({},e.viewport),l(u,s,d))}))},setDpr:e=>i(t=>{const n=DC(e);return{viewport:c(c({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),i(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return p}),r=i.getState();let a=r.size,s=r.viewport.dpr,o=r.camera;return i.subscribe(()=>{const{camera:e,size:t,viewport:n,gl:r,set:l}=i.getState();if(t.width!==a.width||t.height!==a.height||n.dpr!==s){var u;a=t,s=n.dpr,KC(e,t),r.setPixelRatio(n.dpr);const i=null!=(u=t.updateStyle)?u:"undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,i)}e!==o&&(o=e,l(t=>({viewport:c(c({},t.viewport),t.viewport.getCurrentViewport(e))})))}),i.subscribe(t=>e(t)),i};let nE,iE=new Set,rE=new Set,aE=new Set;function sE(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function oE(e,t){switch(e){case"before":return sE(iE,t);case"after":return sE(rE,t);case"tail":return sE(aE,t)}}let lE,cE;function uE(e,t,n){let i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),lE=t.internal.subscribers,nE=0;nE<lE.length;nE++)cE=lE[nE],cE.ref.current(cE.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function dE(){const e=t.useContext(eE);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function hE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return dE()(e,t)}const pE=new WeakMap;function fE(e,t){return function(n){let i=pE.get(n);i||(i=new n,pE.set(n,i)),e&&e(i);for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return Promise.all(a.map(e=>new Promise((n,r)=>i.load(e,e=>{e.scene&&Object.assign(e,zC(e.scene)),n(e)},t,t=>r(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message))))))).finally(()=>null==i.dispose?void 0:i.dispose())}}function mE(e,t,n,i){const r=Array.isArray(t)?t:[t],a=((e,t,n)=>mC(e,t,!1,n))(fE(n,i),[e,...r],{equal:jC.equ});return Array.isArray(t)?a:a[0]}mE.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return((e,t,n)=>{mC(e,t,!0,n)})(fE(n),[e,...i])},mE.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)pC.splice(0,pC.length);else{const t=pC.find(t=>fC(e,t.keys,t.equal));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const gE=new Map,{invalidate:vE,advance:xE}=function(e){let t,n,i,r=!1;function a(s){n=requestAnimationFrame(a),r=!0,t=0,oE("before",s);for(const n of e.values()){var o;i=n.store.getState(),!i.internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(o=i.gl.xr)&&o.isPresenting||(t+=uE(s,i))}if(oE("after",s),0===t)return oE("tail",s),r=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var s;if(!n)return e.forEach(e=>t(e.store.getState()),i);null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+i),r||(r=!0,requestAnimationFrame(a)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&oE("before",t),i)uE(t,i,r);else for(const a of e.values())uE(t,a.store.getState());n&&oE("after",t)}}}(gE),{reconciler:yE,applyProps:bE}=function(e,t){function n(e,t,n){let i,{args:a=[],attach:s}=t,o=r(t,gC),l="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===o.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=FC(o.object,{type:e,root:n,attach:s,primitive:!0})}else{const t=wC[l];if(!t)throw new Error("R3F: ".concat(l," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(a))throw new Error("R3F: The args prop must be an array!");i=FC(new t(...a),{type:e,root:n,attach:s,memoizedProps:{args:a}})}return void 0===i.__r3f.attach&&(i instanceof cv?i.__r3f.attach="geometry":i instanceof Ig&&(i.__r3f.attach="material")),"inject"!==l&&XC(i,o),i}function i(e,t){let n=!1;var i,r;t&&(null!=(i=t.__r3f)&&i.attach?HC(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||FC(t,{}),t.__r3f.parent=e,JC(t),YC(t))}function a(e,t,n){let i=!1;if(t){var r,a;if(null!=(r=t.__r3f)&&r.attach)HC(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const r=e.children.filter(e=>e!==t),a=r.indexOf(n);e.children=[...r.slice(0,a),t,...r.slice(a)],i=!0}i||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||FC(t,{}),t.__r3f.parent=e,JC(t),YC(t)}}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach(e=>o(t,e,n))}function o(e,t,n){if(t){var i,r,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(r=t.__r3f)&&r.attach)GC(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,i)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(i)}),n.capturedMap.forEach((e,i)=>{ZC(n.capturedMap,t,e,i)})}(t.__r3f.root,t)}const c=null==(a=t.__r3f)?void 0:a.primitive,u=!c&&(void 0===n?null!==t.dispose:n);var l;if(!c)s(null==(l=t.__r3f)?void 0:l.objects,t,u),s(t.children,t,u);if(delete t.__r3f,u&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(rN){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,hC.unstable_scheduleCallback)(hC.unstable_IdlePriority,e):e()}YC(e)}}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),c=dC()({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))},removeChildFromContainer:(e,t)=>{t&&o(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const i=e.getState().scene;i.__r3f&&a(i,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,i){var a;if((null!=(a=null==e?void 0:e.__r3f)?a:{}).primitive&&i.object&&i.object!==e)return[!0];{const{args:t=[],children:a}=i,s=r(i,vC),{args:o=[],children:l}=n,c=r(n,xC);if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==o[t]))return[!0];const u=WC(e,s,c,!0);return u.changes.length?[!1,u]:null}},commitUpdate(e,t,r,a,s,l){let[c,u]=t;c?function(e,t,r,a){var s;const l=null==(s=e.__r3f)?void 0:s.parent;if(!l)return;const c=n(t,r,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&i(c,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>i(c,e)),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||o(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),i(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c);[a,a.alternate].forEach(e=>{null!==e&&(e.stateNode=c,e.ref&&("function"===typeof e.ref?e.ref(c):e.ref.current=c))})}(e,r,s,l):XC(e,u)},commitMount(e,t,n,i){var r;const a=null!=(r=e.__r3f)?r:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>FC(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:i}=null!=(t=e.__r3f)?t:{};n&&i&&GC(i,e,n),e.isObject3D&&(e.visible=!1),YC(e)},unhideInstance(e,t){var n;const{attach:i,parent:r}=null!=(n=e.__r3f)?n:{};i&&r&&HC(r,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),YC(e)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>t?t():oC.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&jC.fun(performance.now)?performance.now:jC.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jC.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jC.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:c,applyProps:XC}}(0,function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return oC.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return oC.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return oC.ContinuousEventPriority;default:return oC.DefaultEventPriority}}),_E={objects:"shallow",strict:!1},wE=(e,t)=>{const n="function"===typeof e?e(t):e;return $C(n)?n:new kb(c({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function SE(e){const n=gE.get(e),i=null==n?void 0:n.fiber,a=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");const s="function"===typeof reportError?reportError:console.error,o=a||tE(vE,xE),l=i||yE.createContainer(o,oC.ConcurrentRoot,null,!1,null,"",s,null);let u;n||gE.set(e,{fiber:l,store:o});let d,h=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:i,scene:a,events:s,onCreated:l,shadows:p=!1,linear:f=!1,flat:m=!1,legacy:g=!1,orthographic:v=!1,frameloop:x="always",dpr:y=[1,2],performance:b,raycaster:_,camera:w,onPointerMissed:S}=t,M=o.getState(),A=M.gl;M.gl||M.set({gl:A=wE(n,e)});let C=M.raycaster;C||M.set({raycaster:C=new yA});const E=_||{},{params:k}=E,T=r(E,_C);if(jC.equ(T,C,_E)||bE(C,c({},T)),jC.equ(k,C.params,_E)||bE(C,{params:c(c({},C.params),k)}),!M.camera||M.camera===d&&!jC.equ(d,w,_E)){d=w;const e=w instanceof Dv,t=e?w:v?new ox(0,0,0,0,.1,1e3):new Iv(75,0,.1,1e3);e||(t.position.z=5,w&&bE(t,w),M.camera||null!=w&&w.rotation||t.lookAt(0,0,0)),M.set({camera:t}),C.camera=t}if(!M.scene){let e;a instanceof Pb?e=a:(e=new Pb,a&&bE(e,a)),M.set({scene:FC(e)})}if(!M.xr){var R;const e=(e,t)=>{const n=o.getState();"never"!==n.frameloop&&xE(e,!0,n,t)},t=()=>{const t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||vE(t)},n={connect(){const e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(R=A.xr)?void 0:R.addEventListener)&&n.connect(),M.set({xr:n})}if(A.shadowMap){const e=A.shadowMap.enabled,t=A.shadowMap.type;if(A.shadowMap.enabled=!!p,jC.boo(p))A.shadowMap.type=Vu;else if(jC.str(p)){var L;const e={basic:Gu,percentage:Wu,soft:Vu,variance:Xu};A.shadowMap.type=null!=(L=e[p])?L:Vu}else jC.obj(p)&&Object.assign(A.shadowMap,p);e===A.shadowMap.enabled&&t===A.shadowMap.type||(A.shadowMap.needsUpdate=!0)}const P=CC();P&&("enabled"in P?P.enabled=!g:"legacyMode"in P&&(P.legacyMode=g));bE(A,{outputEncoding:f?3e3:3001,toneMapping:m?Nd:zd}),M.legacy!==g&&M.set(()=>({legacy:g})),M.linear!==f&&M.set(()=>({linear:f})),M.flat!==m&&M.set(()=>({flat:m})),!n||jC.fun(n)||$C(n)||jC.equ(n,A,_E)||bE(A,n),s&&!M.events.handlers&&M.set({events:s(o)});const B=function(e,t){const n="undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:i,top:r,left:a,updateStyle:s=n}=t;return{width:e,height:i,top:r,left:a,updateStyle:s}}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:i,top:r,left:a}=e.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,i);return jC.equ(B,M.size,_E)||M.setSize(B.width,B.height,B.updateStyle,B.top,B.left),y&&M.viewport.dpr!==DC(y)&&M.setDpr(y),M.frameloop!==x&&M.setFrameloop(x),M.onPointerMissed||M.set({onPointerMissed:S}),b&&!jC.equ(b,M.performance,_E)&&M.set(e=>({performance:c(c({},e.performance),b)})),u=l,h=!0,this},render(n){return h||this.configure(),yE.updateContainer(t.createElement(ME,{store:o,children:n,onCreated:u,rootElement:e}),l,null,()=>{}),o},unmount(){AE(e)}}}function ME(e){let{store:n,children:i,onCreated:r,rootElement:a}=e;return kC(()=>{const e=n.getState();e.set(e=>({internal:c(c({},e.internal),{},{active:!0})})),r&&r(e),n.getState().events.connected||null==e.events.connect||e.events.connect(a)},[]),t.createElement(eE.Provider,{value:n},i)}function AE(e,t){const n=gE.get(e),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),yE.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var n,i,a,s;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(a=r.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(s=r.gl)&&s.xr&&r.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(r),gE.delete(e),t&&t(e)}catch(rN){}},500)})}}yE.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version});t.unstable_act;function CE(){return CE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},CE.apply(null,arguments)}function EE(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function kE(){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const a=i||("undefined"==typeof window?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,d=(0,t.useRef)(!1);(0,t.useEffect)(()=>(d.current=!0,()=>{d.current=!1}));const[h,p,f]=(0,t.useMemo)(()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:i,bottom:a,right:s,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:i,bottom:a,right:s,x:c,y:u};l.current.element instanceof HTMLElement&&r&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),d.current&&!LE(l.current.lastBounds,h)&&o(l.current.lastBounds=h)};return[e,u?EE(e,u):e,c?EE(e,c):e]},[o,r,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",f,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new a(f),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(e=>e.addEventListener("scroll",f,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,n){(0,t.useEffect)(()=>{if(n){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,n])}(f,!!n),function(e){(0,t.useEffect)(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(p),(0,t.useEffect)(()=>{m(),g()},[n,f,p]),(0,t.useEffect)(()=>m,[]),[e=>{!e||e===l.current.element||(m(),l.current.element=e,l.current.scrollContainers=TE(e),g())},s,h]}function TE(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(e);return[n,i,r].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...TE(e.parentElement)]}const RE=["x","y","top","bottom","left","right","width","height"],LE=(e,t)=>RE.every(n=>e[n]===t[n]);var PE,BE,NE=Object.defineProperty,DE=Object.defineProperties,IE=Object.getOwnPropertyDescriptors,jE=Object.getOwnPropertySymbols,zE=Object.prototype.hasOwnProperty,FE=Object.prototype.propertyIsEnumerable,OE=(e,t,n)=>t in e?NE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UE=(e,t)=>{for(var n in t||(t={}))zE.call(t,n)&&OE(e,n,t[n]);if(jE)for(var n of jE(t))FE.call(t,n)&&OE(e,n,t[n]);return e};"undefined"===typeof window||!(null==(PE=window.document)?void 0:PE.createElement)&&"ReactNative"!==(null==(BE=window.navigator)?void 0:BE.product)?t.useEffect:t.useLayoutEffect;function HE(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=HE(i,t,n);if(e)return e;i=t?null:i.sibling}}function GE(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(RB){return e}}const WE=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return WE.apply(this,arguments);console.error=WE};const VE=GE(t.createContext(null));class XE extends t.Component{render(){return t.createElement(VE.Provider,{value:this._reactInternals},this.props.children)}}function YE(){const e=t.useContext(VE);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=t.useId();return t.useMemo(()=>{for(const t of[e,null==e?void 0:e.alternate]){if(!t)continue;const e=HE(t,!1,e=>{let t=e.memoizedState;for(;t;){if(t.memoizedState===n)return!0;t=t.next}});if(e)return e}},[e,n])}function JE(){const e=function(){const e=YE(),[n]=t.useState(()=>new Map);n.clear();let i=e;for(;i;){if(i.type&&"object"===typeof i.type){const e=void 0===i.type._context&&i.type.Provider===i.type?i.type:i.type._context;e&&e!==VE&&!n.has(e)&&n.set(e,t.useContext(GE(e)))}i=i.return}return n}();return t.useMemo(()=>Array.from(e.keys()).reduce((n,i)=>r=>t.createElement(n,null,t.createElement(i.Provider,((e,t)=>DE(e,IE(t)))(UE({},r),{value:e.get(i)}))),e=>t.createElement(XE,UE({},e))),[e])}const KE=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"],qE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ZE(e){const{handlePointer:t}=QC(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(qE).reduce((e,n)=>c(c({},e),{},{[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:r}=e.getState();null==r.disconnect||r.disconnect(),i(e=>({events:c(c({},e.events),{},{connected:t})})),Object.entries(null!=(n=r.handlers)?n:[]).forEach(e=>{let[n,i]=e;const[r,a]=qE[n];t.addEventListener(r,i,{passive:a})})},disconnect:()=>{const{set:t,events:n}=e.getState();var i;n.connected&&(Object.entries(null!=(i=n.handlers)?i:[]).forEach(e=>{let[t,i]=e;if(n&&n.connected instanceof HTMLElement){const[e]=qE[t];n.connected.removeEventListener(e,i)}}),t(e=>({events:c(c({},e.events),{},{connected:void 0})})))}}}const QE=t.forwardRef(function(n,i){let{children:a,fallback:s,resize:o,style:l,gl:u,events:d=ZE,eventSource:h,eventPrefix:p,shadows:f,linear:m,flat:g,legacy:v,orthographic:x,frameloop:y,dpr:b,performance:_,raycaster:w,camera:S,scene:M,onPointerMissed:A,onCreated:C}=n,E=r(n,KE);t.useMemo(()=>{return t=e,void Object.assign(wC,t);var t},[]);const k=JE(),[T,R]=kE(c({scroll:!0,debounce:{scroll:50,resize:0}},o)),L=t.useRef(null),P=t.useRef(null);t.useImperativeHandle(i,()=>L.current);const B=TC(A),[N,D]=t.useState(!1),[I,j]=t.useState(!1);if(N)throw N;if(I)throw I;const z=t.useRef(null);kC(()=>{const e=L.current;R.width>0&&R.height>0&&e&&(z.current||(z.current=SE(e)),z.current.configure({gl:u,events:d,shadows:f,linear:m,flat:g,legacy:v,orthographic:x,frameloop:y,dpr:b,performance:_,raycaster:w,camera:S,scene:M,size:R,onPointerMissed:function(){return null==B.current?void 0:B.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(h?(t=h)&&t.hasOwnProperty("current")?h.current:h:P.current),p&&e.setEvents({compute:(e,t)=>{const n=e[p+"X"],i=e[p+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==C||C(e)}}),z.current.render(t.createElement(k,null,t.createElement(LC,{set:j},t.createElement(t.Suspense,{fallback:t.createElement(RC,{set:D})},a)))))}),t.useEffect(()=>{const e=L.current;if(e)return()=>AE(e)},[]);const F=h?"none":"auto";return t.createElement("div",CE({ref:P,style:c({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F},l)},E),t.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},t.createElement("canvas",{ref:L,style:{display:"block"}},s)))}),$E=t.forwardRef(function(e,n){return t.createElement(XE,null,t.createElement(QE,CE({},e,{ref:n})))}),ek=new WeakMap;class tk extends ZS{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new eM(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const o in t.attributeTypes){const e=t.attributeTypes[o];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=e.name)}const n=JSON.stringify(t);if(ek.has(e)){const t=ek.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,a=e.byteLength,s=this._getWorker(r,a).then(n=>(i=n,new Promise((n,a)=>{i._callbacks[r]={resolve:n,reject:a},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),ek.set(e,{key:n,promise:s}),s}_createGeometry(e){const t=new cv;e.index&&t.setIndex(new Vg(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,a=i.array,s=i.itemSize;t.setAttribute(r,new Vg(a,s))}return t}_loadLibrary(e,t){const n=new eM(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,i)=>{n.load(e,t,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const i=nk.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function nk(){let e,t;function n(e,t,n,i,r,a){const s=a.num_components(),o=n.num_points()*s,l=o*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,c,l,u);const d=new r(e.HEAPF32.buffer,u,o).slice();return e._free(u),{name:i,array:d,itemSize:s}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":const i=r.buffer,a=r.taskConfig;t.then(e=>{const t=e.draco,s=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(i),i.byteLength);try{const e=function(e,t,i,r){const a=r.attributeIDs,s=r.attributeTypes;let o,l;const c=t.GetEncodedGeometryType(i);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,l=t.DecodeBufferToMesh(i,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,l=t.DecodeBufferToPointCloud(i,o)}if(!l.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const d in a){const i=self[s[d]];let l,c;if(r.useUniqueIDs)c=a[d],l=t.GetAttributeByUniqueId(o,c);else{if(c=t.GetAttributeId(o,e[a[d]]),-1===c)continue;l=t.GetAttribute(o,c)}u.attributes.push(n(e,t,o,d,i,l))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const i=n.num_faces(),r=3*i,a=4*r,s=e._malloc(a);t.GetTrianglesUInt32Array(n,a,s);const o=new Uint32Array(e.HEAPF32.buffer,s,r).slice();return e._free(s),{array:o,itemSize:1}}(e,t,o));return e.destroy(o),u}(t,s,o,a),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(WE){console.error(WE),self.postMessage({type:"error",id:r.id,error:WE.message})}finally{t.destroy(o),t.destroy(s)}})}}}let ik;const rk=()=>{if(ik)return ik;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let n,i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const r=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const i=e.charCodeAt(t);n[t]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let i=0;for(let r=0;r<e.length;++r)n[i++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,i)}(i),{}).then(e=>{n=e.instance,n.exports.__wasm_call_ctors()});function a(e,t,i,r,a,s){const o=n.exports.sbrk,l=i+3&-4,c=o(l*r),u=o(a.length),d=new Uint8Array(n.exports.memory.buffer);d.set(a,u);const h=e(c,i,r,u,a.length);if(0===h&&s&&s(c,l,r),t.set(d.subarray(c,c+i*r)),o(c-o(0)),0!==h)throw new Error("Malformed buffer data: ".concat(h))}const s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ik={ready:r,supported:!0,decodeVertexBuffer(e,t,i,r,o){a(n.exports.meshopt_decodeVertexBuffer,e,t,i,r,n.exports[s[o]])},decodeIndexBuffer(e,t,i,r){a(n.exports.meshopt_decodeIndexBuffer,e,t,i,r)},decodeIndexSequence(e,t,i,r){a(n.exports.meshopt_decodeIndexSequence,e,t,i,r)},decodeGltfBuffer(e,t,i,r,l,c){a(n.exports[o[l]],e,t,i,r,n.exports[s[c]])}},ik};function ak(e,t){if(t===xp)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===bp||t===yp){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(n)if(t===bp)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2===0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(r),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const sk=(()=>parseInt(Iu.replace(/\D+/g,"")))();function ok(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(rN){return t}}const lk="srgb",ck="srgb-linear";class uk extends ZS{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new gk(e)}),this.register(function(e){return new vk(e)}),this.register(function(e){return new Ck(e)}),this.register(function(e){return new Ek(e)}),this.register(function(e){return new kk(e)}),this.register(function(e){return new yk(e)}),this.register(function(e){return new bk(e)}),this.register(function(e){return new _k(e)}),this.register(function(e){return new wk(e)}),this.register(function(e){return new mk(e)}),this.register(function(e){return new Sk(e)}),this.register(function(e){return new xk(e)}),this.register(function(e){return new Ak(e)}),this.register(function(e){return new Mk(e)}),this.register(function(e){return new pk(e)}),this.register(function(e){return new Tk(e)}),this.register(function(e){return new Rk(e)})}load(e,t,n,i){const r=this;let a;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){const t=EM.extractUrlBase(e);a=EM.resolveURL(t,this.path)}else a=EM.extractUrlBase(e);this.manager.itemStart(e);const s=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},o=new eM(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){try{r.parse(n,a,function(n){t(n),r.manager.itemEnd(e)},s)}catch(rN){s(rN)}},n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const a={},s={};if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(ok(new Uint8Array(e.slice(0,4)))===Lk){try{a[hk.KHR_BINARY_GLTF]=new Nk(e)}catch(WE){return void(i&&i(WE))}r=JSON.parse(a[hk.KHR_BINARY_GLTF].content)}else r=JSON.parse(ok(new Uint8Array(e)))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const o=new sT(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});o.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const e=this.pluginCallbacks[l](o);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[e.name]=e,a[e.name]=!0}if(r.extensionsUsed)for(let l=0;l<r.extensionsUsed.length;++l){const e=r.extensionsUsed[l],t=r.extensionsRequired||[];switch(e){case hk.KHR_MATERIALS_UNLIT:a[e]=new fk;break;case hk.KHR_DRACO_MESH_COMPRESSION:a[e]=new Dk(r,this.dracoLoader);break;case hk.KHR_TEXTURE_TRANSFORM:a[e]=new Ik;break;case hk.KHR_MESH_QUANTIZATION:a[e]=new jk;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}o.setExtensions(a),o.setPlugins(s),o.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function dk(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const hk={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class pk{constructor(e){this.parser=e,this.name=hk.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,a=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let s;const o=new Bg(16777215);void 0!==a.color&&o.setRGB(a.color[0],a.color[1],a.color[2],ck);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new _M(o),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new yM(o),s.distance=l;break;case"spot":s=new fM(o),s.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,eT(s,a),void 0!==a.intensity&&(s.intensity=a.intensity),s.name=t.createUniqueName(a.name||"light_"+e),i=Promise.resolve(s),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return n._getNodeRef(t.cache,r,e)})}}class fk{constructor(){this.name=hk.KHR_MATERIALS_UNLIT}getMaterialType(){return jg}extendParams(e,t,n){const i=[];e.color=new Bg(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],ck),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,lk))}return Promise.all(i)}}class mk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class gk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new If(e,e)}return Promise.all(r)}}class vk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class xk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class yk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Bg(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];if(void 0!==a.sheenColorFactor){const e=a.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],ck)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,lk)),void 0!==a.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class bk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class _k{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return t.attenuationColor=(new Bg).setRGB(s[0],s[1],s[2],ck),Promise.all(r)}}class wk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class Sk{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return t.specularColor=(new Bg).setRGB(s[0],s[1],s[2],ck),void 0!==a.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,lk)),Promise.all(r)}}class Mk{constructor(e){this.parser=e,this.name=hk.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(r)}}class Ak{constructor(e){this.parser=e,this.name=hk.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?_S:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],a=i.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class Ck{constructor(e){this.parser=e,this.name=hk.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}class Ek{constructor(e){this.parser=e,this.name=hk.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],s=i.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,a.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class kk{constructor(e){this.parser=e,this.name=hk.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],s=i.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,a.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Tk{constructor(e){this.name=hk.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(t){const n=e.byteOffset||0,i=e.byteLength||0,a=e.count,s=e.byteStride,o=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(a,s,o,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){const t=new ArrayBuffer(a*s);return r.decodeGltfBuffer(new Uint8Array(t),a,s,o,e.mode,e.filter),t})})}return null}}class Rk{constructor(e){this.name=hk.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const o of i.primitives)if(o.mode!==Uk.TRIANGLES&&o.mode!==Uk.TRIANGLE_STRIP&&o.mode!==Uk.TRIANGLE_FAN&&void 0!==o.mode)return null;const r=n.extensions[this.name].attributes,a=[],s={};for(const o in r)a.push(this.parser.getDependency("accessor",r[o]).then(e=>(s[o]=e,s[o])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const a of n){const e=new Vm,t=new mm,n=new fm,o=new mm(1,1,1),l=new M_(a.geometry,a.material,i);for(let r=0;r<i;r++)s.TRANSLATION&&t.fromBufferAttribute(s.TRANSLATION,r),s.ROTATION&&n.fromBufferAttribute(s.ROTATION,r),s.SCALE&&o.fromBufferAttribute(s.SCALE,r),l.setMatrixAt(r,e.compose(t,n,o));for(const i in s)if("_COLOR_0"===i){const e=s[i];l.instanceColor=new g_(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&a.geometry.setAttribute(i,s[i]);gg.prototype.copy.call(l,a),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const Lk="glTF",Pk=1313821514,Bk=5130562;class Nk{constructor(e){this.name=hk.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:ok(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Lk)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(e,12);let r=0;for(;r<n;){const t=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,n===Pk){const n=new Uint8Array(e,12+r,t);this.content=ok(n)}else if(n===Bk){const n=12+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Dk{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=hk.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},l={};for(const c in a){const e=Xk[c]||c.toLowerCase();s[e]=a[c]}for(const c in e.attributes){const t=Xk[c]||c.toLowerCase();if(void 0!==a[c]){const i=n.accessors[e.attributes[c]],r=Hk[i.componentType];l[t]=r.name,o[t]=!0===i.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t,n){i.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],i=o[t];void 0!==i&&(n.normalized=i)}t(e)},s,l,ck,n)})})}}class Ik{constructor(){this.name=hk.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class jk{constructor(){this.name=hk.KHR_MESH_QUANTIZATION}}class zk extends NS{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let a=0;a!==i;a++)t[a]=n[r+a];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,c=i-t,u=(n-t)/c,d=u*u,h=d*u,p=e*l,f=p-l,m=-2*h+3*d,g=h-d,v=1-m,x=g-d+u;for(let y=0;y!==s;y++){const e=a[f+y+s],t=a[f+y+o]*c,n=a[p+y+s],i=a[p+y]*c;r[y]=v*e+x*t+m*n+g*i}return r}}const Fk=new fm;class Ok extends zk{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return Fk.fromArray(r).normalize().toArray(r),r}}const Uk={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Hk={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Gk={9728:Zd,9729:nh,9984:Qd,9985:ih,9986:eh,9987:ah},Wk={33071:Kd,33648:qd,10497:Jd},Vk={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Xk=c(c({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},sk>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),Yk={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Jk={CUBICSPLINE:void 0,LINEAR:dp,STEP:up},Kk="OPAQUE",qk="MASK",Zk="BLEND";function Qk(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new bS({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yu})),e.DefaultMaterial}function $k(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function eT(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function tT(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function nT(e){let t;const n=e.extensions&&e.extensions[hk.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+iT(n.attributes):e.indices+":"+iT(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+iT(e.targets[i]);return t}function iT(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function rT(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const aT=new Vm;class sT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new dk,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||i&&r<98?this.textureLoader=new sM(this.options.manager):this.textureLoader=new NM(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new eM(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const a={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return $k(r,a,i),eT(a,i),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){for(const e of a.scenes)e.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,a]of e.children.entries())r(a,t.children[i])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[hk.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(e,r){n.load(EM.resolveURL(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=Vk[i.type],t=Hk[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new Vg(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(e){const r=e[0],a=Vk[i.type],s=Hk[i.componentType],o=s.BYTES_PER_ELEMENT,l=o*a,c=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let h,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(h=new s(r,e*u,i.count*u/o),l=new Bb(h,u/o),t.cache.add(n,l)),p=new Db(l,a,c%u/o,d)}else h=null===r?new s(i.count*a):new s(r,c,i.count*a),p=new Vg(h,a,d);if(void 0!==i.sparse){const t=Vk.SCALAR,n=Hk[i.sparse.indices.componentType],o=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(e[1],o,i.sparse.count*t),u=new s(e[2],l,i.sparse.count*a);null!==r&&(p=new Vg(p.array.slice(),p.itemSize,p.normalized));for(let e=0,i=c.length;e<i;e++){const t=c[e];if(p.setX(t,u[e*a]),a>=2&&p.setY(t,u[e*a+1]),a>=3&&p.setZ(t,u[e*a+2]),a>=4&&p.setW(t,u[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let a=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(a=e)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,t,n){const i=this,r=this.json,a=r.textures[e],s=r.images[t],o=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=a.name||s.name||"",""===t.name&&"string"===typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const n=(r.samplers||{})[a.sampler]||{};return t.magFilter=Gk[n.magFilter]||nh,t.minFilter=Gk[n.minFilter]||ah,t.wrapS=Wk[n.wrapS]||Jd,t.wrapT=Wk[n.wrapT]||Jd,i.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[o]=l,l}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const a=i.images[e],s=self.URL||self.webkitURL;let o=a.uri||"",l=!1;if(void 0!==a.bufferView)o=n.getDependency("bufferView",a.bufferView).then(function(e){l=!0;const t=new Blob([e],{type:a.mimeType});return o=s.createObjectURL(t),o});else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then(function(e){return new Promise(function(n,i){let a=n;!0===t.isImageBitmapLoader&&(a=function(e){const t=new am(e);t.needsUpdate=!0,n(t)}),t.load(EM.resolveURL(e,r.path),a,void 0,i)})}).then(function(e){var t;return!0===l&&s.revokeObjectURL(o),eT(e,a),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=c,c}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),r.extensions[hk.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[hk.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(a);a=r.extensions[hk.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),r.associations.set(a,t)}}return void 0!==i&&("number"===typeof i&&(i=3001===i?lk:ck),"colorSpace"in a?a.colorSpace=i:a.encoding=i===lk?3001:3e3),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new I_,Ig.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new A_,Ig.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||a){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),a&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return bS}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let a;const s={},o=[];if((r.extensions||{})[hk.KHR_MATERIALS_UNLIT]){const e=i[hk.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),o.push(e.extendParams(s,r,t))}else{const n=r.pbrMetallicRoughness||{};if(s.color=new Bg(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],ck),s.opacity=e[3]}void 0!==n.baseColorTexture&&o.push(t.assignTexture(s,"map",n.baseColorTexture,lk)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),o.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),o.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)})))}!0===r.doubleSided&&(s.side=Ku);const l=r.alphaMode||Kk;if(l===Zk?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===qk&&(s.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&a!==jg&&(o.push(t.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new If(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&a!==jg&&(o.push(t.assignTexture(s,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&a!==jg){const e=r.emissiveFactor;s.emissive=(new Bg).setRGB(e[0],e[1],e[2],ck)}return void 0!==r.emissiveTexture&&a!==jg&&o.push(t.assignTexture(s,"emissiveMap",r.emissiveTexture,lk)),Promise.all(o).then(function(){const n=new a(s);return r.name&&(n.name=r.name),eT(n,r),t.associations.set(n,{materials:e}),r.extensions&&$k(i,n,r),n})}createUniqueName(e){const t=cA.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[hk.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return oT(n,e,t)})}const a=[];for(let s=0,o=e.length;s<o;s++){const n=e[s],o=nT(n),l=i[o];if(l)a.push(l.promise);else{let e;e=n.extensions&&n.extensions[hk.KHR_DRACO_MESH_COMPRESSION]?r(n):oT(new cv,n,t),i[o]={primitive:n,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],a=r.primitives,s=[];for(let o=0,l=a.length;o<l;o++){const e=void 0===a[o].material?Qk(this.cache):this.getDependency("material",a[o].material);s.push(e)}return s.push(t.loadGeometries(a)),Promise.all(s).then(function(n){const s=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let u=0,d=o.length;u<d;u++){const n=o[u],c=a[u];let d;const h=s[u];if(c.mode===Uk.TRIANGLES||c.mode===Uk.TRIANGLE_STRIP||c.mode===Uk.TRIANGLE_FAN||void 0===c.mode)d=!0===r.isSkinnedMesh?new u_(n,h):new Ev(n,h),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),c.mode===Uk.TRIANGLE_STRIP?d.geometry=ak(d.geometry,yp):c.mode===Uk.TRIANGLE_FAN&&(d.geometry=ak(d.geometry,bp));else if(c.mode===Uk.LINES)d=new N_(n,h);else if(c.mode===Uk.LINE_STRIP)d=new L_(n,h);else if(c.mode===Uk.LINE_LOOP)d=new D_(n,h);else{if(c.mode!==Uk.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);d=new U_(n,h)}Object.keys(d.geometry.morphAttributes).length>0&&tT(d,r),d.name=t.createUniqueName(r.name||"mesh_"+e),eT(d,r),c.extensions&&$k(i,d,c),t.assignFinalMaterial(d),l.push(d)}for(let i=0,r=l.length;i<r;i++)t.associations.set(l[i],{meshes:e,primitives:i});if(1===l.length)return r.extensions&&$k(i,l[0],r),l[0];const c=new _b;r.extensions&&$k(i,c,r),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Iv(Df.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new ox(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),eT(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const n=e.pop(),i=e,r=[],a=[];for(let s=0,o=i.length;s<o;s++){const e=i[s];if(e){r.push(e);const t=new Vm;null!==n&&t.fromArray(n.array,16*s),a.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}return new m_(r,a)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,a=[],s=[],o=[],l=[],c=[];for(let u=0,d=i.channels.length;u<d;u++){const e=i.channels[u],t=i.samplers[e.sampler],n=e.target,r=n.node,d=void 0!==i.parameters?i.parameters[t.input]:t.input,h=void 0!==i.parameters?i.parameters[t.output]:t.output;void 0!==n.node&&(a.push(this.getDependency("node",r)),s.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",h)),l.push(t),c.push(n))}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(e){const t=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=[];for(let r=0,c=t.length;r<c;r++){const e=t[r],c=i[r],u=a[r],d=s[r],h=o[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,c,u,d,h);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new XS(r,void 0,l)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],a=n.children||[];for(let o=0,l=a.length;o<l;o++)r.push(t.getDependency("node",a[o]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),s]).then(function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,aT)});for(let r=0,a=n.length;r<a;r++)t.add(n[r]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],a=r.name?i.createUniqueName(r.name):"",s=[],o=i._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return o&&s.push(o),void 0!==r.camera&&s.push(i.getDependency("camera",r.camera).then(function(e){return i._getNodeRef(i.cameraCache,r.camera,e)})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){s.push(e)}),this.nodeCache[e]=Promise.all(s).then(function(t){let s;if(s=!0===r.isBone?new d_:t.length>1?new _b:1===t.length?t[0]:new gg,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(r.name&&(s.userData.name=r.name,s.name=a),eT(s,r),r.extensions&&$k(n,s,r),void 0!==r.matrix){const e=new Vm;e.fromArray(r.matrix),s.applyMatrix4(e)}else void 0!==r.translation&&s.position.fromArray(r.translation),void 0!==r.rotation&&s.quaternion.fromArray(r.rotation),void 0!==r.scale&&s.scale.fromArray(r.scale);return i.associations.has(s)||i.associations.set(s,{}),i.associations.get(s).nodes=e,s}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new _b;n.name&&(r.name=i.createUniqueName(n.name)),eT(r,n),n.extensions&&$k(t,r,n);const a=n.nodes||[],s=[];for(let o=0,l=a.length;o<l;o++)s.push(i.getDependency("node",a[o]));return Promise.all(s).then(function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof Ig||n instanceof am)&&t.set(n,r);return e.traverse(e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)}),t})(r),r})}_createAnimationTracks(e,t,n,i,r){const a=[],s=e.name?e.name:e.uuid,o=[];let l;switch(Yk[r.path]===Yk.weights?e.traverse(function(e){e.morphTargetInfluences&&o.push(e.name?e.name:e.uuid)}):o.push(s),Yk[r.path]){case Yk.weights:l=US;break;case Yk.rotation:l=GS;break;case Yk.position:case Yk.scale:l=VS;break;default:if(1===n.itemSize)l=US;else l=VS}const c=void 0!==i.interpolation?Jk[i.interpolation]:dp,u=this._getArrayFromAccessor(n);for(let d=0,h=o.length;d<h;d++){const e=new l(o[d]+"."+Yk[r.path],t.array,u,c);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(e),a.push(e)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=rT(t.constructor),n=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof GS?Ok:zk)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function oT(e,t,n){const i=t.attributes,r=[];function a(t,i){return n.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}for(const s in i){const t=Xk[s]||s.toLowerCase();t in e.attributes||r.push(a(i[s],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(i)}return eT(e,t),function(e,t,n){const i=t.attributes,r=new xm;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new mm(t[0],t[1],t[2]),new mm(a[0],a[1],a[2])),e.normalized){const t=rT(Hk[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new mm,t=new mm;for(let i=0,r=a.length;i<r;i++){const r=a[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],a=i.min,s=i.max;if(void 0!==a&&void 0!==s){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),i.normalized){const e=rT(Hk[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const s=new Im;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,a=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(e);const s=[],o=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(i){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;o.push(t)}if(a){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(t){const n=t[0],s=t[1],o=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=s),a&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}let lT=null,cT="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function uT(e,t,n){return i=>{n&&n(i),e&&(lT||(lT=new tk),lT.setDecoderPath("string"===typeof e?e:cT),i.setDRACOLoader(lT)),t&&i.setMeshoptDecoder(rk())}}function dT(e){return mE(uk,e,uT(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0))}dT.preload=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;return mE.preload(uk,e,uT(t,n,i))},dT.clear=e=>mE.clear(uk,e),dT.setDecoderPath=e=>{cT=e};var hT=Object.defineProperty,pT=(e,t,n)=>(((e,t,n)=>{t in e?hT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class fT{constructor(){pT(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}var mT=Object.defineProperty,gT=(e,t,n)=>(((e,t,n)=>{t in e?mT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const vT=new Wm,xT=new Wv,yT=Math.cos(Math.PI/180*70),bT=(e,t)=>(e%t+t)%t;class _T extends fT{constructor(e,t){super(),gT(this,"object"),gT(this,"domElement"),gT(this,"enabled",!0),gT(this,"target",new mm),gT(this,"minDistance",0),gT(this,"maxDistance",1/0),gT(this,"minZoom",0),gT(this,"maxZoom",1/0),gT(this,"minPolarAngle",0),gT(this,"maxPolarAngle",Math.PI),gT(this,"minAzimuthAngle",-1/0),gT(this,"maxAzimuthAngle",1/0),gT(this,"enableDamping",!1),gT(this,"dampingFactor",.05),gT(this,"enableZoom",!0),gT(this,"zoomSpeed",1),gT(this,"enableRotate",!0),gT(this,"rotateSpeed",1),gT(this,"enablePan",!0),gT(this,"panSpeed",1),gT(this,"screenSpacePanning",!0),gT(this,"keyPanSpeed",7),gT(this,"zoomToCursor",!1),gT(this,"autoRotate",!1),gT(this,"autoRotateSpeed",2),gT(this,"reverseOrbit",!1),gT(this,"reverseHorizontalOrbit",!1),gT(this,"reverseVerticalOrbit",!1),gT(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gT(this,"mouseButtons",{LEFT:ju.ROTATE,MIDDLE:ju.DOLLY,RIGHT:ju.PAN}),gT(this,"touches",{ONE:zu.ROTATE,TWO:zu.DOLLY_PAN}),gT(this,"target0"),gT(this,"position0"),gT(this,"zoom0"),gT(this,"_domElementKeyEvents",null),gT(this,"getPolarAngle"),gT(this,"getAzimuthalAngle"),gT(this,"setPolarAngle"),gT(this,"setAzimuthalAngle"),gT(this,"getDistance"),gT(this,"getZoomScale"),gT(this,"listenToKeyEvents"),gT(this,"stopListenToKeyEvents"),gT(this,"saveState"),gT(this,"reset"),gT(this,"update"),gT(this,"connect"),gT(this,"dispose"),gT(this,"dollyIn"),gT(this,"dollyOut"),gT(this,"getScale"),gT(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=bT(e,2*Math.PI),i=c.phi;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.phi=t-i,n.update()},this.setAzimuthalAngle=e=>{let t=bT(e,2*Math.PI),i=c.theta;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.theta=t-i,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",q),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",q),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),o=s.NONE},this.update=(()=>{const t=new mm,r=new mm(0,1,0),a=(new fm).setFromUnitVectors(e.up,r),p=a.clone().invert(),f=new mm,m=new fm,g=2*Math.PI;return function(){const v=n.object.position;a.setFromUnitVectors(e.up,r),p.copy(a).invert(),t.copy(v).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&o===s.NONE&&k(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let x=n.minAzimuthAngle,y=n.maxAzimuthAngle;isFinite(x)&&isFinite(y)&&(x<-Math.PI?x+=g:x>Math.PI&&(x-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),c.theta=x<=y?Math.max(x,Math.min(y,c.theta)):c.theta>(x+y)/2?Math.max(x,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&M||n.object.isOrthographicCamera?c.radius=j(c.radius):c.radius=j(c.radius*d),t.setFromSpherical(c),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0));let b=!1;if(n.zoomToCursor&&M){let i=null;if(n.object instanceof Iv&&n.object.isPerspectiveCamera){const e=t.length();i=j(e*d);const r=e-i;n.object.position.addScaledVector(w,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new mm(S.x,S.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),b=!0;const r=new mm(S.x,S.y,0);r.unproject(n.object),n.object.position.sub(r).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(vT.origin.copy(n.object.position),vT.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(vT.direction))<yT?e.lookAt(n.target):(xT.setFromNormalAndCoplanarPoint(n.object.up,n.target),vT.intersectPlane(xT,n.target))))}else n.object instanceof ox&&n.object.isOrthographicCamera&&(b=1!==d,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix()));return d=1,M=!1,!!(b||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),f.copy(n.object.position),m.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",X),n.domElement.addEventListener("pointercancel",J),n.domElement.addEventListener("wheel",K)},this.dispose=()=>{var e,t,i,r,a,s;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",Z),null==(t=n.domElement)||t.removeEventListener("pointerdown",X),null==(i=n.domElement)||i.removeEventListener("pointercancel",J),null==(r=n.domElement)||r.removeEventListener("wheel",K),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",Y),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointerup",J),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",q)};const n=this,i={type:"change"},r={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=s.NONE;const l=1e-6,c=new wA,u=new wA;let d=1;const h=new mm,p=new If,f=new If,m=new If,g=new If,v=new If,x=new If,y=new If,b=new If,_=new If,w=new mm,S=new If;let M=!1;const A=[],C={};function E(){return Math.pow(.95,n.zoomSpeed)}function k(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function T(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const R=(()=>{const e=new mm;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),L=(()=>{const e=new mm;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),P=(()=>{const e=new mm;return function(t,i){const r=n.domElement;if(r&&n.object instanceof Iv&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),R(2*t*s/r.clientHeight,n.object.matrix),L(2*i*s/r.clientHeight,n.object.matrix)}else r&&n.object instanceof ox&&n.object.isOrthographicCamera?(R(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),L(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function B(e){n.object instanceof Iv&&n.object.isPerspectiveCamera||n.object instanceof ox&&n.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function N(e){B(d/e)}function D(e){B(d*e)}function I(e){if(!n.zoomToCursor||!n.domElement)return;M=!0;const t=n.domElement.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,a=t.width,s=t.height;S.x=i/a*2-1,S.y=-r/s*2+1,w.set(S.x,S.y,1).unproject(n.object).sub(n.object.position).normalize()}function j(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function z(e){p.set(e.clientX,e.clientY)}function F(e){g.set(e.clientX,e.clientY)}function O(){if(1==A.length)p.set(A[0].pageX,A[0].pageY);else{const e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);p.set(e,t)}}function U(){if(1==A.length)g.set(A[0].pageX,A[0].pageY);else{const e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);g.set(e,t)}}function H(){const e=A[0].pageX-A[1].pageX,t=A[0].pageY-A[1].pageY,n=Math.sqrt(e*e+t*t);y.set(0,n)}function G(e){if(1==A.length)f.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);f.set(n,i)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(k(2*Math.PI*m.x/t.clientHeight),T(2*Math.PI*m.y/t.clientHeight)),p.copy(f)}function W(e){if(1==A.length)v.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}x.subVectors(v,g).multiplyScalar(n.panSpeed),P(x.x,x.y),g.copy(v)}function V(e){const t=$(e),i=e.pageX-t.x,r=e.pageY-t.y,a=Math.sqrt(i*i+r*r);b.set(0,a),_.set(0,Math.pow(b.y/y.y,n.zoomSpeed)),N(_.y),y.copy(b)}function X(e){var t,i;!1!==n.enabled&&(0===A.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",Y),null==(i=n.domElement)||i.ownerDocument.addEventListener("pointerup",J)),function(e){A.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),A.length){case 1:switch(n.touches.ONE){case zu.ROTATE:if(!1===n.enableRotate)return;O(),o=s.TOUCH_ROTATE;break;case zu.PAN:if(!1===n.enablePan)return;U(),o=s.TOUCH_PAN;break;default:o=s.NONE}break;case 2:switch(n.touches.TWO){case zu.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&H(),n.enablePan&&U(),o=s.TOUCH_DOLLY_PAN;break;case zu.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&H(),n.enableRotate&&O(),o=s.TOUCH_DOLLY_ROTATE;break;default:o=s.NONE}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case ju.DOLLY:if(!1===n.enableZoom)return;!function(e){I(e),y.set(e.clientX,e.clientY)}(e),o=s.DOLLY;break;case ju.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;F(e),o=s.PAN}else{if(!1===n.enableRotate)return;z(e),o=s.ROTATE}break;case ju.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;z(e),o=s.ROTATE}else{if(!1===n.enablePan)return;F(e),o=s.PAN}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(r)}(e))}function Y(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),o){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;G(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;W(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&V(e),n.enablePan&&W(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&V(e),n.enableRotate&&G(e)}(e),n.update();break;default:o=s.NONE}}(e):function(e){if(!1===n.enabled)return;switch(o){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(k(2*Math.PI*m.x/t.clientHeight),T(2*Math.PI*m.y/t.clientHeight)),p.copy(f),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),_.subVectors(b,y),_.y>0?N(E()):_.y<0&&D(E()),y.copy(b),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),x.subVectors(v,g).multiplyScalar(n.panSpeed),P(x.x,x.y),g.copy(v),n.update()}(e)}}(e))}function J(e){var t,i,r;!function(e){delete C[e.pointerId];for(let t=0;t<A.length;t++)if(A[t].pointerId==e.pointerId)return void A.splice(t,1)}(e),0===A.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointermove",Y),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointerup",J)),n.dispatchEvent(a),o=s.NONE}function K(e){!1===n.enabled||!1===n.enableZoom||o!==s.NONE&&o!==s.ROTATE||(e.preventDefault(),n.dispatchEvent(r),function(e){I(e),e.deltaY<0?D(E()):e.deltaY>0&&N(E()),n.update()}(e),n.dispatchEvent(a))}function q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Z(e){!1!==n.enabled&&e.preventDefault()}function Q(e){let t=C[e.pointerId];void 0===t&&(t=new If,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===A[0].pointerId?A[1]:A[0];return C[t.pointerId]}this.dollyIn=function(){D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E()),n.update()},this.dollyOut=function(){N(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E()),n.update()},this.getScale=()=>d,this.setScale=e=>{B(e),n.update()},this.getZoomScale=()=>E(),void 0!==t&&this.connect(t),this.update()}}const wT=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],ST=t.forwardRef((e,n)=>{let{makeDefault:i,camera:a,regress:s,domElement:o,enableDamping:l=!0,keyEvents:c=!1,onChange:u,onStart:d,onEnd:h}=e,p=r(e,wT);const f=hE(e=>e.invalidate),m=hE(e=>e.camera),g=hE(e=>e.gl),v=hE(e=>e.events),x=hE(e=>e.setEvents),y=hE(e=>e.set),b=hE(e=>e.get),_=hE(e=>e.performance),w=a||m,S=o||v.connected||g.domElement,M=t.useMemo(()=>new _T(w),[w]);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=dE(),i=n.getState().internal.subscribe,r=TC(e);kC(()=>i(r,t,n),[t,i,n])}(()=>{M.enabled&&M.update()},-1),t.useEffect(()=>(c&&M.connect(!0===c?S:c),M.connect(S),()=>{M.dispose()}),[c,S,s,M,f]),t.useEffect(()=>{const e=e=>{f(),s&&_.regress(),u&&u(e)},t=e=>{d&&d(e)},n=e=>{h&&h(e)};return M.addEventListener("change",e),M.addEventListener("start",t),M.addEventListener("end",n),()=>{M.removeEventListener("start",t),M.removeEventListener("end",n),M.removeEventListener("change",e)}},[u,d,h,M,f,x]),t.useEffect(()=>{if(i){const e=b().controls;return y({controls:M}),()=>y({controls:e})}},[i,M]),t.createElement("primitive",CE({ref:n,object:M,enableDamping:l},p))});function MT(e){let{highlightedMeshes:n=[]}=e;const{scene:i}=dT("/Human_body.glb");return(0,t.useEffect)(()=>{const e={};n.forEach(t=>{let{name:n,color:i}=t;e[n]=i}),i.traverse(t=>{if(t.isMesh){t.material=t.material.clone();const n=e[t.name.toLowerCase()];n&&t.material.color.set(n)}})},[i,n]),(0,ni.jsx)("primitive",{object:i,position:[0,-1.5,0],scale:[1.5,1.5,1.5]})}function AT(e){let{highlightedMeshes:n=[]}=e;const[i,r]=(0,t.useState)(!0),[a,s]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=document.querySelector(".App");r(null===e||void 0===e?void 0:e.classList.contains("dark-mode"));const t=()=>{s(window.innerWidth<=768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const o={width:"100%",height:a?"400px":"650px",background:i?"#0f172a":"none",padding:0,margin:"0 auto",marginTop:"0",marginBottom:"0",borderRadius:a?"12px":"0",overflow:"hidden"},l={background:i?"#0f172a":"none",borderRadius:a?"12px":"0"};return(0,ni.jsx)("div",{style:o,children:(0,ni.jsxs)($E,{camera:{position:a?[0,1.5,6]:[0,2,8],fov:a?60:50},style:l,gl:{preserveDrawingBuffer:!0},children:[i&&(0,ni.jsx)("color",{attach:"background",args:["#0f172a"]}),(0,ni.jsx)("ambientLight",{intensity:.7}),(0,ni.jsx)("directionalLight",{position:[2,2,2],intensity:.7}),(0,ni.jsx)(t.Suspense,{fallback:null,children:(0,ni.jsx)(MT,{highlightedMeshes:n})}),(0,ni.jsx)(ST,{minDistance:a?3:4,maxDistance:a?3:4,enablePan:!1,enableZoom:!1,enableDamping:!0,dampingFactor:.05})]})})}function CT(e){return Ot({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},child:[]}]})(e)}jl.register(Kc,$c,ec,Ql,Lc,Xc,Tc,Ac);const ET={back_neck:"Boyun Arkas\u0131",chest:"G\xf6\u011f\xfcs",front_neck:"Boyun \xd6n\xfc",head:"Ba\u015f",left_arm:"Sol Kol",left_buttock:"Sol Kal\xe7a",left_elbow:"Sol Dirsek",left_foot:"Sol Ayak",left_hand:"Sol El",left_knee:"Sol Diz",left_leg:"Sol Bacak",left_shoulder:"Sol Omuz",lower_back:"Bel",right_arm:"Sa\u011f Kol",right_buttock:"Sa\u011f Kal\xe7a",right_elbow:"Sa\u011f Dirsek",right_foot:"Sa\u011f Ayak",right_hand:"Sa\u011f El",right_knee:"Sa\u011f Diz",right_leg:"Sa\u011f Bacak",right_shoulder:"Sa\u011f Omuz",stomach:"Kar\u0131n",upper_back:"S\u0131rt"},kT=e=>{var n,i,r,a;let{currentUser:s}=e;const[o,l]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(!0),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),[x,y]=(0,t.useState)("analiz"),[b,_]=(0,t.useState)(0),[w,S]=(0,t.useState)("7");(0,t.useEffect)(()=>{o?M(parseInt(w)):A(parseInt(w))},[w]),(0,t.useEffect)(()=>{A(parseInt(w))},[]);const M=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;try{m(!0);const t=await fetch("http://localhost:8000/results/daily-averages?days=".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});if(t.ok){const e=await t.json();l(t=>c(c({},t),{},{daily_averages:e.daily_averages,total_days:e.total_days,days_with_analysis:e.days_with_analysis}))}}catch(g){console.error("Chart data fetch error:",g)}finally{m(!1)}},A=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;try{p(!0);const[t,n,i]=await Promise.all([fetch("http://localhost:8000/results/daily-averages?days=".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}),fetch("http://localhost:8000/posture_analyzer/user_progress",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}),fetch("http://localhost:8000/posture_analyzer/posture_insights",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})]);let r={};if(t.ok){const e=await t.json();r=c(c({},r),{},{daily_averages:e.daily_averages,total_days:e.total_days,days_with_analysis:e.days_with_analysis})}if(n.ok){const e=await n.json();r=c(c({},r),{},{analysis_period:e.analysis_period,calibration_status:e.calibration_status,progress_data:e.progress_data,recent_scores:e.recent_scores,recommendations:e.recommendations})}if(i.ok){const e=await i.json();d(e)}l(r)}catch(g){v("Veri y\xfcklenirken hata olu\u015ftu."),console.error("Dashboard data fetch error:",g)}finally{p(!1)}},C={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{display:!0,title:{display:!0,text:"Tarih",color:"#6b7280",font:{size:12,weight:"bold"}},grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6b7280",font:{size:10}}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Duru\u015f Skoru",color:"#10b981",font:{size:12,weight:"bold"}},min:0,max:100,grid:{color:"rgba(16, 185, 129, 0.1)"},ticks:{color:"#10b981",font:{size:10}}}},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"bold"}}},title:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#10b981",borderWidth:1,cornerRadius:8,callbacks:{label:function(e){var t;const n=null===o||void 0===o||null===(t=o.daily_averages)||void 0===t?void 0:t[e.dataIndex];return n&&n.analysis_count>0?"Ortalama Skor: ".concat(e.parsed.y.toFixed(1),"/100 (").concat(n.analysis_count," analiz)"):"Ortalama Skor: ".concat(e.parsed.y.toFixed(1),"/100 (Analiz yok)")}}}}},E=["back_neck","chest","front_neck","head","left_arm","left_buttock","left_elbow","left_foot","left_hand","left_knee","left_leg","left_shoulder","lower_back","right_arm","right_buttock","right_elbow","right_foot","right_hand","right_knee","right_leg","right_shoulder","stomach","upper_back"],k=e=>{const t="#ef4444",n="#f97316",i="#fdba74",r="#fef08a",a="#22c55e",s=[{keywords:["a\u015f\u0131r\u0131 ileri ba\u015f post\xfcr\xfc"],meshColors:{head:t,front_neck:t,back_neck:t,upper_back:n,left_shoulder:n,right_shoulder:n}},{keywords:["ciddi ileri ba\u015f post\xfcr\xfc"],meshColors:{head:n,front_neck:n,back_neck:n,upper_back:i,left_shoulder:i,right_shoulder:i}},{keywords:["hafif ileri ba\u015f post\xfcr\xfc"],meshColors:{head:i,front_neck:i,back_neck:i,upper_back:r,left_shoulder:r,right_shoulder:r}},{keywords:["ciddi boyun a\xe7\u0131s\u0131 bozuklu\u011fu"],meshColors:{back_neck:n,front_neck:n,head:i,upper_back:i,left_shoulder:i,right_shoulder:i}},{keywords:["boyun a\xe7\u0131s\u0131 bozuklu\u011fu"],meshColors:{back_neck:i,front_neck:i,head:r,left_shoulder:r,right_shoulder:r}},{keywords:["ciddi omuz asimetrisi"],meshColors:{left_shoulder:n,right_shoulder:n,upper_back:i,back_neck:i,left_arm:i,right_arm:i,left_elbow:r,right_elbow:r,left_hand:r,right_hand:r}},{keywords:["orta d\xfczey omuz asimetrisi"],meshColors:{left_shoulder:i,right_shoulder:i,upper_back:r,back_neck:r,left_arm:r,right_arm:r}},{keywords:["ciddi ba\u015f e\u011fimi"],meshColors:{head:n,back_neck:n,front_neck:n}},{keywords:["ba\u015f e\u011fimi"],meshColors:{head:i,back_neck:i,front_neck:i}},{keywords:["omuz asimetrisi - kas dengesizli\u011fi"],meshColors:{left_shoulder:i,right_shoulder:i,upper_back:r,left_arm:r,right_arm:r}},{keywords:["a\u015f\u0131r\u0131 s\u0131rt e\u011frili\u011fi - disk problemleri riski"],meshColors:{lower_back:t,upper_back:t,chest:r,stomach:r,back_neck:n,left_shoulder:r,right_shoulder:r,left_buttock:n,right_buttock:n}},{keywords:["kronik post\xfcr problemi - fizik tedavi \xf6nerisi"],meshColors:{back_neck:t,upper_back:t,lower_back:t,left_shoulder:n,right_shoulder:n,chest:n,stomach:n,head:i,left_arm:i,right_arm:i,left_buttock:i,right_buttock:i,left_elbow:r,right_elbow:r}},{keywords:["ba\u015f e\u011fimi - boyun yan kas gerginli\u011fi"],meshColors:{head:n,back_neck:n,front_neck:n,left_shoulder:i,right_shoulder:i,upper_back:r}},{keywords:["diz seviye asimetrisi - alt ekstremite dengesizli\u011fi"],meshColors:{left_knee:t,right_knee:t,left_leg:i,right_leg:i,left_buttock:i,right_buttock:i}},{keywords:["ayak seviye fark\u0131 - y\xfcr\xfcme patern bozuklu\u011fu"],meshColors:{left_foot:t,right_foot:t,left_knee:i,right_knee:i,left_leg:n,right_leg:n,lower_back:i}}],o={};return E.forEach(e=>{o[e]=a}),e&&e.forEach(e=>{const t=e.toLowerCase().trim(),n=s.find(e=>e.keywords.some(e=>t===e));n&&Object.entries(n.meshColors).forEach(e=>{let[t,n]=e;o[t]=n})}),Object.entries(o).map(e=>{let[t,n]=e;return{name:t,color:n}})};let T=0,R="-",L="-",P="-",B="-",N="-",D="-",I="-",j="-";if(null!==o&&void 0!==o&&o.recent_scores&&o.recent_scores.length>0){const e=o.recent_scores.map(e=>e.score).filter(e=>"number"===typeof e);if(T=o.total_analyses||o.recent_scores.length,e.length>0){var z,F;const t=e.reduce((e,t)=>e+t,0);R=(t/e.length).toFixed(1);const n=e.indexOf(Math.max(...e));L=e[n],P=null!==(z=o.recent_scores[n])&&void 0!==z&&z.date?new Date(o.recent_scores[n].date).toLocaleDateString("tr-TR"):"-";const i=e.indexOf(Math.min(...e));B=e[i],N=null!==(F=o.recent_scores[i])&&void 0!==F&&F.date?new Date(o.recent_scores[i].date).toLocaleDateString("tr-TR"):"-"}const t={};o.recent_scores.forEach(e=>{Array.isArray(e.risk_factors)&&e.risk_factors.forEach(e=>{t[e]=(t[e]||0)+1})});const n=Object.entries(t);n.length>0&&(D=n.reduce((e,t)=>e[1]>t[1]?e:t)[0]);const i={};o.recent_scores.forEach(e=>{Array.isArray(e.improvement_suggestions)&&e.improvement_suggestions.forEach(e=>{i[e]=(i[e]||0)+1})});const r=Object.entries(i);r.length>0&&(I=r.reduce((e,t)=>e[1]>t[1]?e:t)[0],I&&(I=I.replace(/\*([^*]+)\*/g,"$1").trim()));const a={};o.recent_scores.forEach(e=>{if(Array.isArray(e.risk_factors)){k(e.risk_factors).forEach(e=>{let{name:t,color:n}=e;["#ef4444","#f97316","#fdba74","#fef08a"].includes(n)&&(a[t]=(a[t]||0)+1)})}});const s=Object.entries(a);if(s.length>0){const[e,t]=s.reduce((e,t)=>e[1]>t[1]?e:t);j="".concat(ET[e]||e," (").concat(t," analizde riskli)")}}if(h)return(0,ni.jsxs)("div",{className:"dashboard-loading",children:[(0,ni.jsx)("div",{className:"loading-spinner"}),(0,ni.jsx)("p",{children:"Dashboard y\xfckleniyor..."})]});if(g)return(0,ni.jsxs)("div",{className:"dashboard-error",children:[(0,ni.jsxs)("p",{children:["\u26a0\ufe0f ",g]}),(0,ni.jsx)("button",{onClick:A,children:"Tekrar Dene"})]});const O=(()=>{if(null===o||void 0===o||!o.daily_averages||0===o.daily_averages.length)return{labels:[],datasets:[{label:"Duru\u015f Skoru",data:[],borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.2)",borderWidth:3,tension:.4,fill:!0,pointBackgroundColor:"#10b981",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]};const e=o.daily_averages,t=e.map(e=>e.day_label),n=e.map(e=>e.average_score),i=n.map((e,t)=>({score:e,idx:t})).filter(e=>e.score>0);let r=null;return i.length>0&&(r=i.reduce((e,t)=>e.score<t.score?e:t).idx),{labels:t,datasets:[{label:"G\xfcnl\xfck Ortalama Skor (".concat(w," g\xfcn)"),data:n,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.2)",borderWidth:3,tension:.4,fill:!0,pointBackgroundColor:n.map((e,t)=>t===r?"#ef4444":"#10b981"),pointBorderColor:n.map((e,t)=>t===r?"#ef4444":"#ffffff"),pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]}})();return(0,ni.jsx)("div",{className:"dashboard",children:(0,ni.jsxs)("div",{className:"dashboard-container",style:{width:"100%"},children:[(0,ni.jsxs)("div",{className:"dashboard-header",children:[(0,ni.jsxs)("h2",{children:["Ho\u015f geldin, ",(null===s||void 0===s?void 0:s.username)||"Kullan\u0131c\u0131","! \ud83d\udc4b"]}),(0,ni.jsx)("p",{children:"Analiz grafi\u011finizde istatistikler ve trendler, 3D modelinizde g\xf6rsel risk analizi"})]}),(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,ni.jsxs)("button",{className:"analiz"===x?"dashboard-tab-btn active":"dashboard-tab-btn",onClick:()=>y("analiz"),children:[(0,ni.jsx)(Ht,{className:"tab-icon"}),(0,ni.jsx)("span",{children:"Analiz Grafi\u011fim"})]}),(0,ni.jsxs)("button",{className:"3d"===x?"dashboard-tab-btn active":"dashboard-tab-btn",onClick:()=>y("3d"),children:[(0,ni.jsx)(Yt,{className:"tab-icon"}),(0,ni.jsx)("span",{children:"3D Modelim"})]})]}),"analiz"===x?(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsxs)("div",{className:"dashboard-grid",children:[(0,ni.jsxs)("div",{className:"dashboard-card stats-card",children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon stats-icon",children:(0,ni.jsx)(Cn,{})}),(0,ni.jsx)("h3",{children:"Analiz ve \u0130statistikler"})]}),o?(0,ni.jsxs)("div",{className:"progress-content",children:[(0,ni.jsxs)("div",{className:"progress-item",children:[(0,ni.jsx)("span",{className:"progress-label",children:"Kalibrasyon Durumu:"}),(0,ni.jsx)("span",{className:"progress-value",children:o.calibration_status})]}),o.progress_data&&(0,ni.jsxs)("div",{className:"progress-item",children:[(0,ni.jsx)("span",{className:"progress-label",children:"Genel Trend:"}),(0,ni.jsxs)("span",{className:"progress-value",children:[(e=>{switch(e){case"g\xfc\xe7l\xfc_iyile\u015fme":return"\ud83d\udcc8";case"hafif_iyile\u015fme":return"\ud83d\udcca";case"k\xf6t\xfcle\u015fme":return"\ud83d\udcc9";case"stabil":return"\u27a1\ufe0f";default:return"\u2753"}})(o.progress_data.trend)," ",o.progress_data.trend]})]}),o.daily_averages&&o.daily_averages.length>0&&(()=>{const e=o.daily_averages.filter(e=>e.average_score>0);if(0===e.length)return null;const t=e.reduce((e,t)=>e.average_score>t.average_score?e:t),n=e.reduce((e,t)=>e.average_score<t.average_score?e:t);return(0,ni.jsxs)("div",{className:"progress-item",style:{flexDirection:"column",alignItems:"flex-start",gap:"0.2rem"},children:[(0,ni.jsxs)("span",{className:"progress-label",style:{fontWeight:600},children:["Son ",w," G\xfcn:"]}),(0,ni.jsxs)("span",{className:"progress-label",children:["En Y\xfcksek: ",(0,ni.jsxs)("span",{className:"progress-value",children:[t.day_label," - ",t.average_score.toFixed(1)]})]}),(0,ni.jsxs)("span",{className:"progress-label",children:["En D\xfc\u015f\xfck: ",(0,ni.jsxs)("span",{className:"progress-value",children:[n.day_label," - ",n.average_score.toFixed(1)]})]})]})})(),o.daily_averages&&(()=>{const e=o.daily_averages.filter(e=>e.analysis_count>0).length,t=o.daily_averages.length,n=t>0?(e/t*100).toFixed(0):0;return(0,ni.jsxs)("div",{className:"progress-item",children:[(0,ni.jsx)("span",{className:"progress-label",children:"Analiz S\u0131kl\u0131\u011f\u0131:"}),(0,ni.jsxs)("span",{className:"progress-value",children:["%",n," (",e,"/",t," g\xfcn)"]})]})})(),(0,ni.jsxs)("div",{className:"progress-item",children:[(0,ni.jsx)("span",{className:"progress-label",children:"Toplam Analiz:"}),(0,ni.jsxs)("span",{className:"progress-value",children:[T," analiz"]})]})]}):(0,ni.jsx)("p",{children:"\u0130statistik verisi bulunamad\u0131."})]}),(0,ni.jsxs)("div",{className:"dashboard-card chart-card",children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon chart-icon",children:(0,ni.jsx)(Xt,{})}),(0,ni.jsx)("h3",{children:"G\xfcnl\xfck \u0130lerleme Grafi\u011fi"})]}),(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"1rem"},children:[(0,ni.jsxs)("button",{className:"7"===w?"dashboard-period-btn active":"dashboard-period-btn",onClick:()=>S("7"),children:[(0,ni.jsx)(Kt,{className:"period-icon"}),(0,ni.jsx)("span",{children:"7 G\xfcnl\xfck"})]}),(0,ni.jsxs)("button",{className:"30"===w?"dashboard-period-btn active":"dashboard-period-btn",onClick:()=>S("30"),children:[(0,ni.jsx)(Vt,{className:"period-icon"}),(0,ni.jsx)("span",{children:"30 G\xfcnl\xfck"})]})]}),f?(0,ni.jsxs)("div",{className:"chart-loading",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px",flexDirection:"column",gap:"1rem"},children:[(0,ni.jsx)("div",{className:"loading-spinner",style:{width:"30px",height:"30px"}}),(0,ni.jsx)("p",{style:{color:"#6b7280",fontSize:"0.9rem"},children:"Grafik g\xfcncelleniyor..."})]}):O?(0,ni.jsx)("div",{className:"chart-container",children:(0,ni.jsx)(Du,{data:O,options:C})}):(0,ni.jsxs)("div",{className:"no-data-message",children:[(0,ni.jsx)("p",{children:"\ud83d\udcca Hen\xfcz yeterli veri yok"}),(0,ni.jsx)("p",{children:"\u0130lk analizinizi yapt\u0131ktan sonra grafik burada g\xf6r\xfcnecek"})]})]}),(0,ni.jsxs)("div",{className:"dashboard-card recent-analyses",children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon recent-icon",children:(0,ni.jsx)(tn,{})}),(0,ni.jsx)("h3",{children:"Son Analizler"})]}),null!==o&&void 0!==o&&o.recent_scores?(0,ni.jsx)("div",{className:"recent-scores",children:o.recent_scores.slice(0,5).map((e,t)=>{var n;return(0,ni.jsxs)("div",{className:"score-item",children:[(0,ni.jsx)("div",{className:"score-date",children:new Date(e.date).toLocaleDateString("tr-TR")}),(0,ni.jsxs)("div",{className:"score-details",children:[(0,ni.jsx)("span",{className:"score-level score-".concat((null===(n=e.level)||void 0===n?void 0:n.toLowerCase())||"unknown"),children:e.level||"N/A"}),(0,ni.jsxs)("span",{className:"score-confidence",children:["%",(100*(e.confidence||0)).toFixed(1)]})]})]},t)})}):(0,ni.jsx)("p",{children:"Hen\xfcz analiz yap\u0131lmam\u0131\u015f."})]}),(0,ni.jsxs)("div",{className:"dashboard-card insights",children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon insights-icon",children:(0,ni.jsx)(CT,{})}),(0,ni.jsx)("h3",{children:"\u0130\xe7g\xf6r\xfcler"})]}),null!==u&&void 0!==u&&u.insights?(0,ni.jsx)("div",{className:"insights-list",children:u.insights.slice(0,3).map((e,t)=>(0,ni.jsxs)("div",{className:"insight-item insight-".concat(e.type),children:[(0,ni.jsx)("div",{className:"insight-title",children:e.title}),(0,ni.jsx)("div",{className:"insight-description",children:e.description})]},t))}):(0,ni.jsx)("p",{children:"Hen\xfcz yeterli veri yok."})]}),(0,ni.jsxs)("div",{className:"dashboard-card recommendations",children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon recommendations-icon",children:(0,ni.jsx)(On,{})}),(0,ni.jsx)("h3",{children:"\xd6neriler"})]}),null!==o&&void 0!==o&&o.recommendations?(0,ni.jsx)("ul",{className:"recommendations-list",children:o.recommendations.map((e,t)=>(0,ni.jsx)("li",{children:e},t))}):(0,ni.jsxs)("ul",{className:"recommendations-list",children:[(0,ni.jsx)("li",{children:"D\xfczenli analiz yap\u0131n"}),(0,ni.jsx)("li",{children:"Kalibrasyon yap\u0131n"}),(0,ni.jsx)("li",{children:"Egzersizlerinizi takip edin"})]})]})]}),(0,ni.jsxs)("div",{className:"dashboard-actions",children:[(0,ni.jsxs)("button",{className:"dashboard-action-btn refresh-btn",onClick:()=>A(parseInt(w)),children:[(0,ni.jsx)(kn,{className:"action-icon"}),(0,ni.jsx)("span",{children:"Verileri Yenile"})]}),(0,ni.jsxs)("button",{className:"dashboard-action-btn pdf-btn",onClick:async()=>{try{const e=await fetch("http://localhost:8000/results/pdf-report",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});if(e.ok){const t=await e.blob(),n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="posture_report_".concat(null===s||void 0===s?void 0:s.username,"_").concat((new Date).toISOString().slice(0,10),".pdf"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i)}else console.error("PDF indirme hatas\u0131:",e.statusText),alert("PDF raporu indirilemedi. L\xfctfen tekrar deneyin.")}catch(g){console.error("PDF indirme hatas\u0131:",g),alert("PDF raporu indirilemedi. L\xfctfen tekrar deneyin.")}},children:[(0,ni.jsx)(rn,{className:"action-icon"}),(0,ni.jsx)("span",{children:"PDF Rapor \u0130ndir"})]})]})]}):(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsxs)("div",{style:{display:"flex",width:"100%",gap:window.innerWidth<=768?"1rem":"2rem",alignItems:"flex-start",marginBottom:"2.5rem",flexDirection:window.innerWidth<=768?"column":"row"},children:[(0,ni.jsx)("div",{style:{flex:window.innerWidth<=768?"none":2,minWidth:0,display:"flex",justifyContent:"center",width:window.innerWidth<=768?"100%":"auto"},children:(0,ni.jsx)("div",{style:{width:window.innerWidth<=768?"100%":"70vw",height:window.innerWidth<=768?"400px":"650px",margin:"0 auto"},children:(0,ni.jsx)(AT,{highlightedMeshes:k(null===o||void 0===o||null===(n=o.recent_scores)||void 0===n||null===(i=n[b])||void 0===i?void 0:i.risk_factors)})})}),window.innerWidth<=768&&(0,ni.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"1rem",padding:"0 1rem"},children:(0,ni.jsxs)("div",{className:"color-legend-row",style:{flexDirection:"column",gap:"0.5rem",alignItems:"flex-start"},children:[(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#ef4444"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"Kritik Seviye"})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#f97316"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"\xc7ok Ciddi"})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#fdba74"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"Orta Risk "})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#fef08a",border:"1px solid #eab308"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"D\xfc\u015f\xfck Risk"})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#22c55e"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"Sa\u011fl\u0131kl\u0131 / \u0130deal Durum"})]})]})}),(0,ni.jsx)("div",{style:{flex:window.innerWidth<=768?"none":1,minWidth:window.innerWidth<=768?"100%":"320px",width:window.innerWidth<=768?"100%":"auto"},children:(0,ni.jsxs)("div",{className:"dashboard-card recent-analyses",children:[(0,ni.jsx)("h3",{children:"\ud83d\udcc8 Son Analizler"}),null!==o&&void 0!==o&&o.recent_scores?(0,ni.jsx)("div",{className:"recent-scores",children:o.recent_scores.slice(0,5).map((e,t)=>{var n;return(0,ni.jsxs)("div",{className:"score-item".concat(b===t?" selected":""),style:{cursor:"pointer"},onClick:()=>_(t),children:[(0,ni.jsx)("div",{className:"score-date",children:new Date(e.date).toLocaleDateString("tr-TR")}),(0,ni.jsxs)("div",{className:"score-details",children:[(0,ni.jsx)("span",{className:"score-level score-".concat((null===(n=e.level)||void 0===n?void 0:n.toLowerCase())||"unknown"),children:e.level||"N/A"}),(0,ni.jsxs)("span",{className:"score-confidence",children:["%",(100*(e.confidence||0)).toFixed(1)]})]})]},t)})}):(0,ni.jsx)("p",{children:"Hen\xfcz analiz yap\u0131lmam\u0131\u015f."})]})})]}),window.innerWidth>768&&(0,ni.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"2rem",padding:"0"},children:(0,ni.jsxs)("div",{className:"color-legend-row",style:{flexDirection:"row",gap:"1rem",alignItems:"center"},children:[(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#ef4444"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"Kritik Seviye"})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#f97316"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"\xc7ok Ciddi"})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#fdba74"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"Orta Risk "})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#fef08a",border:"1px solid #eab308"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"D\xfc\u015f\xfck Risk"})]}),(0,ni.jsxs)("div",{className:"color-legend-item",children:[(0,ni.jsx)("span",{className:"legend-color-box",style:{background:"#22c55e"}})," ",(0,ni.jsx)("span",{className:"legend-label",children:"Sa\u011fl\u0131kl\u0131 / \u0130deal Durum"})]})]})}),(null===o||void 0===o?void 0:o.recent_scores)&&o.recent_scores.length>0&&(0,ni.jsxs)("div",{style:{display:"flex",gap:window.innerWidth<=768?"1rem":"2rem",width:"100%",flexDirection:window.innerWidth<=768?"column":"row"},children:[(0,ni.jsxs)("div",{className:"dashboard-card risk-factors-card",style:{flex:1},children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon risk-icon",children:(0,ni.jsx)(Wt,{})}),(0,ni.jsx)("h3",{children:"Risk Fakt\xf6rleri"})]}),null!==(r=o.recent_scores[b])&&void 0!==r&&r.risk_factors&&o.recent_scores[b].risk_factors.length>0?(0,ni.jsx)("div",{className:"risk-list",children:o.recent_scores[b].risk_factors.map((e,t)=>(0,ni.jsx)("div",{className:"risk-box",children:e},t))}):(0,ni.jsx)("p",{children:"Risk fakt\xf6r\xfc bulunamad\u0131."})]}),(0,ni.jsxs)("div",{className:"dashboard-card suggestions-card",style:{flex:1},children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon suggestion-icon",children:(0,ni.jsx)(Fn,{})}),(0,ni.jsx)("h3",{children:"\u0130yile\u015ftirme \xd6nerileri"})]}),null!==(a=o.recent_scores[b])&&void 0!==a&&a.improvement_suggestions&&o.recent_scores[b].improvement_suggestions.length>0?(0,ni.jsx)("div",{className:"suggestion-list",children:o.recent_scores[b].improvement_suggestions.map((e,t)=>(0,ni.jsx)("div",{className:"suggestion-box",children:e?e.replace(/\*([^*]+)\*/g,"$1").trim():e},t))}):(0,ni.jsx)("p",{children:"\xd6neri bulunamad\u0131."})]}),(0,ni.jsxs)("div",{className:"dashboard-card summary-card",style:{flex:1},children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"card-icon summary-icon",children:(0,ni.jsx)(Xt,{})}),(0,ni.jsx)("h3",{children:"T\xfcm Analizlerin \xd6zeti"})]}),null!==o&&void 0!==o&&o.recent_scores&&o.recent_scores.length>0?(0,ni.jsxs)("div",{className:"summary-list",children:[(0,ni.jsxs)("div",{className:"summary-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ni.jsx)("b",{children:"Toplam analiz:"})," ",(0,ni.jsx)("span",{style:{textAlign:"right"},children:T})]}),(0,ni.jsxs)("div",{className:"summary-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ni.jsx)("b",{children:"Ortalama skor:"})," ",(0,ni.jsx)("span",{style:{textAlign:"right"},children:R})]}),(0,ni.jsxs)("div",{className:"summary-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ni.jsx)("b",{children:"En iyi skor:"})," ",(0,ni.jsxs)("span",{style:{textAlign:"right"},children:[L," (",P,")"]})]}),(0,ni.jsxs)("div",{className:"summary-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ni.jsx)("b",{children:"En k\xf6t\xfc skor:"})," ",(0,ni.jsxs)("span",{style:{textAlign:"right"},children:[B," (",N,")"]})]}),(0,ni.jsxs)("div",{className:"summary-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ni.jsx)("b",{children:"En s\u0131k kar\u015f\u0131la\u015f\u0131lan risk fakt\xf6r\xfc:"})," ",(0,ni.jsx)("span",{style:{textAlign:"right"},children:D})]}),(0,ni.jsxs)("div",{className:"summary-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ni.jsx)("b",{children:"En \xe7ok \xf6nerilen iyile\u015ftirme tavsiyesi:"})," ",(0,ni.jsx)("span",{style:{textAlign:"right"},children:I})]}),(0,ni.jsxs)("div",{className:"summary-box",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ni.jsx)("b",{children:"En sorunlu b\xf6lge:"})," ",(0,ni.jsx)("span",{style:{textAlign:"right"},children:j})]})]}):(0,ni.jsx)("div",{style:{color:"#6b7280",fontSize:"1rem"},children:"Hen\xfcz analiz verisi yok."})]})]})]})]})})},TT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const i=(()=>{try{return new(window.AudioContext||window.webkitAudioContext)}catch(rN){return console.log("Web Audio API not supported"),null}})();if(!i)return;const r=i.createOscillator(),a=i.createGain();r.connect(a),a.connect(i.destination);const s=Math.max(0,Math.min(1,n));switch(e){case"critical":r.frequency.setValueAtTime(800,i.currentTime),r.frequency.setValueAtTime(600,i.currentTime+.1),r.frequency.setValueAtTime(800,i.currentTime+.2),r.frequency.setValueAtTime(600,i.currentTime+.3),a.gain.setValueAtTime(.8*s,i.currentTime),a.gain.exponentialRampToValueAtTime(.001,i.currentTime+t/1e3);break;case"warning":r.frequency.setValueAtTime(500,i.currentTime),r.frequency.setValueAtTime(400,i.currentTime+.2),a.gain.setValueAtTime(.5*s,i.currentTime),a.gain.exponentialRampToValueAtTime(.001,i.currentTime+t/1e3);break;case"success":r.frequency.setValueAtTime(400,i.currentTime),r.frequency.setValueAtTime(600,i.currentTime+.2),a.gain.setValueAtTime(.3*s,i.currentTime),a.gain.exponentialRampToValueAtTime(.001,i.currentTime+t/1e3);break;default:r.frequency.setValueAtTime(440,i.currentTime),a.gain.setValueAtTime(.3*s,i.currentTime),a.gain.exponentialRampToValueAtTime(.001,i.currentTime+t/1e3)}r.type="sine",r.start(i.currentTime),r.stop(i.currentTime+t/1e3)},RT=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[a,s]=(0,t.useState)(.7),[o,l]=(0,t.useState)("default"),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(window.innerWidth<=768),m=(0,t.useRef)(0);(0,t.useEffect)(()=>{const e=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const g=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const c=m.current++,u={id:c,type:e,title:t,message:r,duration:s,timestamp:Date.now()};if(n(e=>[...e,u]),l&&i){TT("default"===o?e:o,600,a)}setTimeout(()=>{n(e=>e.filter(e=>e.id!==c))},s)},v=()=>{r(e=>!e),i||TT("success",300,a)};(0,t.useEffect)(()=>(window.showPostureNotification=g,window.toggleNotificationSound=v,window.isNotificationSoundEnabled=()=>i,window.getSoundVolume=()=>a,window.getSoundType=()=>o,()=>{delete window.showPostureNotification,delete window.toggleNotificationSound,delete window.isNotificationSoundEnabled,delete window.getSoundVolume,delete window.getSoundType}),[i,a,o]);const x=window.innerWidth<=768?"14px":"18px",y={success:(0,ni.jsx)(Zt,{style:{color:"#16a34a",fontSize:x}}),error:(0,ni.jsx)($n,{style:{color:"#dc2626",fontSize:x}}),info:(0,ni.jsx)(fn,{style:{color:"#2563eb",fontSize:x}}),warning:(0,ni.jsx)(Wt,{style:{color:"#d97706",fontSize:x}})};return(0,ni.jsxs)("div",{style:{position:"fixed",bottom:p?"80px":"120px",right:p?"10px":"30px",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px"},children:[(0,ni.jsxs)("div",{style:{position:"fixed",bottom:p?"10px":"20px",left:p?"10px":"20px",zIndex:1e4,display:"flex",flexDirection:"column",gap:"12px"},children:[(0,ni.jsxs)("div",{style:{position:"fixed",bottom:p?"20px":"30px",left:p?"20px":"30px",zIndex:1e3},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,ni.jsxs)("button",{onClick:()=>{i?u(!c):(r(!0),u(!0))},style:{background:i?"linear-gradient(135deg, #4f46e5 0%, #3b82f6 25%, #1d4ed8 50%, #1e40af 75%, #1e3a8a 100%)":"linear-gradient(135deg, #71717a 0%, #52525b 25%, #3f3f46 50%, #27272a 75%, #18181b 100%)",backdropFilter:"blur(30px) saturate(180%)",WebkitBackdropFilter:"blur(30px) saturate(180%)",border:i?"1px solid rgba(79, 70, 229, 0.6)":"1px solid rgba(113, 113, 122, 0.4)",borderRadius:"20px",width:p?"48px":"56px",height:p?"48px":"56px",color:"white",cursor:"pointer",fontSize:"20px",boxShadow:i?"0 20px 50px rgba(79, 70, 229, 0.35), 0 8px 25px rgba(59, 130, 246, 0.25), 0 3px 10px rgba(29, 78, 216, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.25), inset 0 -1px 0 rgba(0, 0, 0, 0.1)":"0 20px 50px rgba(0, 0, 0, 0.25), 0 8px 25px rgba(0, 0, 0, 0.15), 0 3px 10px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transform:"perspective(1000px) rotateX(0deg) rotateY(0deg)",transformStyle:"preserve-3d",transformOrigin:"center center"},onMouseEnter:e=>{e.target.style.transform="perspective(1000px) translateY(-4px) scale(1.08) rotateX(5deg) rotateY(2deg)",e.target.style.boxShadow=i?"0 25px 60px rgba(79, 70, 229, 0.45), 0 12px 30px rgba(59, 130, 246, 0.35), 0 6px 15px rgba(29, 78, 216, 0.25), inset 0 2px 0 rgba(255, 255, 255, 0.4), inset 0 -2px 0 rgba(0, 0, 0, 0.15)":"0 25px 60px rgba(0, 0, 0, 0.35), 0 12px 30px rgba(0, 0, 0, 0.25), 0 6px 15px rgba(0, 0, 0, 0.15), inset 0 2px 0 rgba(255, 255, 255, 0.25), inset 0 -2px 0 rgba(0, 0, 0, 0.25)",e.target.style.filter="brightness(1.1) contrast(1.05)"},onMouseLeave:e=>{e.target.style.transform="perspective(1000px) translateY(0) scale(1) rotateX(0deg) rotateY(0deg)",e.target.style.boxShadow=i?"0 20px 50px rgba(79, 70, 229, 0.35), 0 8px 25px rgba(59, 130, 246, 0.25), 0 3px 10px rgba(29, 78, 216, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.25), inset 0 -1px 0 rgba(0, 0, 0, 0.1)":"0 20px 50px rgba(0, 0, 0, 0.25), 0 8px 25px rgba(0, 0, 0, 0.15), 0 3px 10px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",e.target.style.filter="brightness(1) contrast(1)"},onMouseDown:e=>{e.target.style.transform="perspective(1000px) translateY(-1px) scale(0.95) rotateX(8deg) rotateY(3deg)",e.target.style.filter="brightness(0.9) contrast(1.1)"},onMouseUp:e=>{e.target.style.transform="perspective(1000px) translateY(-4px) scale(1.08) rotateX(5deg) rotateY(2deg)",e.target.style.filter="brightness(1.1) contrast(1.05)"},children:[(0,ni.jsx)("div",{style:{position:"absolute",inset:0,background:i?"radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.4), transparent 40%), radial-gradient(circle at 80% 80%, rgba(79, 70, 229, 0.3), transparent 50%), linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.15) 50%, transparent 100%)":"radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.2), transparent 40%), radial-gradient(circle at 80% 80%, rgba(113, 113, 122, 0.2), transparent 50%), linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.08) 50%, transparent 100%)",pointerEvents:"none",borderRadius:"20px"}}),(0,ni.jsx)("div",{style:{position:"absolute",inset:"1px",borderRadius:"19px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%, rgba(0, 0, 0, 0.05) 100%)",pointerEvents:"none"}}),(0,ni.jsx)("div",{style:{position:"absolute",top:"2px",left:"2px",right:"2px",height:"50%",borderRadius:"18px 18px 0 0",background:"linear-gradient(180deg, rgba(255, 255, 255, 0.15) 0%, transparent 100%)",pointerEvents:"none"}}),i?(0,ni.jsx)(Kn,{style:{position:"relative",zIndex:3,fontSize:"24px",filter:"drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4)) drop-shadow(0 1px 2px rgba(255, 255, 255, 0.2))",transition:"none",transform:"none",pointerEvents:"none",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"}}):(0,ni.jsx)(qn,{style:{position:"relative",zIndex:3,fontSize:"24px",filter:"drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4)) drop-shadow(0 1px 2px rgba(255, 255, 255, 0.2))",transition:"none",transform:"none",pointerEvents:"none",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"}})]}),d&&(0,ni.jsxs)("div",{style:{position:"absolute",bottom:"65px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:10001,pointerEvents:"none",opacity:d?1:0,transition:"opacity 0.2s ease"},children:[i?"Ses Ayarlar\u0131":"Sesleri A\xe7",(0,ni.jsx)("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderTop:"4px solid rgba(0, 0, 0, 0.9)"}})]})]}),c&&(0,ni.jsxs)("div",{style:{position:"absolute",bottom:"72px",left:"0",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"20px",padding:p?"16px":"24px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.1), 0 8px 32px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.6)",border:"1px solid rgba(255, 255, 255, 0.2)",minWidth:p?"280px":"320px",animation:"modernSlideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:[(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"16px",borderBottom:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"linear-gradient(145deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1))",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(59, 130, 246, 0.2)"},children:(0,ni.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ni.jsx)("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),(0,ni.jsx)("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),(0,ni.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),(0,ni.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),(0,ni.jsx)("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),(0,ni.jsx)("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),(0,ni.jsx)("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),(0,ni.jsx)("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),(0,ni.jsx)("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h4",{style:{margin:0,color:"#111827",fontSize:"18px",fontWeight:"700",letterSpacing:"-0.025em"},children:"Ses Kontrol\xfc"}),(0,ni.jsx)("p",{style:{margin:0,color:"#6b7280",fontSize:"13px",fontWeight:"400"},children:"Bildirim seslerini \xf6zelle\u015ftirin"})]})]}),(0,ni.jsx)("button",{onClick:()=>u(!1),style:{background:"rgba(107, 114, 128, 0.1)",border:"none",borderRadius:"8px",width:"32px",height:"32px",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(107, 114, 128, 0.15)",e.target.style.color="#374151"},onMouseLeave:e=>{e.target.style.background="rgba(107, 114, 128, 0.1)",e.target.style.color="#6b7280"},children:(0,ni.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ni.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,ni.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,ni.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,ni.jsx)("label",{style:{fontSize:"15px",fontWeight:"600",color:"#111827",letterSpacing:"-0.025em"},children:"Ses Seviyesi"}),(0,ni.jsxs)("div",{style:{background:"linear-gradient(145deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1))",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"4px 8px",fontSize:"13px",fontWeight:"600",color:"#3b82f6"},children:[Math.round(100*a),"%"]})]}),(0,ni.jsxs)("div",{style:{position:"relative"},children:[(0,ni.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:a,onChange:e=>{return t=parseFloat(e.target.value),s(t),void(i&&TT("success",200,t));var t},style:{width:"100%",height:"8px",borderRadius:"4px",background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat(100*a,"%, #e5e7eb ").concat(100*a,"%, #e5e7eb 100%)"),outline:"none",cursor:"pointer",WebkitAppearance:"none",appearance:"none"}}),(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#9ca3af",marginTop:"6px",fontWeight:"500"},children:[(0,ni.jsx)("span",{children:"Sessiz"}),(0,ni.jsx)("span",{children:"Y\xfcksek"})]})]})]}),(0,ni.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ni.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Ses T\xfcr\xfc"}),(0,ni.jsxs)("select",{value:o,onChange:e=>{return t=e.target.value,l(t),void(i&&TT(t,300,a));var t},style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"14px",background:"white",cursor:"pointer"},children:[(0,ni.jsx)("option",{value:"default",children:"Varsay\u0131lan (Otomatik)"}),(0,ni.jsx)("option",{value:"critical",children:"Kritik Uyar\u0131"}),(0,ni.jsx)("option",{value:"warning",children:"Genel Uyar\u0131"}),(0,ni.jsx)("option",{value:"success",children:"Ba\u015far\u0131"})]})]}),(0,ni.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[(0,ni.jsxs)("button",{onClick:()=>{i&&TT("default"===o?"success":o,500,a)},style:{flex:1,padding:"12px 16px",background:"linear-gradient(145deg, rgba(16, 185, 129, 0.9), rgba(5, 150, 105, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",color:"white",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(16, 185, 129, 0.3), 0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 16px rgba(16, 185, 129, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseDown:e=>{e.target.style.transform="translateY(0) scale(0.98)"},onMouseUp:e=>{e.target.style.transform="translateY(-2px) scale(1)"},children:[(0,ni.jsx)("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2), transparent 60%)",pointerEvents:"none"}}),(0,ni.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"relative",zIndex:1},children:(0,ni.jsx)("polygon",{points:"5 3 19 12 5 21 5 3"})}),(0,ni.jsx)("span",{style:{position:"relative",zIndex:1},children:"Test"})]}),(0,ni.jsxs)("button",{onClick:()=>{r(!1),u(!1)},style:{flex:1,padding:"12px 16px",background:"linear-gradient(145deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",color:"white",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"0 4px 16px rgba(239, 68, 68, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(239, 68, 68, 0.3), 0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 16px rgba(239, 68, 68, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseDown:e=>{e.target.style.transform="translateY(0) scale(0.98)"},onMouseUp:e=>{e.target.style.transform="translateY(-2px) scale(1)"},children:[(0,ni.jsx)("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2), transparent 60%)",pointerEvents:"none"}}),(0,ni.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"relative",zIndex:1},children:[(0,ni.jsx)("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),(0,ni.jsx)("line",{x1:"22",y1:"9",x2:"16",y2:"15"}),(0,ni.jsx)("line",{x1:"16",y1:"9",x2:"22",y2:"15"})]}),(0,ni.jsx)("span",{style:{position:"relative",zIndex:1},children:"Kapat"})]})]})]})]}),e.map(e=>(0,ni.jsx)("div",{style:{background:"error"===e.type?"#fef2f2":"warning"===e.type?"#fffbeb":"success"===e.type?"#f0fdf4":"#eff6ff",border:"error"===e.type?"1px solid #fecaca":"warning"===e.type?"1px solid #fed7aa":"success"===e.type?"1px solid #bbf7d0":"1px solid #bfdbfe",borderRadius:"8px",padding:p?"8px 10px":"12px 16px",maxWidth:p?"200px":"350px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",animation:"slideIn 0.3s ease",position:"relative"},children:(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{fontSize:"20px",flexShrink:0},children:y[e.type]}),(0,ni.jsxs)("div",{style:{flex:1},children:[(0,ni.jsx)("div",{style:{fontWeight:"600",fontSize:p?"12px":"14px",marginBottom:p?"2px":"4px",color:"error"===e.type?"#dc2626":"warning"===e.type?"#d97706":"success"===e.type?"#16a34a":"#2563eb"},children:e.title}),(0,ni.jsx)("div",{style:{fontSize:p?"11px":"13px",color:"#6b7280",lineHeight:"1.3"},children:e.message})]}),(0,ni.jsx)("button",{onClick:()=>{return t=e.id,void n(e=>e.filter(e=>e.id!==t));var t},style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",color:"#9ca3af",padding:"0",flexShrink:0},children:"\u2715"})]})},e.id)),(0,ni.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n          @keyframes slideIn {\n            from {\n              transform: translateX(100%);\n              opacity: 0;\n            }\n            to {\n              transform: translateX(0);\n              opacity: 1;\n            }\n          }\n          @keyframes modernSlideUp {\n            from {\n              transform: translateY(30px) scale(0.95);\n              opacity: 0;\n              filter: blur(10px);\n            }\n            to {\n              transform: translateY(0) scale(1);\n              opacity: 1;\n              filter: blur(0px);\n            }\n          }\n\n          input[type="range"]::-webkit-slider-thumb {\n            appearance: none;\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            background: linear-gradient(145deg, #3b82f6, #2563eb);\n            cursor: pointer;\n            border: 2px solid white;\n            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3), 0 1px 3px rgba(0, 0, 0, 0.1);\n            transition: all 0.2s ease;\n          }\n\n          input[type="range"]::-webkit-slider-thumb:hover {\n            transform: scale(1.1);\n            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4), 0 2px 6px rgba(0, 0, 0, 0.15);\n          }\n\n          input[type="range"]::-moz-range-thumb {\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            background: linear-gradient(145deg, #3b82f6, #2563eb);\n            cursor: pointer;\n            border: 2px solid white;\n            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n          }\n        '}})]})},LT=e=>{if(!e||"string"!==typeof e)return null;const t=e.replace(/<br\s*\/?>/gi," ").split("\n").map(e=>e.trim()).filter(e=>e.length>0),n=[];let i="";for(const r of t)r.startsWith("\u2022")?(i&&n.push(i.trim()),i=r.substring(1).trim()):!i||r.startsWith("\u2022")||r.startsWith("#")||r.startsWith("[")||(i+=" "+r);return i&&n.push(i.trim()),n},PT=e=>{let{isDarkMode:n}=e;const[i,r]=(0,t.useState)(!1),[a,s]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(window.innerWidth<=768),[p,f]=(0,t.useState)(window.innerWidth),[m,g]=(0,t.useState)(null),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(null),[_,w]=(0,t.useState)(!1),[S,M]=(0,t.useState)(null),[A,C]=(0,t.useState)(!1),[E,k]=(0,t.useState)(null),[T,R]=(0,t.useState)(0),[L,P]=(0,t.useState)([]),[B,N]=(0,t.useState)(null),[D,I]=(0,t.useState)(0),j=(0,t.useRef)(null),z=(0,t.useRef)(null),F=(0,t.useRef)(null),O=(0,t.useRef)(null),U=(0,t.useRef)(null),H=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=()=>{const e=window.innerWidth;f(e),h(e<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),X()}},[]);const G=e=>{let{data:t}=e;if(!t||0===t.length)return null;const n=d?Math.min(p-40,400):600,i=d?200:280,r=40,a=n-80,s=i-80,o=Math.max(...t.map(e=>e.score),100),l=Math.min(...t.map(e=>e.score),0),c=o-l||1,u=t.map((e,n)=>({x:r+n/(t.length-1||1)*a,y:r+s-(e.score-l)/c*s,score:e.score,time:e.time})),h=u.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(e.x," ").concat(e.y)).join(" ");return(0,ni.jsx)("div",{style:{width:"100%",height:"280px",position:"relative"},children:(0,ni.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(n," ").concat(i),children:[[0,25,50,75,100].map(e=>{const t=r+s-(e-l)/c*s;return(0,ni.jsxs)("g",{children:[(0,ni.jsx)("line",{x1:r,y1:t,x2:n-r,y2:t,stroke:"#e2e8f0",strokeDasharray:"3 3"}),(0,ni.jsx)("text",{x:30,y:t+5,fontSize:"12",fill:"#64748b",textAnchor:"end",children:e})]},e)}),[50,70,85].map((e,t)=>{const i=r+s-(e-l)/c*s;return(0,ni.jsx)("line",{x1:r,y1:i,x2:n-r,y2:i,stroke:["#f97316","#eab308","#22c55e"][t],strokeDasharray:"5 5",opacity:.5},e)}),(0,ni.jsx)("path",{d:h,fill:"none",stroke:"#3b82f6",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),u.map((e,t)=>(0,ni.jsx)("circle",{cx:e.x,cy:e.y,r:"5",fill:"#3b82f6",stroke:"#ffffff",strokeWidth:"2"},t)),(0,ni.jsx)("text",{x:n/2,y:i-10,fontSize:"12",fill:"#64748b",textAnchor:"middle",children:"Analiz S\u0131ras\u0131"}),(0,ni.jsx)("text",{x:20,y:i/2,fontSize:"12",fill:"#64748b",textAnchor:"middle",transform:"rotate(-90 20 ".concat(i/2,")"),children:"Duru\u015f Skoru"})]})})},W=()=>{H.current&&(clearInterval(H.current),H.current=null),R(0)},V=e=>e&&0!==e.length?e.map((e,t)=>{const n=new Date(1e3*e.timestamp);return{index:t+1,score:e.score,time:n.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),timestamp:e.timestamp}}):[],X=()=>{if(console.log("Stream durdurma i\u015flemi ba\u015flat\u0131ld\u0131"),r(!1),W(),U.current&&(clearInterval(U.current),U.current=null),O.current){try{O.current.readyState===WebSocket.OPEN&&(console.log("WebSocket kapat\u0131l\u0131yor..."),O.current.close(1e3,"User stopped stream"))}catch(a){console.error("WebSocket kapatma hatas\u0131:",a)}O.current=null}if(F.current){try{F.current.getTracks().forEach(e=>{e.stop(),console.log("Track durduruldu:",e.kind)})}catch(a){console.error("Track durdurma hatas\u0131:",a)}F.current=null}j.current&&(j.current.srcObject=null),l(""),g(null),s(""),w(!1),b(null),P([]),console.log("Stream durdurma i\u015flemi tamamland\u0131")},Y=()=>{U.current=setInterval(()=>{if(j.current&&O.current&&O.current.readyState===WebSocket.OPEN){const e=document.createElement("canvas"),t=e.getContext("2d");e.width=j.current.videoWidth,e.height=j.current.videoHeight,e.width>0&&e.height>0&&(t.drawImage(j.current,0,0),e.toBlob(e=>{if(O.current&&O.current.readyState===WebSocket.OPEN&&e)try{O.current.send(e)}catch(a){console.error("Frame g\xf6nderme hatas\u0131:",a)}},"image/jpeg",.8))}},200)},J=e=>e>=85?{label:"M\xfckemmel",color:"#22c55e"}:e>=70?{label:"\u0130yi",color:"#84cc16"}:e>=55?{label:"Orta",color:"#eab308"}:e>=35?{label:"K\xf6t\xfc",color:"#f97316"}:{label:"\xc7ok K\xf6t\xfc",color:"#ef4444"},K=async(e,t,n,i)=>{try{const r=await fetch("http://localhost:8000/api/posture-recommendations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({message:"Duru\u015f analizi raporu i\xe7in ki\u015fiselle\u015ftirilmi\u015f \xf6neriler olu\u015ftur",posture_data:{average_score:parseFloat(e),total_analyses:t,session_duration:n,score_trend:i.length>1?i[i.length-1].score-i[0].score:0,best_score:i.length>0?Math.max(...i.map(e=>e.score)):0,worst_score:i.length>0?Math.min(...i.map(e=>e.score)):0,consistency:i.length>1?Math.abs(i.reduce((e,t,n)=>n>0?e+Math.abs(t.score-i[n-1].score):e,0)/(i.length-1)):0}})});if(r.ok){const e=await r.json();return x(e.response),e.response||"AI \xf6nerileri al\u0131namad\u0131."}}catch(a){console.error("AI \xf6nerileri al\u0131n\u0131rken hata:",a)}return q(e)},q=e=>e>=85?{assessment:"M\xfckemmel duru\u015f! Bu seviyeyi koruyun ve daha da geli\u015ftirin.",recommendations:["Mevcut duru\u015f al\u0131\u015fkanl\u0131klar\u0131n\u0131z\u0131 s\xfcrd\xfcr\xfcn","G\xfc\xe7lendirme egzersizlerini ekleyin","Ergonomik kurulumunuzu optimize edin","G\xfcnl\xfck aktivite seviyenizi art\u0131r\u0131n","Stres y\xf6netimi tekniklerini uygulay\u0131n"]}:e>=70?{assessment:"\u0130yi duru\u015f seviyesi. K\xfc\xe7\xfck iyile\u015ftirmelerle m\xfckemmelli\u011fe ula\u015fabilirsiniz.",recommendations:["D\xfczenli mola al\u0131n (her saat 5-10 dakika)","Boyun ve omuz germe egzersizleri yap\u0131n","\xc7al\u0131\u015fma ortam\u0131n\u0131z\u0131 g\xf6zden ge\xe7irin","Duru\u015f fark\u0131ndal\u0131\u011f\u0131n\u0131z\u0131 art\u0131r\u0131n","Hafif kuvvet antrenman\u0131 ekleyin"]}:e>=55?{assessment:"Orta seviye duru\u015f. D\xfczenli egzersiz ve dikkatli yakla\u015f\u0131m gerekli.",recommendations:["G\xfcnl\xfck duru\u015f egzersizleri program\u0131 ba\u015flay\u0131n","Ergonomik sandalye ve masa kullan\u0131n","Ekran y\xfcksekli\u011fini g\xf6z hizas\u0131na ayarlay\u0131n","S\u0131k s\u0131k pozisyon de\u011fi\u015ftirin","Profesyonel fizik tedavi deste\u011fi al\u0131n"]}:e>=35?{assessment:"Zay\u0131f duru\u015f seviyesi. Acil iyile\u015ftirme ve d\xfczenli takip gerekli.",recommendations:["Mutlaka fizyoterapist ile g\xf6r\xfc\u015f\xfcn","G\xfcnl\xfck d\xfczeltici egzersiz program\u0131 uygulay\u0131n","\xc7al\u0131\u015fma ortam\u0131n\u0131z\u0131 tamamen yeniden d\xfczenleyin","A\u011fr\u0131 ve rahats\u0131zl\u0131klar\u0131 takip edin","Uzun s\xfcreli oturma pozisyonlar\u0131n\u0131 s\u0131n\u0131rlay\u0131n"]}:{assessment:"Kritik duru\u015f problemi. Profesyonel m\xfcdahale gerekli.",recommendations:["Acilen doktor kontrol\xfcnden ge\xe7in","Fizyoterapist e\u015fli\u011finde rehabilitasyon ba\u015flay\u0131n","Ya\u015fam tarz\u0131n\u0131zda k\xf6kl\xfc de\u011fi\u015fiklikler yap\u0131n","G\xfcnl\xfck hareket ve egzersiz rutini olu\u015fturun","Duru\u015f bozuklu\u011funa neden olan fakt\xf6rleri analiz edin"]};return(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)(RT,{}),(0,ni.jsx)("div",{style:{minHeight:"100vh",backgroundColor:n?"#0f172a":"#f8fafc",padding:d?"10px":"20px"},children:(0,ni.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",width:"100%"},children:[(0,ni.jsxs)("div",{style:{textAlign:"center",marginBottom:"30px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"8px"},children:[(0,ni.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",borderRadius:"12px",color:"white",fontSize:"24px"},children:(0,ni.jsx)(Ht,{})}),(0,ni.jsx)("h2",{style:{fontSize:d?"20px":"28px",fontWeight:"bold",color:n?"#f1f5f9":"#1e293b",margin:0},children:"Masa Ba\u015f\u0131 Canl\u0131 Duru\u015f Analizi"}),(0,ni.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"8px",color:"white",fontSize:"16px"},children:(0,ni.jsx)(Kn,{})})]}),(0,ni.jsx)("p",{style:{color:n?"#cbd5e1":"#64748b",fontSize:d?"14px":"16px"},children:"Kameran\u0131z\u0131 kullanarak ba\u015f, boyun ve omuz odakl\u0131 ger\xe7ek zamanl\u0131 duru\u015f analizi yap\u0131n"}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",color:"#3b82f6",fontSize:"14px",fontWeight:"500"},children:[(0,ni.jsx)(ei,{style:{fontSize:"16px"}}),(0,ni.jsx)("span",{children:"Tehlikeli duru\u015f tespit edildi\u011finde sesli uyar\u0131 sistemi aktif"})]})]}),(0,ni.jsxs)("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"1fr 1fr",gap:d?"20px":"30px",alignItems:"start"},children:[(0,ni.jsxs)("div",{children:[(0,ni.jsx)("div",{style:{backgroundColor:"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"20px"},children:(0,ni.jsxs)("div",{style:{position:"relative",width:"100%",height:d?"250px":"400px",backgroundColor:"#1f2937"},children:[(0,ni.jsx)("video",{ref:j,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover",display:i?"block":"none"}}),(0,ni.jsx)("canvas",{ref:z,style:{display:"none"}}),!i&&!c&&(0,ni.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white"},children:[(0,ni.jsx)("div",{style:{width:"64px",height:"64px",margin:"0 auto 16px",opacity:"0.7"},children:(0,ni.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"64",height:"64",children:(0,ni.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,ni.jsx)("h3",{style:{fontSize:"20px",marginBottom:"8px"},children:"Kamera Haz\u0131r"}),(0,ni.jsx)("p",{style:{opacity:"0.8"},children:"Canl\u0131 analiz i\xe7in kameran\u0131z\u0131 ba\u015flat\u0131n"})]}),c&&(0,ni.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white"},children:[(0,ni.jsx)("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",animation:"spin 1s ease-in-out infinite",margin:"0 auto 16px"}}),(0,ni.jsx)("p",{children:"Kamera ba\u015flat\u0131l\u0131yor..."})]}),i&&(0,ni.jsxs)("div",{style:{position:"absolute",top:"16px",left:"16px",display:"flex",alignItems:"center",gap:"8px",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"8px 12px",borderRadius:"20px",color:"white",fontSize:"14px"},children:[(0,ni.jsx)("div",{style:{width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",animation:"pulse 2s infinite"}}),(0,ni.jsx)("span",{children:"Canl\u0131 Analiz"}),T>0&&(0,ni.jsxs)("span",{style:{backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 6px",borderRadius:"10px",fontSize:"12px"},children:[T,"s"]})]}),i&&S&&(0,ni.jsxs)("div",{style:{position:"absolute",top:"16px",right:"16px",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"8px 12px",borderRadius:"8px",color:"white",fontSize:"12px"},children:[(0,ni.jsxs)("div",{children:["S\xfcre: ",(e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(S.current_session_time)]}),(0,ni.jsxs)("div",{children:["Analiz: ",S.total_analyses]}),S.average_score>0&&(0,ni.jsxs)("div",{children:["Ort: ",S.average_score,"/100"]})]})]})}),(0,ni.jsxs)("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"center",gap:"12px",marginBottom:"20px"},children:[i?(0,ni.jsxs)("button",{onClick:X,className:"live-analysis-btn stop-btn",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",border:"none",padding:d?"10px 16px":"12px 24px",borderRadius:"12px",fontSize:d?"14px":"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 15px rgba(239, 68, 68, 0.3)",transform:"translateY(0)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 25px rgba(239, 68, 68, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(239, 68, 68, 0.3)"},onTouchStart:e=>{e.target.style.transform="translateY(0) scale(0.98)",e.target.style.boxShadow="0 6px 20px rgba(239, 68, 68, 0.5)"},onTouchEnd:e=>{setTimeout(()=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 15px rgba(239, 68, 68, 0.3)"},150)},children:[(0,ni.jsx)(zn,{style:{fontSize:"18px"}}),(0,ni.jsx)("span",{children:"Kameray\u0131 Durdur"})]}):(0,ni.jsx)("button",{onClick:async()=>{try{let t;u(!0),s(""),w(!1),C(!1),k(null),M(null),g(null),x(null),l(""),P([]),N(null),I(0);try{t=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640,min:320},height:{ideal:480,min:240},facingMode:"user"}})}catch(e){t=await navigator.mediaDevices.getUserMedia({video:!0})}F.current=t,j.current&&(j.current.srcObject=t,await new Promise((e,t)=>{const n=setTimeout(()=>t(new Error("Video y\xfckleme zaman a\u015f\u0131m\u0131")),5e3);j.current.onloadedmetadata=()=>{clearTimeout(n),e()},j.current.onerror=()=>{clearTimeout(n),t(new Error("Video y\xfckleme hatas\u0131"))}}),await j.current.play());const n=new WebSocket("ws://localhost:8000/live_posture_ai/ws");O.current=n,n.onopen=()=>{console.log("WebSocket ba\u011flant\u0131s\u0131 kuruldu"),r(!0),u(!1),w(!1),Y(),R(3),H.current=setInterval(()=>{R(e=>e<=1?3:e-1)},1e3),window.showPostureNotification&&window.showPostureNotification("info","Analiz Ba\u015flad\u0131","Duru\u015f analiziniz ba\u015flat\u0131ld\u0131. Tehlikeli duru\u015f tespit edildi\u011finde sesli uyar\u0131 alacaks\u0131n\u0131z.",4e3,!0)},n.onmessage=e=>{try{const t=JSON.parse(e.data);if("ai_analysis"===t.type&&t.data){const e=t.data;l(e.status),b((new Date).toLocaleTimeString()),w(!1),g({personalized_score:e.personalized_score,issues:e.issues,improvement_tips:e.improvement_tips,priority_action:e.priority_action,risk_level:e.risk_level,confidence:e.confidence,timestamp:e.timestamp,metrics:e.metrics,score_breakdown:e.score_breakdown,exercises:e.exercises,ergonomic_tips:e.ergonomic_tips}),(e=>{const t=Date.now(),n=t-D;if(n<3e4)return;const i=e.personalized_score,r=e.risk_level,a=window.innerWidth<=768;(i<35||"KR\u0130T\u0130K"===r||"CRITICAL"===r)&&window.showPostureNotification?(window.showPostureNotification("error",a?"KR\u0130T\u0130K!":"KR\u0130T\u0130K DURU\u015e UYARISI!",a?"Duru\u015funuz \xe7ok k\xf6t\xfc (".concat(i,")"):"Duru\u015funuz \xe7ok tehlikeli! Hemen d\xfczeltmelisiniz. Skor: ".concat(i,"/100"),1e4,!0),I(t),N(i)):(i<55||"Y\xdcKSEK"===r||"HIGH"===r)&&window.showPostureNotification?(window.showPostureNotification("warning",a?"Uyar\u0131":"Duru\u015f Uyar\u0131s\u0131",a?"Duru\u015funuz k\xf6t\xfc (".concat(i,")"):"Duru\u015funuz k\xf6t\xfc. D\xfczeltmeniz \xf6nerilir. Skor: ".concat(i,"/100"),6e3,!0),I(t),N(i)):i<70&&i>=55&&window.showPostureNotification&&n>6e4?(window.showPostureNotification("info",a?"Bilgi":"Duru\u015f Bilgilendirmesi",a?"Duru\u015funuz orta (".concat(i,")"):"Duru\u015funuz orta seviyede. \u0130yile\u015ftirilebilir. Skor: ".concat(i,"/100"),4e3,!0),I(t),N(i)):i>=85&&B&&B<70&&window.showPostureNotification?(window.showPostureNotification("success","Harika!",a?"Duru\u015funuz m\xfckemmel (".concat(i,")"):"Duru\u015funuz m\xfckemmel seviyeye geldi! Skor: ".concat(i,"/100"),4e3,!0),I(t),N(i)):B&&i-B>=20&&window.showPostureNotification&&(window.showPostureNotification("success",a?"\ud83d\udcc8 \u0130yile\u015fme!":"\ud83d\udcc8 \u0130yile\u015fme Var!",a?"Duru\u015funuz iyile\u015fti (+".concat(i-B,")"):"Duru\u015funuz ".concat(i-B," puan iyile\u015fti! Skor: ").concat(i,"/100"),3e3,!0),I(t),N(i))})(e),e.session_stats&&(M(e.session_stats),e.session_stats.score_history&&P(V(e.session_stats.score_history)))}else"status_update"===t.type&&t.data?(t.data.message&&(t.data.message.includes("G\xf6r\xfcnt\xfc kalitesi yetersiz")||t.data.message.includes("Kameraya"))?(w(!0),g(null),l("")):w(!1),t.data.session_stats&&(M(t.data.session_stats),t.data.session_stats.score_history&&P(V(t.data.session_stats.score_history)))):"session_ended"===t.type&&t.data&&(console.log("Oturum sonland\u0131r\u0131ld\u0131:",t.data),C(!0),t.data.session_summary&&(k(t.data.session_summary),t.data.session_summary.score_history&&P(V(t.data.session_summary.score_history))),r(!1),W(),window.showPostureNotification&&window.showPostureNotification("info","\ud83d\udcca Oturum Sonland\u0131","Duru\u015f analizi oturumunuz tamamland\u0131. Raporu inceleyebilirsiniz.",3e3,!0))}catch(a){console.error("WebSocket mesaj parse hatas\u0131:",a)}},n.onerror=e=>{console.error("WebSocket hatas\u0131:",e),s("WebSocket ba\u011flant\u0131 hatas\u0131."),u(!1),W(),window.showPostureNotification&&window.showPostureNotification("error","\ud83d\udd0c Ba\u011flant\u0131 Hatas\u0131","Sunucu ba\u011flant\u0131s\u0131nda problem var. L\xfctfen tekrar deneyin.",5e3,!0)},n.onclose=e=>{console.log("WebSocket kapat\u0131ld\u0131:",e.code,e.reason),O.current&&(O.current=null,r(!1),W())}}catch(t){console.error("Kamera ba\u015flatma hatas\u0131:",t),s("Kamera ba\u015flat\u0131l\u0131rken bir hata olu\u015ftu."),u(!1),window.showPostureNotification&&window.showPostureNotification("error","\ud83d\udcf7 Kamera Hatas\u0131","Kamera eri\u015fimi sa\u011flanamad\u0131. L\xfctfen kamera izinlerini kontrol edin.",5e3,!0)}},disabled:c,className:"live-analysis-btn start-btn",style:{background:c?"linear-gradient(135deg, #9ca3af, #6b7280)":"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white",border:"none",padding:d?"10px 16px":"12px 24px",borderRadius:"12px",fontSize:d?"14px":"16px",fontWeight:"600",cursor:c?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 15px rgba(59, 130, 246, 0.3)",transform:"translateY(0)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{c||(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 25px rgba(59, 130, 246, 0.4)")},onMouseLeave:e=>{c||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(59, 130, 246, 0.3)")},onTouchStart:e=>{c||(e.target.style.transform="translateY(0) scale(0.98)",e.target.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.5)")},onTouchEnd:e=>{c||setTimeout(()=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 15px rgba(59, 130, 246, 0.3)"},150)},children:c?(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",animation:"spin 1s linear infinite"}}),(0,ni.jsx)("span",{children:"Ba\u015flat\u0131l\u0131yor..."})]}):(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)(En,{style:{fontSize:"18px"}}),(0,ni.jsx)("span",{children:"Kameray\u0131 Ba\u015flat"})]})}),(0,ni.jsxs)("button",{onClick:async()=>{if(!L.length&&!E&&!S)return void(window.showPostureNotification&&window.showPostureNotification("warning","\ud83d\udcc4 Rapor Uyar\u0131s\u0131","Hen\xfcz analiz verisi bulunmuyor. L\xfctfen \xf6nce analiz yap\u0131n.",3e3,!0));const e=window.open("","_blank"),t=(new Date).toLocaleDateString("tr-TR"),n=(new Date).toLocaleTimeString("tr-TR"),i=L.length,r=i>0?(L.reduce((e,t)=>e+t.score,0)/i).toFixed(1):0,a=i>0?Math.max(...L.map(e=>e.score)).toFixed(1):0,s=(i>0&&Math.min(...L.map(e=>e.score)).toFixed(1),(E||S||{}).duration_minutes||(S?(S.current_session_time/60).toFixed(1):0)),o=m,l=await K(r,i,s,L),c='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <title>Duru\u015f Analizi Raporu - '.concat(t,'</title>\n        <style>\n          body {\n            font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n            background: white;\n          }\n          .action-buttons {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            display: flex;\n            gap: 10px;\n            z-index: 1000;\n          }\n          .action-button {\n            background: #3b82f6;\n            color: white;\n            border: none;\n            padding: 12px 20px;\n            border-radius: 8px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 500;\n            display: flex;\n            align-items: center;\n            gap: 8px;\n            transition: background-color 0.2s;\n          }\n          .action-button:hover {\n            background: #2563eb;\n          }\n          .action-button.print {\n            background: #059669;\n          }\n          .action-button.print:hover {\n            background: #047857;\n          }\n          .action-button.download {\n            background: #7c3aed;\n          }\n          .action-button.download:hover {\n            background: #6d28d9;\n          }\n          .header {\n            text-align: center;\n            border-bottom: 3px solid #3b82f6;\n            padding-bottom: 20px;\n            margin-bottom: 30px;\n          }\n          .header h1 {\n            color: #1e293b;\n            margin: 0;\n            font-size: 28px;\n          }\n          .header p {\n            color: #64748b;\n            margin: 5px 0;\n          }\n          .section {\n            margin-bottom: 30px;\n            padding: 20px;\n            border: 1px solid #e2e8f0;\n            border-radius: 8px;\n          }\n          .section h2 {\n            color: #1e293b;\n            border-bottom: 2px solid #3b82f6;\n            padding-bottom: 10px;\n            margin-top: 0;\n          }\n          .stats-grid {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 15px;\n            margin: 20px 0;\n          }\n          .stat-box {\n            background: #f8fafc;\n            padding: 15px;\n            border-radius: 6px;\n            text-align: center;\n          }\n          .stat-value {\n            font-size: 24px;\n            font-weight: bold;\n            color: #3b82f6;\n          }\n          .stat-label {\n            color: #64748b;\n            font-size: 14px;\n          }\n          .score-excellent { color: #22c55e; }\n          .score-good { color: #84cc16; }\n          .score-average { color: #eab308; }\n          .score-poor { color: #f97316; }\n          .score-bad { color: #ef4444; }\n          .analysis-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin: 15px 0;\n          }\n          .analysis-table th,\n          .analysis-table td {\n            border: 1px solid #e2e8f0;\n            padding: 8px 12px;\n            text-align: left;\n          }\n          .analysis-table th {\n            background: #f1f5f9;\n            font-weight: 600;\n          }\n          .analysis-table tr:nth-child(even) {\n            background: #f8fafc;\n          }\n          .recommendations {\n            background: #f0f9ff;\n            border-left: 4px solid #3b82f6;\n            padding: 15px;\n            margin: 15px 0;\n          }\n          .ai-recommendations-card {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            border-radius: 12px;\n            margin: 20px 0;\n            overflow: hidden;\n            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);\n          }\n          .ai-recommendations-header {\n            display: flex;\n            align-items: center;\n            gap: 12px;\n            padding: 24px 24px 16px 24px;\n            border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n          }\n          .ai-icon {\n            background: rgba(255, 255, 255, 0.2);\n            border-radius: 50%;\n            padding: 8px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n          .ai-recommendations-header h3 {\n            margin: 0;\n            font-size: 20px;\n            font-weight: 700;\n            color: white;\n          }\n          .ai-assessment {\n            padding: 16px 24px;\n            background: rgba(255, 255, 255, 0.05);\n          }\n          .ai-assessment strong {\n            color: #e2e8f0;\n          }\n          .ai-assessment p {\n            margin: 8px 0 0 0;\n            color: rgba(255, 255, 255, 0.95);\n            line-height: 1.6;\n          }\n          .ai-recommendations-list {\n            padding: 16px 24px 24px 24px;\n          }\n          .ai-recommendations-list h4 {\n            margin: 0 0 16px 0;\n            color: #e2e8f0;\n            font-size: 16px;\n          }\n          .ai-recommendation-item {\n            background: rgba(255, 255, 255, 0.1);\n            border-radius: 8px;\n            padding: 16px;\n            margin: 12px 0;\n            border-left: 4px solid #4ade80;\n            display: flex;\n            align-items: flex-start;\n            gap: 12px;\n          }\n          .recommendation-number {\n            background: #4ade80;\n            color: #065f46;\n            border-radius: 50%;\n            width: 24px;\n            height: 24px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 12px;\n            font-weight: 700;\n            flex-shrink: 0;\n          }\n          .recommendation-text {\n            color: rgba(255, 255, 255, 0.95);\n            line-height: 1.6;\n            font-size: 15px;\n          }\n          .ai-simple-recommendation {\n            padding: 24px;\n          }\n          .ai-simple-recommendation p {\n            margin: 0;\n            color: rgba(255, 255, 255, 0.95);\n            line-height: 1.6;\n          }\n          .issue-critical { color: #dc2626; }\n          .issue-warning { color: #d97706; }\n          .issue-info { color: #0369a1; }\n          ul {\n            padding-left: 20px;\n          }\n          li {\n            margin: 5px 0;\n          }\n          .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding-top: 20px;\n            border-top: 1px solid #e2e8f0;\n            color: #64748b;\n            font-size: 12px;\n          }\n          @media print {\n            .action-buttons { display: none; }\n            body { margin: 0; padding: 15px; }\n            .section { break-inside: avoid; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="action-buttons">\n          <button class="action-button print" onclick="handlePrint()">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <polyline points="6,9 6,2 18,2 18,9"></polyline>\n              <path d="M6,18H4a2,2,0,0,1-2-2V11a2,2,0,0,1,2-2H20a2,2,0,0,1,2,2v5a2,2,0,0,1-2,2H18"></path>\n              <polyline points="6,14 18,14 18,22 6,22 6,14"></polyline>\n            </svg>\n            Yazd\u0131r\n          </button>\n\n          <button class="action-button download" onclick="handlePDFDownload()">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n              <polyline points="7,10 12,15 17,10"></polyline>\n              <line x1="12" y1="15" x2="12" y2="3"></line>\n            </svg>\n            PDF \u0130ndir\n          </button>\n\n          <button class="action-button" onclick="window.close()">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <line x1="18" y1="6" x2="6" y2="18"></line>\n              <line x1="6" y1="6" x2="18" y2="18"></line>\n            </svg>\n            Kapat\n          </button>\n        </div>\n\n        <div class="header">\n          <h1>\n            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 10px;">\n              <path d="M3 3V21H21V3H3Z" stroke="#3b82f6" stroke-width="2" fill="none"/>\n              <path d="M7 7H17M7 11H17M7 15H13" stroke="#3b82f6" stroke-width="1.5" stroke-linecap="round"/>\n              <circle cx="16" cy="16" r="3" fill="#22c55e"/>\n              <path d="M14.5 16L15.5 17L17.5 15" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n            Duru\u015f Analizi Raporu\n          </h1>\n          <p><strong>Tarih:</strong> ').concat(t," - ").concat(n,'</p>\n          <p>Masa Ba\u015f\u0131 Canl\u0131 Duru\u015f Analizi Sistemi</p>\n        </div>\n\n        <div class="section">\n          <h2>\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n              <path d="M3 3V21H21V19H5V3H3Z" stroke="#3b82f6" stroke-width="2" fill="none"/>\n              <rect x="7" y="14" width="3" height="5" fill="#22c55e"/>\n              <rect x="11" y="10" width="3" height="9" fill="#3b82f6"/>\n              <rect x="15" y="6" width="3" height="13" fill="#8b5cf6"/>\n            </svg>\n            Genel \u0130statistikler\n          </h2>\n          <div class="stats-grid">\n            <div class="stat-box">\n              <div class="stat-value ').concat(r>=85?"score-excellent":r>=70?"score-good":r>=55?"score-average":r>=35?"score-poor":"score-bad",'">').concat(r,'</div>\n              <div class="stat-label">Ortalama Skor</div>\n            </div>\n            <div class="stat-box">\n              <div class="stat-value score-excellent">').concat(a,'</div>\n              <div class="stat-label">En \u0130yi Skor</div>\n            </div>\n            <div class="stat-box">\n              <div class="stat-value">').concat(i,'</div>\n              <div class="stat-label">Toplam Analiz</div>\n            </div>\n            <div class="stat-box">\n              <div class="stat-value">').concat(s,'</div>\n              <div class="stat-label">S\xfcre (dakika)</div>\n            </div>\n          </div>\n        </div>\n\n        ').concat(L.length>0?'\n        <div class="section">\n          <h2>\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n              <path d="M3 3V21H21" stroke="#22c55e" stroke-width="2" fill="none"/>\n              <path d="M7 14L12 9L16 13L20 7" stroke="#22c55e" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n              <circle cx="7" cy="14" r="2" fill="#22c55e"/>\n              <circle cx="12" cy="9" r="2" fill="#22c55e"/>\n              <circle cx="16" cy="13" r="2" fill="#22c55e"/>\n              <circle cx="20" cy="7" r="2" fill="#22c55e"/>\n            </svg>\n            Skor Ge\xe7mi\u015fi\n          </h2>\n          <table class="analysis-table">\n            <thead>\n              <tr>\n                <th>S\u0131ra</th>\n                <th>Skor</th>\n                <th>Seviye</th>\n                <th>Zaman</th>\n              </tr>\n            </thead>\n            <tbody>\n              '.concat((()=>{const e=L.slice(-10),t=Math.max(0,L.length-e.length);return e.map((e,n)=>{const i=t+n+1,r=e.score>=85?"score-excellent":e.score>=70?"score-good":e.score>=55?"score-average":e.score>=35?"score-poor":"score-bad",a=e.score>=85?"M\xfckemmel":e.score>=70?"\u0130yi":e.score>=55?"Orta":e.score>=35?"K\xf6t\xfc":"\xc7ok K\xf6t\xfc";return"\n                    <tr>\n                      <td>".concat(i,'</td>\n                      <td class="').concat(r,'"><strong>').concat(e.score,"/100</strong></td>\n                      <td>").concat(a,"</td>\n                      <td>").concat(e.time,"</td>\n                    </tr>\n                  ")}).join("")})(),"\n            </tbody>\n          </table>\n          ").concat(L.length>10?"<p><em>* Son 10 analiz g\xf6steriliyor (Toplam: ".concat(L.length,")</em></p>"):"","\n        </div>\n        "):"","\n\n        ").concat(o?'\n        <div class="section">\n          <h2>\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n              <circle cx="11" cy="11" r="8" stroke="#3b82f6" stroke-width="2" fill="none"/>\n              <path d="m21 21-4.35-4.35" stroke="#3b82f6" stroke-width="2" stroke-linecap="round"/>\n              <circle cx="11" cy="11" r="3" fill="#22c55e"/>\n            </svg>\n            Son Analiz Detaylar\u0131\n          </h2>\n          <div class="stats-grid">\n            <div class="stat-box">\n              <div class="stat-value '.concat(o.personalized_score>=85?"score-excellent":o.personalized_score>=70?"score-good":o.personalized_score>=55?"score-average":o.personalized_score>=35?"score-poor":"score-bad",'">').concat(o.personalized_score,'/100</div>\n              <div class="stat-label">Son Duru\u015f Skoru</div>\n            </div>\n            <div class="stat-box">\n              <div class="stat-value">').concat((100*o.confidence).toFixed(0),'%</div>\n              <div class="stat-label">G\xfcvenilirlik</div>\n            </div>\n          </div>\n\n          ').concat(o.metrics?'\n          <h3>Teknik Metrikler</h3>\n          <table class="analysis-table">\n            <tr>\n              <td><strong>\u0130leri Ba\u015f Post\xfcr\xfc</strong></td>\n              <td>'.concat((100*o.metrics.head_forward_ratio).toFixed(1),"%</td>\n            </tr>\n            <tr>\n              <td><strong>Boyun A\xe7\u0131s\u0131</strong></td>\n              <td>").concat(o.metrics.neck_angle,"\xb0</td>\n            </tr>\n            <tr>\n              <td><strong>Omuz Asimetrisi</strong></td>\n              <td>").concat((100*o.metrics.shoulder_alignment).toFixed(1),"%</td>\n            </tr>\n            <tr>\n              <td><strong>Ba\u015f E\u011fimi</strong></td>\n              <td>").concat(Math.abs(o.metrics.head_tilt).toFixed(1),"\xb0</td>\n            </tr>\n          </table>\n          "):"","\n\n          ").concat(o.issues&&o.issues.length>0?'\n          <div class="recommendations">\n            <h3>\n              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n                <path d="M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>\n                <circle cx="12" cy="12" r="9" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>\n                <path d="M12 8V12M12 16H12.01" stroke="#d97706" stroke-width="2" stroke-linecap="round"/>\n              </svg>\n              Tespit Edilen Sorunlar\n            </h3>\n            <ul>\n              '.concat(o.issues.map(e=>'<li class="issue-critical">'.concat(e,"</li>")).join(""),"\n            </ul>\n          </div>\n          "):"","\n\n          ").concat(o.improvement_tips&&o.improvement_tips.length>0?'\n          <div class="recommendations">\n            <h3>\n              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n                <circle cx="12" cy="12" r="9" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>\n                <path d="M9 12L11 14L15 10" stroke="#16a34a" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n              Anl\u0131k D\xfczeltme \xd6nerileri\n            </h3>\n            <ul>\n              '.concat(o.improvement_tips.map(e=>'<li class="issue-info">'.concat(e,"</li>")).join(""),"\n            </ul>\n          </div>\n          "):"","\n\n          ").concat(o.exercises&&o.exercises.length>0?'\n          <div class="recommendations">\n            <h3>\n              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n                <circle cx="8" cy="7" r="2" fill="#3b82f6"/>\n                <path d="M6 13V21H10V13L8 11L6 13Z" fill="#3b82f6"/>\n                <path d="M6 13L4 15M10 13L12 15" stroke="#3b82f6" stroke-width="2" stroke-linecap="round"/>\n                <path d="M14 8L16 6L18 8L20 6" stroke="#22c55e" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n                <circle cx="16" cy="18" r="2" fill="#22c55e"/>\n                <circle cx="20" cy="18" r="2" fill="#22c55e"/>\n              </svg>\n              \xd6nerilen Egzersizler\n            </h3>\n            <ul>\n              '.concat(o.exercises.map(e=>"<li>".concat(e,"</li>")).join(""),"\n            </ul>\n          </div>\n          "):"","\n\n          ").concat(o.ergonomic_tips&&o.ergonomic_tips.length>0?'\n          <div class="recommendations">\n            <h3>\n              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n                <circle cx="12" cy="12" r="3" fill="#fbbf24" stroke="#f59e0b" stroke-width="2"/>\n                <path d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22" stroke="#f59e0b" stroke-width="2" stroke-linecap="round"/>\n                <circle cx="12" cy="12" r="6" fill="none" stroke="#fde047" stroke-width="1.5" opacity="0.6"/>\n              </svg>\n              Ergonomik \u0130pu\xe7lar\u0131\n            </h3>\n            <ul>\n              '.concat(o.ergonomic_tips.map(e=>"<li>".concat(e,"</li>")).join(""),"\n            </ul>\n          </div>\n          "):"","\n        </div>\n        "):"",'\n\n        <div class="section">\n          <h2>\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 8px;">\n              <path d="M4 6H20V18H4Z" stroke="#3b82f6" stroke-width="2" fill="none"/>\n              <path d="M8 9H16M8 12H16M8 15H12" stroke="#3b82f6" stroke-width="1.5" stroke-linecap="round"/>\n              <circle cx="18" cy="6" r="2" fill="#22c55e"/>\n            </svg>\n            Ki\u015fiselle\u015ftirilmi\u015f Rapor \xd6zeti\n          </h2>\n\n          <div class="ai-recommendations-card">\n            <div class="ai-recommendations-header">\n              <div class="ai-icon">\n                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n                  <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" stroke="white" stroke-width="2"/>\n                </svg>\n              </div>\n              <h3>AI Destekli Ki\u015fisel \xd6neriler</h3>\n            </div>\n            \n            ').concat((()=>{if("object"===typeof l&&l.recommendations)return'\n                <div class="ai-assessment">\n                  <strong>Genel De\u011ferlendirme:</strong>\n                  <p>'.concat(l.assessment,'</p>\n                </div>\n                \n                <div class="ai-recommendations-list">\n                  <h4>Ki\u015fiselle\u015ftirilmi\u015f \xd6neriler:</h4>\n                  ').concat(l.recommendations.map((e,t)=>'\n                    <div class="ai-recommendation-item">\n                      <div class="recommendation-number">'.concat(t+1,'</div>\n                      <div class="recommendation-text">').concat(e,"</div>\n                    </div>\n                  ")).join(""),"\n                </div>\n                ");{const e=LT(l);if(e&&e.length>0)return'\n                  <div class="ai-recommendations-list">\n                    <h4>Ki\u015fiselle\u015ftirilmi\u015f \xd6neriler:</h4>\n                    '.concat(e.map((e,t)=>'\n                      <div class="ai-recommendation-item">\n                        <div class="recommendation-number">'.concat(t+1,'</div>\n                        <div class="recommendation-text">').concat(e,"</div>\n                      </div>\n                    ")).join(""),"\n                  </div>\n                  ");{const e=l.split(/[\u2022\n]/).filter(e=>e.trim().length>10);return'\n                  <div class="ai-recommendations-list">\n                    <h4>Ki\u015fiselle\u015ftirilmi\u015f \xd6neriler:</h4>\n                    '.concat(e.map((e,t)=>'\n                      <div class="ai-recommendation-item">\n                        <div class="recommendation-number">'.concat(t+1,'</div>\n                        <div class="recommendation-text">').concat(e.trim(),"</div>\n                      </div>\n                    ")).join(""),"\n                  </div>\n                  ")}}})(),"\n          </div>\n\n          <h3>Genel \xd6neriler:</h3>\n          <ul>\n            <li>Her saat ba\u015f\u0131 5-10 dakika mola verin</li>\n            <li>Monit\xf6r y\xfcksekli\u011finizi g\xf6z hizas\u0131na ayarlay\u0131n</li>\n            <li>Sandalye ergonomisini kontrol edin</li>\n            <li>D\xfczenli boyun ve omuz egzersizleri yap\u0131n</li>\n            <li>G\xfcnl\xfck duru\u015f kontrol\xfc yapmaya devam edin</li>\n            <li>Sesli uyar\u0131 sistemi aktif tutarak bilin\xe7siz duru\u015f bozukluklar\u0131 \xf6nleyin</li>\n          </ul>\n        </div>\n\n        <div class=\"footer\">\n          <p>Bu rapor AI destekli Masa Ba\u015f\u0131 Canl\u0131 Duru\u015f Analizi sistemi taraf\u0131ndan ki\u015fisel verilerinize g\xf6re olu\u015fturulmu\u015ftur.</p>\n          <p>Detayl\u0131 sa\u011fl\u0131k tavsiyeleri i\xe7in l\xfctfen bir sa\u011fl\u0131k uzman\u0131na dan\u0131\u015f\u0131n.</p>\n        </div>\n\n        \x3c!-- PDF \u0130ndirme i\xe7in gerekli k\xfct\xfcphaneler --\x3e\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js\"><\/script>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js\"><\/script>\n        \n        <script>\n          function handlePrint() {\n            window.print();\n          }\n          \n          function handlePDFDownload() {\n            try {\n              const actionButtons = document.querySelector('.action-buttons');\n              if (actionButtons) actionButtons.style.display = 'none';\n              \n              const element = document.body;\n              const filename = 'durusanalizi_raporu_' + new Date().toISOString().slice(0, 10) + '.pdf';\n              \n              html2canvas(element, {\n                scale: 2,\n                useCORS: true,\n                allowTaint: true,\n                backgroundColor: '#ffffff',\n                width: element.scrollWidth,\n                height: element.scrollHeight\n              }).then(function(canvas) {\n                const { jsPDF } = window.jspdf;\n                const pdf = new jsPDF('p', 'mm', 'a4');\n                \n                const imgData = canvas.toDataURL('image/png');\n                const imgWidth = 210;\n                const pageHeight = 295;\n                const imgHeight = (canvas.height * imgWidth) / canvas.width;\n                let heightLeft = imgHeight;\n                let position = 0;\n                \n                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n                heightLeft -= pageHeight;\n                \n                while (heightLeft >= 0) {\n                  position = heightLeft - imgHeight;\n                  pdf.addPage();\n                  pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n                  heightLeft -= pageHeight;\n                }\n                \n                pdf.save(filename);\n                \n                if (actionButtons) actionButtons.style.display = 'flex';\n                \n              }).catch(function(error) {\n                console.error('PDF olu\u015fturma hatas\u0131:', error);\n                \n                if (actionButtons) actionButtons.style.display = 'flex';\n                \n                handleSimpleDownload();\n              });\n              \n            } catch (error) {\n              console.error('PDF indirme hatas\u0131:', error);\n              handleSimpleDownload();\n            }\n          }\n          \n          function handleSimpleDownload() {\n            const htmlContent = document.documentElement.outerHTML;\n            const blob = new Blob([htmlContent], { type: 'text/html' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = 'durusanalizi_raporu_' + new Date().toISOString().slice(0, 10) + '.html';\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n            \n            alert('PDF olu\u015fturulamad\u0131. HTML dosyas\u0131 olarak indirildi. Bu dosyay\u0131 taray\u0131c\u0131n\u0131zda a\xe7\u0131p \"Yazd\u0131r > PDF olarak kaydet\" se\xe7ene\u011fini kullanabilirsiniz.');\n          }\n        <\/script>\n      </body>\n      </html>\n    ");e.document.write(c),e.document.close(),window.showPostureNotification&&window.showPostureNotification("success","\ud83d\udcc4 AI Destekli Rapor Haz\u0131rland\u0131","Ki\u015fiselle\u015ftirilmi\u015f AI \xf6nerileri ile rapor yeni pencerede a\xe7\u0131ld\u0131.",3e3,!0)},className:"live-analysis-btn pdf-btn",style:{background:L.length>0||S||E?"linear-gradient(135deg, #22c55e, #16a34a)":"linear-gradient(135deg, #9ca3af, #6b7280)",color:"white",border:"none",padding:d?"10px 16px":"12px 24px",borderRadius:"12px",fontSize:d?"14px":"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:L.length>0||S||E?"0 4px 15px rgba(34, 197, 94, 0.3)":"0 4px 15px rgba(156, 163, 175, 0.3)",transform:"translateY(0)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{(L.length>0||S||E)&&(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 25px rgba(34, 197, 94, 0.4)")},onMouseLeave:e=>{(L.length>0||S||E)&&(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(34, 197, 94, 0.3)")},children:[(0,ni.jsx)(rn,{style:{fontSize:"18px"}}),(0,ni.jsx)("span",{children:"Raporu \u0130ndir (PDF)"})]})]}),L.length>0&&(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"white",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",border:n?"1px solid #334155":"none"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[(0,ni.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",background:"linear-gradient(135deg, #06b6d4, #0891b2)",borderRadius:"10px",color:"white",fontSize:"18px"},children:(0,ni.jsx)(Xt,{})}),(0,ni.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",margin:0},children:"Duru\u015f Skoru Ge\xe7mi\u015fi"})]}),(0,ni.jsx)(G,{data:L}),(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px",fontSize:"12px",color:n?"#9ca3af":"#64748b"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,ni.jsxs)("span",{children:["Toplam: ",L.length]}),L.length>0&&(0,ni.jsxs)("span",{children:["En Son: ",L[L.length-1].score,"/100"]})]}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,ni.jsx)("div",{style:{width:"12px",height:"2px",backgroundColor:"#22c55e",opacity:.7}}),(0,ni.jsx)("span",{children:"M\xfckemmel (85+)"})]}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,ni.jsx)("div",{style:{width:"12px",height:"2px",backgroundColor:"#eab308",opacity:.7}}),(0,ni.jsx)("span",{children:"\u0130yi (70+)"})]}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,ni.jsx)("div",{style:{width:"12px",height:"2px",backgroundColor:"#f97316",opacity:.7}}),(0,ni.jsx)("span",{children:"Orta (50+)"})]})]})]})]})]}),!(d&&i)&&(0,ni.jsxs)("div",{children:[(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"20px",border:n?"1px solid #334155":"none"},children:[(0,ni.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"16px",padding:"0 20px"},children:"Nas\u0131l \xc7al\u0131\u015f\u0131r?"}),(0,ni.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px",padding:"0 20px 20px 20px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"700",flexShrink:0,boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:"1"}),(0,ni.jsx)("p",{style:{color:n?"#cbd5e1":"#4b5563",margin:0,lineHeight:"1.5"},children:"Kameray\u0131 ba\u015flat\u0131n ve kameraya tam kar\u015f\u0131dan bak\u0131n"})]}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"700",flexShrink:0,boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:"2"}),(0,ni.jsx)("p",{style:{color:n?"#cbd5e1":"#4b5563",margin:0,lineHeight:"1.5"},children:"Yapay zeka ba\u015f, boyun ve omuz duru\u015funuzu analiz eder"})]}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #06b6d4, #0891b2)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"700",flexShrink:0,boxShadow:"0 4px 12px rgba(6, 182, 212, 0.3)"},children:"3"}),(0,ni.jsx)("p",{style:{color:n?"#cbd5e1":"#4b5563",margin:0,lineHeight:"1.5"},children:"3 saniyede bir anl\u0131k geri bildirim al\u0131n ve duru\u015funuzu d\xfczeltin"})]}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"600",flexShrink:0,boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},children:(0,ni.jsx)(Kn,{})}),(0,ni.jsx)("p",{style:{color:"#dc2626",margin:0,lineHeight:"1.5",fontWeight:"500"},children:"Tehlikeli duru\u015f tespit edildi\u011finde otomatik sesli uyar\u0131 al\u0131rs\u0131n\u0131z!"})]}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"600",flexShrink:0,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:(0,ni.jsx)(Pn,{})}),(0,ni.jsx)("p",{style:{color:n?"#cbd5e1":"#4b5563",margin:0,lineHeight:"1.5"},children:"Sol alttaki ses butonuyla uyar\u0131lar\u0131 a\xe7\u0131p kapatabilirsiniz"})]})]})]}),o&&!_&&(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"white",borderRadius:"8px",padding:"16px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",marginBottom:"20px",border:n?"1px solid #334155":"none"},children:[(0,ni.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Duru\u015f Durumu"}),(0,ni.jsx)("p",{style:{fontSize:"18px",fontWeight:"600",color:o.includes("\u0130yi")||o.includes("M\xfckemmel")?"#22c55e":"#ef4444",margin:"0 0 8px 0"},children:o}),y&&(0,ni.jsxs)("p",{style:{fontSize:"14px",color:n?"#9ca3af":"#64748b",margin:0},children:["Son analiz: ",y]})]}),m&&!_&&(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"white",borderRadius:"12px",padding:d?"16px":"20px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"20px",border:n?"1px solid #334155":"none"},children:[(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsxs)("div",{style:{fontSize:d?"14px":"16px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px",display:"flex",flexDirection:d?"column":"row",alignItems:d?"flex-start":"center",gap:d?"4px":"8px"},children:[(0,ni.jsx)("span",{children:"Post\xfcr Skoru:"}),(0,ni.jsxs)("span",{style:{background:J(m.personalized_score).color,color:"#fff",padding:"4px 12px",borderRadius:"8px",fontSize:d?"12px":"14px",alignSelf:"center"},children:[m.personalized_score,"/100"]})]}),(0,ni.jsxs)("div",{style:{fontSize:d?"12px":"14px",color:n?"#cbd5e1":"#64748b",marginBottom:"4px",textAlign:"center"},children:["Seviye: ",(0,ni.jsx)("span",{style:{fontWeight:"600"},children:J(m.personalized_score).label})]})]}),m.risk_level&&(0,ni.jsx)("div",{style:{marginBottom:"16px"},children:(0,ni.jsxs)("div",{style:{fontSize:d?"12px":"14px",color:n?"#cbd5e1":"#64748b",marginBottom:"4px",display:"flex",flexDirection:d?"column":"row",alignItems:d?"flex-start":"center",gap:d?"4px":"8px"},children:[(0,ni.jsx)("span",{children:"Risk Seviyesi:"}),(0,ni.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:d?"10px":"12px",fontWeight:"600",backgroundColor:"D\xdc\u015e\xdcK"===m.risk_level?"#dcfce7":"ORTA"===m.risk_level?"#fef3c7":"Y\xdcKSEK"===m.risk_level?"#fee2e2":"#fecaca",color:"D\xdc\u015e\xdcK"===m.risk_level?"#166534":"ORTA"===m.risk_level?"#92400e":"Y\xdcKSEK"===m.risk_level?"#dc2626":"#991b1b",alignSelf:"flex-start"},children:m.risk_level})]})}),m.issues&&m.issues.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Tespit Edilen Sorunlar:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",color:n?"#cbd5e1":"#64748b",fontSize:"13px"},children:m.issues.map((e,t)=>(0,ni.jsxs)("li",{children:["\u2022 ",e]},t))})]}),m.improvement_tips&&m.improvement_tips.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Anl\u0131k D\xfczeltmeler:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",listStyle:"none"},children:m.improvement_tips.map((e,t)=>(0,ni.jsxs)("li",{style:{marginBottom:"4px",color:"#059669",fontSize:"13px"},children:["\u2713 ",e]},t))})]}),m.exercises&&m.exercises.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"\xd6nerilen Egzersizler:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",listStyle:"none"},children:m.exercises.map((e,t)=>(0,ni.jsxs)("li",{style:{marginBottom:"4px",color:"#7c3aed",fontSize:"13px"},children:["\u27f3 ",e]},t))})]}),m.ergonomic_tips&&m.ergonomic_tips.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Ergonomik \u0130pu\xe7lar\u0131:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",listStyle:"none"},children:m.ergonomic_tips.map((e,t)=>(0,ni.jsxs)("li",{style:{marginBottom:"4px",color:"#0369a1",fontSize:"13px"},children:["\ud83d\udca1 ",e]},t))})]}),m.metrics&&(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"12px"},children:"Teknik Metrikler:"}),(0,ni.jsxs)("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"1fr 1fr",gap:d?"6px":"8px",fontSize:d?"11px":"12px"},children:[(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"\u0130leri Ba\u015f:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[(100*m.metrics.head_forward_ratio).toFixed(1),"%"]})]}),(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"Boyun A\xe7\u0131s\u0131:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[m.metrics.neck_angle,"\xb0"]})]}),(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"Omuz Asimetrisi:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[(100*m.metrics.shoulder_alignment).toFixed(1),"%"]})]}),(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"Ba\u015f E\u011fimi:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[Math.abs(m.metrics.head_tilt).toFixed(1),"\xb0"]})]})]}),(0,ni.jsxs)("div",{style:{marginTop:"12px",textAlign:"center",fontSize:d?"11px":"12px",color:n?"#9ca3af":"#64748b"},children:["G\xfcvenilirlik: ",(0,ni.jsxs)("span",{style:{fontWeight:"600"},children:[(100*m.confidence).toFixed(0),"%"]})]})]})]}),L.length>=3&&!v&&(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:n?"0 4px 6px -1px rgba(0, 0, 0, 0.3)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"20px",textAlign:"center"},children:[(0,ni.jsxs)("h3",{style:{fontSize:"16px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",textAlign:"center"},children:[(0,ni.jsx)("img",{src:"/ai-icon.svg",alt:"AI",style:{width:"24px",height:"24px",filter:n?"brightness(1.2)":"none",display:"inline-block",verticalAlign:"middle"}}),"Ki\u015fiselle\u015ftirilmi\u015f Analiz Haz\u0131r!"]}),(0,ni.jsx)("p",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"16px",fontSize:"14px"},children:"Yeterli analiz verisi topland\u0131. AI destekli ki\u015fisel \xf6nerilerinizi al\u0131n."}),(0,ni.jsxs)("button",{onClick:async()=>{window.showPostureNotification&&window.showPostureNotification("info","\ud83e\udde0 AI \xd6nerileri","AI \xf6nerileriniz 5 saniye i\xe7inde haz\u0131rlanacak...",5e3,!0);const e=L.length,t=e>0?(L.reduce((e,t)=>e+t.score,0)/e).toFixed(1):0,n=S?(S.current_session_time/60).toFixed(1):0;await K(t,e,n,L)},onMouseEnter:e=>{e.target.style.transform="translateY(-2px) scale(1.05)",e.target.style.boxShadow="0 8px 25px rgba(102, 126, 234, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.3)"},onTouchStart:e=>{e.target.style.transform="translateY(0) scale(0.98)",e.target.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.5)"},onTouchEnd:e=>{setTimeout(()=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.3)"},150)},style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},children:[(0,ni.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,ni.jsx)("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"AI \xd6nerilerini Al"]})]}),v&&(0,ni.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"24px",color:"white",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"20px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[(0,ni.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ni.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,ni.jsx)("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,ni.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",borderRadius:"8px",color:"white",fontSize:"16px"},children:(0,ni.jsx)(CT,{})}),(0,ni.jsx)("h3",{style:{margin:0,fontSize:"20px",fontWeight:"700"},children:"AI Destekli Ki\u015fisel \xd6neriler"})]})]}),(()=>{const e=LT(v);return e&&e.length>0?(0,ni.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:e.map((e,t)=>(0,ni.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",borderLeft:"4px solid #4ade80",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.15)",e.currentTarget.style.transform="translateX(4px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateX(0px)"},children:(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{background:"#4ade80",color:"#065f46",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"700",flexShrink:0,marginTop:"2px"},children:t+1}),(0,ni.jsx)("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"rgba(255, 255, 255, 0.95)",fontWeight:"400"},children:e})]})},t))}):(0,ni.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",textAlign:"center"},children:(0,ni.jsx)("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.8)"},children:"Daha fazla analiz yap\u0131ld\u0131k\xe7a ki\u015fiselle\u015ftirilmi\u015f \xf6neriler burada g\xf6r\xfcnecek."})})})(),(0,ni.jsxs)("div",{style:{marginTop:"20px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,ni.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,ni.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ni.jsx)("span",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.8)",fontStyle:"italic"},children:"Sizin duru\u015f verilerinize g\xf6re ki\u015fiselle\u015ftirilmi\u015f \xf6neriler"})]})]})]}),a&&(0,ni.jsxs)("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[(0,ni.jsx)("h3",{style:{color:"#dc2626",fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"\u26a0\ufe0f Hata"}),(0,ni.jsx)("p",{style:{color:"#dc2626",margin:0},children:a})]}),_&&(0,ni.jsxs)("div",{style:{backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[(0,ni.jsx)("h3",{style:{color:"#d97706",fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"\u26a0\ufe0f Pozisyon Uyar\u0131s\u0131"}),(0,ni.jsx)("p",{style:{color:"#d97706",margin:0},children:"Kameraya tam kar\u015f\u0131dan ve net \u015fekilde bak\u0131n. Y\xfcz\xfcn\xfcz ve omuzlar\u0131n\u0131z g\xf6r\xfcn\xfcr olmal\u0131."})]}),A&&E&&(0,ni.jsxs)("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #7dd3fc",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[(0,ni.jsx)("h3",{style:{color:"#0369a1",fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"\ud83d\udcca Oturum \xd6zeti"}),(0,ni.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,ni.jsx)("span",{style:{color:"#0369a1"},children:"Toplam S\xfcre:"}),(0,ni.jsxs)("span",{style:{color:"#0369a1",fontWeight:"600"},children:[E.duration_minutes," dakika"]})]}),(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,ni.jsx)("span",{style:{color:"#0369a1"},children:"Ba\u015far\u0131l\u0131 Analiz:"}),(0,ni.jsx)("span",{style:{color:"#0369a1",fontWeight:"600"},children:E.successful_analyses})]}),E.average_score>0&&(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,ni.jsx)("span",{style:{color:"#0369a1"},children:"Ortalama Skor:"}),(0,ni.jsxs)("span",{style:{color:"#0369a1",fontWeight:"600"},children:[E.average_score,"/100"]})]}),(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,ni.jsx)("span",{style:{color:"#0369a1"},children:"En \u0130yi Skor:"}),(0,ni.jsxs)("span",{style:{color:"#0369a1",fontWeight:"600"},children:[E.best_score,"/100"]})]}),0!==E.improvement&&(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,ni.jsx)("span",{style:{color:"#0369a1"},children:"\u0130yile\u015fme:"}),(0,ni.jsxs)("span",{style:{color:E.improvement>0?"#22c55e":"#ef4444",fontWeight:"600"},children:[E.improvement>0?"+":"",E.improvement," puan"]})]})]})]})]}),d&&(0,ni.jsxs)("div",{children:[o&&!_&&(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"white",borderRadius:"8px",padding:"16px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",marginBottom:"20px",border:n?"1px solid #334155":"none"},children:[(0,ni.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Duru\u015f Durumu"}),(0,ni.jsx)("p",{style:{fontSize:"18px",fontWeight:"600",color:o.includes("\u0130yi")||o.includes("M\xfckemmel")?"#22c55e":"#ef4444",margin:"0 0 8px 0"},children:o}),y&&(0,ni.jsxs)("p",{style:{fontSize:"14px",color:n?"#9ca3af":"#64748b",margin:0},children:["Son analiz: ",y]})]}),m&&!_&&(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"white",borderRadius:"12px",padding:d?"16px":"20px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"20px",border:n?"1px solid #334155":"none"},children:[(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsxs)("div",{style:{fontSize:d?"14px":"16px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px",display:"flex",flexDirection:d?"column":"row",alignItems:d?"flex-start":"center",gap:d?"4px":"8px"},children:[(0,ni.jsx)("span",{children:"Post\xfcr Skoru:"}),(0,ni.jsxs)("span",{style:{background:J(m.personalized_score).color,color:"#fff",padding:"4px 12px",borderRadius:"8px",fontSize:d?"12px":"14px",alignSelf:"center"},children:[m.personalized_score,"/100"]})]}),(0,ni.jsxs)("div",{style:{fontSize:d?"12px":"14px",color:n?"#cbd5e1":"#64748b",marginBottom:"4px",textAlign:"center"},children:["Seviye: ",(0,ni.jsx)("span",{style:{fontWeight:"600"},children:J(m.personalized_score).label})]})]}),m.risk_level&&(0,ni.jsx)("div",{style:{marginBottom:"16px"},children:(0,ni.jsxs)("div",{style:{fontSize:d?"12px":"14px",color:n?"#cbd5e1":"#64748b",marginBottom:"4px",display:"flex",flexDirection:d?"column":"row",alignItems:d?"flex-start":"center",gap:d?"4px":"8px"},children:[(0,ni.jsx)("span",{children:"Risk Seviyesi:"}),(0,ni.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:d?"10px":"12px",fontWeight:"600",backgroundColor:"D\xdc\u015e\xdcK"===m.risk_level?"#dcfce7":"ORTA"===m.risk_level?"#fef3c7":"Y\xdcKSEK"===m.risk_level?"#fee2e2":"#fecaca",color:"D\xdc\u015e\xdcK"===m.risk_level?"#166534":"ORTA"===m.risk_level?"#92400e":"Y\xdcKSEK"===m.risk_level?"#dc2626":"#991b1b",alignSelf:"flex-start"},children:m.risk_level})]})}),m.issues&&m.issues.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Tespit Edilen Sorunlar:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",color:n?"#cbd5e1":"#64748b",fontSize:"13px"},children:m.issues.map((e,t)=>(0,ni.jsxs)("li",{children:["\u2022 ",e]},t))})]}),m.improvement_tips&&m.improvement_tips.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Anl\u0131k D\xfczeltmeler:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",listStyle:"none"},children:m.improvement_tips.map((e,t)=>(0,ni.jsxs)("li",{style:{marginBottom:"4px",color:"#059669",fontSize:"13px"},children:["\u2713 ",e]},t))})]}),m.exercises&&m.exercises.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"\xd6nerilen Egzersizler:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",listStyle:"none"},children:m.exercises.map((e,t)=>(0,ni.jsxs)("li",{style:{marginBottom:"4px",color:"#7c3aed",fontSize:"13px"},children:["\u27f3 ",e]},t))})]}),m.ergonomic_tips&&m.ergonomic_tips.length>0&&(0,ni.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"8px"},children:"Ergonomik \u0130pu\xe7lar\u0131:"}),(0,ni.jsx)("ul",{style:{margin:0,paddingLeft:"16px",listStyle:"none"},children:m.ergonomic_tips.map((e,t)=>(0,ni.jsxs)("li",{style:{marginBottom:"4px",color:"#0369a1",fontSize:"13px"},children:["\ud83d\udca1 ",e]},t))})]}),m.metrics&&(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h4",{style:{fontSize:d?"13px":"14px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"12px"},children:"Teknik Metrikler:"}),(0,ni.jsxs)("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"1fr 1fr",gap:d?"6px":"8px",fontSize:d?"11px":"12px"},children:[(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"\u0130leri Ba\u015f:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[(100*m.metrics.head_forward_ratio).toFixed(1),"%"]})]}),(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"Boyun A\xe7\u0131s\u0131:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[m.metrics.neck_angle,"\xb0"]})]}),(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"Omuz Asimetrisi:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[(100*m.metrics.shoulder_alignment).toFixed(1),"%"]})]}),(0,ni.jsxs)("div",{style:{backgroundColor:n?"#0f172a":"#f8fafc",borderRadius:"6px",padding:d?"6px":"8px",border:"1px solid ".concat(n?"#334155":"#e2e8f0")},children:[(0,ni.jsx)("div",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"2px"},children:"Ba\u015f E\u011fimi:"}),(0,ni.jsxs)("div",{style:{color:n?"#f1f5f9":"#1e293b",fontWeight:"600"},children:[Math.abs(m.metrics.head_tilt).toFixed(1),"\xb0"]})]})]}),(0,ni.jsxs)("div",{style:{marginTop:"12px",textAlign:"center",fontSize:d?"11px":"12px",color:n?"#9ca3af":"#64748b"},children:["G\xfcvenilirlik: ",(0,ni.jsxs)("span",{style:{fontWeight:"600"},children:[(100*m.confidence).toFixed(0),"%"]})]})]})]}),L.length>=3&&!v&&(0,ni.jsxs)("div",{style:{backgroundColor:n?"#1e293b":"#ffffff",borderRadius:"12px",padding:"20px",boxShadow:n?"0 4px 6px -1px rgba(0, 0, 0, 0.3)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginBottom:"20px",textAlign:"center"},children:[(0,ni.jsxs)("h3",{style:{fontSize:"16px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",textAlign:"center"},children:[(0,ni.jsx)("img",{src:"/ai-icon.svg",alt:"AI",style:{width:"24px",height:"24px",filter:n?"brightness(1.2)":"none",display:"inline-block",verticalAlign:"middle"}}),"Ki\u015fiselle\u015ftirilmi\u015f Analiz Haz\u0131r!"]}),(0,ni.jsx)("p",{style:{color:n?"#9ca3af":"#64748b",marginBottom:"16px",fontSize:"14px"},children:"Yeterli analiz verisi topland\u0131. AI destekli ki\u015fisel \xf6nerilerinizi al\u0131n."}),(0,ni.jsxs)("button",{onClick:async()=>{window.showPostureNotification&&window.showPostureNotification("info","\ud83e\udde0 AI \xd6nerileri","AI \xf6nerileriniz 5 saniye i\xe7inde haz\u0131rlanacak...",5e3,!0);const e=L.length,t=e>0?(L.reduce((e,t)=>e+t.score,0)/e).toFixed(1):0,n=S?(S.current_session_time/60).toFixed(1):0;await K(t,e,n,L)},onMouseEnter:e=>{e.target.style.transform="translateY(-2px) scale(1.05)",e.target.style.boxShadow="0 8px 25px rgba(102, 126, 234, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.3)"},onTouchStart:e=>{e.target.style.transform="translateY(0) scale(0.98)",e.target.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.5)"},onTouchEnd:e=>{setTimeout(()=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.3)"},150)},style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},children:[(0,ni.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,ni.jsx)("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"AI \xd6nerilerini Al"]})]}),v&&(0,ni.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"24px",color:"white",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"20px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[(0,ni.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ni.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,ni.jsx)("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,ni.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",borderRadius:"8px",color:"white",fontSize:"16px"},children:(0,ni.jsx)(CT,{})}),(0,ni.jsx)("h3",{style:{margin:0,fontSize:"20px",fontWeight:"700"},children:"AI Destekli Ki\u015fisel \xd6neriler"})]})]}),(()=>{const e=LT(v);return e&&e.length>0?(0,ni.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:e.map((e,t)=>(0,ni.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",borderLeft:"4px solid #4ade80",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.15)",e.currentTarget.style.transform="translateX(4px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateX(0px)"},children:(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,ni.jsx)("div",{style:{background:"#4ade80",color:"#065f46",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"700",flexShrink:0,marginTop:"2px"},children:t+1}),(0,ni.jsx)("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"rgba(255, 255, 255, 0.95)",fontWeight:"400"},children:e})]})},t))}):(0,ni.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",textAlign:"center"},children:(0,ni.jsx)("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.8)"},children:"Daha fazla analiz yap\u0131ld\u0131k\xe7a ki\u015fiselle\u015ftirilmi\u015f \xf6neriler burada g\xf6r\xfcnecek."})})})(),(0,ni.jsxs)("div",{style:{marginTop:"20px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,ni.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,ni.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ni.jsx)("span",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.8)",fontStyle:"italic"},children:"Sizin duru\u015f verilerinize g\xf6re ki\u015fiselle\u015ftirilmi\u015f \xf6neriler"})]})]})]})]})]})}),(0,ni.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n          }\n\n          .live-analysis-btn {\n            position: relative;\n            overflow: hidden;\n          }\n\n          .live-analysis-btn::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: -100%;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n            transition: left 0.5s;\n          }\n\n          .live-analysis-btn:hover::before {\n            left: 100%;\n          }\n\n          .start-btn:hover {\n            background: linear-gradient(135deg, #2563eb, #1d4ed8) !important;\n          }\n\n          .stop-btn:hover {\n            background: linear-gradient(135deg, #dc2626, #b91c1c) !important;\n          }\n\n          .pdf-btn:hover {\n            background: linear-gradient(135deg, #16a34a, #15803d) !important;\n          }\n\n          .live-analysis-card {\n            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);\n            backdrop-filter: blur(10px);\n            border: 1px solid rgba(255, 255, 255, 0.2);\n            border-radius: 16px;\n            transition: all 0.3s ease;\n            position: relative;\n            overflow: hidden;\n          }\n\n          .live-analysis-card::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);\n            transform: translateX(-100%);\n            transition: transform 0.6s ease;\n            pointer-events: none;\n          }\n\n          .live-analysis-card:hover::before {\n            transform: translateX(100%);\n          }\n\n          .live-analysis-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n            border-color: rgba(255, 255, 255, 0.3);\n          }\n\n          .video-container {\n            position: relative;\n            border-radius: 12px;\n            overflow: hidden;\n            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n            border: 2px solid rgba(255, 255, 255, 0.1);\n          }\n\n          .video-container::after {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: linear-gradient(45deg, transparent 48%, rgba(255, 255, 255, 0.03) 50%, transparent 52%);\n            pointer-events: none;\n          }\n\n          .status-badge {\n            backdrop-filter: blur(10px);\n            background: rgba(0, 0, 0, 0.8) !important;\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n          }\n\n          .chart-container {\n            background: rgba(255, 255, 255, 0.05);\n            border-radius: 12px;\n            padding: 16px;\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            backdrop-filter: blur(5px);\n          }\n\n          .ai-recommendation-item {\n            background: rgba(255, 255, 255, 0.08);\n            border: 1px solid rgba(255, 255, 255, 0.15);\n            border-radius: 10px;\n            padding: 12px;\n            transition: all 0.3s ease;\n            position: relative;\n            overflow: hidden;\n          }\n\n          .ai-recommendation-item:hover {\n            background: rgba(255, 255, 255, 0.12);\n            border-color: rgba(255, 255, 255, 0.25);\n            transform: translateX(5px);\n          }\n\n          .ai-recommendation-item::before {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 0;\n            bottom: 0;\n            width: 3px;\n            background: linear-gradient(180deg, #4ade80, #22c55e);\n          }\n\n          @media (max-width: 768px) {\n            .live-analysis-container {\n              padding: 10px !important;\n              margin: 0 !important;\n            }\n\n            .live-analysis-btn {\n              width: 100%;\n              justify-content: center;\n              padding: 12px 16px !important;\n              font-size: 14px !important;\n              margin-bottom: 8px !important;\n            }\n\n            .live-analysis-card {\n              margin: 8px 0 !important;\n              padding: 16px !important;\n              border-radius: 12px !important;\n            }\n\n            .video-container {\n              width: 100% !important;\n              height: auto !important;\n              aspect-ratio: 16/9;\n              margin-bottom: 16px !important;\n            }\n\n            .chart-container {\n              padding: 12px !important;\n              margin: 10px 0 !important;\n            }\n\n            .stats-grid {\n              grid-template-columns: 1fr 1fr !important;\n              gap: 8px !important;\n            }\n\n            .stats-item {\n              padding: 12px !important;\n              text-align: center !important;\n            }\n            \n            .stats-item h3 {\n              font-size: 18px !important;\n            }\n            \n            .stats-item p {\n              font-size: 12px !important;\n            }\n\n            .ai-recommendation-item {\n              padding: 12px !important;\n              margin-bottom: 8px !important;\n              font-size: 14px !important;\n            }\n            \n            .ai-recommendation-item:hover {\n              transform: none !important;\n            }\n\n            .control-buttons {\n              flex-direction: column !important;\n              gap: 8px !important;\n            }\n            \n            .control-buttons button {\n              width: 100% !important;\n              justify-content: center !important;\n            }\n\n            .status-badge {\n              font-size: 12px !important;\n              padding: 6px 10px !important;\n            }\n\n            .notification-mobile {\n              max-width: calc(100vw - 20px) !important;\n              min-width: 280px !important;\n              padding: 12px !important;\n              font-size: 13px !important;\n              margin: 5px !important;\n            }\n            \n            .notification-mobile .notification-title {\n              font-size: 14px !important;\n              margin-bottom: 4px !important;\n              font-weight: 600 !important;\n            }\n            \n            .notification-mobile .notification-message {\n              font-size: 12px !important;\n              line-height: 1.4 !important;\n            }\n            \n            .notification-mobile .notification-icon {\n              font-size: 16px !important;\n              margin-right: 8px !important;\n            }\n\n            .sound-panel-mobile {\n              left: 10px !important;\n              right: 10px !important;\n              bottom: 70px !important;\n              min-width: auto !important;\n              width: calc(100vw - 20px) !important;\n              max-width: none !important;\n              padding: 16px !important;\n            }\n\n            input, select, button {\n              min-height: 44px !important;\n              font-size: 16px !important;\n            }\n\n            .tooltip {\n              display: none !important;\n            }\n\n            .scrollable-content {\n              max-height: 300px !important;\n              overflow-y: auto !important;\n            }\n          }\n\n          @media (min-width: 769px) and (max-width: 1024px) {\n            .live-analysis-container {\n              padding: 20px !important;\n            }\n            \n            .stats-grid {\n              grid-template-columns: repeat(3, 1fr) !important;\n            }\n            \n            .live-analysis-card {\n              margin: 15px !important;\n            }\n          }\n\n          @media (max-width: 480px) {\n            .live-analysis-btn {\n              font-size: 13px !important;\n              padding: 10px 12px !important;\n            }\n            \n            .live-analysis-card {\n              padding: 12px !important;\n              margin: 5px 0 !important;\n            }\n            \n            .stats-grid {\n              grid-template-columns: 1fr !important;\n            }\n            \n            .stats-item h3 {\n              font-size: 16px !important;\n            }\n            \n            .notification-mobile {\n              min-width: 250px !important;\n              font-size: 12px !important;\n            }\n          }\n        "})]})},BT=e=>{var n;let{isDarkMode:i}=e;const[r,a]=(0,t.useState)(null),[s,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(""),[x,y]=(0,t.useState)("upload"),[b,_]=(0,t.useState)("FULL_BODY"),w=(0,t.useRef)(null);(0,t.useEffect)(()=>{S();const e=()=>{const e=document.querySelector(".background-particles");e&&e.remove(),S()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const S=()=>{const e=document.createElement("div");e.classList.add("background-particles"),document.body.appendChild(e);const t=window.innerWidth<768?10:20;for(let n=0;n<t;n++){const t=document.createElement("div");t.classList.add("particle");const n=50*Math.random()+10;t.style.width="".concat(n,"px"),t.style.height="".concat(n,"px"),t.style.left="".concat(100*Math.random(),"%"),t.style.top="".concat(100*Math.random(),"%"),t.style.animationDelay="".concat(5*Math.random(),"s"),t.style.animationDuration="".concat(10*Math.random()+5,"s"),t.style.opacity=.5*Math.random()+.1,e.appendChild(t)}},M=e=>{if(e.length>0){const t=e[0];if(!["image/jpeg","image/png","image/webp"].includes(t.type))return void v("L\xfctfen JPG, PNG veya WEBP format\u0131nda bir g\xf6rsel se\xe7in.");v(""),m(null);const n=new FileReader;n.onload=e=>{a(e.target.result),o(t),c(!0)},n.readAsDataURL(t)}};return(0,ni.jsxs)("section",{id:"upload",className:"upload-section",children:[(0,ni.jsxs)("div",{className:"section-header",children:[(0,ni.jsx)("h2",{children:"Duru\u015f Analizine Ba\u015flay\u0131n"}),(0,ni.jsx)("p",{children:"Foto\u011fraf y\xfckleyin veya canl\u0131 analiz yap\u0131n, yapay zeka destekli sistemimiz saniyeler i\xe7inde profesyonel analiz sa\u011flas\u0131n"})]}),(0,ni.jsx)("div",{className:"analysis-mode-selector",children:(0,ni.jsxs)("div",{className:"mode-tabs",children:[(0,ni.jsxs)("button",{className:"mode-tab ".concat("upload"===x?"active":""),onClick:()=>y("upload"),children:[(0,ni.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"24",height:"24",children:(0,ni.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Foto\u011fraf Analizi"]}),(0,ni.jsxs)("button",{className:"mode-tab ".concat("live"===x?"active":""),onClick:()=>y("live"),children:[(0,ni.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"24",height:"24",children:(0,ni.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Canl\u0131 Analiz"]})]})}),"live"===x?(0,ni.jsx)(PT,{isDarkMode:i}):(0,ni.jsxs)("div",{className:"upload-container",children:[(0,ni.jsxs)("div",{className:"upload-steps",children:[(0,ni.jsxs)("div",{className:"step",children:[(0,ni.jsx)("div",{className:"step-number",children:"1"}),(0,ni.jsx)("h3",{children:"Foto\u011fraf Y\xfckle"}),(0,ni.jsx)("p",{children:"JPG, PNG veya WEBP format\u0131nda foto\u011fraf\u0131n\u0131z\u0131 y\xfckleyin"})]}),(0,ni.jsxs)("div",{className:"step",children:[(0,ni.jsx)("div",{className:"step-number",children:"2"}),(0,ni.jsx)("h3",{children:"Analiz Bekle"}),(0,ni.jsx)("p",{children:"Yapay zeka sistemimiz duru\u015funuzu analiz ediyor"})]}),(0,ni.jsxs)("div",{className:"step",children:[(0,ni.jsx)("div",{className:"step-number",children:"3"}),(0,ni.jsx)("h3",{children:"Rapor Al"}),(0,ni.jsx)("p",{children:"Detayl\u0131 analiz raporunuzu indirin ve inceleyin"})]})]}),(0,ni.jsxs)("div",{className:"upload-card",children:[(0,ni.jsx)("input",{type:"file",ref:w,accept:"image/*",onChange:e=>{M(e.target.files)},style:{display:"none"}}),l?(0,ni.jsxs)("div",{className:"preview-container",style:{display:"block"},children:[(0,ni.jsxs)("div",{className:"preview-header",children:[(0,ni.jsx)("h3",{children:"\xd6nizleme"}),(0,ni.jsx)("button",{className:"change-photo",onClick:()=>{w.current&&w.current.click()},children:"Foto\u011fraf\u0131 De\u011fi\u015ftir"})]}),(0,ni.jsxs)("div",{className:"analysis-type-selector",children:[(0,ni.jsx)("h4",{children:"Analiz T\xfcr\xfc Se\xe7in:"}),(0,ni.jsxs)("div",{className:"analysis-type-options",children:[(0,ni.jsxs)("label",{className:"analysis-type-option ".concat("FULL_BODY"===b?"active":""),children:[(0,ni.jsx)("input",{type:"radio",name:"analysisType",value:"FULL_BODY",checked:"FULL_BODY"===b,onChange:e=>_(e.target.value)}),(0,ni.jsxs)("div",{className:"option-content",children:[(0,ni.jsx)("div",{className:"option-image",children:(0,ni.jsx)("img",{src:"/fullbody-placeholder.png",alt:"Tam V\xfccut Analizi"})}),(0,ni.jsxs)("div",{className:"option-text",children:[(0,ni.jsx)("h5",{children:"Tam V\xfccut Analizi"}),(0,ni.jsx)("p",{children:"Boyun, omuz, s\u0131rt, kal\xe7a ve bacak duru\u015fu"})]})]})]}),(0,ni.jsxs)("label",{className:"analysis-type-option ".concat("NECK_UPPER"===b?"active":""),children:[(0,ni.jsx)("input",{type:"radio",name:"analysisType",value:"NECK_UPPER",checked:"NECK_UPPER"===b,onChange:e=>_(e.target.value)}),(0,ni.jsxs)("div",{className:"option-content",children:[(0,ni.jsx)("div",{className:"option-image",children:(0,ni.jsx)("img",{src:"/upperbody-placeholder.png",alt:"Boyun-\xdcst V\xfccut Analizi"})}),(0,ni.jsxs)("div",{className:"option-text",children:[(0,ni.jsx)("h5",{children:"Boyun-\xdcst V\xfccut"}),(0,ni.jsx)("p",{children:"Boyun, omuz ve \xfcst s\u0131rt odakl\u0131 analiz"})]})]})]})]})]}),(0,ni.jsx)("img",{src:r,alt:"\xd6nizleme"}),g&&(0,ni.jsx)("div",{className:"error-message",children:(0,ni.jsxs)("span",{children:["\u26a0\ufe0f ",g]})}),!f&&!h&&(0,ni.jsxs)("button",{className:"analyze-btn",onClick:async()=>{if(s){p(!0),v(""),m(null);try{const e=await ri.analyzePosture(s,b);e.success?m(e.data):v(e.error||"Analiz i\u015flemi ba\u015far\u0131s\u0131z oldu.")}catch(g){console.error("Analiz hatas\u0131:",g),v("Analiz s\u0131ras\u0131nda bir hata olu\u015ftu.")}finally{p(!1)}}else v("L\xfctfen \xf6nce bir foto\u011fraf se\xe7in.")},children:[(0,ni.jsx)("span",{className:"btn-text",children:"Analizi Ba\u015flat"}),(0,ni.jsx)("span",{className:"btn-icon",children:"\u2192"})]}),h&&(0,ni.jsxs)("div",{className:"analyzing-status",children:[(0,ni.jsx)("div",{className:"loading-spinner"}),(0,ni.jsx)("p",{children:"Analiz yap\u0131l\u0131yor..."})]}),f&&(0,ni.jsxs)("div",{className:"analysis-results",children:[(0,ni.jsxs)("div",{className:"results-header",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient cyan",children:(0,ni.jsx)(Xt,{style:{fontSize:"20px",color:"white"}})})}),"Analiz Sonu\xe7lar\u0131"]}),(0,ni.jsx)("div",{className:"analysis-type-badge",children:"FULL_BODY"===b?(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)(Xn,{style:{fontSize:"16px",marginRight:"6px"}}),"Tam V\xfccut"]}):(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)(Xn,{style:{fontSize:"16px",marginRight:"6px"}}),"Boyun-\xdcst V\xfccut"]})})]}),f.image&&(0,ni.jsx)("div",{className:"analysis-image",children:(0,ni.jsx)("img",{src:"data:image/jpeg;base64,".concat(f.image),alt:"Analiz edilmi\u015f g\xf6rsel"})}),(0,ni.jsxs)("div",{className:"main-assessment",children:[f.message&&(0,ni.jsxs)("div",{className:"result-message",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient red",children:(0,ni.jsx)(On,{style:{fontSize:"18px",color:"white"}})})}),"De\u011ferlendirme"]}),(0,ni.jsx)("p",{children:f.message})]}),(0,ni.jsx)("div",{className:"score-section",children:f.personalized_score&&(0,ni.jsxs)("div",{className:"personalized-score",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient green",children:(0,ni.jsx)(Gn,{style:{fontSize:"18px",color:"white"}})})}),"Duru\u015f Skoru"]}),(0,ni.jsxs)("div",{className:"score-display",children:[(0,ni.jsxs)("span",{className:"score-value",children:[f.personalized_score.toFixed(1),"/100"]}),(0,ni.jsx)("div",{className:"score-bar",children:(0,ni.jsx)("div",{className:"score-fill",style:{width:"".concat(f.personalized_score,"%")}})})]})]})})]}),(0,ni.jsx)("div",{className:"detailed-info",children:(0,ni.jsxs)("div",{className:"info-grid",children:[f.body_type&&(0,ni.jsxs)("div",{className:"body-type-info",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient blue",children:(0,ni.jsx)(Xn,{style:{fontSize:"18px",color:"white"}})})}),"V\xfccut Tipi"]}),(0,ni.jsx)("span",{className:"body-type",children:f.body_type})]}),f.analysis_quality&&(0,ni.jsxs)("div",{className:"analysis-quality",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient purple",children:(0,ni.jsx)(Rn,{style:{fontSize:"18px",color:"white"}})})}),"Analiz Kalitesi"]}),(0,ni.jsx)("span",{className:"quality-badge quality-".concat(f.analysis_quality.toLowerCase()),children:f.analysis_quality})]}),f.daily_goal&&(0,ni.jsxs)("div",{className:"daily-goal",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient amber",children:(0,ni.jsx)(On,{style:{fontSize:"18px",color:"white"}})})}),"G\xfcnl\xfck Hedef"]}),(0,ni.jsx)("p",{children:f.daily_goal})]}),f.weekly_progress&&(0,ni.jsxs)("div",{className:"weekly-progress",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient cyan",children:(0,ni.jsx)(Cn,{style:{fontSize:"18px",color:"white"}})})}),"Haftal\u0131k \u0130lerleme"]}),(0,ni.jsxs)("div",{className:"progress-summary",children:[(0,ni.jsxs)("span",{children:["Trend: ",f.weekly_progress.trend]}),(0,ni.jsxs)("span",{children:["Toplam Seans: ",f.weekly_progress.total_sessions]}),(0,ni.jsxs)("span",{children:["Tutarl\u0131l\u0131k: %",null===(n=f.weekly_progress.consistency_score)||void 0===n?void 0:n.toFixed(1)]})]})]})]})}),(0,ni.jsxs)("div",{className:"recommendations-section",children:[f.risk_factors&&f.risk_factors.length>0&&(0,ni.jsxs)("div",{className:"risk-factors",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient red",children:(0,ni.jsx)(Wt,{style:{fontSize:"18px",color:"white"}})})}),"Risk Fakt\xf6rleri"]}),(0,ni.jsx)("ul",{children:f.risk_factors.map((e,t)=>(0,ni.jsx)("li",{children:e},t))})]}),f.improvement_suggestions&&f.improvement_suggestions.length>0&&(0,ni.jsxs)("div",{className:"suggestions",children:[(0,ni.jsxs)("h5",{children:[(0,ni.jsx)("div",{className:"section-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient green",children:(0,ni.jsx)(CT,{style:{fontSize:"18px",color:"white"}})})}),"\u0130yile\u015ftirme \xd6nerileri"]}),(0,ni.jsx)("ul",{children:f.improvement_suggestions.map((e,t)=>{let n=e.replace(/^\*\s*|\*$/g,"").trim();n=n.replace(/:: var\s*/g,"").trim(),n=n.replace(/^::\s*/g,"").trim();const i=n.split("*").filter(e=>""!==e.trim());return(0,ni.jsx)("li",{className:"suggestion-item",children:i.length>1?(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsxs)("strong",{children:[i[0].trim(),":"]})," ",i.slice(1).join(" ").trim()]}):n},t)})})]})]}),(0,ni.jsx)("div",{className:"analysis-actions",children:(0,ni.jsxs)("button",{className:"analyze-btn modern-refresh-btn",onClick:()=>{m(null),a(null),o(null),c(!1)},children:[(0,ni.jsx)("div",{className:"btn-icon-modern",children:(0,ni.jsx)(kn,{style:{fontSize:"18px"}})}),(0,ni.jsx)("span",{className:"btn-text",children:"Yeni Analiz Yap"})]})})]})]}):(0,ni.jsx)("div",{className:"upload-area ".concat(u?"drag-over":""),onDrop:e=>{e.preventDefault(),d(!1);const t=e.dataTransfer.files;M(t)},onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},onClick:()=>w.current.click(),children:(0,ni.jsxs)("div",{className:"upload-content",children:[(0,ni.jsx)("div",{className:"upload-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient blue",children:(0,ni.jsx)(Wn,{style:{fontSize:"48px",color:"white"}})})}),(0,ni.jsx)("h3",{children:"Duru\u015f Analizi i\xe7in Foto\u011fraf\u0131n\u0131z\u0131 Y\xfckleyin"}),(0,ni.jsxs)("p",{className:"upload-subtitle",children:["Foto\u011fraf\u0131n\u0131z\u0131 s\xfcr\xfckleyip b\u0131rak\u0131n veya ",(0,ni.jsx)("span",{className:"file-select-modern",children:"dosya se\xe7mek i\xe7in t\u0131klay\u0131n"})]}),(0,ni.jsxs)("div",{className:"upload-info-modern",children:[(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)(pn,{style:{fontSize:"18px",color:"#10b981"}}),(0,ni.jsx)("span",{children:"JPG, PNG, WEBP formatlar\u0131"})]}),(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)(Zt,{style:{fontSize:"18px",color:"#10b981"}}),(0,ni.jsx)("span",{children:"Maksimum 10MB dosya boyutu"})]})]}),g&&(0,ni.jsxs)("div",{className:"error-message-modern",children:[(0,ni.jsx)(Gt,{style:{fontSize:"18px",color:"#ef4444",marginRight:"8px"}}),(0,ni.jsx)("span",{children:g})]})]})})]})]})]})},NT=()=>{var e,n;const[i,r]=(0,t.useState)(null),[a,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[p,f]=(0,t.useState)("FULL_BODY"),m=(0,t.useRef)(null),g=e=>{if(e.length>0){const t=e[0];if(!["image/jpeg","image/png","image/webp"].includes(t.type))return void h("L\xfctfen JPG, PNG veya WEBP format\u0131nda bir g\xf6rsel se\xe7in.");h(""),u(null);const n=new FileReader;n.onload=e=>{r(e.target.result),s(t)},n.readAsDataURL(t)}};return(0,ni.jsxs)("section",{id:"calibration",className:"calibration-section",children:[(0,ni.jsxs)("div",{className:"section-header",children:[(0,ni.jsx)("h2",{children:"Ki\u015fisel Kalibrasyon"}),(0,ni.jsx)("p",{children:"Optimal duru\u015funuzu belirlemek i\xe7in kalibrasyon yap\u0131n"})]}),(0,ni.jsxs)("div",{className:"calibration-container",children:[(0,ni.jsxs)("div",{className:"calibration-info",children:[(0,ni.jsxs)("div",{className:"info-card",children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"icon-container modern-info-icon",children:(0,ni.jsx)(nn,{className:"card-icon"})}),(0,ni.jsx)("h3",{children:"Kalibrasyon Nedir?"})]}),(0,ni.jsx)("div",{className:"card-content",children:(0,ni.jsx)("p",{children:"Kalibrasyon, sistemin sizin optimal duru\u015funuzu \xf6\u011frenmesini sa\u011flar. Bu sayede analizleriniz ki\u015fiselle\u015ftirilmi\u015f olur."})})]}),(0,ni.jsxs)("div",{className:"info-card",children:[(0,ni.jsxs)("div",{className:"card-header",children:[(0,ni.jsx)("div",{className:"icon-container modern-steps-icon",children:(0,ni.jsx)(mn,{className:"card-icon"})}),(0,ni.jsx)("h3",{children:"Kalibrasyon Ad\u0131mlar\u0131"})]}),(0,ni.jsx)("div",{className:"card-content",children:(0,ni.jsxs)("ol",{children:[(0,ni.jsx)("li",{children:"En iyi duru\u015funuzla foto\u011fraf \xe7ekin"}),(0,ni.jsx)("li",{children:"Foto\u011fraf\u0131 y\xfckleyin"}),(0,ni.jsx)("li",{children:"Sistem sizin ideal duru\u015funuzu \xf6\u011frensin"}),(0,ni.jsx)("li",{children:"Gelecek analizleriniz ki\u015fiselle\u015ftirilsin"})]})})]})]}),(0,ni.jsxs)("div",{className:"calibration-card",children:[(0,ni.jsx)("input",{type:"file",ref:m,accept:"image/*",onChange:e=>{g(e.target.files)},style:{display:"none"}}),i?(0,ni.jsxs)("div",{className:"calibration-preview",children:[(0,ni.jsxs)("div",{className:"preview-header",children:[(0,ni.jsxs)("div",{className:"preview-title",children:[(0,ni.jsx)(pn,{className:"preview-icon"}),(0,ni.jsx)("h3",{children:"Foto\u011fraf \xd6nizleme"})]}),(0,ni.jsxs)("button",{className:"change-photo",onClick:()=>{m.current&&m.current.click()},children:[(0,ni.jsx)(kn,{className:"btn-icon"}),(0,ni.jsx)("span",{children:"Foto\u011fraf\u0131 De\u011fi\u015ftir"})]})]}),(0,ni.jsxs)("div",{className:"analysis-type-selector",children:[(0,ni.jsxs)("div",{className:"analysis-header",children:[(0,ni.jsx)("div",{className:"icon-container analysis-icon",children:(0,ni.jsx)(Ht,{className:"card-icon"})}),(0,ni.jsx)("h4",{children:"Analiz T\xfcr\xfc Se\xe7in"})]}),(0,ni.jsxs)("div",{className:"analysis-type-options",children:[(0,ni.jsxs)("label",{className:"analysis-type-option ".concat("FULL_BODY"===p?"active":""),children:[(0,ni.jsx)("input",{type:"radio",name:"calibrationAnalysisType",value:"FULL_BODY",checked:"FULL_BODY"===p,onChange:e=>f(e.target.value)}),(0,ni.jsxs)("div",{className:"option-content",children:[(0,ni.jsx)("div",{className:"option-image",children:(0,ni.jsx)("div",{className:"option-icon-bg fullbody",children:(0,ni.jsx)(Xn,{style:{fontSize:"32px",color:"white"}})})}),(0,ni.jsxs)("div",{className:"option-text",children:[(0,ni.jsxs)("div",{className:"option-title",children:[(0,ni.jsx)(Xn,{className:"option-icon"}),(0,ni.jsx)("h5",{children:"Tam V\xfccut Kalibrasyonu"})]}),(0,ni.jsx)("p",{children:"Boyun, omuz, s\u0131rt, kal\xe7a ve bacak duru\u015fu"})]})]})]}),(0,ni.jsxs)("label",{className:"analysis-type-option ".concat("NECK_UPPER"===p?"active":""),children:[(0,ni.jsx)("input",{type:"radio",name:"calibrationAnalysisType",value:"NECK_UPPER",checked:"NECK_UPPER"===p,onChange:e=>f(e.target.value)}),(0,ni.jsxs)("div",{className:"option-content",children:[(0,ni.jsx)("div",{className:"option-image",children:(0,ni.jsx)("div",{className:"option-icon-bg upperbody",children:(0,ni.jsx)(wn,{style:{fontSize:"32px",color:"white"}})})}),(0,ni.jsxs)("div",{className:"option-text",children:[(0,ni.jsxs)("div",{className:"option-title",children:[(0,ni.jsx)(wn,{className:"option-icon"}),(0,ni.jsx)("h5",{children:"Boyun-\xdcst V\xfccut Kalibrasyonu"})]}),(0,ni.jsx)("p",{children:"Boyun, omuz ve \xfcst s\u0131rt odakl\u0131 kalibrasyon"})]})]})]})]})]}),(0,ni.jsx)("img",{src:i,alt:"Kalibrasyon \xf6nizleme"}),d&&(0,ni.jsxs)("div",{className:"error-message",children:[(0,ni.jsx)(Wt,{className:"error-icon"}),(0,ni.jsx)("span",{children:d})]}),!c&&!o&&(0,ni.jsxs)("button",{className:"calibrate-btn",onClick:async()=>{if(a){l(!0),h(""),u(null);try{const e=await ri.calibratePosture(a,p);e.success?u(e.data):h(e.error||"Kalibrasyon i\u015flemi ba\u015far\u0131s\u0131z oldu.")}catch(d){console.error("Kalibrasyon hatas\u0131:",d),h("Kalibrasyon s\u0131ras\u0131nda bir hata olu\u015ftu.")}finally{l(!1)}}else h("L\xfctfen \xf6nce bir foto\u011fraf se\xe7in.")},children:[(0,ni.jsx)(ei,{className:"btn-icon"}),(0,ni.jsx)("span",{className:"btn-text",children:"Kalibrasyonu Ba\u015flat"})]}),o&&(0,ni.jsxs)("div",{className:"calibrating-status",children:[(0,ni.jsx)("div",{className:"loading-spinner"}),(0,ni.jsx)("p",{children:"Kalibrasyon yap\u0131l\u0131yor..."})]}),c&&(0,ni.jsxs)("div",{className:"calibration-results",children:[(0,ni.jsxs)("div",{className:"results-header",children:[(0,ni.jsx)("div",{className:"icon-container success-icon",children:(0,ni.jsx)(Zt,{className:"card-icon"})}),(0,ni.jsx)("h4",{children:"Kalibrasyon Tamamland\u0131!"})]}),(0,ni.jsxs)("div",{className:"result-content",children:[(0,ni.jsx)("p",{className:"result-message",children:c.message}),c.body_type&&(0,ni.jsxs)("div",{className:"body-type-info",children:[(0,ni.jsx)("h5",{children:"V\xfccut Tipiniz:"}),(0,ni.jsx)("span",{className:"body-type",children:c.body_type})]}),c.personal_baseline&&(0,ni.jsxs)("div",{className:"baseline-info",children:[(0,ni.jsx)("h5",{children:"Ki\u015fisel Baz De\u011ferleriniz:"}),(0,ni.jsxs)("ul",{children:[(0,ni.jsxs)("li",{children:["\u0130deal S\u0131rt A\xe7\u0131s\u0131: ",null===(e=c.personal_baseline.ideal_back_angle)||void 0===e?void 0:e.toFixed(1),"\xb0"]}),(0,ni.jsxs)("li",{children:["\u0130deal Boyun A\xe7\u0131s\u0131: ",null===(n=c.personal_baseline.ideal_neck_angle)||void 0===n?void 0:n.toFixed(1),"\xb0"]})]})]})]}),(0,ni.jsxs)("button",{className:"reset-btn",onClick:()=>{r(null),s(null),u(null),h("")},children:[(0,ni.jsx)(kn,{className:"btn-icon"}),(0,ni.jsx)("span",{children:"Yeni Kalibrasyon"})]})]})]}):(0,ni.jsx)("div",{className:"calibration-upload-area",onDrop:e=>{e.preventDefault();const t=e.dataTransfer.files;g(t)},onDragOver:e=>{e.preventDefault()},onClick:()=>m.current.click(),children:(0,ni.jsxs)("div",{className:"upload-content",children:[(0,ni.jsx)("div",{className:"upload-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient blue",children:(0,ni.jsx)(Wn,{style:{fontSize:"48px",color:"white"}})})}),(0,ni.jsx)("h3",{children:"Kalibrasyon i\xe7in \u0130deal Duru\u015f Foto\u011fraf\u0131n\u0131z\u0131 Y\xfckleyin"}),(0,ni.jsxs)("p",{className:"upload-subtitle",children:["Foto\u011fraf\u0131n\u0131z\u0131 s\xfcr\xfckleyip b\u0131rak\u0131n veya ",(0,ni.jsx)("span",{className:"file-select-modern",children:"dosya se\xe7mek i\xe7in t\u0131klay\u0131n"})]}),(0,ni.jsxs)("div",{className:"upload-info-modern",children:[(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)(pn,{style:{fontSize:"18px",color:"#10b981"}}),(0,ni.jsx)("span",{children:"JPG, PNG, WEBP formatlar\u0131"})]}),(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)(Zt,{style:{fontSize:"18px",color:"#10b981"}}),(0,ni.jsx)("span",{children:"Maksimum 10MB dosya boyutu"})]})]})]})})]})]})]})},DT=()=>(0,ni.jsx)("div",{className:"about-page",children:(0,ni.jsxs)("div",{className:"about-page-container",children:[(0,ni.jsxs)("div",{className:"about-page-header",children:[(0,ni.jsx)("h1",{children:"Hakk\u0131m\u0131zda"}),(0,ni.jsx)("div",{className:"header-decoration"})]}),(0,ni.jsxs)("div",{className:"about-page-content",children:[(0,ni.jsxs)("section",{className:"about-section",children:[(0,ni.jsx)("h2",{children:"Biz Kimiz?"}),(0,ni.jsx)("p",{children:"Biz, g\xfcn\xfcm\xfcz d\xfcnyas\u0131n\u0131n getirdi\u011fi en yayg\u0131n sorunlardan birine teknolojiyle meydan okumak i\xe7in bir araya gelmi\u015f bir ekibiz. Saatlerce ekran ba\u015f\u0131nda ge\xe7en zaman\u0131n bedenimiz \xfczerindeki etkilerini ilk elden deneyimlemi\u015f ve bu sorunu \xe7\xf6zmek i\xe7in ad\u0131m atan insanlar\u0131z."})]}),(0,ni.jsxs)("section",{className:"about-section",children:[(0,ni.jsx)("h2",{children:"Hikayemiz"}),(0,ni.jsx)("p",{children:"Yollar\u0131m\u0131z, Yapay Zeka ve Teknoloji Akademisi'nde kesi\u015fti. Burada, farkl\u0131 yeteneklere sahip olsak da ortak bir sorunu payla\u015ft\u0131\u011f\u0131m\u0131z\u0131 fark ettik: Kendi hayatlar\u0131m\u0131zda ve \xe7evremizde g\xf6rd\xfc\u011f\xfcm\xfcz, fark\u0131nda olmadan al\u0131\u015ft\u0131\u011f\u0131m\u0131z duru\u015f bozukluklar\u0131 ve bunlar\u0131n getirdi\u011fi yorgunluk ve a\u011fr\u0131lar... Bu ki\u015fisel sorunu, herkesin kolayca kullanabilece\u011fi ak\u0131ll\u0131 bir \xe7\xf6z\xfcme d\xf6n\xfc\u015ft\xfcrme fikri bizi bir araya getirdi. \u0130\u015fte PostureGuard bu fikirden do\u011fdu."})]}),(0,ni.jsxs)("section",{className:"about-section",children:[(0,ni.jsx)("h2",{children:"Yakla\u015f\u0131m\u0131m\u0131z"}),(0,ni.jsx)("p",{children:"Ekip olarak, projenin her a\u015famas\u0131nda tek bir amaca odaklan\u0131yoruz: Kullan\u0131c\u0131lar\u0131m\u0131za ger\xe7ek de\u011fer sunmak. Fikrin do\u011fu\u015fundan kodun son sat\u0131r\u0131na, aray\xfcz\xfcn her bir pikselinden verilerinizin g\xfcvenli\u011fine kadar her detay\u0131 tutkuyla ve tam bir i\u015f birli\u011fi i\xe7inde ele al\u0131yoruz. Bizim i\xe7in PostureGuard, sadece bir proje de\u011fil; daha sa\u011fl\u0131kl\u0131 bir gelece\u011fe yapt\u0131\u011f\u0131m\u0131z ortak bir katk\u0131d\u0131r."}),(0,ni.jsx)("p",{children:"Amac\u0131m\u0131z sadece bir yaz\u0131l\u0131m geli\u015ftirmek de\u011fil; duru\u015funuzu iyile\u015ftirerek ya\u015fam kalitenizi art\u0131racak dijital bir yol arkada\u015f\u0131 yaratmak. Bu yolculukta bize kat\u0131ld\u0131\u011f\u0131n\u0131z i\xe7in heyecanl\u0131y\u0131z."})]}),(0,ni.jsxs)("section",{className:"about-section",children:[(0,ni.jsx)("h2",{children:"Teknolojimiz"}),(0,ni.jsxs)("p",{children:[(0,ni.jsx)("strong",{children:"Nas\u0131l \xc7al\u0131\u015f\u0131r?"})," PostureGuard, bilgisayar\u0131n\u0131z\u0131n web kameras\u0131n\u0131 kullanarak, iskelet takibi (pose estimation) yapan geli\u015fmi\u015f yapay zeka algoritmalar\u0131yla \xe7al\u0131\u015f\u0131r. V\xfccudunuzdaki kilit noktalar\u0131 (omuzlar, omurga, ba\u015f pozisyonu) ger\xe7ek zamanl\u0131 olarak analiz eder."]}),(0,ni.jsxs)("p",{children:[(0,ni.jsx)("strong",{children:"Gizlilik:"})," Verileriniz sizinle kal\u0131r. T\xfcm analizler cihaz\u0131n\u0131zda anl\u0131k olarak i\u015flenir ve hi\xe7bir g\xf6r\xfcnt\xfc verisi sunucular\u0131m\u0131za kaydedilmez veya saklanmaz. Gizlili\u011finiz bizim i\xe7in esast\u0131r."]}),(0,ni.jsxs)("p",{children:[(0,ni.jsx)("strong",{children:"Kulland\u0131\u011f\u0131m\u0131z Ara\xe7lar:"})," Projemizin kalbinde, Google taraf\u0131ndan geli\u015ftirilen ve alan\u0131nda lider olan MediaPipe teknolojisi yat\u0131yor. Bu sayede size en hassas ve h\u0131zl\u0131 analizi sunabiliyoruz."]})]}),(0,ni.jsxs)("section",{className:"academy-logo-section",children:[(0,ni.jsx)("h3",{className:"academy-logo-title",children:"Destek\xe7imiz"}),(0,ni.jsx)("div",{className:"academy-logo-container",children:(0,ni.jsx)("img",{src:"/Yapay_Zeka_ve_Teknoloji_Akademisi_Logo.png",alt:"Yapay Zeka ve Teknoloji Akademisi Logo",className:"academy-logo"})})]})]})]})});function IT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function zT(e,t,n){return t&&jT(e.prototype,t),n&&jT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function FT(e,t){return FT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},FT(e,t)}function OT(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FT(e,t)}function UT(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function HT(e){return HT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},HT(e)}var GT=n(942),WT=n.n(GT);const VT=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return QT($T(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e),t)},XT=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=VT(e[t],0,255)):3===t&&(e[t]=VT(e[t],0,1));return e},YT={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])YT["[object ".concat(n,"]")]=n.toLowerCase();function JT(e){return YT[Object.prototype.toString.call(e)]||"object"}const KT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.length>=3?Array.prototype.slice.call(e):"object"==JT(e[0])&&t?t.split("").filter(t=>void 0!==e[0][t]).map(t=>e[0][t]):e[0]},qT=e=>{if(e.length<2)return null;const t=e.length-1;return"string"==JT(e[t])?e[t].toLowerCase():null},{PI:ZT,min:QT,max:$T}=Math,eR=2*ZT,tR=ZT/3,nR=ZT/180,iR=180/ZT,rR={format:{},autodetect:[]};const aR=class{constructor(){const e=this;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if("object"===JT(n[0])&&n[0].constructor&&n[0].constructor===this.constructor)return n[0];let r=qT(n),a=!1;if(!r){a=!0,rR.sorted||(rR.autodetect=rR.autodetect.sort((e,t)=>t.p-e.p),rR.sorted=!0);for(let e of rR.autodetect)if(r=e.test(...n),r)break}if(!rR.format[r])throw new Error("unknown format: "+n);{const t=rR.format[r].apply(null,a?n:n.slice(0,-1));e._rgb=XT(t)}3===e._rgb.length&&e._rgb.push(1)}toString(){return"function"==JT(this.hex)?this.hex():"[".concat(this._rgb.join(","),"]")}},sR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sR.Color(...t)};sR.Color=aR,sR.version="2.6.0";const oR=sR,lR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"cmyk");const[i,r,a,s]=t,o=t.length>4?t[4]:1;return 1===s?[0,0,0,o]:[i>=1?0:255*(1-i)*(1-s),r>=1?0:255*(1-r)*(1-s),a>=1?0:255*(1-a)*(1-s),o]},{max:cR}=Math,uR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,a]=KT(t,"rgb");i/=255,r/=255,a/=255;const s=1-cR(i,cR(r,a)),o=s<1?1/(1-s):0;return[(1-i-s)*o,(1-r-s)*o,(1-a-s)*o,s]};aR.prototype.cmyk=function(){return uR(this._rgb)},oR.cmyk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"cmyk")},rR.format.cmyk=lR,rR.autodetect.push({p:2,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"cmyk"))&&4===t.length)return"cmyk"}});const dR=e=>Math.round(100*e)/100,hR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=KT(t,"hsla");let r=qT(t)||"lsa";return i[0]=dR(i[0]||0),i[1]=dR(100*i[1])+"%",i[2]=dR(100*i[2])+"%","hsla"===r||i.length>3&&i[3]<1?(i[3]=i.length>3?i[3]:1,r="hsla"):i.length=3,"".concat(r,"(").concat(i.join(","),")")},pR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"rgba");let[i,r,a]=t;i/=255,r/=255,a/=255;const s=QT(i,r,a),o=$T(i,r,a),l=(o+s)/2;let c,u;return o===s?(c=0,u=Number.NaN):c=l<.5?(o-s)/(o+s):(o-s)/(2-o-s),i==o?u=(r-a)/(o-s):r==o?u=2+(a-i)/(o-s):a==o&&(u=4+(i-r)/(o-s)),u*=60,u<0&&(u+=360),t.length>3&&void 0!==t[3]?[u,c,l,t[3]]:[u,c,l]},{round:fR}=Math,mR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=KT(t,"rgba");let r=qT(t)||"rgb";return"hsl"==r.substr(0,3)?hR(pR(i),r):(i[0]=fR(i[0]),i[1]=fR(i[1]),i[2]=fR(i[2]),("rgba"===r||i.length>3&&i[3]<1)&&(i[3]=i.length>3?i[3]:1,r="rgba"),"".concat(r,"(").concat(i.slice(0,"rgb"===r?3:4).join(","),")"))},{round:gR}=Math,vR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"hsl");const[i,r,a]=t;let s,o,l;if(0===r)s=o=l=255*a;else{const e=[0,0,0],t=[0,0,0],n=a<.5?a*(1+r):a+r-a*r,c=2*a-n,u=i/360;e[0]=u+1/3,e[1]=u,e[2]=u-1/3;for(let i=0;i<3;i++)e[i]<0&&(e[i]+=1),e[i]>1&&(e[i]-=1),6*e[i]<1?t[i]=c+6*(n-c)*e[i]:2*e[i]<1?t[i]=n:3*e[i]<2?t[i]=c+(n-c)*(2/3-e[i])*6:t[i]=c;[s,o,l]=[gR(255*t[0]),gR(255*t[1]),gR(255*t[2])]}return t.length>3?[s,o,l,t[3]]:[s,o,l,1]},xR=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,yR=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,bR=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,_R=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,wR=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,SR=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,{round:MR}=Math,AR=e=>{let t;if(e=e.toLowerCase().trim(),rR.format.named)try{return rR.format.named(e)}catch(rN){}if(t=e.match(xR)){const e=t.slice(1,4);for(let t=0;t<3;t++)e[t]=+e[t];return e[3]=1,e}if(t=e.match(yR)){const e=t.slice(1,5);for(let t=0;t<4;t++)e[t]=+e[t];return e}if(t=e.match(bR)){const e=t.slice(1,4);for(let t=0;t<3;t++)e[t]=MR(2.55*e[t]);return e[3]=1,e}if(t=e.match(_R)){const e=t.slice(1,5);for(let t=0;t<3;t++)e[t]=MR(2.55*e[t]);return e[3]=+e[3],e}if(t=e.match(wR)){const e=t.slice(1,4);e[1]*=.01,e[2]*=.01;const n=vR(e);return n[3]=1,n}if(t=e.match(SR)){const e=t.slice(1,4);e[1]*=.01,e[2]*=.01;const n=vR(e);return n[3]=+t[4],n}};AR.test=e=>xR.test(e)||yR.test(e)||bR.test(e)||_R.test(e)||wR.test(e)||SR.test(e);const CR=AR;aR.prototype.css=function(e){return mR(this._rgb,e)},oR.css=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"css")},rR.format.css=CR,rR.autodetect.push({p:5,test:function(e){if((arguments.length<=1||!(arguments.length-1))&&"string"===JT(e)&&CR.test(e))return"css"}}),rR.format.gl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=KT(t,"rgba");return i[0]*=255,i[1]*=255,i[2]*=255,i},oR.gl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"gl")},aR.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};const{floor:ER}=Math,kR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"hcg");let i,r,a,[s,o,l]=t;l*=255;const c=255*o;if(0===o)i=r=a=l;else{360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),s/=60;const e=ER(s),t=s-e,n=l*(1-o),u=n+c*(1-t),d=n+c*t,h=n+c;switch(e){case 0:[i,r,a]=[h,d,n];break;case 1:[i,r,a]=[u,h,n];break;case 2:[i,r,a]=[n,h,d];break;case 3:[i,r,a]=[n,u,h];break;case 4:[i,r,a]=[d,n,h];break;case 5:[i,r,a]=[h,n,u]}}return[i,r,a,t.length>3?t[3]:1]},TR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,r,a]=KT(t,"rgb"),s=QT(i,r,a),o=$T(i,r,a),l=o-s,c=100*l/255,u=s/(255-l)*100;let d;return 0===l?d=Number.NaN:(i===o&&(d=(r-a)/l),r===o&&(d=2+(a-i)/l),a===o&&(d=4+(i-r)/l),d*=60,d<0&&(d+=360)),[d,c,u]};aR.prototype.hcg=function(){return TR(this._rgb)},oR.hcg=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"hcg")},rR.format.hcg=kR,rR.autodetect.push({p:1,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"hcg"))&&3===t.length)return"hcg"}});const RR=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,LR=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,PR=e=>{if(e.match(RR)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(LR)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return[t>>24&255,t>>16&255,t>>8&255,Math.round((255&t)/255*100)/100]}throw new Error("unknown hex color: ".concat(e))},{round:BR}=Math,NR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,a,s]=KT(t,"rgba"),o=qT(t)||"auto";void 0===s&&(s=1),"auto"===o&&(o=s<1?"rgba":"rgb"),i=BR(i),r=BR(r),a=BR(a);let l="000000"+(i<<16|r<<8|a).toString(16);l=l.substr(l.length-6);let c="0"+BR(255*s).toString(16);switch(c=c.substr(c.length-2),o.toLowerCase()){case"rgba":return"#".concat(l).concat(c);case"argb":return"#".concat(c).concat(l);default:return"#".concat(l)}};aR.prototype.hex=function(e){return NR(this._rgb,e)},oR.hex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"hex")},rR.format.hex=PR,rR.autodetect.push({p:4,test:function(e){if((arguments.length<=1||!(arguments.length-1))&&"string"===JT(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{cos:DR}=Math,IR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"hsi");let i,r,a,[s,o,l]=t;return isNaN(s)&&(s=0),isNaN(o)&&(o=0),s>360&&(s-=360),s<0&&(s+=360),s/=360,s<1/3?(a=(1-o)/3,i=(1+o*DR(eR*s)/DR(tR-eR*s))/3,r=1-(a+i)):s<2/3?(s-=1/3,i=(1-o)/3,r=(1+o*DR(eR*s)/DR(tR-eR*s))/3,a=1-(i+r)):(s-=2/3,r=(1-o)/3,a=(1+o*DR(eR*s)/DR(tR-eR*s))/3,i=1-(r+a)),i=VT(l*i*3),r=VT(l*r*3),a=VT(l*a*3),[255*i,255*r,255*a,t.length>3?t[3]:1]},{min:jR,sqrt:zR,acos:FR}=Math,OR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i,[r,a,s]=KT(t,"rgb");r/=255,a/=255,s/=255;const o=jR(r,a,s),l=(r+a+s)/3,c=l>0?1-o/l:0;return 0===c?i=NaN:(i=(r-a+(r-s))/2,i/=zR((r-a)*(r-a)+(r-s)*(a-s)),i=FR(i),s>a&&(i=eR-i),i/=eR),[360*i,c,l]};aR.prototype.hsi=function(){return OR(this._rgb)},oR.hsi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"hsi")},rR.format.hsi=IR,rR.autodetect.push({p:2,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"hsi"))&&3===t.length)return"hsi"}}),aR.prototype.hsl=function(){return pR(this._rgb)},oR.hsl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"hsl")},rR.format.hsl=vR,rR.autodetect.push({p:2,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"hsl"))&&3===t.length)return"hsl"}});const{floor:UR}=Math,HR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"hsv");let i,r,a,[s,o,l]=t;if(l*=255,0===o)i=r=a=l;else{360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),s/=60;const e=UR(s),t=s-e,n=l*(1-o),c=l*(1-o*t),u=l*(1-o*(1-t));switch(e){case 0:[i,r,a]=[l,u,n];break;case 1:[i,r,a]=[c,l,n];break;case 2:[i,r,a]=[n,l,u];break;case 3:[i,r,a]=[n,c,l];break;case 4:[i,r,a]=[u,n,l];break;case 5:[i,r,a]=[l,n,c]}}return[i,r,a,t.length>3?t[3]:1]},{min:GR,max:WR}=Math,VR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"rgb");let[i,r,a]=t;const s=GR(i,r,a),o=WR(i,r,a),l=o-s;let c,u,d;return d=o/255,0===o?(c=Number.NaN,u=0):(u=l/o,i===o&&(c=(r-a)/l),r===o&&(c=2+(a-i)/l),a===o&&(c=4+(i-r)/l),c*=60,c<0&&(c+=360)),[c,u,d]};aR.prototype.hsv=function(){return VR(this._rgb)},oR.hsv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"hsv")},rR.format.hsv=HR,rR.autodetect.push({p:2,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"hsv"))&&3===t.length)return"hsv"}});const XR=18,YR=.95047,JR=1,KR=1.08883,qR=.137931034,ZR=.206896552,QR=.12841855,$R=.008856452,{pow:eL}=Math,tL=e=>255*(e<=.00304?12.92*e:1.055*eL(e,1/2.4)-.055),nL=e=>e>ZR?e*e*e:QR*(e-qR),iL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"lab");const[i,r,a]=t;let s,o,l,c,u,d;return o=(i+16)/116,s=isNaN(r)?o:o+r/500,l=isNaN(a)?o:o-a/200,o=JR*nL(o),s=YR*nL(s),l=KR*nL(l),c=tL(3.2404542*s-1.5371385*o-.4985314*l),u=tL(-.969266*s+1.8760108*o+.041556*l),d=tL(.0556434*s-.2040259*o+1.0572252*l),[c,u,d,t.length>3?t[3]:1]},{pow:rL}=Math,aL=e=>(e/=255)<=.04045?e/12.92:rL((e+.055)/1.055,2.4),sL=e=>e>$R?rL(e,1/3):e/QR+qR,oL=(e,t,n)=>{e=aL(e),t=aL(t),n=aL(n);return[sL((.4124564*e+.3575761*t+.1804375*n)/YR),sL((.2126729*e+.7151522*t+.072175*n)/JR),sL((.0193339*e+.119192*t+.9503041*n)/KR)]},lL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,r,a]=KT(t,"rgb"),[s,o,l]=oL(i,r,a),c=116*o-16;return[c<0?0:c,500*(s-o),200*(o-l)]};aR.prototype.lab=function(){return lL(this._rgb)},oR.lab=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"lab")},rR.format.lab=iL,rR.autodetect.push({p:2,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"lab"))&&3===t.length)return"lab"}});const{sin:cL,cos:uL}=Math,dL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[i,r,a]=KT(t,"lch");return isNaN(a)&&(a=0),a*=nR,[i,uL(a)*r,cL(a)*r]},hL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"lch");const[i,r,a]=t,[s,o,l]=dL(i,r,a),[c,u,d]=iL(s,o,l);return[c,u,d,t.length>3?t[3]:1]},pL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=KT(t,"hcl").reverse();return hL(...i)},{sqrt:fL,atan2:mL,round:gL}=Math,vL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,r,a]=KT(t,"lab"),s=fL(r*r+a*a);let o=(mL(a,r)*iR+360)%360;return 0===gL(1e4*s)&&(o=Number.NaN),[i,s,o]},xL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,r,a]=KT(t,"rgb"),[s,o,l]=lL(i,r,a);return vL(s,o,l)};aR.prototype.lch=function(){return xL(this._rgb)},aR.prototype.hcl=function(){return xL(this._rgb).reverse()},oR.lch=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"lch")},oR.hcl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"hcl")},rR.format.lch=hL,rR.format.hcl=pL,["lch","hcl"].forEach(e=>rR.autodetect.push({p:2,test:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if("array"===JT(n=KT(n,e))&&3===n.length)return e}}));const yL={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};aR.prototype.name=function(){const e=NR(this._rgb,"rgb");for(let t of Object.keys(yL))if(yL[t]===e)return t.toLowerCase();return e},rR.format.named=e=>{if(e=e.toLowerCase(),yL[e])return PR(yL[e]);throw new Error("unknown color name: "+e)},rR.autodetect.push({p:5,test:function(e){if((arguments.length<=1||!(arguments.length-1))&&"string"===JT(e)&&yL[e.toLowerCase()])return"named"}});const bL=e=>{if("number"==JT(e)&&e>=0&&e<=16777215){return[e>>16,e>>8&255,255&e,1]}throw new Error("unknown num color: "+e)},_L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,r,a]=KT(t,"rgb");return(i<<16)+(r<<8)+a};aR.prototype.num=function(){return _L(this._rgb)},oR.num=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"num")},rR.format.num=bL,rR.autodetect.push({p:5,test:function(){if(1===arguments.length&&"number"===JT(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])>=0&&(arguments.length<=0?void 0:arguments[0])<=16777215)return"num"}});const{round:wL}=Math;aR.prototype.rgb=function(){return!1===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])?this._rgb.slice(0,3):this._rgb.slice(0,3).map(wL)},aR.prototype.rgba=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._rgb.slice(0,4).map((t,n)=>n<3?!1===e?t:wL(t):t)},oR.rgb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"rgb")},rR.format.rgb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=KT(t,"rgba");return void 0===i[3]&&(i[3]=1),i},rR.autodetect.push({p:3,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"rgba"))&&(3===t.length||4===t.length&&"number"==JT(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});const{log:SL}=Math,ML=e=>{const t=e/100;let n,i,r;return t<66?(n=255,i=t<6?0:-155.25485562709179-.44596950469579133*(i=t-2)+104.49216199393888*SL(i),r=t<20?0:.8274096064007395*(r=t-10)-254.76935184120902+115.67994401066147*SL(r)):(n=351.97690566805693+.114206453784165*(n=t-55)-40.25366309332127*SL(n),i=325.4494125711974+.07943456536662342*(i=t-50)-28.0852963507957*SL(i),r=255),[n,i,r,1]},{round:AL}=Math,CL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=KT(t,"rgb"),r=i[0],a=i[2];let s=1e3,o=4e4;let l;for(;o-s>.4;){l=.5*(o+s);const e=ML(l);e[2]/e[0]>=a/r?o=l:s=l}return AL(l)};aR.prototype.temp=aR.prototype.kelvin=aR.prototype.temperature=function(){return CL(this._rgb)},oR.temp=oR.kelvin=oR.temperature=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"temp")},rR.format.temp=rR.format.kelvin=rR.format.temperature=ML;const{pow:EL,sign:kL}=Math,TL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"lab");const[i,r,a]=t,s=EL(i+.3963377774*r+.2158037573*a,3),o=EL(i-.1055613458*r-.0638541728*a,3),l=EL(i-.0894841775*r-1.291485548*a,3);return[255*RL(4.0767416621*s-3.3077115913*o+.2309699292*l),255*RL(-1.2684380046*s+2.6097574011*o-.3413193965*l),255*RL(-.0041960863*s-.7034186147*o+1.707614701*l),t.length>3?t[3]:1]};function RL(e){const t=Math.abs(e);return t>.0031308?(kL(e)||1)*(1.055*EL(t,1/2.4)-.055):12.92*e}const{cbrt:LL,pow:PL,sign:BL}=Math,NL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,r,a]=KT(t,"rgb"),[s,o,l]=[DL(i/255),DL(r/255),DL(a/255)],c=LL(.4122214708*s+.5363325363*o+.0514459929*l),u=LL(.2119034982*s+.6806995451*o+.1073969566*l),d=LL(.0883024619*s+.2817188376*o+.6299787005*l);return[.2104542553*c+.793617785*u-.0040720468*d,1.9779984951*c-2.428592205*u+.4505937099*d,.0259040371*c+.7827717662*u-.808675766*d]};function DL(e){const t=Math.abs(e);return t<.04045?e/12.92:(BL(e)||1)*PL((t+.055)/1.055,2.4)}aR.prototype.oklab=function(){return NL(this._rgb)},oR.oklab=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"oklab")},rR.format.oklab=TL,rR.autodetect.push({p:3,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"oklab"))&&3===t.length)return"oklab"}});const IL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=KT(t,"lch");const[i,r,a]=t,[s,o,l]=dL(i,r,a),[c,u,d]=TL(s,o,l);return[c,u,d,t.length>3?t[3]:1]},jL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,r,a]=KT(t,"rgb"),[s,o,l]=NL(i,r,a);return vL(s,o,l)};aR.prototype.oklch=function(){return jL(this._rgb)},oR.oklch=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t,"oklch")},rR.format.oklch=IL,rR.autodetect.push({p:3,test:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("array"===JT(t=KT(t,"oklch"))&&3===t.length)return"oklch"}}),aR.prototype.alpha=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0!==e&&"number"===JT(e)?t?(this._rgb[3]=e,this):new aR([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},aR.prototype.clipped=function(){return this._rgb._clipped||!1},aR.prototype.darken=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.lab();return t[0]-=XR*e,new aR(t,"lab").alpha(this.alpha(),!0)},aR.prototype.brighten=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.darken(-e)},aR.prototype.darker=aR.prototype.darken,aR.prototype.brighter=aR.prototype.brighten,aR.prototype.get=function(e){const[t,n]=e.split("."),i=this[t]();if(n){const e=t.indexOf(n)-("ok"===t.substr(0,2)?2:0);if(e>-1)return i[e];throw new Error("unknown channel ".concat(n," in mode ").concat(t))}return i};const{pow:zL}=Math;aR.prototype.luminance=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgb";if(void 0!==e&&"number"===JT(e)){if(0===e)return new aR([0,0,0,this._rgb[3]],"rgb");if(1===e)return new aR([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),i=20;const r=(n,a)=>{const s=n.interpolate(a,.5,t),o=s.luminance();return Math.abs(e-o)<1e-7||!i--?s:o>e?r(n,s):r(s,a)},a=(n>e?r(new aR([0,0,0]),this):r(this,new aR([255,255,255]))).rgb();return new aR([...a,this._rgb[3]])}return FL(...this._rgb.slice(0,3))};const FL=(e,t,n)=>.2126*(e=OL(e))+.7152*(t=OL(t))+.0722*(n=OL(n)),OL=e=>(e/=255)<=.03928?e/12.92:zL((e+.055)/1.055,2.4),UL={},HL=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,i=(arguments.length<=3?void 0:arguments[3])||"lrgb";if(UL[i]||!(arguments.length<=3)&&arguments.length-3||(i=Object.keys(UL)[0]),!UL[i])throw new Error("interpolation mode ".concat(i," is not defined"));return"object"!==JT(e)&&(e=new aR(e)),"object"!==JT(t)&&(t=new aR(t)),UL[i](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};aR.prototype.mix=aR.prototype.interpolate=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return HL(this,e,t,...i)},aR.prototype.premultiply=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new aR([t[0]*n,t[1]*n,t[2]*n,n],"rgb")},aR.prototype.saturate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.lch();return t[1]+=XR*e,t[1]<0&&(t[1]=0),new aR(t,"lch").alpha(this.alpha(),!0)},aR.prototype.desaturate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.saturate(-e)},aR.prototype.set=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[i,r]=e.split("."),a=this[i]();if(r){const e=i.indexOf(r)-("ok"===i.substr(0,2)?2:0);if(e>-1){if("string"==JT(t))switch(t.charAt(0)){case"+":case"-":a[e]+=+t;break;case"*":a[e]*=+t.substr(1);break;case"/":a[e]/=+t.substr(1);break;default:a[e]=+t}else{if("number"!==JT(t))throw new Error("unsupported value for Color.set");a[e]=t}const r=new aR(a,i);return n?(this._rgb=r._rgb,this):r}throw new Error("unknown channel ".concat(r," in mode ").concat(i))}return a},aR.prototype.tint=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return HL(this,"white",e,...n)},aR.prototype.shade=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return HL(this,"black",e,...n)};const GL=(e,t,n)=>{const i=e._rgb,r=t._rgb;return new aR(i[0]+n*(r[0]-i[0]),i[1]+n*(r[1]-i[1]),i[2]+n*(r[2]-i[2]),"rgb")};UL.rgb=GL;const{sqrt:WL,pow:VL}=Math,XL=(e,t,n)=>{const[i,r,a]=e._rgb,[s,o,l]=t._rgb;return new aR(WL(VL(i,2)*(1-n)+VL(s,2)*n),WL(VL(r,2)*(1-n)+VL(o,2)*n),WL(VL(a,2)*(1-n)+VL(l,2)*n),"rgb")};UL.lrgb=XL;const YL=(e,t,n)=>{const i=e.lab(),r=t.lab();return new aR(i[0]+n*(r[0]-i[0]),i[1]+n*(r[1]-i[1]),i[2]+n*(r[2]-i[2]),"lab")};UL.lab=YL;const JL=(e,t,n,i)=>{let r,a,s,o,l,c,u,d,h,p,f,m;return"hsl"===i?(r=e.hsl(),a=t.hsl()):"hsv"===i?(r=e.hsv(),a=t.hsv()):"hcg"===i?(r=e.hcg(),a=t.hcg()):"hsi"===i?(r=e.hsi(),a=t.hsi()):"lch"===i||"hcl"===i?(i="hcl",r=e.hcl(),a=t.hcl()):"oklch"===i&&(r=e.oklch().reverse(),a=t.oklch().reverse()),"h"!==i.substr(0,1)&&"oklch"!==i||([s,l,u]=r,[o,c,d]=a),isNaN(s)||isNaN(o)?isNaN(s)?isNaN(o)?p=Number.NaN:(p=o,1!=u&&0!=u||"hsv"==i||(h=c)):(p=s,1!=d&&0!=d||"hsv"==i||(h=l)):(m=o>s&&o-s>180?o-(s+360):o<s&&s-o>180?o+360-s:o-s,p=s+n*m),void 0===h&&(h=l+n*(c-l)),f=u+n*(d-u),new aR("oklch"===i?[f,h,p]:[p,h,f],i)},KL=(e,t,n)=>JL(e,t,n,"lch");UL.lch=KL,UL.hcl=KL;const qL=(e,t,n)=>{const i=e.num(),r=t.num();return new aR(i+n*(r-i),"num")};UL.num=qL;const ZL=(e,t,n)=>JL(e,t,n,"hcg");UL.hcg=ZL;const QL=(e,t,n)=>JL(e,t,n,"hsi");UL.hsi=QL;const $L=(e,t,n)=>JL(e,t,n,"hsl");UL.hsl=$L;const eP=(e,t,n)=>JL(e,t,n,"hsv");UL.hsv=eP;const tP=(e,t,n)=>{const i=e.oklab(),r=t.oklab();return new aR(i[0]+n*(r[0]-i[0]),i[1]+n*(r[1]-i[1]),i[2]+n*(r[2]-i[2]),"oklab")};UL.oklab=tP;const nP=(e,t,n)=>JL(e,t,n,"oklch");UL.oklch=nP;const{pow:iP,sqrt:rP,PI:aP,cos:sP,sin:oP,atan2:lP}=Math,cP=(e,t)=>{const n=e.length,i=[0,0,0,0];for(let r=0;r<e.length;r++){const a=e[r],s=t[r]/n,o=a._rgb;i[0]+=iP(o[0],2)*s,i[1]+=iP(o[1],2)*s,i[2]+=iP(o[2],2)*s,i[3]+=o[3]*s}return i[0]=rP(i[0]),i[1]=rP(i[1]),i[2]=rP(i[2]),i[3]>.9999999&&(i[3]=1),new aR(XT(i))},{pow:uP}=Math;function dP(e){let t="rgb",n=oR("#ccc"),i=0,r=[0,1],a=[],s=[0,0],o=!1,l=[],c=!1,u=0,d=1,h=!1,p={},f=!0,m=1;const g=function(e){if((e=e||["#fff","#000"])&&"string"===JT(e)&&oR.brewer&&oR.brewer[e.toLowerCase()]&&(e=oR.brewer[e.toLowerCase()]),"array"===JT(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(let t=0;t<e.length;t++)e[t]=oR(e[t]);a.length=0;for(let t=0;t<e.length;t++)a.push(t/(e.length-1))}return b(),l=e};let v=e=>e,x=e=>e;const y=function(e,i){let r,c;if(null==i&&(i=!1),isNaN(e)||null===e)return n;if(i)c=e;else if(o&&o.length>2){const t=function(e){if(null!=o){const t=o.length-1;let n=0;for(;n<t&&e>=o[n];)n++;return n-1}return 0}(e);c=t/(o.length-2)}else c=d!==u?(e-u)/(d-u):1;c=x(c),i||(c=v(c)),1!==m&&(c=uP(c,m)),c=s[0]+c*(1-s[0]-s[1]),c=VT(c,0,1);const h=Math.floor(1e4*c);if(f&&p[h])r=p[h];else{if("array"===JT(l))for(let e=0;e<a.length;e++){const n=a[e];if(c<=n){r=l[e];break}if(c>=n&&e===a.length-1){r=l[e];break}if(c>n&&c<a[e+1]){c=(c-n)/(a[e+1]-n),r=oR.interpolate(l[e],l[e+1],c,t);break}}else"function"===JT(l)&&(r=l(c));f&&(p[h]=r)}return r};var b=()=>p={};g(e);const _=function(e){const t=oR(y(e));return c&&t[c]?t[c]():t};return _.classes=function(e){if(null!=e){if("array"===JT(e))o=e,r=[e[0],e[e.length-1]];else{const t=oR.analyze(r);o=0===e?[t.min,t.max]:oR.limits(t,"e",e)}return _}return o},_.domain=function(e){if(!arguments.length)return r;u=e[0],d=e[e.length-1],a=[];const t=l.length;if(e.length===t&&u!==d)for(let n of Array.from(e))a.push((n-u)/(d-u));else{for(let e=0;e<t;e++)a.push(e/(t-1));if(e.length>2){const t=e.map((t,n)=>n/(e.length-1)),n=e.map(e=>(e-u)/(d-u));n.every((e,n)=>t[n]===e)||(x=e=>{if(e<=0||e>=1)return e;let i=0;for(;e>=n[i+1];)i++;const r=(e-n[i])/(n[i+1]-n[i]);return t[i]+r*(t[i+1]-t[i])})}}return r=[u,d],_},_.mode=function(e){return arguments.length?(t=e,b(),_):t},_.range=function(e,t){return g(e),_},_.out=function(e){return c=e,_},_.spread=function(e){return arguments.length?(i=e,_):i},_.correctLightness=function(e){return null==e&&(e=!0),h=e,b(),v=h?function(e){const t=y(0,!0).lab()[0],n=y(1,!0).lab()[0],i=t>n;let r=y(e,!0).lab()[0];const a=t+(n-t)*e;let s=r-a,o=0,l=1,c=20;for(;Math.abs(s)>.01&&c-- >0;)(function(){i&&(s*=-1),s<0?(o=e,e+=.5*(l-e)):(l=e,e+=.5*(o-e)),r=y(e,!0).lab()[0],s=r-a})();return e}:e=>e,_},_.padding=function(e){return null!=e?("number"===JT(e)&&(e=[e,e]),s=e,_):s},_.colors=function(t,n){arguments.length<2&&(n="hex");let i=[];if(0===arguments.length)i=l.slice(0);else if(1===t)i=[_(.5)];else if(t>1){const e=r[0],n=r[1]-e;i=function(e,t,n){let i=[],r=e<t,a=n?r?t+1:t-1:t;for(let s=e;r?s<a:s>a;r?s++:s--)i.push(s);return i}(0,t,!1).map(i=>_(e+i/(t-1)*n))}else{e=[];let t=[];if(o&&o.length>2)for(let e=1,n=o.length,i=1<=n;i?e<n:e>n;i?e++:e--)t.push(.5*(o[e-1]+o[e]));else t=r;i=t.map(e=>_(e))}return oR[n]&&(i=i.map(e=>e[n]())),i},_.cache=function(e){return null!=e?(f=e,_):f},_.gamma=function(e){return null!=e?(m=e,_):m},_.nodata=function(e){return null!=e?(n=oR(e),_):n},_}const hP=(e,t,n)=>{if(!hP[n])throw new Error("unknown blend mode "+n);return hP[n](e,t)},pP=e=>(t,n)=>{const i=oR(n).rgb(),r=oR(t).rgb();return oR.rgb(e(i,r))},fP=e=>(t,n)=>{const i=[];return i[0]=e(t[0],n[0]),i[1]=e(t[1],n[1]),i[2]=e(t[2],n[2]),i};hP.normal=pP(fP(e=>e)),hP.multiply=pP(fP((e,t)=>e*t/255)),hP.screen=pP(fP((e,t)=>255*(1-(1-e/255)*(1-t/255)))),hP.overlay=pP(fP((e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)))),hP.darken=pP(fP((e,t)=>e>t?t:e)),hP.lighten=pP(fP((e,t)=>e>t?e:t)),hP.dodge=pP(fP((e,t)=>255===e||(e=t/255*255/(1-e/255))>255?255:e)),hP.burn=pP(fP((e,t)=>255*(1-(1-t/255)/(e/255))));const mP=hP,{pow:gP,sin:vP,cos:xP}=Math;const{floor:yP,random:bP}=Math,{log:_P,pow:wP,floor:SP,abs:MP}=Math;function AP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===JT(e)&&(e=Object.values(e)),e.forEach(e=>{t&&"object"===JT(e)&&(e=e[t]),void 0===e||null===e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(e,t)=>CP(n,e,t),n}function CP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"equal",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;"array"==JT(e)&&(e=AP(e));const{min:i,max:r}=e,a=e.values.sort((e,t)=>e-t);if(1===n)return[i,r];const s=[];if("c"===t.substr(0,1)&&(s.push(i),s.push(r)),"e"===t.substr(0,1)){s.push(i);for(let e=1;e<n;e++)s.push(i+e/n*(r-i));s.push(r)}else if("l"===t.substr(0,1)){if(i<=0)throw new Error("Logarithmic scales are only possible for values > 0");const e=Math.LOG10E*_P(i),t=Math.LOG10E*_P(r);s.push(i);for(let i=1;i<n;i++)s.push(wP(10,e+i/n*(t-e)));s.push(r)}else if("q"===t.substr(0,1)){s.push(i);for(let e=1;e<n;e++){const t=(a.length-1)*e/n,i=SP(t);if(i===t)s.push(a[i]);else{const e=t-i;s.push(a[i]*(1-e)+a[i+1]*e)}}s.push(r)}else if("k"===t.substr(0,1)){let e;const t=a.length,o=new Array(t),l=new Array(n);let c=!0,u=0,d=null;d=[],d.push(i);for(let a=1;a<n;a++)d.push(i+a/n*(r-i));for(d.push(r);c;){for(let e=0;e<n;e++)l[e]=0;for(let e=0;e<t;e++){const t=a[e];let i,r=Number.MAX_VALUE;for(let a=0;a<n;a++){const n=MP(d[a]-t);n<r&&(r=n,i=a),l[i]++,o[e]=i}}const i=new Array(n);for(let e=0;e<n;e++)i[e]=null;for(let n=0;n<t;n++)e=o[n],null===i[e]?i[e]=a[n]:i[e]+=a[n];for(let e=0;e<n;e++)i[e]*=1/l[e];c=!1;for(let e=0;e<n;e++)if(i[e]!==d[e]){c=!0;break}d=i,u++,u>200&&(c=!1)}const h={};for(let i=0;i<n;i++)h[i]=[];for(let n=0;n<t;n++)e=o[n],h[e].push(a[n]);let p=[];for(let i=0;i<n;i++)p.push(h[i][0]),p.push(h[i][h[i].length-1]);p=p.sort((e,t)=>e-t),s.push(p[0]);for(let n=1;n<p.length;n+=2){const e=p[n];isNaN(e)||-1!==s.indexOf(e)||s.push(e)}}return s}const{sqrt:EP,pow:kP,min:TP,max:RP,atan2:LP,abs:PP,cos:BP,sin:NP,exp:DP,PI:IP}=Math;const jP={cool:()=>dP([oR.hsl(180,1,.9),oR.hsl(250,.7,.4)]),hot:()=>dP(["#000","#f00","#ff0","#fff"]).mode("rgb")},zP={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};for(let n of Object.keys(zP))zP[n.toLowerCase()]=zP[n];const FP=zP;Object.assign(oR,{average:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lrgb",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=e.length;n||(n=Array.from(new Array(i)).map(()=>1));const r=i/n.reduce(function(e,t){return e+t});if(n.forEach((e,t)=>{n[t]*=r}),e=e.map(e=>new aR(e)),"lrgb"===t)return cP(e,n);const a=e.shift(),s=a.get(t),o=[];let l=0,c=0;for(let d=0;d<s.length;d++)if(s[d]=(s[d]||0)*n[0],o.push(isNaN(s[d])?0:n[0]),"h"===t.charAt(d)&&!isNaN(s[d])){const e=s[d]/180*aP;l+=sP(e)*n[0],c+=oP(e)*n[0]}let u=a.alpha()*n[0];e.forEach((e,i)=>{const r=e.get(t);u+=e.alpha()*n[i+1];for(let a=0;a<s.length;a++)if(!isNaN(r[a]))if(o[a]+=n[i+1],"h"===t.charAt(a)){const e=r[a]/180*aP;l+=sP(e)*n[i+1],c+=oP(e)*n[i+1]}else s[a]+=r[a]*n[i+1]});for(let d=0;d<s.length;d++)if("h"===t.charAt(d)){let e=lP(c/o[d],l/o[d])/aP*180;for(;e<0;)e+=360;for(;e>=360;)e-=360;s[d]=e}else s[d]=s[d]/o[d];return u/=i,new aR(s,t).alpha(u>.99999?1:u,!0)},bezier:e=>{const t=function(e){let t,n,i,r;if(2===(e=e.map(e=>new aR(e))).length)[n,i]=e.map(e=>e.lab()),t=function(e){const t=[0,1,2].map(t=>n[t]+e*(i[t]-n[t]));return new aR(t,"lab")};else if(3===e.length)[n,i,r]=e.map(e=>e.lab()),t=function(e){const t=[0,1,2].map(t=>(1-e)*(1-e)*n[t]+2*(1-e)*e*i[t]+e*e*r[t]);return new aR(t,"lab")};else if(4===e.length){let a;[n,i,r,a]=e.map(e=>e.lab()),t=function(e){const t=[0,1,2].map(t=>(1-e)*(1-e)*(1-e)*n[t]+3*(1-e)*(1-e)*e*i[t]+3*(1-e)*e*e*r[t]+e*e*e*a[t]);return new aR(t,"lab")}}else{if(!(e.length>=5))throw new RangeError("No point in running bezier with only one color.");{let n,i,r;n=e.map(e=>e.lab()),r=e.length-1,i=function(e){let t=[1,1];for(let n=1;n<e;n++){let e=[1];for(let n=1;n<=t.length;n++)e[n]=(t[n]||0)+t[n-1];t=e}return t}(r),t=function(e){const t=1-e,a=[0,1,2].map(a=>n.reduce((n,s,o)=>n+i[o]*t**(r-o)*e**o*s[a],0));return new aR(a,"lab")}}}return t}(e);return t.scale=()=>dP(t),t},blend:mP,cubehelix:function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,1],s=0;"array"===JT(a)?e=a[1]-a[0]:(e=0,a=[a,a]);const o=function(o){const l=eR*((t+120)/360+n*o),c=gP(a[0]+e*o,r),u=(0!==s?i[0]+o*s:i)*c*(1-c)/2,d=xP(l),h=vP(l);return oR(XT([255*(c+u*(-.14861*d+1.78277*h)),255*(c+u*(-.29227*d-.90649*h)),255*(c+u*(1.97294*d)),1]))};return o.start=function(e){return null==e?t:(t=e,o)},o.rotations=function(e){return null==e?n:(n=e,o)},o.gamma=function(e){return null==e?r:(r=e,o)},o.hue=function(e){return null==e?i:(i=e,"array"===JT(i)?(s=i[1]-i[0],0===s&&(i=i[1])):s=0,o)},o.lightness=function(t){return null==t?a:("array"===JT(t)?(a=t,e=t[1]-t[0]):(a=[t,t],e=0),o)},o.scale=()=>oR.scale(o),o.hue(i),o},mix:HL,interpolate:HL,random:()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789abcdef".charAt(yP(16*bP()));return new aR(e,"hex")},scale:dP,analyze:AP,contrast:(e,t)=>{e=new aR(e),t=new aR(t);const n=e.luminance(),i=t.luminance();return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)},deltaE:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;var a=function(e){return 360*e/(2*IP)},s=function(e){return 2*IP*e/360};e=new aR(e),t=new aR(t);const[o,l,c]=Array.from(e.lab()),[u,d,h]=Array.from(t.lab()),p=(o+u)/2,f=(EP(kP(l,2)+kP(c,2))+EP(kP(d,2)+kP(h,2)))/2,m=.5*(1-EP(kP(f,7)/(kP(f,7)+kP(25,7)))),g=l*(1+m),v=d*(1+m),x=EP(kP(g,2)+kP(c,2)),y=EP(kP(v,2)+kP(h,2)),b=(x+y)/2,_=a(LP(c,g)),w=a(LP(h,v)),S=_>=0?_:_+360,M=w>=0?w:w+360,A=PP(S-M)>180?(S+M+360)/2:(S+M)/2,C=1-.17*BP(s(A-30))+.24*BP(s(2*A))+.32*BP(s(3*A+6))-.2*BP(s(4*A-63));let E=M-S;E=PP(E)<=180?E:M<=S?E+360:E-360,E=2*EP(x*y)*NP(s(E)/2);const k=u-o,T=y-x,R=1+.015*kP(p-50,2)/EP(20+kP(p-50,2)),L=1+.045*b,P=1+.015*b*C,B=30*DP(-kP((A-275)/25,2)),N=-(2*EP(kP(b,7)/(kP(b,7)+kP(25,7))))*NP(2*s(B)),D=EP(kP(k/(n*R),2)+kP(T/(i*L),2)+kP(E/(r*P),2)+N*(T/(i*L))*(E/(r*P)));return RP(0,TP(100,D))},distance:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lab";e=new aR(e),t=new aR(t);const i=e.get(n),r=t.get(n);let a=0;for(let s in i){const e=(i[s]||0)-(r[s]||0);a+=e*e}return Math.sqrt(a)},limits:CP,valid:function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aR(...t),!0}catch(rN){return!1}},scales:jP,input:rR,colors:yL,brewer:FP});const OP=oR;var UP={d:function(e,t){for(var n in t)UP.o(t,n)&&!UP.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},HP={};UP.d(HP,{Z:function(){return FB},B:function(){return eB}});var GP=(e=>{var t={};return UP.d(t,e),t})({default:()=>IT}),WP=(e=>{var t={};return UP.d(t,e),t})({default:()=>zT}),VP=(e=>{var t={};return UP.d(t,e),t})({default:()=>OT}),XP=(e=>{var t={};return UP.d(t,e),t})({default:()=>UT}),YP=(e=>{var t={};return UP.d(t,e),t})({default:()=>HT}),JP=(e=>{var t={};return UP.d(t,e),t})({default:()=>o}),KP=(e=>{var t={};return UP.d(t,e),t})({Component:()=>t.Component,Fragment:()=>t.Fragment,default:()=>t}),qP=(e=>{var t={};return UP.d(t,e),t})({default:()=>WT()}),ZP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.avoidList,i=void 0===n?[]:n,r=t.usually,a=void 0===r?[]:r,s=new Set(i.filter(function(e){return Boolean(e)})),o=e.filter(function(e){return!s.has(e)}),l=a.filter(Boolean).reduce(function(e,t){return e.concat(new Array(15).fill(t))},[]),c=(o=o.concat(l)).length;return o[Math.floor(Math.random()*c)]},QP={sex:["man","woman"],faceColor:["#F9C9B6","#AC6651"],earSize:["small","big"],hairColor:["#000","#fff","#77311D","#FC909F","#D2EFF3","#506AF4","#F48150"],hairStyleMan:["normal","thick","mohawk"],hairStyleWoman:["normal","womanLong","womanShort"],hatColor:["#000","#fff","#77311D","#FC909F","#D2EFF3","#506AF4","#F48150"],hatStyle:["beanie","turban","none"],eyeBrowWoman:["up","upWoman"],eyeStyle:["circle","oval","smile"],glassesStyle:["round","square","none"],noseStyle:["short","long","round"],mouthStyle:["laugh","smile","peace"],shirtStyle:["hoody","short","polo"],shirtColor:["#9287FF","#6BD9E9","#FC909F","#F4D150","#77311D"],bgColor:["#9287FF","#6BD9E9","#FC909F","#F4D150","#E0DDFF","#D2EFF3","#FFEDEF","#FFEBA4","#506AF4","#F48150","#74D153"],gradientBgColor:["linear-gradient(45deg, #178bff 0%, #ff6868 100%)","linear-gradient(45deg, #176fff 0%, #68ffef 100%)","linear-gradient(45deg, #ff1717 0%, #ffd368 100%)","linear-gradient(90deg, #36cd1c 0%, #68deff 100%)","linear-gradient(45deg, #3e1ccd 0%, #ff6871 100%)","linear-gradient(45deg, #1729ff 0%, #ff56f7 100%)","linear-gradient(45deg, #56b5f0 0%, #45ccb5 100%)"]},$P=function(e,t,n){var i=n&&n.avoidList||[],r=n&&n.usually||[],a=new Set(i),s=QP[t].filter(function(e){return!a.has(e)});return(s=r.filter(Boolean).reduce(function(e,t){return e.concat(new Array(15).fill(t))},[]).concat(s))[e%s.length]},eB=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="string"==typeof e,n=t&&function(e){if(0===e.length)return 0;for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}(e)||0,i={};i.sex=t?$P(n,"sex"):e.sex||ZP(QP.sex),i.faceColor=t?$P(n,"faceColor"):e.faceColor||ZP(QP.faceColor),i.earSize=t?$P(n,"earSize"):e.earSize||ZP(QP.earSize),i.eyeStyle=t?$P(n,"eyeStyle"):e.eyeStyle||ZP(QP.eyeStyle),i.noseStyle=t?$P(n,"noseStyle"):e.noseStyle||ZP(QP.noseStyle),i.mouthStyle=t?$P(n,"mouthStyle"):e.mouthStyle||ZP(QP.mouthStyle),i.shirtStyle=t?$P(n,"shirtStyle"):e.shirtStyle||ZP(QP.shirtStyle),i.glassesStyle=t?$P(n,"glassesStyle",{usually:["none"]}):e.glassesStyle||ZP(QP.glassesStyle,{usually:["none"]});var r=[],a=[];if(t||!e.hairColor)switch(i.sex){case"woman":r=i.faceColor===QP.faceColor[1]&&["#77311D"]||[];break;case"man":a=["#000"]}if(i.hairColor=t?$P(n,"hairColor",{avoidList:r,usually:a}):e.hairColor||ZP(QP.hairColor,{avoidList:r,usually:a}),t||!e.hairStyle)switch(i.sex){case"man":i.hairStyle=t?$P(n,"hairStyleMan",{usually:["normal","thick"]}):ZP(QP.hairStyleMan,{usually:["normal","thick"]});break;case"woman":i.hairStyle=t?$P(n,"hairStyleWoman"):ZP(QP.hairStyleWoman)}else i.hairStyle=e.hairStyle;i.hatStyle=t?$P(n,"hatStyle",{usually:["none"]}):e.hatStyle||ZP(QP.hatStyle,{usually:["none"]}),i.hatColor=t?$P(n,"hatColor"):e.hatColor||ZP(QP.hatColor);var s="none"===i.hatStyle&&i.hairColor||i.hatColor;return!t&&e.eyeBrowStyle?i.eyeBrowStyle=e.eyeBrowStyle:i.eyeBrowStyle="woman"===i.sex?t?$P(n,"eyeBrowWoman"):ZP(QP.eyeBrowWoman):"up",i.shirtColor=t?$P(n,"shirtColor",{avoidList:[s]}):e.shirtColor||ZP(QP.shirtColor,{avoidList:[s]}),!t&&e.isGradient?i.bgColor=e.bgColor||ZP(QP.gradientBgColor):i.bgColor=t?$P(n,"bgColor",{avoidList:[s,i.shirtColor]}):e.bgColor||ZP(QP.bgColor,{avoidList:[s,i.shirtColor]}),i};function tB(e){var t=e.color;return KP.default.createElement("svg",{style:{width:"100%",height:"100%",left:0,top:0,position:"absolute"},width:"200",height:"320",viewBox:"0 0 200 320",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("g",{clipPath:"url(#clip0)"},KP.default.createElement("path",{d:"M154 319.5C139.6 299.5 128.333 260.834 127 241.5L58.5 212L30 319.5H154Z",fill:t,stroke:"black",strokeWidth:"4"}),KP.default.createElement("mask",{id:"mask-id",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"30",y:"212",width:"124",height:"118"},KP.default.createElement("path",{d:"M154 329.5C139.6 309.5 128.333 260.834 127 241.5L58.5 212L30 329.5H154Z",fill:t})),KP.default.createElement("g",{mask:"url(#".concat("mask-id",")")},KP.default.createElement("ellipse",{cx:"124",cy:"210",rx:"59",ry:"54",fill:"black"})),KP.default.createElement("mask",{id:"path-id",fill:"white"},KP.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M183.886 150.917C183.859 150.801 183.831 150.685 183.803 150.569C183.776 150.454 183.748 150.338 183.719 150.222L167.323 81.7855C167.306 81.7177 167.29 81.6499 167.274 81.5821C167.258 81.5142 167.242 81.4465 167.225 81.3787L167.152 81.0752L167.151 81.0755C156.933 39.6308 115.156 14.1472 73.5821 24.1081C32.0078 34.0689 6.31547 75.7174 15.9883 117.293L15.9863 117.293L32.9776 188.211L32.9916 188.208C43.5944 229.112 85.0616 254.149 126.329 244.261C167.597 234.374 193.216 193.264 184.131 151.996L184.144 151.993L183.886 150.917Z"})),KP.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M183.886 150.917C183.859 150.801 183.831 150.685 183.803 150.569C183.776 150.454 183.748 150.338 183.719 150.222L167.323 81.7855C167.306 81.7177 167.29 81.6499 167.274 81.5821C167.258 81.5142 167.242 81.4465 167.225 81.3787L167.152 81.0752L167.151 81.0755C156.933 39.6308 115.156 14.1472 73.5821 24.1081C32.0078 34.0689 6.31547 75.7174 15.9883 117.293L15.9863 117.293L32.9776 188.211L32.9916 188.208C43.5944 229.112 85.0616 254.149 126.329 244.261C167.597 234.374 193.216 193.264 184.131 151.996L184.144 151.993L183.886 150.917Z",fill:t}),KP.default.createElement("path",{d:"M183.886 150.917L179.992 151.831L179.994 151.84L179.996 151.849L183.886 150.917ZM183.719 150.222L179.83 151.154L179.832 151.163L179.834 151.172L183.719 150.222ZM167.323 81.7855L163.43 82.7076L163.433 82.7175L167.323 81.7855ZM167.274 81.5821L163.384 82.5141L163.384 82.5142L167.274 81.5821ZM167.225 81.3787L163.335 82.3108L163.338 82.321L167.225 81.3787ZM167.152 81.0752L171.042 80.1432L170.111 76.255L166.222 77.1849L167.152 81.0752ZM167.151 81.0755L163.267 82.0331L164.218 85.8897L168.081 84.9659L167.151 81.0755ZM73.5821 24.1081L72.6501 20.2182L73.5821 24.1081ZM15.9883 117.293L16.9223 121.182L20.7842 120.255L19.8842 116.386L15.9883 117.293ZM15.9863 117.293L15.0523 113.404L11.1649 114.337L12.0964 118.225L15.9863 117.293ZM32.9776 188.211L29.0877 189.143L30.0201 193.035L33.9113 192.101L32.9776 188.211ZM32.9916 188.208L36.8636 187.204L35.8779 183.401L32.058 184.318L32.9916 188.208ZM126.329 244.261L125.397 240.371H125.397L126.329 244.261ZM184.131 151.996L183.2 148.106L179.381 149.021L180.225 152.856L184.131 151.996ZM184.144 151.993L185.075 155.883L188.966 154.951L188.034 151.061L184.144 151.993ZM187.78 150.002C187.751 149.881 187.722 149.759 187.693 149.637L179.914 151.502C179.94 151.611 179.966 151.721 179.992 151.831L187.78 150.002ZM187.693 149.637C187.664 149.516 187.635 149.395 187.605 149.273L179.834 151.172C179.861 151.281 179.887 151.391 179.914 151.502L187.693 149.637ZM163.433 82.7175L179.83 151.154L187.609 149.29L171.212 80.8535L163.433 82.7175ZM171.215 80.8634C171.198 80.7928 171.181 80.7216 171.164 80.65L163.384 82.5142C163.4 82.5781 163.415 82.6425 163.43 82.7076L171.215 80.8634ZM171.164 80.65C171.147 80.579 171.13 80.5078 171.113 80.4364L163.338 82.321C163.353 82.3851 163.369 82.4494 163.384 82.5141L171.164 80.65ZM163.262 82.0072L163.335 82.3108L171.115 80.4467L171.042 80.1432L163.262 82.0072ZM168.081 84.9659L168.083 84.9655L166.222 77.1849L166.221 77.1852L168.081 84.9659ZM171.035 80.118C160.291 36.5398 116.364 9.74466 72.6501 20.2182L74.514 27.998C113.949 18.5498 153.575 42.7219 163.267 82.0331L171.035 80.118ZM72.6501 20.2182C28.936 30.6917 1.92157 74.4836 12.0923 118.199L19.8842 116.386C10.7094 76.9513 35.0796 37.4461 74.514 27.998L72.6501 20.2182ZM16.9204 121.183L16.9223 121.182L15.0542 113.403L15.0523 113.404L16.9204 121.183ZM36.8676 187.279L19.8763 116.361L12.0964 118.225L29.0877 189.143L36.8676 187.279ZM32.058 184.318L32.044 184.322L33.9113 192.101L33.9252 192.097L32.058 184.318ZM29.1195 189.211C40.2685 232.223 83.8693 258.548 127.261 248.151L125.397 240.371C86.2539 249.75 46.9204 226.002 36.8636 187.204L29.1195 189.211ZM127.261 248.151C170.653 237.755 197.591 194.53 188.038 151.136L180.225 152.856C188.842 191.999 164.541 230.993 125.397 240.371L127.261 248.151ZM183.212 148.103L183.2 148.106L185.063 155.886L185.075 155.883L183.212 148.103ZM179.996 151.849L180.254 152.925L188.034 151.061L187.776 149.985L179.996 151.849Z",fill:"black",mask:"url(#".concat("path-id",")")})),KP.default.createElement("defs",null,KP.default.createElement("clipPath",{id:"clip0"},KP.default.createElement("rect",{width:"200",height:"320",fill:"white"}))))}function nB(e){var t=e.color;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"20%",width:"94%",height:"81%",left:"-0.5%"},width:"240",height:"270",viewBox:"0 0 240 270",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M123.788 17.4887L123.864 17.4969L123.941 17.4991C150.61 18.2835 171.342 28.8969 186.013 41.8493C200.069 54.2583 208.463 68.7231 211.2 78.5817C207.14 80.8991 200.185 82.8931 191.315 84.5285C181.639 86.3123 170.022 87.615 158.168 88.5436C134.462 90.4007 109.978 90.7491 98.5428 90.5005L92.4699 90.3685L97.2764 94.0826C99.774 96.0125 103.099 97.3557 106.615 98.3003C110.156 99.2517 114.034 99.8354 117.746 100.167C121.57 100.509 125.299 100.589 128.387 100.51C117.8 108.672 104.325 114.948 91.0384 119.6C75.6922 124.973 60.7685 128.12 51.2093 129.521L49.0601 129.836L49.551 131.952C52.8984 146.381 59.0518 171.603 63.179 188.519C65.01 196.025 66.4422 201.895 67.0537 204.463C68.1379 209.017 71.5518 215.508 75.4484 221.491C79.0412 227.008 83.2329 232.38 86.7703 235.687L78.9322 267.5H49.3714C57.7091 254.787 59.469 240.097 57.7689 224.517C55.9286 207.653 50.0074 189.513 43.7659 171.35C43.1514 169.562 42.5339 167.774 41.9165 165.986C36.2326 149.527 30.5644 133.113 27.4936 117.382C24.0922 99.9582 23.9407 83.6514 30.3264 69.3137C40.6653 46.0999 58.9929 32.6198 77.3255 25.1911C95.701 17.745 113.945 16.4399 123.788 17.4887Z",fill:t||"#171921",stroke:"#171921",strokeWidth:"4"}))}function iB(e){var t=e.color,n=e.colorRandom;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"40.2%",width:"93.5%",height:"64%"},width:"240",height:"200",viewBox:"0 0 240 200",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M210.177 51.3965C201.855 91.2936 103.499 96.8962 83.6772 96.8962C31.6548 102.823 56.6248 165.262 66.1772 196.396C58.6772 197.396 59.6772 206.396 30.6772 134.896C7.47724 77.6964 73.1831 42.8337 121.999 30.9995C170.815 19.1653 189.499 2.50195 189.499 2.50195C210.177 11 215.116 27.7185 210.177 51.3965Z",fill:n&&t||"black",stroke:n&&t||"black"}),KP.default.createElement("path",{d:"M205.134 124.947L189.316 71.5069L199.354 62.3644C210.109 99.4523 210.601 120.988 205.134 124.947Z",fill:n&&t||"black",stroke:n&&t||"black"}),KP.default.createElement("path",{d:"M80 170C74.4 142.8 60.3333 147.667 51 149L41 105L81.5844 96.5056C82.3363 96.2656 83.1408 96.0955 84 96L81.5844 96.5056C63.4332 102.299 75.9565 148.796 91 168L80 170Z",fill:n&&t||"black",stroke:n&&t||"black",strokeWidth:"3"}),KP.default.createElement("path",{d:"M24.9887 67.3632C33.8341 62.9091 44.2805 65.4873 48.3981 67.3331L36.6273 82.2134C39.6625 77.3568 30.1329 70.2897 24.9887 67.3632Z",fill:n&&t||"black"}),KP.default.createElement("path",{d:"M10 84.4996C21.6 77.6996 32.8333 79.9996 37 81.9996L32.5 97.5C31.3 89.1 17 85.3331 10 84.4996Z",fill:n&&t||"black"}))}var rB=(e=>{var t={};return UP.d(t,e),t})({default:()=>OP});function aB(e){var t=e.color,n=e.colorRandom,i=n&&t||"#171921",r=n&&(0,rB.default)(t).brighten(2)||"#717376";return KP.default.createElement("svg",{style:{position:"absolute",bottom:"40.8%",width:"97.6%",height:"63.5%",left:"-1.8%"},width:"240",height:"203",viewBox:"0 0 240 203",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{opacity:"0.35",d:"M187.986 80.1756C179.986 73.7756 166.153 73.1758 160.486 73.6758L152.486 47.1758C166.086 50.3758 184.486 71.1758 187.986 80.1756Z",fill:r,stroke:r,strokeWidth:"1"}),KP.default.createElement("path",{d:"M85.7923 14.7636C85.7923 14.7636 91.5301 10.802 115.746 4.70097C139.963 -1.40007 148.792 0.983287 148.792 0.983287L160.581 73.815C160.581 73.815 152.542 73.6416 132.548 78.0085C112.555 82.3754 102.986 87.6748 102.986 87.6748L85.7923 14.7636Z",fill:i}),KP.default.createElement("path",{d:"M48.9855 89.6758C42.1855 48.0758 72.3188 21.5091 85.9855 14.1758L102.985 87.6758C83.7855 48.0758 57.6521 72.5091 48.9855 89.6758Z",fill:i}),KP.default.createElement("path",{opacity:"0.35",d:"M67.4855 133.675C60.2855 106.475 89.4855 91.8415 102.985 87.6749C95.9855 71.3415 79.9854 56.6749 60.4854 74.6756C42.4854 105.175 49.4855 128.676 54.9855 146.675L67.4855 133.675Z",fill:r,stroke:r,strokeWidth:"1"}))}function sB(e){var t=e.color;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"-2.2%",width:"97%",height:"100%"},width:"306",height:"331",viewBox:"0 0 306 331",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M209.76 327.932C209.271 327.902 208.865 327.872 208.544 327.847C202.393 318.458 196.789 302.969 192.447 287.059C188.226 271.589 185.261 255.968 184.147 245.649C221.22 234.931 244.458 196.667 238.871 157.189C238.864 157.117 238.856 157.067 238.856 157.066C238.848 157.006 238.837 156.938 238.825 156.867C238.802 156.724 238.768 156.532 238.726 156.3C238.641 155.832 238.516 155.172 238.353 154.346C238.028 152.693 237.552 150.358 236.942 147.532C235.722 141.88 233.967 134.249 231.825 126.155C229.685 118.065 227.152 109.485 224.372 101.945C221.613 94.4597 218.541 87.8015 215.264 83.7056L214.967 83.3351L214.532 83.1463C212.6 82.3081 210.593 81.3741 208.499 80.3991C198.568 75.775 186.659 70.2299 171.235 69.6199C152.46 68.8774 128.684 75.3957 96.5441 98.7056L94.5214 100.173L96.467 101.74C112.393 114.574 115.836 131.598 115.1 146.048C114.539 157.077 111.551 166.459 109.865 171.149C108.704 169.452 107.964 167.319 107.408 164.814C107.023 163.083 106.743 161.258 106.449 159.347L106.403 159.045C106.096 157.051 105.769 154.97 105.292 152.961C104.341 148.95 102.732 144.941 99.1602 142.102C95.5807 139.257 90.3641 137.848 82.7671 138.272L80.5398 138.396L81.0046 140.578L92.3634 193.891L92.3824 193.98L92.41 194.068C96.4679 206.93 103.426 218.078 112.323 226.88C112.399 227.007 112.509 227.193 112.65 227.434C112.939 227.928 113.356 228.653 113.861 229.563C114.87 231.384 116.229 233.941 117.621 236.886C120.435 242.835 123.282 250.138 123.83 256.102C124.386 262.154 122.865 269.962 121.123 276.412C120.26 279.605 119.361 282.406 118.677 284.407C118.535 284.824 118.402 285.206 118.281 285.549C113.249 283.144 108.754 283.323 104.902 285.565C100.738 287.989 97.6892 292.625 95.4191 297.781C91.2706 307.202 89.2756 319.42 88.3551 327.002C63.4846 321.298 44.281 315.507 31.2149 311.107C24.5012 308.846 19.408 306.953 15.9993 305.627C14.2949 304.964 13.0117 304.443 12.1575 304.089C11.9454 304.002 11.7598 303.924 11.6007 303.857C11.4477 303.466 11.2377 302.916 10.9828 302.219C10.4158 300.667 9.62676 298.384 8.74853 295.479C6.99149 289.667 4.88057 281.38 3.4734 271.502C0.656265 251.725 0.676883 225.696 11.8698 200.384C13.679 196.292 15.94 192.089 18.3903 187.533C27.8582 169.931 40.1551 147.07 40.1551 105.084C40.1551 74.4931 55.0029 48.7305 76.8623 30.5692C98.7415 12.3915 127.56 1.9109 155.237 1.91092C170.368 1.91093 182.533 3.64443 192.311 9.55105C202.028 15.4212 209.679 25.5978 215.362 43.1322C215.94 44.9168 217.851 46.0074 219.719 45.4015C231.034 41.7304 248.191 45.4361 262.673 54.8904C277.091 64.3032 288.289 79.0455 288.289 96.8141C288.289 112.24 285.647 122.664 283.071 132.815L283.071 132.815C279.952 145.104 276.94 156.974 279.065 176.313C279.774 182.762 281.216 187.336 283.231 191.128C285.213 194.859 287.712 197.747 290.345 200.792L290.405 200.861C296.679 208.113 299.534 214.079 300.455 219.327C301.375 224.562 300.412 229.31 298.623 234.237C297.723 236.712 296.629 239.197 295.47 241.815L295.37 242.04C294.249 244.573 293.074 247.225 292.019 250.016C289.836 255.787 288.133 262.223 288.302 269.851C288.446 276.326 289.594 280.764 291.311 284.122C293.008 287.442 295.199 289.565 297.111 291.417L297.162 291.466C298.905 293.155 300.355 294.577 301.428 296.57C302.387 298.351 303.098 300.702 303.217 304.232C279.208 318.511 255.445 324.413 237.601 326.734C228.565 327.91 221.057 328.166 215.818 328.129C213.199 328.11 211.149 328.019 209.76 327.932Z",fill:t||"black",stroke:"black",strokeWidth:"3.82184"}))}function oB(e){var t=e.color;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"25%",width:"92%",height:"75%",left:"-0.8%"},width:"261",height:"240",viewBox:"0 0 261 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M121.837 79.8195C121.051 78.0776 121.051 78.0779 121.05 78.0783L121.047 78.0794L121.04 78.0828L121.015 78.0942C120.994 78.1038 120.964 78.1177 120.925 78.1357C120.89 78.1518 120.848 78.1714 120.799 78.1943C120.74 78.2223 120.67 78.2553 120.591 78.2932C120.301 78.4313 119.882 78.6353 119.352 78.9045C118.291 79.4426 116.782 80.2418 114.972 81.2948C111.356 83.3984 106.515 86.527 101.628 90.626C91.9116 98.7764 81.7052 111.03 81.0904 126.926C80.8259 133.765 79.9706 166.806 80.1619 179.433C80.323 190.065 85.8253 201.481 93.4581 212.008C100.109 221.18 108.508 229.857 116.832 237.008C79.0664 238.501 50.4555 233.546 31.1209 228.121C21.038 225.292 13.4742 222.334 8.44733 220.094C6.46024 219.208 4.86951 218.434 3.67627 217.825C12.7707 211.141 20.3578 199.682 25.3638 182.675C30.8537 164.024 33.288 138.554 31.1521 104.963C29.2166 74.5247 44.0087 48.8092 66.3601 30.629C88.7347 12.4301 118.55 1.9109 146.238 1.91092C161.221 1.91093 173.377 4.84484 183.177 11.9616C192.98 19.081 200.668 30.5619 206.363 48.1322L206.758 49.3516L208.036 49.4485C220.412 50.3865 229.115 55.4881 235.532 63.6621C242.017 71.924 246.24 83.4216 249.336 97.232C251.376 106.332 249.389 115.311 247.001 125.651L246.89 126.133C244.553 136.25 241.952 147.505 243.096 160.666C244.126 172.51 248.853 184.135 252.782 193.074C253.287 194.222 253.776 195.321 254.242 196.368C255.617 199.455 256.793 202.096 257.586 204.253C258.118 205.698 258.425 206.79 258.523 207.566C258.573 207.963 258.555 208.168 258.542 208.254C258.097 208.665 257.273 209.12 255.957 209.522C254.588 209.94 252.864 210.248 250.882 210.442C246.921 210.828 242.138 210.738 237.544 210.296C232.942 209.853 228.638 209.067 225.623 208.108C224.092 207.622 223.033 207.134 222.436 206.711C222.345 206.646 222.275 206.591 222.222 206.546C222.594 205.259 223.132 203.723 223.753 201.949C226.947 192.824 232.348 177.398 228.855 157.08C226.766 144.924 221.189 123.457 216.162 105.11C213.643 95.9192 211.255 87.4828 209.496 81.3444C208.616 78.275 207.894 75.7798 207.391 74.0515C207.14 73.1874 206.944 72.515 206.81 72.0584L206.658 71.5384L206.619 71.4055L206.609 71.3717L206.607 71.3632L206.606 71.361C206.606 71.3605 206.606 71.3602 204.772 71.8993L206.606 71.3602L205.677 68.2011L203.395 70.5745L203.395 70.5751L203.391 70.579L203.372 70.5991C203.353 70.6178 203.325 70.6471 203.286 70.6867C203.208 70.7659 203.088 70.8861 202.928 71.0445C202.607 71.3612 202.123 71.8304 201.482 72.4293C200.199 73.6271 198.286 75.343 195.784 77.3943C190.779 81.4982 183.428 86.9376 174.067 92.2568C156.25 102.382 131.216 112.037 101.246 111.29C110.86 102.359 116.392 95.0181 119.562 89.7007C121.329 86.736 122.36 84.4028 122.955 82.7777C123.252 81.9654 123.44 81.3309 123.555 80.8839C123.613 80.6605 123.653 80.484 123.68 80.3558C123.693 80.2917 123.703 80.2397 123.711 80.1998C123.714 80.1799 123.717 80.1631 123.72 80.1493L123.723 80.1309L123.724 80.1235L123.724 80.1202C123.725 80.1187 123.725 80.1172 121.837 79.8195ZM121.837 79.8195L121.051 78.0776L124.276 76.6229L123.725 80.1172L121.837 79.8195ZM222.068 206.388C222.071 206.388 222.082 206.402 222.097 206.428C222.073 206.401 222.066 206.388 222.068 206.388Z",fill:t||"black",stroke:"black",strokeWidth:"3.82184"}))}function lB(e){var t=e.style,n=e.color,i=e.colorRandom;switch(t){case"thick":return KP.default.createElement(iB,{color:n,colorRandom:i});case"mohawk":return KP.default.createElement(aB,{color:n,colorRandom:i});case"womanLong":return KP.default.createElement(sB,{color:n});case"womanShort":return KP.default.createElement(oB,{color:n});default:return KP.default.createElement(nB,{color:n})}}function cB(e){var t=e.color;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"33%",left:"15.8%",width:"64%",height:"84%"},width:"240",height:"212",viewBox:"0 0 240 212",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M222.726 112.791C222.726 46.702 186.268 2.00007 141.859 2C84.9656 2 27 23.3414 27 124.255C27 149.223 37.6589 167.827 52.5644 181.54C51.0704 179.671 49.8666 177.996 49.0668 176.619C46.176 149.638 78.2326 128.929 109.601 108.665C126.254 97.907 142.712 87.2746 153.646 75.8956C163.24 81.3324 191.44 104.109 196.813 113.32C199.695 118.26 204.322 135.189 207.484 154.95C217.822 142.532 222.726 130.107 222.726 112.791Z",fill:t,stroke:"rgba(0,0,0,0.1)",strokeWidth:"4"}),KP.default.createElement("path",{d:"M154.264 75.2457C167.438 63.3013 187.146 36.0399 185.881 18.334",stroke:"rgba(0,0,0,0.1)",strokeWidth:"4"}))}function uB(e){var t=e.color;return KP.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",bottom:"34%",width:"49%",height:"85%",left:"22%"},width:"640px",height:"508px",viewBox:"0 0 640 508",preserveAspectRatio:"xMidYMid meet"},KP.default.createElement("defs",null),KP.default.createElement("path",{fill:"#000000"===t?"dimgray":"#000000",d:"M71.5 502.6c-3.8-1.6-14.6-15.8-20.3-26.5C46 466.3 28 426.5 23.1 414c-6.4-16.4-13.6-42.5-14.7-53.3-.7-7.4-.6-7.8 7.4-17.6l4.5-5.6-.6-34c-.6-35-.1-45 3.3-68.5 3.3-22.8 4.9-36 6-48.5.6-6.6 2-17.8 3.1-25 3.6-24.8 7.3-35.2 16.9-47.5 2.8-3.6 9.9-13.2 15.8-21.4C84.3 65.5 92.4 58.7 110 54.5c5.2-1.2 13.8-2.7 19-3.3 15.7-1.9 20.1-4.1 40-20.1 13.3-10.7 21.5-15 30.8-16.1 6.7-.9 21.1.2 26.7 2 3.3 1 19.4 3.9 26.5 4.7 5.4.6 18.5-2.4 32-7.1 17.9-6.4 20.2-7 31.5-7.4 16.4-.6 24.4 1.4 50 12.3 24.1 10.3 27.7 11.1 43 9.5 26.1-2.7 42.9 2.8 71 23.1 19.5 14 24.1 16.2 40 18.4 2.8.4 6.4 1.5 8.1 2.6 5.5 3.4 13.2 12.5 22.8 27.1 14.3 21.9 24.6 40.4 30 54 .9 2.4 3.2 5 6 7 5.1 3.5 7.8 8.4 18.6 33.8 7.9 18.5 11.4 31.3 19.6 72.8l6.8 33.7v20.1c.1 21.9-.2 23.4-5.4 23.4-1.5 0-4.1-.7-5.6-1.5-1.6-.8-3.7-1.5-4.6-1.5-1 0-4.1-.9-7-2-10.8-4-49.4-12.7-59.8-13.4-2-.2-4.5-.8-5.5-1.3-2.3-1.2-13.7-3.5-30-6-14-2.2-60.2-2.4-81.5-.5l-29 2.8c-45 4.2-84.8 13-119.3 26.6-27 10.6-76.5 37.3-98.3 53.1-39.8 28.8-71.9 57.9-93.6 85.2-6.6 8.3-12.7 15.6-13.6 16.3-2 1.5-3.9 1.5-7.7-.2zm11.1-29.3c12.5-15.7 36.4-39.4 58.2-57.5l3.2-2.6-3.7-7.9c-2-4.3-5.1-10.3-6.9-13.3-1.7-3-6.2-11.3-9.9-18.5-9.7-18.5-15-27.8-21.5-37.5-6.8-10.1-16.9-23-18.1-23-1.8 0-28.8 17.9-42.4 28.1-5 3.7-11.2 9.4-13.8 12.7l-4.7 6 2.1 8.4c5.3 21.5 11.6 39.7 19.1 55.1 2.6 5.4 4.8 10 4.8 10.4 0 1.1 9.4 21.8 13.8 30.2 3.9 7.6 10.9 19.1 11.7 19.1.1 0 3.8-4.4 8.1-9.7zm89.5-81.5c12.6-9 18.5-12.8 35.1-22.8 7.4-4.5 12.4-8.1 11.9-8.6s-4.6-8.3-9.3-17.4c-4.6-9.1-10.6-20-13.3-24.3-14.2-22.2-19.7-30.2-27-39.5l-7.9-10.1-17.6 9.1c-9.6 5-20.6 11-24.5 13.3-3.8 2.3-9.4 5.5-12.2 7.1-2.9 1.6-5.3 3.1-5.3 3.4s3.3 5 7.4 10.5c8.8 11.8 19.6 29.6 29.7 49l11.3 21.6 6.6 12.2c1.4 2.6 3 4.5 3.6 4.3s5.7-3.7 11.5-7.8zm88.4-50.4c9.6-4.5 22.1-9.6 31.3-12.6 6.8-2.3 9.2-3.5 9.2-4.8 0-9.8-10.5-41.9-19.5-59.5-10.1-19.9-21.8-37.5-24.9-37.5-1 0-11.9 4.2-18.1 7-1.1.5-4.9 2.1-8.5 3.6-3.6 1.4-8.1 3.3-10 4.1l-5.5 2.4c-7.1 3-24.9 11.1-29.6 13.4l-5.6 2.8 9.6 12.7c5.3 7 11.3 15.6 13.4 19.1l8.9 14.4c2.9 4.4 8.3 14.1 12.1 21.5l10 19.1 3 5.7 9.6-4.5 14.6-6.9zm357.2-26.1C617 300.9 606.4 246 600 224c-2.3-8.1-11-29.6-17.6-43.5-2.3-4.7-4.5-5.4-19.6-5.4-7.7-.1-9.8.2-9.8 1.3 0 .7 1.1 4.7 2.4 8.7 4.8 14.8 6.3 20.7 11.7 45.9 1.9 8.8 2.3 13.7 2.3 30 .1 19.6-.5 25-5 43.6-.7 3.3-1.4 6.5-1.4 7.1 0 1 3.6 1.9 18 4.8 8.5 1.7 34.2 8.3 34.9 9 1.9 1.9 2.3-.6 1.8-10.2zm-569.7-3c13.2-8.9 26.6-17 65-39.2 19.1-11.1 58.8-30.9 83.5-41.6l15-6.6c26.5-11.8 61.3-24.6 86-31.7l24.5-6.8c5.4-1.3 10.9-2.7 24.5-6.6 23.5-6.6 35.4-9.1 57.5-12.3 5.8-.8 13.1-1.9 16.2-2.5s12.3-1.7 20.5-2.6l23.8-2.5c5-.5 30-1.2 55.6-1.5l46.7-.7-5.2-10.1c-5.1-9.8-11.2-20.2-18.5-31.6-2-3-4-6.3-4.6-7.2-3.8-6.5-11.4-16.4-15.4-20.1-4.3-4.1-5.3-4.5-11.6-5.2-14.4-1.5-20.2-4.4-44.9-22.2-9.9-7.2-21.5-13.4-30.7-16.4-5.9-1.9-7.8-2-24.4-1.4-12.2.5-20.1.3-24.4-.5-6.3-1.1-19.4-6-33.6-12.5-14.7-6.7-29.9-10.2-38.8-9.1-2.9.4-13.2 3.4-23 6.7-26.9 9.1-38.5 9.7-69.2 3.4-22.5-4.6-25.3-3.7-48 15.1-16.3 13.5-24.5 16.8-48.3 19.9-18 2.3-23.6 4.9-33.7 15.7-3.3 3.5-7.8 9-10 12.3-2.2 3.2-6.7 9.4-10 13.8l-7 9.6c-.5.8-2.9 4-5.3 7-10.6 13.4-12.8 23.3-19.3 86.6-.5 5-1.3 11.3-1.9 14-.5 2.8-2.1 14.7-3.6 26.5-2.5 20.7-2.6 22.2-1.5 42l1.1 23.9c0 3.3 0 3.3 2.3 1.7l10.7-7.3zm290.5 3.9c15.8-3.3 35.1-6.6 44.8-7.7l5.9-.7-.6-3.1c-.3-1.8-.8-8.1-1.1-14.2-1.3-23.5-4.4-38-14.8-69.5-6.1-18.3-9.3-26-11.1-26-.6 0-4.3.9-8.1 2-3.9 1.2-13.5 3.8-21.5 6-23.2 6.1-25.7 6.9-40.7 11.6-9.8 3.2-14.1 5-13.5 5.8l5.3 8.1c15.9 24.5 27.6 52.2 32.9 78 2.9 13.9 2.8 13.8 5.3 13.2 1.2-.2 9-1.8 17.2-3.5zm207.2-12.7c2.2-8.6 5-23.6 6.3-32.9 1.6-11.5.5-20.2-6-49.6-1.8-8.4-2.7-11.6-8.9-31.9-5-16.1-1.7-14.5-27.5-13.7l-28.9 1.3-6.7.6.6 3.6c.4 2 2.9 10.6 5.6 19.1 7.5 23.3 11.6 39.1 15.6 60.6 1.4 7.3 1.6 33.6.3 38.2-1.2 4-2.1 3.7 13.6 5.1 12 1.1 30.4 3.9 31.3 4.7 1.5 1.6 3.6-.7 4.7-5.1zm-106.2 0l30.5-1.8 6.5-.2 1.3-5c1.7-6.6 1-31.7-1.1-40-.9-3.3-2.6-10-3.8-15-2.1-8.9-5.4-19.9-10.9-36.5-1.6-4.7-3.6-12.3-4.6-16.9-1.1-5-2.4-8.5-3.2-8.9-1.5-.5-23.1 1.9-34.2 3.9l-20.9 3.4c-8.5 1.4-15.9 2.9-16.3 3.3-.5.5.2 3.7 1.6 7.3 4.3 11.5 8.4 24.2 11.6 35.9l4 14c1.8 5 5 31.3 5 41.3 0 5.6.3 11.9.6 14l.7 3.7 4.6-.5c2.5-.3 15.4-1.2 28.6-2z"}),KP.default.createElement("path",{fill:t,d:"M70.4 484.7c-4.3-5.9-9.8-15.6-14-24.5C51.6 450 46 437.3 46 436.6c0-.3-2.2-4.9-4.8-10.3-7.5-15.4-13.8-33.6-19.1-55.2-3-12.1-2.8-13.3 2.6-20.3 5-6.3 15.4-14.5 34.8-27.5 17.9-11.9 24.3-15.6 25.8-15 1.9.7 12.6 14.2 19.6 24.6 6.6 9.8 11.9 19 21.6 37.6 3.7 7.2 8.2 15.5 9.9 18.5s5.3 9.9 8 15.3c4.1 8.3 4.7 10 3.5 11.1-.8.7-6.1 5.2-11.9 10.1-16.9 14.4-38.4 36-49.7 50-5.8 7.2-11 13.1-11.7 13.2-.6.2-2.5-1.6-4.2-4zm84.1-85c-1.6-3.4-4.8-9.6-7.1-13.7l-11.9-22.5c-13.1-25.1-24.8-43.6-36.2-57.2l-4.4-5.2 7.3-4.2 14.3-8.5c3.9-2.3 15.9-8.7 26.7-14.3l19.6-10.2 9.2 11.7c8.4 10.6 12.3 16.4 27.5 40.1 2.7 4.3 7.8 13.4 11.3 20.3l10.3 19.7c2.9 5.3 3.5 7.3 2.6 8-.7.6-6.4 4-12.7 7.8-13.9 8.2-32.7 20.6-43.3 28.6-4.3 3.3-8.4 5.9-9 5.8-.7 0-2.5-2.8-4.2-6.2zm78-45.7c-1.4-2.2-5.3-9.5-8.6-16.2-12-23.8-26.9-47.7-41.8-66.8-4.4-5.7-8.1-10.9-8.1-11.5 0-1 19.5-10.9 29.9-15.2 2-.8 5.1-2.1 6.9-2.9 1.7-.8 4.7-2 6.5-2.8 1.7-.8 6.1-2.6 9.7-4l8.5-3.6c1.1-.5 6.7-2.8 12.4-5.1l10.4-4.3 4 4.5c11.2 12.5 27 42.1 34.1 63.9 5.6 17.4 9.7 36.7 8.1 38-.5.5-5.1 2.2-10 3.8-9 3-21.6 8.1-31 12.6l-16.8 8-11.7 5.5-2.5-3.9zm382.7-24.6c-4.1-1.8-26.8-7.8-37.2-9.9-19-3.8-19-3.8-19-5.8 0-1 .9-5.5 1.9-10 4.8-20.1 5.6-25.9 5.5-42.7-.1-17.1-.5-20.1-6.8-47-2.3-10.1-3.8-15.1-8.6-30.5-1.2-3.8-2.4-8.1-2.7-9.3l-.6-2.4 16.9.3c9.3.1 17.5.7 18.2 1.2 1.3 1 2 2.5 11.4 24.2 8.9 20.6 11.1 28.7 20.4 75.5 4.9 24.5 5.7 30.6 6.2 43.3.5 16.2.6 15.8-5.6 13.1zM31.9 319.3l-.4-9.5c-.2-.9-.6-10.4-1-21-.6-18-.5-20.9 2.4-43.5l3.6-25.5c.2-.7.9-5.8 1.4-11.3 4.3-43 6.7-59.2 10.3-70 2.7-8 3.9-10.2 9-16.6 2.4-3 4.8-6.2 5.3-7 .6-.9 3.7-5.2 7-9.6s7.8-10.6 10-13.8c2.2-3.3 6.7-8.8 10-12.3 10.1-10.8 15.7-13.4 33.7-15.7 23.8-3.1 32-6.4 48.3-19.9 6.1-5.1 12.8-10.4 15-11.8 9.8-6.6 19-7.4 38.6-3.4 29.5 6 37.4 5.6 64.1-3.5 13.7-4.6 20-6.2 25.8-6.6 12.2-.9 26.1 2.2 41.5 9.2 13.7 6.3 27.2 11.3 32.9 12.4 3.6.7 12.5.8 24 .4 15.9-.5 19-.4 24.2 1.2 8.9 2.7 22.3 9.7 32 16.7 24.7 17.9 30.5 20.8 44.9 22.3 6.3.7 7.3 1.1 11.6 5.2 4 3.7 11.6 13.6 15.4 20.1.6.9 2.6 4.2 4.6 7.2 12 18.5 23.6 40.2 24.1 45l.3 2.5-46.5.7-56 1.7-24.3 2.5c-8.2.9-17.4 2-20.5 2.6s-10.4 1.7-16.2 2.5c-22.1 3.2-34 5.7-57.5 12.3-13.6 3.9-19.1 5.3-24.5 6.6-5.3 1.3-9.1 2.3-24.5 6.8-24.7 7.1-59.5 19.9-86 31.7l-15 6.6c-21.4 9.3-49.2 22.9-74 36.3-8.5 4.6-42 24-50 28.9-12 7.5-28.8 18.4-34.6 22.6-3.7 2.6-7.2 4.7-7.8 4.7-.7 0-1.1-2.7-1.2-7.7zm284.6 4.6c-.3-.4-1.7-6.1-3-12.6-5.3-25.2-15.7-51.1-29.9-74.3-3.2-5.2-7.3-11.4-9.2-13.7s-3.4-4.6-3.4-5.1c0-.6 7.1-3.3 15.8-6.1 16.4-5.2 18.6-5.9 42.2-12.2l23.5-6.4c4.9-1.4 9.9-2.5 11-2.5 2.6 0 5 5.4 12.2 27 10.8 32.6 12.9 42.8 15.3 75 1.5 19.6 1.9 17.7-4.7 18.5-14.5 1.7-48.5 7.9-62.1 11.4-3.9 1.1-7.4 1.5-7.7 1zM541 312c-13.2-2.8-36.4-6-43.5-6-6.2 0-6.6-.6-5-7.5s2-27.1.5-34.2c-3.1-15.6-7.4-34.4-8.7-38.3-.8-2.5-1.6-5.2-1.8-6s-2.6-8.5-5.3-17c-5-15.7-7.9-27.6-7-28.5.7-.7 38.4-2.5 53-2.5 13.7 0 12.2-1.3 16.9 14.1 6.2 20.3 7.1 23.5 8.9 31.9 6.9 31.2 8.1 42.1 6 55.9-2.4 15.7-6 33.3-7.7 37.6-.6 1.6-1 1.7-6.3.5zm-137-3c-1-.6-1.5-5.2-2.1-18.2-.7-16.6-3-35.6-4.9-40.8l-4-14c-3.5-12.7-8.7-28.6-13.1-39.8-1.6-4-2.9-7.7-2.9-8.1 0-.5 3-1.6 6.8-2.5 10.4-2.3 54.8-8.8 67.9-9.9l6.3-.5.9 3.6 2.1 9.2c.7 3 2.5 9.3 4 14 5.8 17.6 8.8 27.8 10.9 36.5l3.8 15c2.1 8.2 2.9 39.1 1.1 46l-1.3 5-7.5.3c-12 .4-65.1 4.1-65.9 4.6-.4.3-1.3.1-2.1-.4z"}))}function dB(e){var t=e.style,n=e.color;switch(t){case"beanie":return KP.default.createElement(uB,{color:n});case"turban":return KP.default.createElement(cB,{color:n});default:return null}}function hB(e){var t=e.color;return KP.default.createElement("svg",{style:{position:"absolute",width:"16%",height:"15%",top:"13%",left:"19.8%"},width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M30.5 6.17556C28.17 5.40834 25.6547 5 23.08 5C12.5866 5 4.08007 11.5 5.08001 23.5C6.12162 36 13.5866 40.5 24.08 40.5C25.2476 40.5 26.3906 40.3975 27.5 40.2011C28.7105 39.9869 29.8811 39.6609 31 39.2347",stroke:"#171921",strokeWidth:"9"}),KP.default.createElement("path",{d:"M31.5 39.0361C29.2204 39.9786 26.7127 40.5 24.08 40.5C13.5866 40.5 6.12162 36 5.08001 23.5C4.08007 11.5 12.5866 5 23.08 5C26.2175 5 29.2667 5.60635 32 6.72957L31.5 39.0361Z",fill:t}),KP.default.createElement("path",{d:"M27.5 13.5004C23.5 11.6671 14.7 10.7004 11.5 21.5004",stroke:"#171921",strokeWidth:"4"}),KP.default.createElement("path",{d:"M17 14C19.1667 15.8333 23.3 21.5 22.5 29.5",stroke:"#171921",strokeWidth:"4"}))}function pB(e){var t=e.color;return KP.default.createElement("svg",{style:{position:"absolute",width:"16%",height:"15%",top:"13%",left:"19%"},width:"48",height:"52",viewBox:"0 0 48 52",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M36.466 43.1111L37 42.5357V41.7506V8.24948V7.13022L36.046 6.54483C32.3122 4.25363 27.7717 3 23.08 3C17.4397 3 12.1591 4.74745 8.39775 8.29504C4.59419 11.8824 2.54206 17.1274 3.08692 23.6661C3.61786 30.0378 5.75693 34.7272 9.30474 37.8433C9.01338 38.8425 8.92733 39.9197 9.06236 41.0533C9.45166 44.3216 11.1039 46.6766 13.6572 48.1277C16.0911 49.511 19.2061 49.9998 22.5242 49.9998C28.0033 49.9998 32.8077 47.0528 36.466 43.1111Z",stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.972 23.984C43.0434 23.3322 43.08 22.6703 43.08 22C43.08 11.7827 33.5734 5 23.08 5C12.5866 5 4.08007 11.5 5.08001 23.5C5.63643 30.1774 8.02584 34.5719 11.7307 37.2171C11.1423 38.2409 10.8848 39.4436 11.0483 40.8167C11.6774 46.0984 16.1862 47.9998 22.5242 47.9998C33.6292 47.9998 42.4159 33.9534 42.972 23.984Z",fill:t}),KP.default.createElement("path",{d:"M27.5 13.5004C23.5 11.6671 14.7 10.7004 11.5 21.5004",stroke:"#171921",strokeWidth:"4"}),KP.default.createElement("path",{d:"M17 14C19.1667 15.8333 23.3 21.5 22.5 29.5",stroke:"#171921",strokeWidth:"4"}))}function fB(e){var t=e.color,n=e.size;return KP.default.createElement(KP.Fragment,null,"small"===n&&KP.default.createElement(hB,{color:t}),"big"===n&&KP.default.createElement(pB,{color:t}))}function mB(){return KP.default.createElement("svg",{style:{position:"absolute",width:"80%",height:"13%",top:0},width:"149",height:"48",viewBox:"0 0 149 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M99 10.2143C104.667 7.5476 118 5.11427 126 16.7143",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M23.5791 35.521C25.6497 29.6104 33.2612 18.3959 47.1418 20.8224",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}))}function gB(){return KP.default.createElement("svg",{style:{position:"absolute",width:"80%",height:"13%",top:0},width:"149",height:"51",viewBox:"0 0 149 51",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M99 13.2143C104.667 10.5476 118 8.11427 126 19.7143",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M23.5791 38.521C25.6497 32.6104 33.2612 21.3959 47.1418 23.8224",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M26.0742 32.4578L19.9258 27.0312",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M122.961 14.157L129.109 8.73047",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M32.5233 26.8142L28.4766 19.6816",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M115.512 10.5135L119.559 3.38086",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M40.5994 23.2005L38.3984 15.3008",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M106.436 9.89973L108.637 2",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}))}function vB(e){return"upWoman"===e.style?KP.default.createElement(gB,null):KP.default.createElement(mB,null)}function xB(){return KP.default.createElement("svg",{style:{width:"100%",height:"12%",position:"absolute",top:"7%"},width:"96",height:"48",viewBox:"0 0 96 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("ellipse",{cx:"16.1171",cy:"28.9268",rx:"9",ry:"10",transform:"rotate(-6.77646 16.1171 28.9268)",fill:"black"}),KP.default.createElement("ellipse",{cx:"80.1486",cy:"18.9231",rx:"9",ry:"10",transform:"rotate(-6.27568 80.1486 18.9231)",fill:"black"}))}function yB(){return KP.default.createElement("svg",{style:{width:"100%",height:"12%",position:"absolute",top:"6%"},width:"96",height:"48",viewBox:"0 0 96 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("ellipse",{cx:"16.5301",cy:"29.4023",rx:"9",ry:"13.5",transform:"rotate(-6.77646 16.5301 29.4023)",fill:"black"}),KP.default.createElement("ellipse",{cx:"80.5312",cy:"19.4021",rx:"9",ry:"13.5",transform:"rotate(-6.27568 80.5312 19.4021)",fill:"black"}))}function bB(){return KP.default.createElement("svg",{style:{width:"100%",height:"14%",position:"absolute",top:"6%"},width:"96",height:"48",viewBox:"0 0 96 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.28675 34.0729C5.40099 34.8857 6.43424 35.0669 7.00876 34.4806C9.47388 31.9648 13.2637 30.1163 17.663 29.5936C20.2577 29.2853 22.7544 29.4749 24.9787 30.0657C25.7326 30.2659 26.4737 29.6294 26.2105 28.8951C24.5451 24.2497 19.8447 21.1962 14.7356 21.8033C8.79442 22.5093 4.55046 27.8978 5.25642 33.839C5.26572 33.9172 5.27583 33.9952 5.28675 34.0729Z",fill:"#171921"}),KP.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M69.3848 24.0725C69.4976 24.8856 70.5308 25.0671 71.1062 24.4816C73.5487 21.9959 77.2977 20.1702 81.6484 19.6532C84.2128 19.3485 86.6804 19.5348 88.88 20.1167C89.6341 20.3162 90.3751 19.6795 90.1108 18.9456C88.456 14.3522 83.8041 11.3346 78.7482 11.9354C72.8624 12.6348 68.6579 17.9732 69.3573 23.8591C69.3658 23.9305 69.3749 24.0016 69.3848 24.0725Z",fill:"#171921"}))}function _B(e){switch(e.style){case"circle":return KP.default.createElement(xB,null);case"smile":return KP.default.createElement(bB,null);default:return KP.default.createElement(yB,null)}}function wB(){return KP.default.createElement("svg",{style:{width:"100%",height:"20%",position:"absolute",top:"1.5%",left:"-3%"},width:"152",height:"65",viewBox:"0 0 152 65",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("circle",{cx:"123.5",cy:"28",r:"26",stroke:"black",strokeWidth:"4"}),KP.default.createElement("circle",{cx:"56.5",cy:"37",r:"26",stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M98.5 35C98.5 32.8783 97.6571 30.8434 96.1569 29.3431C94.6566 27.8429 92.6217 27 90.5 27C88.3783 27 86.3434 27.8429 84.8431 29.3431C83.3429 30.8434 82.5 32.8783 82.5 35",stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M31 39L1 44.5",stroke:"black",strokeWidth:"4"}))}function SB(){return KP.default.createElement("svg",{style:{width:"100%",height:"22%",position:"absolute",top:"0.5%",left:"-3%"},width:"160",height:"74",viewBox:"0 0 160 74",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M36.5 42.5L2 49.125",stroke:"black",strokeWidth:"4",strokeLinecap:"round"}),KP.default.createElement("path",{d:"M32.4878 25.9393C31.618 22.4804 33.9396 19.0308 37.4716 18.5345L76.1882 13.0932C79.4696 12.632 82.5036 14.9183 82.9648 18.1998L88.5317 57.8105C88.9929 61.0919 86.7066 64.126 83.4252 64.5871L48.9526 69.4319C45.9161 69.8587 43.0465 67.9273 42.2987 64.9536L32.4878 25.9393Z",stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M154.751 8.96388C154.634 5.39915 151.451 2.7232 147.919 3.21958L109.203 8.66085C105.921 9.12202 103.635 12.156 104.096 15.4375L109.663 55.0482C110.124 58.3297 113.158 60.616 116.44 60.1548L150.912 55.31C153.949 54.8832 156.175 52.2357 156.074 49.1711L154.751 8.96388Z",stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M85.5 37.125L107.5 33.625",stroke:"black",strokeWidth:"4"}))}function MB(e){switch(e.style){case"round":return KP.default.createElement(wB,null);case"square":return KP.default.createElement(SB,null);default:return null}}function AB(){return KP.default.createElement("svg",{style:{width:"10%",height:"10%",position:"absolute",top:"15%",left:"46%"},width:"32",height:"40",viewBox:"0 0 32 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M16.5 3C16.5 17 23.5 28 23.5 28C23.5 28 20 34 10 32",stroke:"#171921",strokeWidth:"4"}))}function CB(){return KP.default.createElement("svg",{style:{width:"10%",height:"10%",position:"absolute",top:"15%",left:"46%"},width:"32",height:"40",viewBox:"0 0 32 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M16.5 7C16.1667 10.8333 16.5 19.2 20.5 22C25.5 25.5 20 34 10 32",stroke:"#171921",strokeWidth:"4"}))}function EB(){return KP.default.createElement("svg",{style:{width:"10%",height:"10%",position:"absolute",top:"15%",left:"46%"},width:"32",height:"40",viewBox:"0 0 32 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M12.307 12.3397C17.753 11.0993 26.6843 12.9603 24.7238 22.8833C22.9813 31.7023 13.6141 32.1857 11 29.7048",stroke:"black",strokeWidth:"4"}))}function kB(e){switch(e.style){case"long":return KP.default.createElement(AB,null);case"round":return KP.default.createElement(EB,null);default:return KP.default.createElement(CB,null)}}function TB(){var e="mouth-laugh-id";return KP.default.createElement("svg",{style:{width:"50%",height:"19%",position:"absolute",top:"23%",right:"23%"},width:"73",height:"64",viewBox:"0 0 73 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M69.9204 13.3305C69.7501 11.263 67.6363 10.1117 65.8448 10.8176C61.6161 12.4839 47.6267 17.7834 37.7627 19.1403C26.9401 20.6291 10.5503 18.821 5.80622 18.2319C3.87694 17.9923 2.15721 19.6504 2.49021 21.6654C3.14178 25.6081 4.48399 29.4088 6.45857 32.8914C8.6608 36.7754 11.6065 40.1877 15.1274 42.9333C18.6484 45.679 22.6757 47.7042 26.9793 48.8935C31.283 50.0827 35.7787 50.4126 40.2099 49.8644C44.6411 49.3162 48.9208 47.9005 52.8049 45.6983C56.689 43.4961 60.1012 40.5504 62.8469 37.0294C65.5925 33.5085 67.6178 29.4812 68.807 25.1775C69.8726 21.3212 70.2483 17.3106 69.9204 13.3305Z",fill:"#171921",stroke:"#171921",strokeWidth:"4"}),KP.default.createElement("mask",{id:e,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"4",y:"12",width:"65",height:"37"},KP.default.createElement("path",{d:"M67.7931 12.1925C68.3091 16.363 67.9985 20.5943 66.8793 24.6448C65.76 28.6953 63.8539 32.4857 61.2697 35.7996C58.6856 39.1134 55.474 41.8858 51.8185 43.9585C48.1629 46.0312 44.1348 47.3636 39.9643 47.8795C35.7938 48.3955 31.5625 48.085 27.512 46.9657C23.4615 45.8464 19.6712 43.9403 16.3573 41.3562C13.0435 38.772 10.2711 35.5605 8.19838 31.9049C6.12569 28.2493 4.79332 24.2213 4.27734 20.0508L67.7931 12.1925Z",fill:"#171921"})),KP.default.createElement("g",{mask:"url(#".concat(e,")")},KP.default.createElement("circle",{cx:"40.5221",cy:"52.3146",r:"21.5",transform:"rotate(-7.05286 40.5221 52.3146)",fill:"#FC909F"})))}function RB(){return KP.default.createElement("svg",{style:{width:"50%",height:"17%",position:"absolute",top:"23%",right:"23%"},width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M10.0007 24.1649C14.941 30.6115 22.4277 37.7537 33.9767 36.125C45.5257 34.4963 50.6642 26.5297 49.1492 20.0779",stroke:"black",strokeWidth:"4"}))}function LB(){return KP.default.createElement("svg",{style:{width:"50%",height:"19%",position:"absolute",top:"23%",right:"23%"},width:"67",height:"64",viewBox:"0 0 67 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M2.5 17.5C5 34.5 33.5 42.5 59.5 23",stroke:"black",strokeWidth:"4"}))}function PB(e){switch(e.style){case"laugh":return KP.default.createElement(TB,null);case"smile":return KP.default.createElement(RB,null);default:return KP.default.createElement(LB,null)}}function BB(e){var t=e.color,n=e.lightColor;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"-2%",width:"98%",height:"26%"},width:"281",height:"93",viewBox:"0 0 281 93",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M182.552 38.4488L182.692 38.4809L182.836 38.4927C228.961 42.2969 256.62 62.7848 276.694 90.9997H3.37453C19.6742 61.6579 42.8579 42.9816 80.4446 34.4117C96.4579 30.7606 115.113 28.9394 137 28.9395C146.456 28.9395 153.814 30.3819 160.796 32.2853C163.383 32.9904 165.983 33.7805 168.643 34.5887C173.045 35.9265 177.611 37.3141 182.552 38.4488Z",fill:t,stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M68.9305 36.5805L78.0837 16.9838C78.3023 16.5157 78.8456 16.293 79.3326 16.4654C117.259 29.8904 151.762 28.945 183.736 20.0444C184.139 19.9324 184.569 20.0806 184.815 20.4178L198.747 39.4703C199.13 39.994 198.935 40.7324 198.331 40.9696C164.724 54.166 101.663 51.9229 69.4152 37.9037C68.9036 37.6813 68.6945 37.0859 68.9305 36.5805Z",fill:n,stroke:"black",strokeWidth:"4"}))}function NB(e){var t=e.color;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"-2.5%",width:"100%",height:"26%"},width:"281",height:"93",viewBox:"0 0 281 93",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M276.366 90.8628H3.45626C3.49074 90.7926 3.52546 90.7219 3.5604 90.6507C8.10518 81.395 16.4899 64.319 27.4025 49.0413C33.5961 40.3702 40.5303 32.3872 47.9416 26.7719C55.3538 21.1558 63.0614 18.0405 70.8916 18.7256C85.946 20.0429 99.3549 28.2854 112.817 36.5604C114.092 37.3444 115.368 38.1288 116.646 38.9076C131.131 47.7349 146.005 55.9312 162.365 52.3445C167.899 51.1311 171.629 48.5345 173.976 45.1797C176.29 41.8727 177.122 38.0292 177.266 34.5166C177.41 30.9989 176.871 27.6738 176.311 25.2562C176.049 24.1257 175.779 23.1785 175.564 22.4839C179.189 18.8351 183.027 16.71 186.989 15.7533C191.284 14.7164 195.876 15.0158 200.707 16.4448C210.437 19.3229 220.847 26.6969 231.007 36.1789C249.621 53.5516 266.7 77.3231 276.366 90.8628Z",fill:t,stroke:"black",strokeWidth:"4.27431"}))}function DB(e){var t=e.color,n=e.lightColor;return KP.default.createElement("svg",{style:{position:"absolute",bottom:"-2%",width:"98%",height:"26%",left:"-0.2%"},width:"281",height:"93",viewBox:"0 0 281 93",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KP.default.createElement("path",{d:"M142.771 67.5777C142.771 67.5779 142.771 67.5779 144 66L142.771 67.5779L144.493 68.9188L145.679 67.0874L145.679 67.087L145.681 67.0841L145.69 67.0697L145.731 67.0072C145.742 66.9904 145.755 66.971 145.769 66.9491C145.803 66.8975 145.847 66.8318 145.9 66.7529C146.05 66.5278 146.275 66.1947 146.57 65.7695C147.158 64.919 148.023 63.7016 149.118 62.2463C151.312 59.3316 154.416 55.482 158.071 51.7183C161.737 47.9446 165.898 44.3176 170.198 41.7935C174.514 39.2597 178.777 37.9491 182.733 38.4825C225.171 44.2046 256.402 63.002 276.674 91.0006H3.37453C19.6742 61.6588 42.8579 42.9825 80.4446 34.4127C82.0464 34.0474 84.2242 34.1581 86.9471 34.7915C89.6421 35.4183 92.7146 36.5194 96.0282 37.9759C102.655 40.8887 110.052 45.1363 117.004 49.5364C123.945 53.9299 130.39 58.4425 135.104 61.8597C137.459 63.5674 139.379 64.9995 140.709 66.0036C141.374 66.5056 141.891 66.9005 142.241 67.1693C142.416 67.3037 142.55 67.4065 142.639 67.4754L142.739 67.553L142.764 67.5722L142.77 67.5767L142.771 67.5777Z",fill:t,stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M68.6127 37.0849L73.7794 17.8529C73.9886 17.0741 74.9962 16.854 75.5402 17.4493C90.4034 33.7135 109.16 33.0762 115.385 32.3297C116.23 32.2284 116.892 33.1531 116.495 33.906L103.338 58.859C103.136 59.2414 102.724 59.4518 102.3 59.3636C98.3518 58.5411 78.6774 53.7321 68.7286 37.8667C68.583 37.6345 68.5416 37.3496 68.6127 37.0849Z",fill:n,stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M199.195 36.9814L187.615 17.4989C187.222 16.8374 186.253 16.8483 185.834 17.4937C180.097 26.3296 170.202 30.4 166.742 31.6024C166.12 31.8187 165.835 32.5584 166.171 33.1254L179.673 55.9402C179.875 56.2806 180.255 56.4651 180.636 56.3568C182.771 55.749 190.096 52.6851 199.182 38.0212C199.378 37.706 199.385 37.3001 199.195 36.9814Z",fill:n,stroke:"black",strokeWidth:"4"}),KP.default.createElement("path",{d:"M125.5 54.5L116.5 33L109.5 48L125.5 54.5Z",fill:"black",stroke:"black",strokeWidth:"4",strokeLinejoin:"round"}),KP.default.createElement("path",{d:"M157 53.5L166 32L173 47L157 53.5Z",fill:"black",stroke:"black",strokeWidth:"4",strokeLinejoin:"round"}),KP.default.createElement("path",{d:"M86.5 14L74.5 17L84.5 23.5L86.5 14Z",fill:"black",stroke:"black",strokeWidth:"4",strokeLinejoin:"round"}),KP.default.createElement("path",{d:"M176 14L187 17L180 23.5L176 14Z",fill:"black",stroke:"black",strokeWidth:"4",strokeLinejoin:"round"}))}function IB(e){var t=e.style,n=e.color,i=(0,rB.default)(n).brighten(1).hex();switch(t){case"hoody":return KP.default.createElement(BB,{color:n,lightColor:i});case"polo":return KP.default.createElement(DB,{color:n,lightColor:i});default:return KP.default.createElement(NB,{color:n})}}function jB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function zB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jB(Object(n),!0).forEach(function(t){(0,JP.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var FB=function(e){(0,VP.default)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=(0,YP.default)(e);if(t){var r=(0,YP.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,XP.default)(this,n)}}(n);function n(){return(0,GP.default)(this,n),t.apply(this,arguments)}return(0,WP.default)(n,[{key:"render",value:function(){var e,t=this.props,n=t.id,i=t.className,r=t.style,a=t.shape,s=void 0===a?"circle":a,o=t.hairColorRandom,l=void 0!==o&&o,c=eB(this.props);switch(s){case"circle":e="100%";break;case"rounded":e="6px";break;case"square":e=0}return KP.default.createElement("div",{id:n,className:i,style:zB({background:c.bgColor,overflow:"hidden",borderRadius:e},r)},KP.default.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},KP.default.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",height:"90%"}},KP.default.createElement(tB,{color:c.faceColor}),KP.default.createElement(dB,{color:c.hatColor,style:c.hatStyle}),"none"===c.hatStyle&&KP.default.createElement(lB,{color:c.hairColor,style:c.hairStyle,colorRandom:l}),KP.default.createElement("div",{style:{position:"absolute",right:"-3%",top:"30%",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},KP.default.createElement(vB,{style:c.eyeBrowStyle}),KP.default.createElement(_B,{style:c.eyeStyle}),KP.default.createElement(MB,{style:c.glassesStyle}),KP.default.createElement(fB,{color:c.faceColor,size:c.earSize}),KP.default.createElement(kB,{style:c.noseStyle}),KP.default.createElement(PB,{style:c.mouthStyle})),KP.default.createElement(IB,{color:c.shirtColor,style:c.shirtStyle}))))}}]),n}(KP.Component);(0,JP.default)(FB,"propTypes",{id:qP.default.string,className:qP.default.string,style:qP.default.object,shape:qP.default.oneOf(["circle","rounded","square"]),sex:qP.default.oneOf(QP.sex),faceColor:qP.default.string,earSize:qP.default.oneOf(QP.earSize),hairColor:qP.default.string,hairStyle:qP.default.oneOf(QP.hairStyleMan.concat(QP.hairStyleWoman)),hatColor:qP.default.string,hatStyle:qP.default.oneOf(QP.hatStyle),hairColorRandom:qP.default.bool,eyeStyle:qP.default.oneOf(QP.eyeStyle),glassesStyle:qP.default.oneOf(QP.glassesStyle),noseStyle:qP.default.oneOf(QP.noseStyle),mouthStyle:qP.default.oneOf(QP.mouthStyle),shirtStyle:qP.default.oneOf(QP.shirtStyle),shirtColor:qP.default.string,bgColor:qP.default.string,isGradient:qP.default.bool});var OB=HP.Z;function UB(e){return Ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 25c-6.6 0-16.1 3.77-26.1 10.69-9.9 6.92-20.3 16.69-29.6 27.09-8.4 9.52-15.9 19.56-21.5 28.35 5-2.29 10-4.34 15.1-6.17l.9-.41c20.2-8.78 40.6-13.25 61.1-13.25 20.5-.02 41 4.37 61.3 13.26l.8.35c5.1 1.84 10.2 3.91 15.2 6.22-5.6-8.79-13.1-18.83-21.5-28.35-9.3-10.4-19.7-20.17-29.6-27.09C272.1 28.77 262.6 25 256 25zm0 67.23c-16.3 0-32.5 2.37-48.2 7.1 1 16.67 5.3 36.37 13 51.87 8.8 17.6 20.5 28.6 35.2 28.6 14.7 0 26.4-11 35.2-28.6 7.7-15.5 12-35.2 13-51.87-15.7-4.73-31.9-7.1-48.2-7.1zm-66 13.67c-7.1 3.1-14.1 6.7-20.8 10.9 1.3 19.1 10.4 34.5 24.8 45.7 5.7 4.5 12.3 8.2 19.5 11-3.3-4.4-6.2-9.3-8.7-14.3-8.4-16.6-13.2-35.7-14.8-53.3zm132 0c-1.6 17.6-6.4 36.7-14.8 53.3-2.5 5.1-5.5 10-8.8 14.5 7.4-2.9 14.1-6.6 19.9-11.2 14.2-11.2 23.2-26.6 24.5-45.7-6.7-4.2-13.7-7.8-20.8-10.9zm-131.4 76.2c-23.4 3.6-46.8 9.2-70.3 16.7L93.42 427l31.18 10.4 26.5-198.6 17.9 1.8L155.6 442c23.6 5.7 62.1 9 100.4 9 38.3 0 76.8-3.3 100.4-9L343 240.6l17.9-1.8 26.5 198.6 31.1-10.3-26.8-228.3c-23.4-7.4-46.7-13.1-70-16.7-4.1 2.6-8.4 4.8-12.9 6.8-3.3 11.9-2.9 26 0 39.1 3.7 16.7 11.7 31.8 17.6 37.6l-12.8 12.8c-10.1-10.2-18.1-27.1-22.4-46.4-2.6-11.7-3.8-24.4-2.2-36.7-10.4 2.3-21.5 3.2-33 2.5-11.5.7-22.6-.3-33-2.6 1.6 12.3.4 25-2.2 36.8-4.3 19.3-12.3 36.2-22.4 46.4l-12.8-12.8c5.9-5.8 13.9-20.9 17.6-37.6 2.9-13.2 3.3-27.3 0-39.3-4.4-1.9-8.6-4.1-12.6-6.6zm10.2 154.4h110.4l17.6 77.5-17.6 4-14.4-63.5h-81.6L200.8 418l-17.6-4 17.6-77.5zM91.28 445.2l-2.23 18.9c.05-.3.69 1.7 3.98 4.3 3.4 2.6 8.67 5.3 13.77 7.1 5.1 1.6 10.1 2.2 12.4 2l2.9-22-30.82-10.3zm329.42 0l-30.8 10.3 2.9 22c2.3.2 7.3-.4 12.4-2 5.1-1.8 10.4-4.5 13.8-7.1 3.3-2.6 3.9-4.6 3.9-4.3l-2.2-18.9zm-266.3 15l-1.3 19.2v.1c.5.5 2.1 1.7 4.5 2.9 4.8 2.4 13 4.8 23.1 6.8 20.1 3.8 47.7 5.8 75.3 5.8 27.6 0 55.2-2 75.3-5.8 10.1-2 18.3-4.4 23.1-6.8 2.4-1.2 4-2.4 4.5-2.9v-.1l-1.3-19.2c-26.5 6.1-63.9 8.8-101.6 8.8-37.7 0-75.1-2.7-101.6-8.8z"},child:[]}]})(e)}function HB(e){return Ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 33.978c-12.67 0-25.34 2.52-38.01 7.535 1.27 3.61 3.864 7.593 8.373 12.102C232.68 59.93 242.613 66.83 256 73.847c13.386-7.018 23.32-13.916 29.637-20.232 4.51-4.51 7.103-8.492 8.373-12.102-12.67-5.016-25.34-7.535-38.01-7.535zM201.88 49.1l-16.144 8.073c1.306 5.74 4.437 13.84 9.752 21.813 6.26 9.39 15.44 18.664 27.082 25.695l18.475-18.473c-11.317-6.394-20.465-12.923-27.408-19.866-5.34-5.34-9.265-11.148-11.756-17.24zm108.24 0c-2.492 6.092-6.417 11.9-11.757 17.24-6.943 6.944-16.09 13.473-27.408 19.867l18.475 18.474c11.64-7.03 20.823-16.305 27.082-25.694 5.315-7.973 8.446-16.072 9.752-21.813L310.12 49.1zm-140.6 17.775l-36.918 9.23-71.875 71.873L112 199.252l9.637-9.637 16.738-16.738L128 467.977c76.448 13.61 193.653 13.173 256 0l-10.375-295.1L400 199.252l51.273-51.274-71.875-71.873-36.92-9.23c-2.243 7.068-5.946 14.53-10.99 22.095-8.768 13.152-21.853 26.254-39.463 35.06l-5.802 2.9L265 105.706v122.27h-18v-122.27l-21.223 21.222-5.802-2.9c-17.61-8.806-30.695-21.908-39.463-35.06-5.044-7.566-8.747-15.027-10.99-22.095zM48 160.705l-19.273 19.273L80 231.252l19.273-19.274L48 160.705zm416 0l-51.273 51.273L432 231.252l51.273-51.274L464 160.705z"},child:[]}]})(e)}function GB(e){return Ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 144l48 64 64-32-16 304c64 16 192 16 256 0l-16-304 64 32 48-64-112-96-48-16c-16 64-112 64-128 0l-48 16z"},child:[]}]})(e)}function WB(e){return Ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M254.654 15.072c-12.396 26.293-18.327 55.655-26.254 84.526 5.225 5.148 11.26 10.11 18.594 14.771-8.382 1.204-15.876.926-22.765-.357-3.005 9.729-6.406 19.333-10.538 28.67 7.056 8.499 15.448 16.69 27.137 24.12-10.826 1.555-20.17.639-28.642-1.728 8.837 17.645 23.203 36.3 36.605 49.24 2.385-13.769 4.764-33.947 5.723-55.628 1.477-33.415.1-71.578-6.604-100.088l17.524-4.12c7.38 31.392 8.587 70.53 7.062 105.002-.938 21.206-2.718 40.143-5.162 54.862 16.875-14.522 32.157-38.713 40.344-56.26a261.386 261.386 0 0 0-.875-17.64c-6.972 1.33-14.562 1.63-23.065.41 8.527-5.42 15.285-11.25 21.067-17.303a229.077 229.077 0 0 0-5.45-25.653c-5.573.631-11.538.61-18.05-.326a111.682 111.682 0 0 0 14.619-11.045c-6.447-19.354-15.052-36.003-24.565-50.086-3.554 3.028-7.617 5.847-12.316 8.405 2.423-6.369 4.098-12.409 5.242-18.215a191.222 191.222 0 0 0-9.63-11.557zm-56.94 161.881c-40.373 27.332-80.198 59.974-123.161 101.248-.003.003-2.21 3.686-3.38 9.656-1.168 5.971-1.849 14.058-1.923 23.178-.128 15.76 1.604 34.596 4.768 52.383 76.585-11.245 132.73-24.958 166.714-46.209-20.028-30.571-28.038-62.978-24.783-94.922a142.878 142.878 0 0 1 2.201-14.3c-7.724-9.618-14.802-20.207-20.435-31.034zm119.083 3.19c-5.477 10.117-12.258 20.951-20.342 30.873 1.767 9.172 2.867 17.895 3.258 26.195 1.026 21.788-2.996 40.877-11.856 57.098 47.332 23.797 95.577 45.482 149.383 58.296 4.716-12.839 5.421-24.583 2.762-36.6-3.076-13.898-10.654-28.339-21.723-43.901-8.591-12.08-33.38-36.278-63.834-61.83-11.833-9.93-24.56-20.12-37.648-30.131zm-83.045 45.101c-2.518 27.175 4.04 54.397 21.477 81.268a84.472 84.472 0 0 0 6.042-5.875c14.875-16.051 21.739-35.454 20.461-62.58-.163-3.464-.487-7.066-.941-10.78-6.397 5.504-13.349 10.17-20.857 13.48l-4.643 2.048-4.154-2.912c-5.662-3.967-11.553-8.945-17.385-14.649zm43.76 84.18a95.683 95.683 0 0 1-3.037 3.447c-13.118 14.156-30.662 25.324-52.467 34.502a2666.35 2666.35 0 0 0 61.008 42.272c41.574 27.949 84.45 54.98 118.697 73.6 17.123 9.309 32.136 16.512 43.371 20.612 5.617 2.05 10.31 3.301 13.494 3.739.225.03.267-.009.473.011 5.211-31.844 8.244-73.704-18.738-115.89-59.73-13.242-112.193-36.793-162.801-62.293zm-75.778 45.547c-35.398 11.779-79.823 19.924-132.88 27.455l-1.668.76c-26.963 27.842-32.639 70.496-25.948 104.939 87.895-12.79 155.857-51.688 217.87-92.938a2654.477 2654.477 0 0 1-57.374-40.216z"},child:[]}]})(e)}function VB(e){return Ot({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432 20.25c-30.5 0-55 24.52-55 55 0 30.45 24.5 54.95 55 54.95s55-24.5 55-54.95c0-30.48-24.5-55-55-55zM362.8 98.5c-51.5 28.9-108 60.6-158.1 94.9-63.1 43.2-114.49 90.7-132.73 139.4C189.3 360.6 308.8 394.7 453.8 394c9.2-83.5 18.1-171.1-.5-249a71.8 71.8 0 0 1-21.3 3.2c-32.1 0-59.4-20.8-69.2-49.7zM52 346.7c-19.24 28.5-25.15 57.6-25.05 85.3 9.72 3.3 20.13 6.5 31.06 9.6 1.19-13.4 5.49-31 13.2-55.1l17.14 5.4c-8.24 25.7-12 43.9-12.6 54.5 12.47 3.2 25.55 6.3 38.95 9.2 3.2-18.5 9-35.9 14.8-53l17 5.8c-5.9 17.1-11.4 34-14.1 50.9 14.9 2.9 30.2 5.7 45.7 8.3l9.5-51.7 17.8 3.2-9.4 51.4c16.1 2.5 32.4 4.7 48.7 6.8l7.3-49.8 17.8 2.6-7.3 49.3c17.8 2 35.5 3.8 52.9 5.2l5.9-47.4 17.8 2.2-5.8 46.6c19.6 1.4 38.7 2.4 56.8 2.9 3.7-15.4 4.4-27.9 5.4-44.6l18 1.2c-1 15.3-1.7 28.5-5.1 43.8 15.5.3 30.2.1 43.7-.4 15-24.1 23.4-53.4 20.7-77.3-163.2 4-294.2-35.6-420.8-64.9z"},child:[]}]})(e)}const XB=e=>{let{onAvatarChange:n,currentAvatar:i=null}=e;const[r,a]=(0,t.useState)(i||{sex:"man",faceColor:"#F9C9B6",earSize:"small",eyeStyle:"circle",noseStyle:"short",mouthStyle:"laugh",shirtStyle:"hoody",glassesStyle:"none",hairColor:"#090806",hairStyle:"normal",hatStyle:"none",hatColor:"#D2E3FC",eyeBrowStyle:"up",shirtColor:"#77311D",bgColor:"#FFFFFF"}),s=(0,t.useRef)(null),o=(e,t)=>{const i=c(c({},r),{},{[e]:t});a(i),n&&n(i)};return(0,t.useEffect)(()=>{r&&n&&n(r)},[]),(0,ni.jsx)("div",{className:"avatar-editor",children:(0,ni.jsxs)("div",{className:"avatar-main",children:[(0,ni.jsxs)("div",{className:"avatar-preview",children:[(0,ni.jsx)(OB,c({ref:s,className:"avatar-display"},r)),(0,ni.jsxs)("button",{className:"randomize-btn",onClick:()=>{const e={sex:["man","woman"],faceColor:["#F9C9B6","#AC6651","#F2D3B1","#E5C1C5","#C68642","#F4A460","#DEB887","#D2B48C","#BC8F8F"],earSize:["small","big"],eyeStyle:["circle","oval","smile"],noseStyle:["short","long","round"],mouthStyle:["laugh","smile","peace","sad"],shirtStyle:["hoody","short","polo"],glassesStyle:["none","round","square"],hairColor:["#090806","#2c1810","#8B4513","#DAA520","#FFD700","#FF6B6B","#8B5A2B","#CD853F","#D2691E"],hairStyle:["normal","thick","mohawk","womanLong","womanShort"],hatStyle:["none","beanie","turban"],hatColor:["#D2E3FC","#F4A460","#8B4513","#FF6347"],eyeBrowStyle:["up","down","middle"],shirtColor:["#77311D","#9287E7","#F48150","#FDBBDE","#6A4E35","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"],bgColor:["#FFFFFF","#F0F0F0","#E8F4FD","#FFF5E1"]},t={};Object.keys(e).forEach(n=>{const i=e[n];t[n]=i[Math.floor(Math.random()*i.length)]}),a(t),n&&n(t)},children:[(0,ni.jsx)(Nn,{className:"randomize-icon"})," Rastgele Avatar"]})]}),(0,ni.jsxs)("div",{className:"avatar-controls",children:[(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(Xn,{className:"section-icon"})," Cinsiyet"]}),(0,ni.jsxs)("div",{className:"control-group",children:[(0,ni.jsx)("button",{className:"control-btn ".concat("man"===r.sex?"active":""),onClick:()=>o("sex","man"),children:"Erkek"}),(0,ni.jsx)("button",{className:"control-btn ".concat("woman"===r.sex?"active":""),onClick:()=>o("sex","woman"),children:"Kad\u0131n"})]})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(an,{className:"section-icon"})," Y\xfcz Rengi"]}),(0,ni.jsx)("div",{className:"color-palette",children:["#F9C9B6","#AC6651","#F2D3B1","#E5C1C5","#C68642","#F4A460","#DEB887","#D2B48C","#BC8F8F"].map(e=>(0,ni.jsx)("button",{className:"color-btn ".concat(r.faceColor===e?"active":""),style:{backgroundColor:e},onClick:()=>o("faceColor",e)},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(on,{className:"section-icon"})," G\xf6z Stili"]}),(0,ni.jsx)("div",{className:"control-group",children:["circle","oval","smile"].map(e=>(0,ni.jsx)("button",{className:"control-btn ".concat(r.eyeStyle===e?"active":""),onClick:()=>o("eyeStyle",e),children:"circle"===e?(0,ni.jsx)($t,{className:"style-icon"}):"oval"===e?(0,ni.jsx)(on,{className:"style-icon"}):(0,ni.jsx)(In,{className:"style-icon"})},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(Xn,{className:"section-icon"})," Burun Stili"]}),(0,ni.jsx)("div",{className:"control-group",children:["short","long","round"].map(e=>(0,ni.jsx)("button",{className:"control-btn ".concat(r.noseStyle===e?"active":""),onClick:()=>o("noseStyle",e),children:"short"===e?(0,ni.jsx)($t,{className:"style-icon small"}):"long"===e?(0,ni.jsx)($t,{className:"style-icon large"}):(0,ni.jsx)($t,{className:"style-icon"})},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(In,{className:"section-icon"})," A\u011f\u0131z Stili"]}),(0,ni.jsx)("div",{className:"control-group",children:["laugh","smile","peace","sad"].map(e=>(0,ni.jsx)("button",{className:"control-btn ".concat(r.mouthStyle===e?"active":""),onClick:()=>o("mouthStyle",e),children:"laugh"===e?(0,ni.jsx)(In,{className:"style-icon happy"}):"smile"===e?(0,ni.jsx)(In,{className:"style-icon"}):"peace"===e?(0,ni.jsx)(un,{className:"style-icon"}):(0,ni.jsx)(In,{className:"style-icon sad"})},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(cn,{className:"section-icon"})," K\u0131yafet Stili"]}),(0,ni.jsx)("div",{className:"control-group",children:["hoody","short","polo"].map(e=>(0,ni.jsx)("button",{className:"control-btn ".concat(r.shirtStyle===e?"active":""),onClick:()=>o("shirtStyle",e),children:"hoody"===e?(0,ni.jsx)(UB,{className:"style-icon"}):"short"===e?(0,ni.jsx)(GB,{className:"style-icon"}):(0,ni.jsx)(HB,{className:"style-icon"})},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(an,{className:"section-icon"})," K\u0131yafet Rengi"]}),(0,ni.jsx)("div",{className:"color-palette",children:["#77311D","#9287E7","#F48150","#FDBBDE","#6A4E35","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"].map(e=>(0,ni.jsx)("button",{className:"color-btn ".concat(r.shirtColor===e?"active":""),style:{backgroundColor:e},onClick:()=>o("shirtColor",e)},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(Fn,{className:"section-icon"})," G\xf6zl\xfck"]}),(0,ni.jsx)("div",{className:"control-group",children:["none","round","square"].map(e=>(0,ni.jsx)("button",{className:"control-btn ".concat(r.glassesStyle===e?"active":""),onClick:()=>o("glassesStyle",e),children:"none"===e?(0,ni.jsx)($n,{className:"style-icon"}):"round"===e?(0,ni.jsx)($t,{className:"style-icon"}):(0,ni.jsx)(jn,{className:"style-icon"})},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(Tn,{className:"section-icon"})," Sa\xe7 Stili"]}),(0,ni.jsx)("div",{className:"control-group",children:["normal","thick","mohawk","womanLong","womanShort"].map(e=>(0,ni.jsx)("button",{className:"control-btn ".concat(r.hairStyle===e?"active":""),onClick:()=>o("hairStyle",e),children:"normal"===e?(0,ni.jsx)(Tn,{className:"style-icon"}):"thick"===e?(0,ni.jsx)(Tn,{className:"style-icon thick"}):"mohawk"===e?(0,ni.jsx)(Tn,{className:"style-icon mohawk"}):"womanLong"===e?(0,ni.jsx)(Tn,{className:"style-icon long"}):(0,ni.jsx)(Tn,{className:"style-icon short"})},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(an,{className:"section-icon"})," Sa\xe7 Rengi"]}),(0,ni.jsx)("div",{className:"color-palette",children:["#090806","#2c1810","#8B4513","#DAA520","#FFD700","#FF6B6B","#8B5A2B","#CD853F","#D2691E"].map(e=>(0,ni.jsx)("button",{className:"color-btn ".concat(r.hairColor===e?"active":""),style:{backgroundColor:e},onClick:()=>o("hairColor",e)},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(Xn,{className:"section-icon"})," \u015eapka"]}),(0,ni.jsx)("div",{className:"control-group",children:["none","beanie","turban"].map(e=>(0,ni.jsx)("button",{className:"control-btn ".concat(r.hatStyle===e?"active":""),onClick:()=>o("hatStyle",e),children:"none"===e?(0,ni.jsx)($n,{className:"style-icon"}):"beanie"===e?(0,ni.jsx)(VB,{className:"style-icon"}):(0,ni.jsx)(WB,{className:"style-icon"})},e))})]}),(0,ni.jsxs)("div",{className:"control-section",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(an,{className:"section-icon"})," Arkaplan Rengi"]}),(0,ni.jsx)("div",{className:"color-palette",children:["#FFFFFF","#F0F0F0","#E8F4FD","#FFF5E1"].map(e=>(0,ni.jsx)("button",{className:"color-btn ".concat(r.bgColor===e?"active":""),style:{backgroundColor:e},onClick:()=>o("bgColor",e)},e))})]})]})]})})},YB=e=>{let{currentUser:n,onLogout:i,onLogin:r}=e;const[a,s]=(0,t.useState)("profile"),[o,l]=(0,t.useState)(!1),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)((null===n||void 0===n?void 0:n.avatar)||null),[g,v]=(0,t.useState)(!1),[x,y]=(0,t.useState)({username:(null===n||void 0===n?void 0:n.username)||"",firstname:(null===n||void 0===n?void 0:n.firstname)||"",lastname:(null===n||void 0===n?void 0:n.lastname)||"",email:(null===n||void 0===n?void 0:n.email)||""}),[b,_]=(0,t.useState)(0),[w,S]=(0,t.useState)(""),[M,A]=(0,t.useState)(""),[C,E]=(0,t.useState)(!1),[k,T]=(0,t.useState)(null),[R,L]=(0,t.useState)(!1),P=e=>{s(e),d(""),p(""),_(0),S(""),A(""),E(!1),L(!1),l(!1),v(!1)},B=e=>{const{name:t,value:n}=e.target;y(e=>c(c({},e),{},{[t]:n}))};return(0,ni.jsxs)("div",{className:"account-settings",children:[(0,ni.jsxs)("div",{className:"settings-header",children:[(0,ni.jsx)("h2",{children:"Hesap Ayarlar\u0131"}),(0,ni.jsx)("p",{children:"Hesab\u0131n\u0131z\u0131 y\xf6netin ve g\xfcvenlik ayarlar\u0131n\u0131z\u0131 kontrol edin"})]}),(0,ni.jsxs)("div",{className:"settings-container",children:[(0,ni.jsxs)("div",{className:"settings-sidebar",children:[(0,ni.jsxs)("button",{className:"tab-button ".concat("profile"===a?"active":""),onClick:()=>P("profile"),children:[(0,ni.jsx)(Xn,{className:"tab-icon"})," Profil Bilgileri"]}),(0,ni.jsxs)("button",{className:"tab-button ".concat("avatar"===a?"active":""),onClick:()=>P("avatar"),children:[(0,ni.jsx)(sn,{className:"tab-icon"})," Avatar Olu\u015ftur"]}),(0,ni.jsxs)("button",{className:"tab-button ".concat("security"===a?"active":""),onClick:()=>P("security"),children:[(0,ni.jsx)(Bn,{className:"tab-icon"})," G\xfcvenlik"]}),(0,ni.jsxs)("button",{className:"tab-button ".concat("delete"===a?"active":""),onClick:()=>P("delete"),children:[(0,ni.jsx)(Hn,{className:"tab-icon"})," Hesab\u0131 Sil"]})]}),(0,ni.jsxs)("div",{className:"settings-content",children:["profile"===a&&(0,ni.jsxs)("div",{className:"profile-section",children:[(0,ni.jsxs)("div",{className:"profile-header",children:[(0,ni.jsx)("h3",{children:"Profil Bilgileri"}),!g&&(0,ni.jsxs)("button",{className:"edit-button",onClick:()=>{v(!0),y({username:(null===n||void 0===n?void 0:n.username)||"",firstname:(null===n||void 0===n?void 0:n.firstname)||"",lastname:(null===n||void 0===n?void 0:n.lastname)||"",email:(null===n||void 0===n?void 0:n.email)||""}),d(""),p("")},children:[(0,ni.jsx)(sn,{className:"button-icon"})," D\xfczenle"]})]}),g?(0,ni.jsxs)("div",{className:"profile-edit-form",children:[(0,ni.jsxs)("div",{className:"form-group",children:[(0,ni.jsx)("label",{children:"Kullan\u0131c\u0131 Ad\u0131:"}),(0,ni.jsx)("input",{type:"text",name:"username",value:x.username,onChange:B,required:!0})]}),(0,ni.jsxs)("div",{className:"form-group",children:[(0,ni.jsx)("label",{children:"Ad:"}),(0,ni.jsx)("input",{type:"text",name:"firstname",value:x.firstname,onChange:B,required:!0})]}),(0,ni.jsxs)("div",{className:"form-group",children:[(0,ni.jsx)("label",{children:"Soyad:"}),(0,ni.jsx)("input",{type:"text",name:"lastname",value:x.lastname,onChange:B,required:!0})]}),(0,ni.jsxs)("div",{className:"form-group",children:[(0,ni.jsx)("label",{children:"E-posta:"}),(0,ni.jsx)("input",{type:"email",name:"email",value:x.email,onChange:B,required:!0})]}),(0,ni.jsxs)("div",{className:"form-group",children:[(0,ni.jsx)("label",{children:"Hesap T\xfcr\xfc:"}),(0,ni.jsx)("span",{className:"readonly-field",children:null!==n&&void 0!==n&&n.is_admin?"Admin":"Kullan\u0131c\u0131"})]}),(0,ni.jsxs)("div",{className:"edit-actions",children:[(0,ni.jsx)("button",{className:"save-button",onClick:async()=>{if(x.username.trim()&&x.firstname.trim()&&x.lastname.trim()&&x.email.trim())try{l(!0),p(""),d("");const e=await Rt.updateProfile(x);e.success?(d(e.message),v(!1),r&&r(e.user)):p(e.error||"Profil g\xfcncellenemedi")}catch(h){p("Bir hata olu\u015ftu. L\xfctfen tekrar deneyin."),console.error("Update profile error:",h)}finally{l(!1)}else p("T\xfcm alanlar\u0131 doldurun")},disabled:o,children:o?"Kaydediliyor...":"Kaydet"}),(0,ni.jsx)("button",{className:"cancel-button",onClick:()=>{v(!1),d(""),p("")},disabled:o,children:"\u0130ptal"})]})]}):(0,ni.jsxs)("div",{className:"profile-info",children:[(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)("label",{children:"Kullan\u0131c\u0131 Ad\u0131:"}),(0,ni.jsx)("span",{children:null===n||void 0===n?void 0:n.username})]}),(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)("label",{children:"Ad:"}),(0,ni.jsx)("span",{children:null===n||void 0===n?void 0:n.firstname})]}),(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)("label",{children:"Soyad:"}),(0,ni.jsx)("span",{children:null===n||void 0===n?void 0:n.lastname})]}),(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)("label",{children:"E-posta:"}),(0,ni.jsx)("span",{children:null===n||void 0===n?void 0:n.email})]}),(0,ni.jsxs)("div",{className:"info-item",children:[(0,ni.jsx)("label",{children:"Hesap T\xfcr\xfc:"}),(0,ni.jsx)("span",{children:null!==n&&void 0!==n&&n.is_admin?"Admin":"Kullan\u0131c\u0131"})]})]}),u&&(0,ni.jsx)("div",{className:"message success",children:u}),h&&(0,ni.jsx)("div",{className:"message error",children:h})]}),"avatar"===a&&(0,ni.jsxs)("div",{className:"avatar-section",children:[(0,ni.jsxs)("div",{className:"avatar-header",children:[(0,ni.jsx)("h3",{children:"\ud83c\udfa8 Avatar Olu\u015ftur"}),(0,ni.jsx)("p",{children:"Kendi avatar\u0131n\u0131z\u0131 olu\u015fturun ve ki\u015fiselle\u015ftirin"})]}),(0,ni.jsx)(XB,{onAvatarChange:e=>{m(e)},currentAvatar:f}),(0,ni.jsx)("div",{className:"avatar-actions",children:(0,ni.jsx)("button",{className:"save-avatar-btn",onClick:async()=>{try{l(!0),p("");const e=await Rt.updateAvatar(f);e.success?(d("Avatar ba\u015far\u0131yla g\xfcncellendi!"),r&&r(c(c({},n),{},{avatar:f}))):p(e.error||"Avatar g\xfcncellenemedi")}catch(h){p("Bir hata olu\u015ftu. L\xfctfen tekrar deneyin."),console.error("Update avatar error:",h)}finally{l(!1)}},disabled:o,children:o?"Kaydediliyor...":"Avatar\u0131 Kaydet"})}),u&&(0,ni.jsx)("div",{className:"message success",children:u}),h&&(0,ni.jsx)("div",{className:"message error",children:h})]}),"security"===a&&(0,ni.jsxs)("div",{className:"security-section",children:[(0,ni.jsx)("h3",{children:"G\xfcvenlik Ayarlar\u0131"}),(0,ni.jsxs)("div",{className:"security-info",children:[(0,ni.jsxs)("div",{className:"security-item",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(gn,{className:"section-icon"})," \u015eifre De\u011fi\u015ftirme"]}),(0,ni.jsx)("p",{children:'\u015eifrenizi de\u011fi\u015ftirmek i\xe7in "\u015eifremi Unuttum" \xf6zelli\u011fini kullanabilirsiniz.'}),(0,ni.jsx)("button",{className:"secondary-button",onClick:async()=>{if(null!==n&&void 0!==n&&n.email)try{l(!0),p(""),d("");const e=await Rt.forgotPassword(n.email);e.success?d("\u015eifre s\u0131f\u0131rlama linki e-posta adresinize g\xf6nderildi. L\xfctfen e-postan\u0131z\u0131 kontrol edin."):p(e.error||"\u015eifre s\u0131f\u0131rlama e-postas\u0131 g\xf6nderilemedi")}catch(h){p("Bir hata olu\u015ftu. L\xfctfen tekrar deneyin."),console.error("Forgot password error:",h)}finally{l(!1)}else p("E-posta adresi bulunamad\u0131")},disabled:o,children:o?"G\xf6nderiliyor...":"\u015eifre S\u0131f\u0131rlama E-postas\u0131 G\xf6nder"})]}),(0,ni.jsxs)("div",{className:"security-item",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(xn,{className:"section-icon"})," E-posta Do\u011frulama"]}),(0,ni.jsx)("p",{children:"E-posta adresiniz do\u011frulanm\u0131\u015f durumda."}),(0,ni.jsxs)("span",{className:"verified-badge",children:[(0,ni.jsx)(Zt,{className:"verified-icon"})," Do\u011frulanm\u0131\u015f"]})]})]}),u&&(0,ni.jsx)("div",{className:"message success",children:u}),h&&(0,ni.jsx)("div",{className:"message error",children:h})]}),"delete"===a&&(0,ni.jsxs)("div",{className:"delete-section",children:[(0,ni.jsxs)("h3",{children:[(0,ni.jsx)(Hn,{className:"section-icon"})," Hesab\u0131 Sil"]}),0===b&&(0,ni.jsxs)("div",{className:"delete-warning",children:[(0,ni.jsxs)("div",{className:"warning-header",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(Wt,{className:"warning-icon"})," Dikkat!"]}),(0,ni.jsx)("p",{children:"Bu i\u015flem geri al\u0131namaz!"})]}),(0,ni.jsxs)("div",{className:"warning-content",children:[(0,ni.jsx)("p",{children:(0,ni.jsx)("strong",{children:"Hesab\u0131n\u0131z\u0131 sildi\u011finizde:"})}),(0,ni.jsxs)("ul",{children:[(0,ni.jsxs)("li",{children:[(0,ni.jsx)(Zt,{className:"list-icon"})," T\xfcm ki\u015fisel bilgileriniz kal\u0131c\u0131 olarak silinecek"]}),(0,ni.jsxs)("li",{children:[(0,ni.jsx)(Zt,{className:"list-icon"})," Analiz ge\xe7mi\u015finiz ve log kay\u0131tlar\u0131n\u0131z silinecek"]}),(0,ni.jsxs)("li",{children:[(0,ni.jsx)(Zt,{className:"list-icon"})," Kalibrasyon verileriniz silinecek"]}),(0,ni.jsxs)("li",{children:[(0,ni.jsx)(Zt,{className:"list-icon"})," Hesap ayarlar\u0131n\u0131z silinecek"]})]}),(0,ni.jsx)("div",{className:"warning-note",children:(0,ni.jsxs)("p",{children:[(0,ni.jsx)("strong",{children:"Not:"})," Bu i\u015flem geri al\u0131namaz ve t\xfcm verileriniz kal\u0131c\u0131 olarak kaybolacakt\u0131r."]})})]}),(0,ni.jsx)("button",{className:"danger-button",onClick:async()=>{try{l(!0),p("");const e=await Rt.getDeleteAccountInfo();e.success?(T(e.data),_(1)):p(e.message||"Bilgi al\u0131namad\u0131")}catch(h){p("Bir hata olu\u015ftu. L\xfctfen tekrar deneyin."),console.error("Delete account info error:",h)}finally{l(!1)}},disabled:o,children:o?"Y\xfckleniyor...":"Hesab\u0131m\u0131 Silmeye Ba\u015fla"})]}),1===b&&k&&(0,ni.jsxs)("div",{className:"delete-step",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(en,{className:"section-icon"})," Silinecek Veriler"]}),(0,ni.jsxs)("div",{className:"delete-summary",children:[(0,ni.jsxs)("div",{className:"summary-item",children:[(0,ni.jsx)("span",{children:"Kullan\u0131c\u0131 Ad\u0131:"}),(0,ni.jsx)("strong",{children:k.user_info.username})]}),(0,ni.jsxs)("div",{className:"summary-item",children:[(0,ni.jsx)("span",{children:"E-posta:"}),(0,ni.jsx)("strong",{children:k.user_info.email})]}),(0,ni.jsxs)("div",{className:"summary-item",children:[(0,ni.jsx)("span",{children:"Log Kay\u0131tlar\u0131:"}),(0,ni.jsxs)("strong",{children:[k.user_info.logs_count," adet"]})]}),(0,ni.jsxs)("div",{className:"summary-item",children:[(0,ni.jsx)("span",{children:"Kalibrasyon Verisi:"}),(0,ni.jsx)("strong",{children:k.user_info.has_calibration?"Var":"Yok"})]})]}),(0,ni.jsxs)("div",{className:"password-verification",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(gn,{className:"section-icon"})," \u015eifre Do\u011frulama"]}),(0,ni.jsx)("p",{children:"Devam etmek i\xe7in mevcut \u015fifrenizi girin:"}),(0,ni.jsx)("input",{type:"password",placeholder:"Mevcut \u015fifrenizi girin",value:w,onChange:e=>S(e.target.value),className:"password-input"}),(0,ni.jsx)("button",{className:"danger-button",onClick:async()=>{if(w)try{l(!0),p("");const e=await Rt.requestDeleteCode(w);e.success?(L(!0),d("Do\u011frulama kodu e-posta adresinize g\xf6nderildi. L\xfctfen e-postan\u0131z\u0131 kontrol edin."),_(2)):p(e.message||"Kod g\xf6nderilemedi")}catch(h){p("Bir hata olu\u015ftu. L\xfctfen tekrar deneyin."),console.error("Request delete code error:",h)}finally{l(!1)}else p("L\xfctfen \u015fifrenizi girin")},disabled:o||!w,children:o?"Kod G\xf6nderiliyor...":"Do\u011frulama Kodu G\xf6nder"})]})]}),2===b&&(0,ni.jsxs)("div",{className:"delete-step",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(xn,{className:"section-icon"})," E-posta Do\u011frulama"]}),R&&(0,ni.jsxs)("div",{className:"code-sent-message",children:[(0,ni.jsxs)("p",{children:[(0,ni.jsx)(Zt,{className:"success-icon"})," Do\u011frulama kodu e-posta adresinize g\xf6nderildi."]}),(0,ni.jsx)("p",{children:"L\xfctfen e-postan\u0131z\u0131 kontrol edin ve 6 haneli kodu girin."})]}),(0,ni.jsxs)("div",{className:"verification-form",children:[(0,ni.jsx)("input",{type:"text",placeholder:"6 haneli do\u011frulama kodunu girin",value:M,onChange:e=>A(e.target.value),className:"code-input",maxLength:6}),(0,ni.jsx)("div",{className:"confirm-delete",children:(0,ni.jsxs)("label",{children:[(0,ni.jsx)("input",{type:"checkbox",checked:C,onChange:e=>E(e.target.checked)}),"Hesab\u0131m\u0131 ve t\xfcm verilerimi kal\u0131c\u0131 olarak silmek istedi\u011fimi onayl\u0131yorum"]})}),(0,ni.jsxs)("div",{className:"delete-actions",children:[(0,ni.jsx)("button",{className:"danger-button",onClick:async()=>{if(M)if(C)try{l(!0),p("");const e=await Rt.deleteAccount(M,!0);e.success?(d("Hesab\u0131n\u0131z ba\u015far\u0131yla silindi. \xc7\u0131k\u0131\u015f yap\u0131l\u0131yor..."),setTimeout(()=>{i()},2e3)):p(e.message||"Hesap silinemedi")}catch(h){p("Bir hata olu\u015ftu. L\xfctfen tekrar deneyin."),console.error("Delete account error:",h)}finally{l(!1)}else p("Hesap silme i\u015flemini onaylaman\u0131z gerekiyor");else p("L\xfctfen do\u011frulama kodunu girin")},disabled:o||!M||!C,children:o?"Siliniyor...":"Hesab\u0131m\u0131 Kal\u0131c\u0131 Olarak Sil"}),(0,ni.jsx)("button",{className:"secondary-button",onClick:()=>{_(0),S(""),A(""),E(!1),L(!1),T(null),d(""),p("")},disabled:o,children:"\u0130ptal Et"})]})]})]}),u&&(0,ni.jsx)("div",{className:"message success",children:u}),h&&(0,ni.jsx)("div",{className:"message error",children:h})]})]})]})]})},JB=e=>{let{scrollToSection:n,isDarkMode:i}=e;const[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!0),u="Sessiz G\xf6stergesidir";return(0,t.useEffect)(()=>{const e=setTimeout(()=>{if(!s&&r.length<20)a(u.substring(0,r.length+1));else if(s&&r.length>0)a(u.substring(0,r.length-1));else{if(!s&&r===u)return void setTimeout(()=>o(!0),2e3);s&&""===r&&o(!1)}},s?50:100);return()=>clearTimeout(e)},[r,s]),(0,t.useEffect)(()=>{const e=setInterval(()=>{c(e=>!e)},500);return()=>clearInterval(e)},[]),(0,ni.jsx)("section",{id:"home",className:"hero-section",children:(0,ni.jsx)("div",{className:"hero-container",children:(0,ni.jsxs)("div",{className:"hero-content",children:[(0,ni.jsxs)("div",{className:"hero-text",children:[(0,ni.jsxs)("h1",{className:"hero-title-small",children:["Duru\u015funuz, Sa\u011fl\u0131\u011f\u0131n\u0131z\u0131n",(0,ni.jsx)("br",{}),(0,ni.jsxs)("span",{className:"highlight typewriter",children:[r,(0,ni.jsx)("span",{className:"cursor ".concat(l?"visible":""),children:"|"})]})]}),(0,ni.jsx)("p",{className:"hero-subtitle",children:'Modern D\xfcnyan\u0131n "G\xf6r\xfcnmez" Sorunu'}),(0,ni.jsx)("p",{className:"hero-description",children:'G\xfcn\xfcm\xfcz\xfcn dijital \xe7a\u011f\u0131nda, saatlerimizi ekran kar\u015f\u0131s\u0131nda ge\xe7iriyoruz. Bu modern ya\u015fam tarz\u0131, fark\u0131nda olmadan duru\u015fumuzu bozarak bizi "teknik boyun" (tech neck), s\u0131rt a\u011fr\u0131lar\u0131 ve kronik yorgunluk gibi bir dizi sa\u011fl\u0131k sorunuyla ba\u015f ba\u015fa b\u0131rak\u0131yor. K\xf6t\xfc duru\u015f sadece estetik bir sorun de\u011fil, ayn\u0131 zamanda omurga sa\u011fl\u0131\u011f\u0131n\u0131z\u0131, nefes kapasitenizi ve hatta ruh halinizi do\u011frudan etkileyen fizyolojik bir problemdir.'}),(0,ni.jsxs)("p",{className:"hero-description",children:[(0,ni.jsx)("strong",{children:"PostureGuard"}),", bu g\xf6r\xfcnmez sorunu g\xf6r\xfcn\xfcr k\u0131lmak ve size kontrol\xfc geri vermek i\xe7in tasarland\u0131."]}),(0,ni.jsxs)("div",{className:"hero-buttons",children:[(0,ni.jsx)("button",{className:"cta-primary",onClick:()=>n("about"),children:"Daha Fazla Bilgi"}),(0,ni.jsx)("button",{className:"cta-secondary",onClick:()=>n("solution"),children:"Nas\u0131l \xc7al\u0131\u015f\u0131r? \u25b6"})]})]}),(0,ni.jsxs)("div",{className:"hero-visual",children:[(0,ni.jsx)("div",{className:"hero-image",children:(0,ni.jsx)("img",{src:"/b\xf6l\xfcm1.jpg",alt:"Modern d\xfcnyan\u0131n g\xf6r\xfcnmez sorunu - odaklanm\u0131\u015f \xe7al\u0131\u015fan",className:"hero-main-image"})}),(0,ni.jsxs)("div",{className:"hero-stats",children:[(0,ni.jsxs)("div",{className:"stat",children:[(0,ni.jsx)("strong",{children:"%98"}),(0,ni.jsx)("span",{children:"Do\u011fruluk Oran\u0131"})]}),(0,ni.jsxs)("div",{className:"stat",children:[(0,ni.jsx)("strong",{children:"5 Saniye"}),(0,ni.jsx)("span",{children:"Analiz S\xfcresi"})]}),(0,ni.jsxs)("div",{className:"stat",children:[(0,ni.jsx)("strong",{children:"7/24"}),(0,ni.jsx)("span",{children:"Ger\xe7ek Zamanl\u0131"})]})]})]})]})})})},KB=()=>(0,ni.jsx)("section",{id:"about",className:"about-section",children:(0,ni.jsx)("div",{className:"container",children:(0,ni.jsxs)("div",{className:"about-content",children:[(0,ni.jsxs)("div",{className:"about-header",children:[(0,ni.jsx)("h2",{children:"\u0130deal Duru\u015f Nedir? V\xfccudun Do\u011fal Hizalanmas\u0131"}),(0,ni.jsx)("h3",{children:"N\xf6tral Omurga: M\xfckemmel Denge Noktas\u0131"}),(0,ni.jsx)("p",{children:'\u0130deal duru\u015f, kaslar\u0131n\u0131z\u0131n ve iskelet sisteminizin en az eforla, en dengeli ve en verimli \xe7al\u0131\u015ft\u0131\u011f\u0131 pozisyondur. Buna "n\xf6tral omurga" denir. Bu pozisyonda, v\xfccut a\u011f\u0131rl\u0131\u011f\u0131 eklemlere e\u015fit olarak da\u011f\u0131l\u0131r, bu da a\u015f\u0131nma ve y\u0131pranmay\u0131 en aza indirir.'})]}),(0,ni.jsxs)("div",{className:"about-main",children:[(0,ni.jsxs)("div",{className:"about-text",children:[(0,ni.jsxs)("div",{className:"posture-types",children:[(0,ni.jsxs)("div",{className:"posture-type",children:[(0,ni.jsx)("h4",{children:(0,ni.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,ni.jsx)("div",{className:"icon-bg-gradient blue",style:{width:"24px",height:"24px",borderRadius:"6px"},children:(0,ni.jsx)(Xn,{style:{fontSize:"12px",color:"white"}})}),"Ayakta \u0130deal Duru\u015f"]})}),(0,ni.jsx)("p",{children:"V\xfccudun a\u011f\u0131rl\u0131k merkezi, kulak memesinden ba\u015flay\u0131p omuz, kal\xe7a, diz ve ayak bile\u011finin hemen \xf6n\xfcnden ge\xe7en hayali bir dikey \xe7izgi \xfczerinde hizalanmal\u0131d\u0131r. \xc7ene yere paralel, omuzlar geride ve rahat, kar\u0131n kaslar\u0131 hafif\xe7e i\xe7e \xe7ekilmi\u015f olmal\u0131d\u0131r."})]}),(0,ni.jsxs)("div",{className:"posture-type",children:[(0,ni.jsx)("h4",{children:(0,ni.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,ni.jsx)("div",{className:"icon-bg-gradient purple",style:{width:"24px",height:"24px",borderRadius:"6px"},children:(0,ni.jsx)(wn,{style:{fontSize:"12px",color:"white"}})}),"Otururken \u0130deal Duru\u015f"]})}),(0,ni.jsx)("p",{children:'Ayaklar yere tam basmal\u0131, dizler kal\xe7a hizas\u0131nda veya biraz alt\u0131nda olmal\u0131d\u0131r. S\u0131rt, sandalyenin arkal\u0131\u011f\u0131yla desteklenmeli ve omurgan\u0131n do\u011fal "S" e\u011frileri korunmal\u0131d\u0131r. Omuzlar rahat ve geride, ba\u015f ise omuzlar\u0131n \xfczerinde hizalanm\u0131\u015f olmal\u0131d\u0131r.'})]})]}),(0,ni.jsxs)("div",{className:"posture-visual",children:[(0,ni.jsx)("div",{className:"anatomy-diagram",children:(0,ni.jsx)("img",{src:"/cekul.jpg",alt:"\xc7ek\xfcl \xe7izgisi g\xf6rseli",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"}})}),(0,ni.jsxs)("p",{className:"diagram-caption",children:[(0,ni.jsx)("strong",{children:"\xc7ek\xfcl \xc7izgisi:"})," Kulak, omuz, kal\xe7a, diz ve ayak bile\u011finden ge\xe7en dikey hizalama"]})]})]}),(0,ni.jsxs)("div",{className:"about-visual",children:[(0,ni.jsxs)("div",{className:"posture-comparison",children:[(0,ni.jsxs)("div",{className:"comparison-item good",children:[(0,ni.jsx)("h4",{children:(0,ni.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,ni.jsx)("div",{className:"icon-bg-gradient green",style:{width:"24px",height:"24px",borderRadius:"6px"},children:(0,ni.jsx)(Zt,{style:{fontSize:"12px",color:"white"}})}),"\u0130deal Duru\u015f"]})}),(0,ni.jsx)("div",{className:"posture-image",children:(0,ni.jsx)("img",{src:"/b\xf6l\xfcm3.jpg",alt:"\u0130deal duru\u015f \xf6rne\u011fi"})}),(0,ni.jsxs)("ul",{children:[(0,ni.jsx)("li",{children:"Dik omurga"}),(0,ni.jsx)("li",{children:"Rahat omuzlar"}),(0,ni.jsx)("li",{children:"Do\u011fal boyun e\u011frisi"})]})]}),(0,ni.jsxs)("div",{className:"comparison-item bad",children:[(0,ni.jsx)("h4",{children:(0,ni.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,ni.jsx)("div",{className:"icon-bg-gradient red",style:{width:"24px",height:"24px",borderRadius:"6px"},children:(0,ni.jsx)($n,{style:{fontSize:"12px",color:"white"}})}),"K\xf6t\xfc Duru\u015f"]})}),(0,ni.jsx)("div",{className:"posture-image",children:(0,ni.jsx)("img",{src:"/b\xf6l\xfcm4.jpg",alt:"K\xf6t\xfc duru\u015f \xf6rne\u011fi"})}),(0,ni.jsxs)("ul",{children:[(0,ni.jsx)("li",{children:"\xd6ne e\u011fik ba\u015f"}),(0,ni.jsx)("li",{children:"Yuvarlak omuzlar"}),(0,ni.jsx)("li",{children:"Kambur s\u0131rt"})]})]})]}),(0,ni.jsxs)("div",{className:"features",children:[(0,ni.jsxs)("div",{className:"feature",children:[(0,ni.jsx)("h4",{children:"Dengeli A\u011f\u0131rl\u0131k Da\u011f\u0131l\u0131m\u0131"}),(0,ni.jsx)("p",{children:"V\xfccut a\u011f\u0131rl\u0131\u011f\u0131 eklemlere e\u015fit olarak da\u011f\u0131l\u0131r"})]}),(0,ni.jsxs)("div",{className:"feature",children:[(0,ni.jsx)("h4",{children:"Optimal Nefes Kapasitesi"}),(0,ni.jsx)("p",{children:"G\xf6\u011f\xfcs kafesi a\xe7\u0131k, nefes alma verimli"})]}),(0,ni.jsxs)("div",{className:"feature",children:[(0,ni.jsx)("h4",{children:"Azalt\u0131lm\u0131\u015f Stres"}),(0,ni.jsx)("p",{children:"Kaslar ve eklemler minimum gerginlikle \xe7al\u0131\u015f\u0131r"})]})]})]})]})]})})}),qB=()=>(0,ni.jsx)("section",{id:"posture-problems",className:"posture-problems-section",children:(0,ni.jsx)("div",{className:"container",children:(0,ni.jsxs)("div",{className:"problems-content",children:[(0,ni.jsxs)("div",{className:"problems-header",children:[(0,ni.jsx)("h2",{children:"En Yayg\u0131n Duru\u015f Bozukluklar\u0131 ve Teknik A\xe7\u0131klamalar\u0131"}),(0,ni.jsx)("h3",{children:"Duru\u015funuzun D\xfc\u015fmanlar\u0131n\u0131 Tan\u0131y\u0131n"}),(0,ni.jsx)("p",{children:"PostureGuard, yapay zeka destekli analiz motoruyla a\u015fa\u011f\u0131daki gibi yayg\u0131n ve kritik duru\u015f bozukluklar\u0131n\u0131 ger\xe7ek zamanl\u0131 olarak tespit eder:"})]}),(0,ni.jsxs)("div",{className:"problems-grid",children:[(0,ni.jsxs)("div",{className:"problem-card",children:[(0,ni.jsxs)("div",{className:"problem-header",children:[(0,ni.jsx)("div",{className:"problem-number",children:"1"}),(0,ni.jsx)("h4",{children:"\xd6ne E\u011fik Ba\u015f Duru\u015fu"}),(0,ni.jsx)("div",{className:"problem-subtitle",children:'Forward Head Posture / "Tech Neck"'})]}),(0,ni.jsxs)("div",{className:"problem-content",children:[(0,ni.jsx)("div",{className:"problem-visual",children:(0,ni.jsxs)("div",{className:"before-after",children:[(0,ni.jsxs)("div",{className:"before",children:[(0,ni.jsx)("img",{src:"/bas_yanlis.png",alt:"\xd6ne e\u011fik ba\u015f duru\u015fu"}),(0,ni.jsx)("span",{children:"\xd6nce"})]}),(0,ni.jsx)("div",{className:"arrow",children:"\u2192"}),(0,ni.jsxs)("div",{className:"after",children:[(0,ni.jsx)("img",{src:"/bas_dogru.png",alt:"Do\u011fru ba\u015f duru\u015fu"}),(0,ni.jsx)("span",{children:"Sonra"})]})]})}),(0,ni.jsxs)("div",{className:"problem-details",children:[(0,ni.jsx)("h5",{children:"Teknik Bilgi:"}),(0,ni.jsx)("p",{children:"Ba\u015f\u0131n, omuz hizas\u0131ndan \xf6ne do\u011fru yer de\u011fi\u015ftirmesidir. Ba\u015f\u0131n \xf6ne gitti\u011fi her 2.5 cm, boyun omurlar\u0131na binen y\xfck\xfc yakla\u015f\u0131k 4.5 kg art\u0131r\u0131r. Bu durum, servikal omurgada (boyun b\xf6lgesi) a\u015f\u0131r\u0131 strese, kas gerginli\u011fine ve ba\u015f a\u011fr\u0131lar\u0131na neden olur."}),(0,ni.jsx)("h5",{children:"PostureGuard Nas\u0131l Tespit Eder?"}),(0,ni.jsx)("p",{children:"Kulak ve omuz eklemleriniz aras\u0131ndaki dikey hizalamay\u0131 anl\u0131k olarak \xf6l\xe7er."})]})]})]}),(0,ni.jsxs)("div",{className:"problem-card",children:[(0,ni.jsxs)("div",{className:"problem-header",children:[(0,ni.jsx)("div",{className:"problem-number",children:"2"}),(0,ni.jsx)("h4",{children:"Kifoz (Kamburluk) ve Yuvarlak Omuzlar"}),(0,ni.jsx)("div",{className:"problem-subtitle",children:"Rounded Shoulders"})]}),(0,ni.jsxs)("div",{className:"problem-content",children:[(0,ni.jsx)("div",{className:"problem-visual",children:(0,ni.jsxs)("div",{className:"before-after",children:[(0,ni.jsxs)("div",{className:"before",children:[(0,ni.jsx)("img",{src:"/kifoz_yanlis.png",alt:"Kifoz duru\u015fu"}),(0,ni.jsx)("span",{children:"\xd6nce"})]}),(0,ni.jsx)("div",{className:"arrow",children:"\u2192"}),(0,ni.jsxs)("div",{className:"after",children:[(0,ni.jsx)("img",{src:"/kifoz_dogru.png",alt:"Do\u011fru kifoz duru\u015fu"}),(0,ni.jsx)("span",{children:"Sonra"})]})]})}),(0,ni.jsxs)("div",{className:"problem-details",children:[(0,ni.jsx)("h5",{children:"Teknik Bilgi:"}),(0,ni.jsx)("p",{children:"S\u0131rt\u0131n \xfcst k\u0131sm\u0131ndaki do\u011fal d\u0131\u015fa d\xf6n\xfck e\u011frinin (torasik kifoz) artmas\u0131 ve omuzlar\u0131n \xf6ne do\u011fru d\xfc\u015fmesidir. Bu durum, g\xf6\u011f\xfcs kaslar\u0131n\u0131n k\u0131salmas\u0131na, s\u0131rt kaslar\u0131n\u0131n ise zay\u0131flay\u0131p uzamas\u0131na neden olur. Sonu\xe7 olarak nefes kapasitesi azalabilir ve omuz ekleminde hareket k\u0131s\u0131tl\u0131l\u0131\u011f\u0131 olu\u015fabilir."}),(0,ni.jsx)("h5",{children:"PostureGuard Nas\u0131l Tespit Eder?"}),(0,ni.jsx)("p",{children:"Omuzlar\u0131n\u0131z\u0131n kal\xe7a ve kulaklar\u0131n\u0131zla olan hizas\u0131n\u0131 ve s\u0131rt\u0131n\u0131z\u0131n \xfcst k\u0131sm\u0131ndaki e\u011frilik a\xe7\u0131s\u0131n\u0131 analiz eder."})]})]})]}),(0,ni.jsxs)("div",{className:"problem-card",children:[(0,ni.jsxs)("div",{className:"problem-header",children:[(0,ni.jsx)("div",{className:"problem-number",children:"3"}),(0,ni.jsx)("h4",{children:"Bel \xc7ukurunun Artmas\u0131"}),(0,ni.jsx)("div",{className:"problem-subtitle",children:"Lumbar Lordosis"})]}),(0,ni.jsxs)("div",{className:"problem-content",children:[(0,ni.jsx)("div",{className:"problem-visual",children:(0,ni.jsxs)("div",{className:"before-after",children:[(0,ni.jsxs)("div",{className:"before",children:[(0,ni.jsx)("img",{src:"/bel_yanlis.png",alt:"Yanl\u0131\u015f bel duru\u015fu"}),(0,ni.jsx)("span",{children:"\xd6nce"})]}),(0,ni.jsx)("div",{className:"arrow",children:"\u2192"}),(0,ni.jsxs)("div",{className:"after",children:[(0,ni.jsx)("img",{src:"/bel_dogru.png",alt:"Do\u011fru bel duru\u015fu"}),(0,ni.jsx)("span",{children:"Sonra"})]})]})}),(0,ni.jsxs)("div",{className:"problem-details",children:[(0,ni.jsx)("h5",{children:"Teknik Bilgi:"}),(0,ni.jsx)("p",{children:"Bel b\xf6lgesindeki do\u011fal i\xe7e d\xf6n\xfck e\u011frinin a\u015f\u0131r\u0131 artmas\u0131d\u0131r. Genellikle zay\u0131f kar\u0131n kaslar\u0131 ve gergin kal\xe7a fleks\xf6r kaslar\u0131ndan kaynaklan\u0131r. Bu durum, bel omurlar\u0131na ve disklerine a\u015f\u0131r\u0131 bask\u0131 uygulayarak bel a\u011fr\u0131lar\u0131na zemin haz\u0131rlar."}),(0,ni.jsx)("h5",{children:"PostureGuard Nas\u0131l Tespit Eder?"}),(0,ni.jsx)("p",{children:"Kal\xe7a ve omuzlar\u0131n\u0131z aras\u0131ndaki hizalamay\u0131 ve bel b\xf6lgesindeki omurga e\u011fimini takip eder."})]})]})]})]}),(0,ni.jsxs)("div",{className:"detection-stats",children:[(0,ni.jsxs)("div",{className:"stat-item",children:[(0,ni.jsx)("div",{className:"stat-icon",children:"\ud83c\udfaf"}),(0,ni.jsxs)("div",{className:"stat-content",children:[(0,ni.jsx)("h4",{children:"Ger\xe7ek Zamanl\u0131 Tespit"}),(0,ni.jsx)("p",{children:"Milisaniyeler i\xe7inde duru\u015f bozukluklar\u0131n\u0131 tespit eder"})]})]}),(0,ni.jsxs)("div",{className:"stat-item",children:[(0,ni.jsx)("div",{className:"stat-icon",children:"\ud83d\udcca"}),(0,ni.jsxs)("div",{className:"stat-content",children:[(0,ni.jsx)("h4",{children:"Detayl\u0131 Analiz"}),(0,ni.jsx)("p",{children:"Her eklem noktas\u0131n\u0131 ayr\u0131 ayr\u0131 de\u011ferlendirir"})]})]}),(0,ni.jsxs)("div",{className:"stat-item",children:[(0,ni.jsx)("div",{className:"stat-icon",children:"\ud83d\udd14"}),(0,ni.jsxs)("div",{className:"stat-content",children:[(0,ni.jsx)("h4",{children:"Anl\u0131k Uyar\u0131lar"}),(0,ni.jsx)("p",{children:"Duru\u015f bozuldu\u011funda an\u0131nda bildirim al\u0131rs\u0131n\u0131z"})]})]})]})]})})}),ZB=()=>(0,ni.jsx)("section",{id:"solution",className:"solution-section",children:(0,ni.jsx)("div",{className:"container",children:(0,ni.jsxs)("div",{className:"solution-content",children:[(0,ni.jsxs)("div",{className:"solution-header",children:[(0,ni.jsx)("h2",{children:"\xc7\xf6z\xfcm: Bilgi G\xfc\xe7t\xfcr, Anl\u0131k Geri Bildirim Her \u015eeydir"}),(0,ni.jsx)("h3",{children:"Duru\u015funuzu Tahmin Etmeyin. \xd6l\xe7\xfcn ve \u0130yile\u015ftirin."}),(0,ni.jsx)("p",{children:"Duru\u015funuzu d\xfczeltmenin ilk ad\u0131m\u0131 fark\u0131ndal\u0131kt\u0131r. PostureGuard, mevcut duru\u015funuzu sadece saniyeler i\xe7inde analiz etmekle kalmaz, ayn\u0131 zamanda \xe7al\u0131\u015fma s\xfcreniz boyunca sizi nazik\xe7e uyararak do\u011fru al\u0131\u015fkanl\u0131klar\u0131 kazanman\u0131za yard\u0131mc\u0131 olur. Yapay zeka destekli teknolojimiz, v\xfccudunuzun kilit eklem noktalar\u0131n\u0131 takip ederek size ki\u015fiselle\u015ftirilmi\u015f ve eyleme ge\xe7irilebilir geri bildirimler sunar."})]}),(0,ni.jsxs)("div",{className:"solution-grid",children:[(0,ni.jsxs)("div",{className:"solution-card",children:[(0,ni.jsx)("div",{className:"solution-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient blue",children:(0,ni.jsx)(Dn,{style:{fontSize:"24px",color:"white"}})})}),(0,ni.jsx)("h4",{children:"Ger\xe7ek Zamanl\u0131 \u0130zleme"}),(0,ni.jsx)("p",{children:"Kamera teknolojisi ile duru\u015funuzu s\xfcrekli olarak izler ve an\u0131nda geri bildirim sa\u011flar. Duru\u015f bozuldu\u011funda an\u0131nda uyar\u0131 al\u0131rs\u0131n\u0131z."})]}),(0,ni.jsxs)("div",{className:"solution-card",children:[(0,ni.jsx)("div",{className:"solution-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient purple",children:(0,ni.jsx)(nn,{style:{fontSize:"24px",color:"white"}})})}),(0,ni.jsx)("h4",{children:"Yapay Zeka Analizi"}),(0,ni.jsx)("p",{children:"Geli\u015fmi\u015f AI algoritmalar\u0131 ile v\xfccudunuzun 17 kilit noktas\u0131n\u0131 analiz eder ve duru\u015f bozukluklar\u0131n\u0131 milisaniyeler i\xe7inde tespit eder."})]}),(0,ni.jsxs)("div",{className:"solution-card",children:[(0,ni.jsx)("div",{className:"solution-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient cyan",children:(0,ni.jsx)(Xt,{style:{fontSize:"24px",color:"white"}})})}),(0,ni.jsx)("h4",{children:"Detayl\u0131 Raporlama"}),(0,ni.jsx)("p",{children:"G\xfcnl\xfck, haftal\u0131k ve ayl\u0131k duru\u015f raporlar\u0131 ile ilerlemenizi takip edin. Hangi duru\u015f bozukluklar\u0131n\u0131n azald\u0131\u011f\u0131n\u0131 g\xf6r\xfcn."})]}),(0,ni.jsxs)("div",{className:"solution-card",children:[(0,ni.jsx)("div",{className:"solution-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient green",children:(0,ni.jsx)(On,{style:{fontSize:"24px",color:"white"}})})}),(0,ni.jsx)("h4",{children:"Ki\u015fiselle\u015ftirilmi\u015f \xd6neriler"}),(0,ni.jsx)("p",{children:"Duru\u015f bozukluklar\u0131n\u0131za \xf6zel egzersiz ve d\xfczeltme \xf6nerileri al\u0131n. Her kullan\u0131c\u0131 i\xe7in \xf6zel program."})]})]}),(0,ni.jsxs)("div",{className:"app-interface-demo",children:[(0,ni.jsxs)("div",{className:"demo-header",children:[(0,ni.jsx)("h4",{children:"PostureGuard Aray\xfcz\xfc"}),(0,ni.jsx)("p",{children:"Kullan\u0131c\u0131 dostu aray\xfcz ile duru\u015funuzu kolayca takip edin"})]}),(0,ni.jsx)("div",{className:"interface-preview",children:(0,ni.jsxs)("div",{className:"app-window",children:[(0,ni.jsxs)("div",{className:"app-header",children:[(0,ni.jsxs)("div",{className:"app-title",children:[(0,ni.jsx)(Jn,{style:{fontSize:"18px",marginRight:"8px"}}),"PostureGuard"]}),(0,ni.jsxs)("div",{className:"status-indicator good",children:[(0,ni.jsx)(Zt,{style:{fontSize:"16px",marginRight:"6px"}}),"\u0130yi Duru\u015f"]})]}),(0,ni.jsxs)("div",{className:"app-body",children:[(0,ni.jsx)("div",{className:"camera-section",children:(0,ni.jsx)("div",{className:"video-container",children:(0,ni.jsxs)("div",{className:"camera-placeholder",children:[(0,ni.jsx)("div",{className:"camera-icon",children:(0,ni.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32",children:(0,ni.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,ni.jsx)("h3",{children:"Canl\u0131 Analiz"})]})})}),(0,ni.jsxs)("div",{className:"analysis-section",children:[(0,ni.jsxs)("div",{className:"analysis-metrics",children:[(0,ni.jsxs)("div",{className:"metric-row",children:[(0,ni.jsxs)("span",{className:"metric-label",children:[(0,ni.jsx)(Xt,{style:{fontSize:"14px",marginRight:"4px"}}),"Skor:"]}),(0,ni.jsx)("span",{className:"metric-value score-4",children:"85"})]}),(0,ni.jsxs)("div",{className:"metric-row",children:[(0,ni.jsxs)("span",{className:"metric-label",children:[(0,ni.jsx)(Ht,{style:{fontSize:"14px",marginRight:"4px"}}),"S\u0131rt:"]}),(0,ni.jsx)("span",{className:"metric-value",children:"12\xb0"})]}),(0,ni.jsxs)("div",{className:"metric-row",children:[(0,ni.jsxs)("span",{className:"metric-label",children:[(0,ni.jsx)(Gn,{style:{fontSize:"14px",marginRight:"4px"}}),"Boyun:"]}),(0,ni.jsx)("span",{className:"metric-value",children:"16\xb0"})]})]}),(0,ni.jsxs)("div",{className:"risk-level d\xfc\u015f\xfck",children:[(0,ni.jsxs)("strong",{children:[(0,ni.jsx)(Wt,{style:{fontSize:"16px",marginRight:"4px"}}),"Risk:"]})," D\xfc\u015f\xfck"]}),(0,ni.jsxs)("div",{className:"improvement-tips",children:[(0,ni.jsxs)("h4",{children:[(0,ni.jsx)(CT,{style:{fontSize:"16px",marginRight:"6px"}}),"\xd6neriler:"]}),(0,ni.jsxs)("ul",{children:[(0,ni.jsx)("li",{children:"Boyun egzersizleri"}),(0,ni.jsx)("li",{children:"Ekran y\xfcksekli\u011fi"})]})]})]})]})]})})]}),(0,ni.jsxs)("div",{className:"benefits-section",children:[(0,ni.jsx)("h4",{children:"PostureGuard'\u0131n Faydalar\u0131"}),(0,ni.jsx)("p",{className:"target-audience-intro",children:"\xd6zellikle bilgisayar ba\u015f\u0131nda uzun s\xfcre \xe7al\u0131\u015fan ki\u015filer i\xe7in tasarlanm\u0131\u015ft\u0131r, ancak herkes taraf\u0131ndan kullan\u0131labilir."}),(0,ni.jsxs)("div",{className:"benefits-grid",children:[(0,ni.jsxs)("div",{className:"benefit-item",children:[(0,ni.jsx)("div",{className:"benefit-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient blue",children:(0,ni.jsx)(Jt,{style:{fontSize:"20px",color:"white"}})})}),(0,ni.jsxs)("div",{className:"benefit-content",children:[(0,ni.jsx)("h5",{children:"Masaba\u015f\u0131 \xc7al\u0131\u015fanlar"}),(0,ni.jsxs)("ul",{children:[(0,ni.jsx)("li",{children:"8+ saat bilgisayar ba\u015f\u0131nda \xe7al\u0131\u015fma"}),(0,ni.jsx)("li",{children:"Ergonomik \xe7al\u0131\u015fma ortam\u0131 olu\u015fturma"}),(0,ni.jsx)("li",{children:"Kronik boyun ve s\u0131rt a\u011fr\u0131lar\u0131n\u0131 \xf6nleme"}),(0,ni.jsx)("li",{children:"Verimlili\u011fi art\u0131rma"})]})]})]}),(0,ni.jsxs)("div",{className:"benefit-item",children:[(0,ni.jsx)("div",{className:"benefit-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient green",children:(0,ni.jsx)(hn,{style:{fontSize:"20px",color:"white"}})})}),(0,ni.jsxs)("div",{className:"benefit-content",children:[(0,ni.jsx)("h5",{children:"Home Office \xc7al\u0131\u015fanlar"}),(0,ni.jsxs)("ul",{children:[(0,ni.jsx)("li",{children:"Ev ortam\u0131nda ergonomik d\xfczenleme"}),(0,ni.jsx)("li",{children:"Uzaktan \xe7al\u0131\u015fma s\u0131ras\u0131nda sa\u011fl\u0131k takibi"}),(0,ni.jsx)("li",{children:"\u0130zole \xe7al\u0131\u015fma ortam\u0131nda motivasyon"}),(0,ni.jsx)("li",{children:"Work-life balance koruma"})]})]})]}),(0,ni.jsxs)("div",{className:"benefit-item",children:[(0,ni.jsx)("div",{className:"benefit-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient purple",children:(0,ni.jsx)(wn,{style:{fontSize:"20px",color:"white"}})})}),(0,ni.jsxs)("div",{className:"benefit-content",children:[(0,ni.jsx)("h5",{children:"E-Spor Oyuncular\u0131"}),(0,ni.jsxs)("ul",{children:[(0,ni.jsx)("li",{children:"Uzun oyun seanslar\u0131nda duru\u015f kontrol\xfc"}),(0,ni.jsx)("li",{children:"Performans optimizasyonu"}),(0,ni.jsx)("li",{children:"Profesyonel oyuncu sa\u011fl\u0131\u011f\u0131"}),(0,ni.jsx)("li",{children:"Reaksiyon s\xfcresini koruma"})]})]})]}),(0,ni.jsxs)("div",{className:"benefit-item",children:[(0,ni.jsx)("div",{className:"benefit-icon-modern",children:(0,ni.jsx)("div",{className:"icon-bg-gradient cyan",children:(0,ni.jsx)(Yn,{style:{fontSize:"20px",color:"white"}})})}),(0,ni.jsxs)("div",{className:"benefit-content",children:[(0,ni.jsx)("h5",{children:"Di\u011fer Kullan\u0131c\u0131lar"}),(0,ni.jsxs)("ul",{children:[(0,ni.jsx)("li",{children:"\xd6\u011frenciler ve ara\u015ft\u0131rmac\u0131lar"}),(0,ni.jsx)("li",{children:"Yaz\u0131l\u0131m geli\u015ftiriciler"}),(0,ni.jsx)("li",{children:"Grafik tasar\u0131mc\u0131lar"}),(0,ni.jsx)("li",{children:"Duru\u015f fark\u0131ndal\u0131\u011f\u0131 isteyen herkes"})]})]})]})]})]}),(0,ni.jsxs)("div",{className:"cta-section",children:[(0,ni.jsx)("h3",{children:"Duru\u015funuzu D\xfczeltmeye Ba\u015flay\u0131n"}),(0,ni.jsx)("p",{children:"PostureGuard ile duru\u015funuzu analiz edin, iyile\u015ftirin ve sa\u011fl\u0131kl\u0131 al\u0131\u015fkanl\u0131klar kazan\u0131n. \u0130lk ad\u0131m\u0131 at\u0131n ve fark\u0131 hissedin."})]})]})})}),QB=e=>{let{isDarkMode:n,currentUser:i}=e;const[r,a]=(0,t.useState)({name:i?"".concat(i.firstname," ").concat(i.lastname):"",email:i?i.email:"",message:""}),[s,o]=(0,t.useState)(!1),l=e=>{const{name:t,value:n}=e.target;a(e=>c(c({},e),{},{[t]:n}))};return(0,ni.jsx)("section",{id:"contact",className:"contact-section",children:(0,ni.jsx)("div",{className:"container",children:(0,ni.jsxs)("div",{className:"contact-content",children:[(0,ni.jsxs)("div",{className:"contact-info",children:[(0,ni.jsx)("h2",{children:"\u0130leti\u015fime Ge\xe7in"}),(0,ni.jsx)("p",{children:"Sorular\u0131n\u0131z m\u0131 var? Profesyonel destek ekibimiz size yard\u0131mc\u0131 olmaya haz\u0131r."}),(0,ni.jsxs)("div",{className:"contact-items",children:[(0,ni.jsxs)("div",{className:"contact-item",children:[(0,ni.jsx)("div",{className:"contact-icon",children:(0,ni.jsx)(xn,{className:"contact-icon-svg"})}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h4",{children:"E-posta"}),(0,ni.jsx)("p",{children:"destek@postureguard.com"})]})]}),(0,ni.jsxs)("div",{className:"contact-item",children:[(0,ni.jsx)("div",{className:"contact-icon",children:(0,ni.jsx)(An,{className:"contact-icon-svg"})}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h4",{children:"Telefon"}),(0,ni.jsx)("p",{children:"+90 (212) 555 0123"})]})]}),(0,ni.jsxs)("div",{className:"contact-item",children:[(0,ni.jsx)("div",{className:"contact-icon",children:(0,ni.jsx)(yn,{className:"contact-icon-svg"})}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h4",{children:"Adres"}),(0,ni.jsx)("p",{children:"\u0130stanbul, T\xfcrkiye"})]})]})]})]}),(0,ni.jsx)("div",{className:"contact-form",children:(0,ni.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.name&&r.email&&r.message){o(!0);try{console.log("Contact form data:",r);const e=await fetch("http://localhost:8000/contact/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});console.log("Response status:",e.status);const t=await e.json();console.log("Response result:",t),e.ok?(alert("Mesaj\u0131n\u0131z ba\u015far\u0131yla g\xf6nderildi! En k\u0131sa s\xfcrede d\xf6n\xfc\u015f yapaca\u011f\u0131z."),a({name:"",email:"",message:""})):(console.error("Backend error:",t),alert("Hata: ".concat(t.detail||"Mesaj g\xf6nderilemedi. L\xfctfen tekrar deneyin.")))}catch(WE){console.error("Contact form error:",WE),alert("Ba\u011flant\u0131 hatas\u0131. L\xfctfen internet ba\u011flant\u0131n\u0131z\u0131 kontrol edin ve tekrar deneyin.")}finally{o(!1)}}else alert("L\xfctfen t\xfcm alanlar\u0131 doldurunuz.")},children:[(0,ni.jsx)("div",{className:"form-group",children:(0,ni.jsx)("input",{type:"text",name:"name",placeholder:"Ad\u0131n\u0131z Soyad\u0131n\u0131z",value:r.name,onChange:l,required:!0})}),(0,ni.jsx)("div",{className:"form-group",children:(0,ni.jsx)("input",{type:"email",name:"email",placeholder:"E-posta Adresiniz",value:r.email,onChange:l,required:!0})}),(0,ni.jsx)("div",{className:"form-group",children:(0,ni.jsx)("textarea",{name:"message",placeholder:"Mesaj\u0131n\u0131z",rows:"5",value:r.message,onChange:l,required:!0})}),(0,ni.jsxs)("button",{type:"submit",className:"contact-btn",disabled:s,children:[(0,ni.jsx)(Ln,{className:"btn-icon"}),s?"G\xf6nderiliyor...":"Mesaj G\xf6nder"]})]})})]})})})},$B=e=>{let{currentUser:n,onLogout:i,scrollToSection:r,isDarkMode:a,toggleTheme:s}=e;const[o,l]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null),v=ue(),x=pe();(0,t.useEffect)(()=>{if(null!==n&&void 0!==n&&n.avatar)try{let e=null;if(console.log("\ud83d\udd0d Avatar raw data:",n.avatar),console.log("\ud83d\udd0d Avatar type:",typeof n.avatar),"string"===typeof n.avatar){let t=n.avatar;t.startsWith('"')&&t.endsWith('"')&&(t=t.slice(1,-1)),t=t.replace(/\\"/g,'"'),t&&"null"!==t&&"undefined"!==t&&(e=JSON.parse(t))}else"object"===typeof n.avatar&&null!==n.avatar&&(e=n.avatar);console.log("\u2705 Parsed avatar config:",e),p(e),m(!1)}catch(WE){console.error("\u274c Avatar parse error:",WE),console.error("\u274c Raw data that failed:",n.avatar),p(null),m(!0)}else console.log("\u26a0\ufe0f No avatar data found"),p(null)},[null===n||void 0===n?void 0:n.avatar]),(0,t.useEffect)(()=>(o?document.body.classList.add("mobile-menu-open"):document.body.classList.remove("mobile-menu-open"),()=>{document.body.classList.remove("mobile-menu-open")}),[o]);const y=e=>{"/contact"===e?x("/contact"):"/"===e?(x("/"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)):x(e),l(!1)},b=()=>{i(),x("/"),d(!1)},_=()=>{d(!1)};(0,t.useEffect)(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const w=e=>"/"===e?"/"===v.pathname:v.pathname===e,S=()=>h&&Object.keys(h).length>0&&!f?(console.log("\ud83c\udfa8 Rendering react-nice-avatar with config:",h),(0,ni.jsx)("div",{className:"nav-avatar-container",children:(0,ni.jsx)(OB,c(c({className:"nav-avatar-nice"},h),{},{style:{width:"56px",height:"56px"}}))})):null!==n&&void 0!==n&&n.user_id&&!f?(0,ni.jsx)("img",{src:"http://localhost:8000/auth/avatar/".concat(n.user_id,"?t=").concat(Date.now()),alt:"User Avatar",className:"nav-avatar-img",style:{width:"32px",height:"32px",borderRadius:"50%"},onError:e=>{console.log("\ud83d\udd04 Backend avatar failed, showing fallback"),m(!0)},onLoad:()=>{console.log("\u2705 Backend avatar loaded successfully!")}}):(0,ni.jsx)("div",{className:"nav-avatar-fallback",children:null!==n&&void 0!==n&&n.firstname?n.firstname[0].toUpperCase():"\ud83d\udc64"});return(0,ni.jsxs)("nav",{className:"navbar",children:[(0,ni.jsxs)("div",{className:"nav-container",children:[(0,ni.jsxs)("div",{className:"nav-logo",onClick:()=>y("/"),children:[(0,ni.jsx)("div",{className:"logo-container",children:(0,ni.jsx)("img",{src:"/logo-500x500.png?t=".concat(Date.now()),alt:"PostureGuard Logo",className:"nav-logo-img",onLoad:()=>console.log("As\u0131l logo ba\u015far\u0131yla y\xfcklendi!"),onError:()=>console.log("Logo y\xfcklenemedi!")})}),(0,ni.jsxs)("div",{className:"brand-text",children:[(0,ni.jsx)("h2",{children:"PostureGuard"}),(0,ni.jsx)("span",{className:"brand-tagline",children:"AI Powered"})]})]}),(0,ni.jsxs)("div",{className:"nav-menu ".concat(o?"active":""),children:[(0,ni.jsx)("span",{className:"nav-link ".concat(w("/")?"active":""),onClick:()=>y("/"),children:"Anasayfa"}),n&&(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)("span",{className:"nav-link ".concat(w("/analysis")?"active":""),onClick:()=>y("/analysis"),children:"Analiz Et"}),(0,ni.jsx)("span",{className:"nav-link ".concat(w("/dashboard")?"active":""),onClick:()=>y("/dashboard"),children:"Sonu\xe7lar\u0131m"}),(0,ni.jsx)("span",{className:"nav-link ".concat(w("/calibration")?"active":""),onClick:()=>y("/calibration"),children:"Kalibrasyon"})]}),(0,ni.jsx)("span",{className:"nav-link ".concat(w("/about")?"active":""),onClick:()=>y("/about"),children:"Hakk\u0131m\u0131zda"}),(0,ni.jsx)("span",{className:"nav-link ".concat(w("/contact")?"active":""),onClick:()=>y("/contact"),children:"\u0130leti\u015fim"}),(0,ni.jsx)("button",{className:"theme-toggle-btn",onClick:s,title:a?"A\xe7\u0131k tema":"Koyu tema",children:a?(0,ni.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ni.jsx)("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor",strokeWidth:"2"}),(0,ni.jsx)("path",{d:"m12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):(0,ni.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ni.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),n?(0,ni.jsxs)("div",{className:"nav-user-section",ref:g,children:[(0,ni.jsxs)("div",{className:"nav-user-container",children:[(0,ni.jsxs)("div",{className:"nav-user-info",onClick:()=>{d(!u)},children:[(0,ni.jsx)(Xn,{className:"user-welcome-icon"}),(0,ni.jsxs)("span",{children:["Ho\u015fgeldin, ",n.fullName||n.username,"!"]}),(0,ni.jsx)(Qt,{className:"dropdown-arrow ".concat(u?"rotated":"")})]}),(0,ni.jsx)("div",{className:"nav-user-avatar",onClick:()=>{y("/account-settings"),_()},style:{cursor:"pointer"},title:"Avatar\u0131 d\xfczenle",children:S()})]}),u&&(0,ni.jsxs)("div",{className:"user-dropdown",children:[(0,ni.jsxs)("div",{className:"dropdown-item",onClick:()=>{y("/account-settings"),_()},children:[(0,ni.jsx)(Pn,{className:"dropdown-item-icon"}),(0,ni.jsx)("span",{children:"Hesap Ayarlar\u0131"})]}),(0,ni.jsx)("div",{className:"dropdown-divider"}),(0,ni.jsxs)("div",{className:"dropdown-item logout-item",onClick:b,children:[(0,ni.jsx)(vn,{className:"dropdown-item-icon"}),(0,ni.jsx)("span",{children:"\xc7\u0131k\u0131\u015f Yap"})]})]})]}):(0,ni.jsx)("button",{className:"nav-cta",onClick:()=>y("/login"),children:"\xdccretsiz Kay\u0131t"})]}),(0,ni.jsx)("div",{className:"mobile-menu-toggle ".concat(o?"active":""),onClick:()=>l(!o),style:{display:"none",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",background:"var(--card-bg)",borderRadius:"8px",border:"1px solid var(--border-primary)",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:o?(0,ni.jsx)($n,{size:20,color:"white",style:{transition:"all 0.3s ease",transform:"rotate(90deg)"}}):(0,ni.jsx)(bn,{size:20,color:"var(--text-primary)",style:{transition:"all 0.3s ease",transform:"rotate(0deg)"}})})]}),o&&(0,ni.jsx)("div",{className:"mobile-menu",children:(0,ni.jsxs)("div",{className:"mobile-menu-content",children:[(0,ni.jsx)("div",{className:"mobile-nav-link ".concat(w("/")?"active":""),onClick:()=>y("/"),children:"Anasayfa"}),n&&(0,ni.jsxs)(ni.Fragment,{children:[(0,ni.jsx)("div",{className:"mobile-nav-link ".concat(w("/analysis")?"active":""),onClick:()=>y("/analysis"),children:"Analiz Et"}),(0,ni.jsx)("div",{className:"mobile-nav-link ".concat(w("/dashboard")?"active":""),onClick:()=>y("/dashboard"),children:"Sonu\xe7lar\u0131m"}),(0,ni.jsx)("div",{className:"mobile-nav-link ".concat(w("/calibration")?"active":""),onClick:()=>y("/calibration"),children:"Kalibrasyon"})]}),(0,ni.jsx)("div",{className:"mobile-nav-link ".concat(w("/about")?"active":""),onClick:()=>y("/about"),children:"Hakk\u0131m\u0131zda"}),(0,ni.jsx)("div",{className:"mobile-nav-link ".concat(w("/contact")?"active":""),onClick:()=>y("/contact"),children:"\u0130leti\u015fim"}),(0,ni.jsx)("div",{className:"mobile-nav-link mobile-theme-link",onClick:s,children:a?"A\xe7\u0131k Tema":"Koyu Tema"}),n?(0,ni.jsxs)("div",{className:"mobile-user-section",children:[(0,ni.jsxs)("div",{className:"mobile-user-info",children:[(0,ni.jsx)("div",{className:"mobile-user-avatar",children:S()}),(0,ni.jsxs)("div",{className:"mobile-user-details",children:[(0,ni.jsx)("span",{className:"mobile-user-name",children:n.fullName||n.username}),(0,ni.jsx)("span",{className:"mobile-user-email",children:n.email})]})]}),(0,ni.jsxs)("div",{className:"mobile-user-actions",children:[(0,ni.jsxs)("div",{className:"mobile-action-item",onClick:()=>{y("/account-settings"),l(!1)},children:[(0,ni.jsx)(Pn,{className:"mobile-action-icon"}),(0,ni.jsx)("span",{children:"Hesap Ayarlar\u0131"})]}),(0,ni.jsxs)("div",{className:"mobile-action-item logout-action",onClick:()=>{b(),l(!1)},children:[(0,ni.jsx)(vn,{className:"mobile-action-icon"}),(0,ni.jsx)("span",{children:"\xc7\u0131k\u0131\u015f Yap"})]})]})]}):(0,ni.jsx)("div",{className:"mobile-auth-section",children:(0,ni.jsx)("button",{className:"mobile-auth-btn",onClick:()=>{y("/login"),l(!1)},children:"\xdccretsiz Kay\u0131t"})})]})})]})};function eN(e){return Ot({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"},child:[]}]})(e)}function tN(e){return Ot({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"},child:[]}]})(e)}const nN=()=>{const[e,n]=(0,t.useState)(!1),[i,r]=(0,t.useState)("analysis"),[a,s]=(0,t.useState)({analysis:[],system:[]}),[o,l]=(0,t.useState)(""),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),[x,y]=(0,t.useState)(0),[b]=(0,t.useState)(()=>"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),[_,w]=(0,t.useState)("Ba\u011flan\u0131yor..."),[S,M]=(0,t.useState)({}),[A,C]=(0,t.useState)(!1),[E,k]=(0,t.useState)(null),[T,R]=(0,t.useState)(!1),[L,P]=(0,t.useState)(!1),[B,N]=(0,t.useState)(!0),[D,I]=(0,t.useState)(!1),[j,z]=(0,t.useState)(!1),[F,O]=(0,t.useState)([]),[U,H]=(0,t.useState)(!1),[G,W]=(0,t.useState)(!1),[V,X]=(0,t.useState)(null),[Y,J]=(0,t.useState)(!1),[K,q]=(0,t.useState)(""),[Z,Q]=(0,t.useState)(!1),[$,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(85),[ie,re]=(0,t.useState)({show:!1,text:"",x:0,y:0}),ae=(0,t.useRef)(null),[se,oe]=(0,t.useState)(()=>{const e=localStorage.getItem("chatbot_theme");return"dark"===e||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches}),le=(0,t.useRef)(null),ce=(0,t.useRef)(null),ue=(0,t.useRef)(null),de=(0,t.useRef)(null),he=(0,t.useRef)(null),pe=(0,t.useRef)(null),[fe,me]=(0,t.useState)(!1),[ge,ve]=(0,t.useState)(!1),[xe,ye]=(0,t.useState)(!0),be=(0,t.useRef)(null),_e=((0,t.useRef)(null),(0,t.useCallback)(()=>{const e=!se;oe(e),localStorage.setItem("chatbot_theme",e?"dark":"light")},[se])),we=(0,t.useMemo)(()=>({light:{background:"#ffffff",surface:"#f8fafc",primary:"#3b82f6",secondary:"#10b981",text:"#1f2937",textSecondary:"#6b7280",border:"#e5e7eb",shadow:"rgba(0, 0, 0, 0.1)",userMessage:"#10b981",userText:"#ffffff",botMessage:"#ffffff",botText:"#1f2937",inputBackground:"#ffffff",inputBorder:"#e5e7eb",inputText:"#1f2937",placeholder:"#9ca3af"},dark:{background:"#1f2937",surface:"#374151",primary:"#60a5fa",secondary:"#34d399",text:"#f9fafb",textSecondary:"#d1d5db",border:"#4b5563",shadow:"rgba(0, 0, 0, 0.3)",userMessage:"#059669",userText:"#ffffff",botMessage:"#374151",botText:"#f9fafb",inputBackground:"#374151",inputBorder:"#4b5563",inputText:"#f9fafb",placeholder:"#9ca3af"}}),[])[se?"dark":"light"],Se=(0,t.useMemo)(()=>({analysis:{title:"Duru\u015f Uzman\u0131",subtitle:"Analiz & De\u011ferlendirme",icon:(0,ni.jsxs)("div",{style:{width:"20px",height:"20px",background:"linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.3)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:[(0,ni.jsx)(Ht,{size:12,color:"white",style:{zIndex:2,position:"relative"}}),(0,ni.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%)",transform:"translateX(-100%)",transition:"transform 0.6s ease"}})]}),gradient:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",description:"Analiz sonu\xe7lar\u0131n\u0131z\u0131 de\u011ferlendirelim",primaryColor:"#3b82f6",features:["Analiz Yorumlama","Ki\u015fisel \xd6neriler","Risk De\u011ferlendirmesi"]},system:{title:"Uygulama Rehberi",subtitle:"Kullan\u0131m & Destek",icon:(0,ni.jsxs)("div",{style:{width:"20px",height:"20px",background:"linear-gradient(135deg, #34d399 0%, #10b981 100%)",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:[(0,ni.jsx)(dn,{size:12,color:"white",style:{zIndex:2,position:"relative"}}),(0,ni.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%)",transform:"translateX(-100%)",transition:"transform 0.6s ease"}})]}),gradient:"linear-gradient(135deg, #10b981 0%, #059669 100%)",description:"PostureGuard \xf6zelliklerini ke\u015ffedin",primaryColor:"#10b981",features:["\xd6zellik Rehberi","Kullan\u0131m \u0130pu\xe7lar\u0131","Sorun \xc7\xf6zme"]}}),[]),Me=(0,t.useCallback)(()=>Rt.getUser(),[]),Ae=(0,t.useCallback)(()=>{const e=Me();if(e){if(e.firstname)return e.firstname;if(e.username)return e.username}return null},[Me]),Ce=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=localStorage.getItem("access_token"),i=c(c({"Content-Type":"application/json"},n&&{Authorization:"Bearer ".concat(n)}),t.headers),r=await fetch("".concat("http://localhost:8000").concat(e),c(c({},t),{},{headers:i}));if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return r.json()},Ee=(0,t.useCallback)(()=>{try{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return console.warn("Speech recognition not supported in this browser"),void ye(!1);const e=window.SpeechRecognition||window.webkitSpeechRecognition;be.current=new e,be.current.continuous=!1,be.current.interimResults=!1,be.current.lang="tr-TR",be.current.maxAlternatives=1,be.current.onstart=()=>{console.log("Speech recognition started"),me(!0)},be.current.onresult=e=>{if(console.log("Speech recognition result:",e),e.results&&e.results[0]&&e.results[0][0]){const t=e.results[0][0].transcript;console.log("Transcript:",t),l(t)}me(!1)},be.current.onerror=e=>{console.error("Speech recognition error:",e.error),me(!1),"not-allowed"===e.error?alert("Mikrofon izni verilmedi. L\xfctfen taray\u0131c\u0131 ayarlar\u0131ndan mikrofon iznini aktifle\u015ftirin."):"no-speech"===e.error?console.log("No speech detected"):"network"===e.error&&alert("A\u011f ba\u011flant\u0131s\u0131 hatas\u0131. L\xfctfen internet ba\u011flant\u0131n\u0131z\u0131 kontrol edin.")},be.current.onend=()=>{console.log("Speech recognition ended"),me(!1)},console.log("Speech recognition initialized successfully"),ye(!0)}catch(WE){console.error("Failed to initialize speech recognition:",WE),ye(!1)}},[]),ke=(0,t.useCallback)(()=>{try{if(!be.current)return console.log("Speech recognition not initialized, initializing now..."),Ee(),void setTimeout(()=>{be.current&&!fe&&be.current.start()},100);fe||(console.log("Starting speech recognition..."),be.current.start())}catch(WE){if(console.error("Error starting speech recognition:",WE),me(!1),"InvalidStateError"===WE.name)try{be.current.stop(),setTimeout(()=>{be.current.start()},100)}catch(rN){console.error("Error restarting recognition:",rN)}}},[fe,Ee]),Te=(0,t.useCallback)(()=>{try{be.current&&fe&&(console.log("Stopping speech recognition..."),be.current.stop())}catch(WE){console.error("Error stopping speech recognition:",WE),me(!1)}},[fe]),Re=(0,t.useCallback)(e=>{if(!xe||!("speechSynthesis"in window))return;window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.lang="tr-TR",t.rate=.9,t.pitch=1,t.volume=.8,t.onstart=()=>{ve(!0)},t.onend=()=>{ve(!1)},t.onerror=()=>{ve(!1)},window.speechSynthesis.speak(t)},[xe]),Le=((0,t.useCallback)(()=>{"speechSynthesis"in window&&(window.speechSynthesis.cancel(),ve(!1))},[]),(0,t.useCallback)(e=>{switch(e.type){case"typing_start":p(!0);break;case"typing_end":p(!1);break;case"message_chunk":if(v(t=>t+e.chunk),e.is_final){const t={from:"bot",text:g+e.chunk,timestamp:e.timestamp,type:"stream_complete",session_id:e.session_id};if(s(n=>c(c({},n),{},{[e.active_tab]:[...n[e.active_tab],t]})),xe&&!ge){const t=(g+e.chunk).replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/#{1,6}\s/g,"").replace(/\[.*?\]\(.*?\)/g,"").replace(/[\ud83d\udcca\ud83d\udcc8\ud83d\udcc9\ud83c\udfaf\ud83d\udcaa\ud83d\udcf8\ud83c\udfa5\u2699\ufe0f\ud83d\udd27\u2705\u274c]/g,"").trim();t.length>0&&t.length<500&&setTimeout(()=>Re(t),500)}v(""),m(!1),d(!1);const n=a[e.active_tab],i="Sohbet ".concat((new Date).toLocaleString("tr-TR"));Ne(e.session_id,e.active_tab,n,i)}break;case"error":console.error("WebSocket error:",e.message);let t=e.message||"Bir hata olu\u015ftu",n="error";("API_LIMIT_EXCEEDED"===e.error||e.message&&(e.message.includes("G\xfcnl\xfck AI Limiti")||e.message.includes("g\xfcnl\xfck kullan\u0131m limiti")))&&(n="api_limit_error");const i={from:"bot",text:t,timestamp:e.timestamp,type:n};s(t=>c(c({},t),{},{[e.active_tab]:[...t[e.active_tab],i]})),d(!1),p(!1),m(!1)}},[g])),Pe=(0,t.useCallback)(()=>{var e;if((null===(e=ue.current)||void 0===e?void 0:e.readyState)!==WebSocket.OPEN)try{const e="".concat("ws://localhost:8000","/api/chat/stream");ue.current=new WebSocket(e),ue.current.onopen=()=>{w("connected")},ue.current.onmessage=e=>{try{const t=JSON.parse(e.data);Le(t)}catch(WE){console.error("WebSocket message parse error:",WE)}},ue.current.onclose=()=>{w("disconnected"),setTimeout(Pe,3e3)},ue.current.onerror=e=>{console.error("WebSocket error:",e),w("error")}}catch(WE){console.error("WebSocket connection error:",WE),w("error")}},[Le]),Be=async()=>{try{const e=await Ce("/api/chat/welcome-messages/enhanced"),t=Ae(),n=t?"Merhaba ".concat(t,"!"):"Merhaba!";s({analysis:[c(c({},e.analysis),{},{text:e.analysis.text.replace("Merhaba!",n)})],system:[c(c({},e.system),{},{text:e.system.text.replace("Merhaba!",n)})]})}catch(WE){console.error("Failed to load welcome messages:",WE);const t=Ae(),n=t?"Merhaba ".concat(t,"!"):"Merhaba!";s({analysis:[{from:"bot",text:'<div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;"><div style="width: 32px; height: 32px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div><strong style="font-size: 16px; font-weight: 700; color: #1f2937;">PostureGuard Duru\u015f Uzman\u0131</strong></div>'.concat(n," Duru\u015f analizi sonu\xe7lar\u0131n\u0131z\u0131 de\u011ferlendirmek ve size \xf6zel \xf6neriler sunmak i\xe7in buraday\u0131m."),timestamp:(new Date).toISOString(),type:"welcome"}],system:[{from:"bot",text:'<div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;"><div style="width: 32px; height: 32px; background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg></div><strong style="font-size: 16px; font-weight: 700; color: #1f2937;">PostureGuard Rehber</strong></div>'.concat(n," Uygulaman\u0131n t\xfcm \xf6zelliklerini ke\u015ffetmenizde size yard\u0131mc\u0131 olaca\u011f\u0131m."),timestamp:(new Date).toISOString(),type:"welcome"}]})}},Ne=async function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{const r=await Ce("/api/chat/history/save",{method:"POST",body:JSON.stringify({session_id:e,active_tab:t,messages:n,title:i})});console.log("Chat history saved:",r)}catch(WE){console.error("Failed to save chat history:",WE)}};(0,t.useEffect)(()=>{const t=async()=>{try{await Be(),await(async()=>{try{const[e,t]=await Promise.all([Ce("/api/chat/quick-actions/analysis"),Ce("/api/chat/quick-actions/system")]);M({analysis:e.categories,system:t.categories})}catch(WE){console.error("Failed to load quick actions:",WE),M({analysis:{temel:[{icon:"FiActivity",text:"Son analiz sonucumu a\xe7\u0131kla",color:"#3b82f6",priority:"high"},{icon:"FiTarget",text:"Risk fakt\xf6rlerimi de\u011ferlendir",color:"#ef4444",priority:"critical"},{icon:"FiTrendingUp",text:"\u0130lerleme durumumu g\xf6ster",color:"#8b5cf6",priority:"medium"},{icon:"HiOutlineSparkles",text:"\xd6zel egzersiz plan\u0131 haz\u0131rla",color:"#10b981",priority:"high"}]},system:{temel:[{icon:"FiSearch",text:"Foto\u011fraf analizi nas\u0131l yap\u0131l\u0131r?",color:"#3b82f6",priority:"high"},{icon:"FiCpu",text:"Canl\u0131 analiz \xf6zelli\u011fi nas\u0131l kullan\u0131l\u0131r?",color:"#8b5cf6",priority:"high"},{icon:"FiFileText",text:"Sonu\xe7lar\u0131m sayfas\u0131n\u0131 anlat",color:"#10b981",priority:"medium"},{icon:"FiSettings",text:"Kalibrasyon nas\u0131l yap\u0131l\u0131r?",color:"#f59e0b",priority:"high"}]}})}})(),Pe(),C(!0);const e=Rt.getUser();if(e&&!e.avatar){const t=async()=>{if(!e||e.avatar)return;const t={sex:"man",faceColor:"#F9C9B6",earSize:"small",eyeStyle:"circle",noseStyle:"short",mouthStyle:"laugh",shirtStyle:"hoody",glassesStyle:"none",hairColor:"#090806",hairStyle:"normal",hatStyle:"none",hatColor:"#D2E3FC",eyeBrowStyle:"up",shirtColor:"#77311D",bgColor:"#FFFFFF"};try{const e=await Rt.updateAvatar(t);e.success?console.log("Default avatar created successfully"):console.log("Failed to create default avatar:",e.error)}catch(WE){console.error("Error creating default avatar:",WE)}};await t()}}catch(WE){console.error("Initialization error:",WE)}};return e&&!A&&t(),()=>{ue.current&&ue.current.close(),be.current&&be.current.stop(),"speechSynthesis"in window&&window.speechSynthesis.cancel()}},[e,A,Pe,Ee]);const De=async e=>{if(!e)return;if(e.size>7340032)return void alert("Dosya boyutu 7MB'dan k\xfc\xe7\xfck olmal\u0131d\u0131r.");if(["application/pdf","image/jpeg","image/jpg","image/png","image/webp","image/bmp","image/gif"].includes(e.type))try{const t=await new Promise(t=>{const n=new FileReader;n.onload=()=>{const e=n.result.split(",")[1];t(e)},n.readAsDataURL(e)});k({file_data:t,mime_type:e.type,name:e.name,size:e.size});const n={from:"user",text:"\ud83d\udcc4 **Dosya Y\xfcklendi:** ".concat(e.name,"\nBoyut: ").concat((e.size/1024/1024).toFixed(2)," MB\nT\xfcr: ").concat(e.type.includes("pdf")?"PDF Dok\xfcman":"Resim Dosyas\u0131"),timestamp:(new Date).toISOString(),type:"file_upload"};s(e=>c(c({},e),{},{[i]:[...e[i],n]})),setTimeout(()=>He(),100)}catch(WE){console.error("File upload error:",WE),alert("Dosya y\xfcklenirken hata olu\u015ftu.")}else alert("Desteklenmeyen dosya format\u0131. PDF, JPG, PNG, WebP, BMP veya GIF y\xfckleyiniz.")},Ie=(0,t.useCallback)(async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||o;if(!t.trim())return;const n={from:"user",text:t,timestamp:(new Date).toISOString(),type:e};s(e=>c(c({},e),{},{[i]:[...e[i],n]})),l(""),d(!0),setTimeout(()=>He(),100);try{const n=c({message:t,session_id:b,active_tab:i},E&&{uploaded_file:E});if("stream"===e&&"connected"===_)m(!0),ue.current.send(JSON.stringify(c(c({},n),{},{user_id:parseInt(localStorage.getItem("user_id"))||1})));else{const e=await Ce("/api/chat/chat",{method:"POST",body:JSON.stringify(n)}),t={from:"bot",text:e.reply,timestamp:e.timestamp,type:e.message_type||"normal",suggestions:e.suggestions||[]};s(e=>c(c({},e),{},{[i]:[...e[i],t]})),d(!1)}if(E&&k(null),"stream"!==e){const e=a[i],t="Sohbet ".concat((new Date).toLocaleString("tr-TR"));Ne(b,i,e,t)}}catch(WE){console.error("Send message error:",WE);let t="**\u26a0\ufe0f Ge\xe7ici Sorun**\n\n\xdczg\xfcn\xfcm, mesaj\u0131n\u0131z\u0131 i\u015flerken bir sorun olu\u015ftu. L\xfctfen birka\xe7 saniye sonra tekrar deneyin.",n="error";WE.message&&(WE.message.includes("API_LIMIT_EXCEEDED")||WE.message.toLowerCase().includes("quota")||WE.message.toLowerCase().includes("limit")||WE.message.toLowerCase().includes("rate limit"))&&(t="analysis"===i?"\ud83e\udd16 **G\xfcnl\xfck AI Limiti Doldu**\n\n\xdczg\xfcn\xfcm, bug\xfcn AI hizmetimizin g\xfcnl\xfck kullan\u0131m limiti dolmu\u015ftur.\n\n\ud83d\udca1 **Ne yapabilirsiniz:**\n\u2022 Yar\u0131n tekrar deneyebilirsiniz\n\u2022 Mevcut analiz sonu\xe7lar\u0131n\u0131z\u0131 inceleyebilirsiniz\n\u2022 Uygulama kullan\u0131m rehberini kullanabilirsiniz\n\u2022 Ge\xe7mi\u015f sohbet ge\xe7mi\u015finizi g\xf6r\xfcnt\xfcleyebilirsiniz\n\n\ud83d\udd50 **Limit s\u0131f\u0131rlanma:** Her g\xfcn gece yar\u0131s\u0131 (00:00)\n\n\ud83d\udcca **Alternatif:** Analiz sekmesindeki mevcut verilerinizi kullanarak manuel de\u011ferlendirme yapabilirsiniz.":"\u2699\ufe0f **G\xfcnl\xfck AI Limiti Doldu**\n\n\xdczg\xfcn\xfcm, bug\xfcn AI hizmetimizin g\xfcnl\xfck kullan\u0131m limiti dolmu\u015ftur.\n\n\ud83d\udca1 **Ne yapabilirsiniz:**\n\u2022 Yar\u0131n tekrar deneyebilirsiniz\n\u2022 Mevcut uygulama \xf6zelliklerini kullanabilirsiniz\n\u2022 Ge\xe7mi\u015f sohbet ge\xe7mi\u015finizi g\xf6r\xfcnt\xfcleyebilirsiniz\n\u2022 Analiz sekmesindeki mevcut verilerinizi inceleyebilirsiniz\n\n\ud83d\udd50 **Limit s\u0131f\u0131rlanma:** Her g\xfcn gece yar\u0131s\u0131 (00:00)\n\n\ud83d\udcda **Alternatif:** Uygulama kullan\u0131m k\u0131lavuzunu inceleyebilirsiniz.",n="api_limit_error");const r={from:"bot",text:t,timestamp:(new Date).toISOString(),type:n};s(e=>c(c({},e),{},{[i]:[...e[i],r]})),d(!1),m(!1)}},[o,i,b,_,Se,E]),je=(0,t.useCallback)(e=>{const t="critical"===e.priority?"stream":"normal";Ie(e.text,t),Z&&(ee(!0),setTimeout(()=>{Q(!1),ee(!1)},300))},[Ie,Z]),ze=(0,t.useCallback)((e,t)=>{if(ae.current&&clearTimeout(ae.current),!ie.show||ie.text!==t)try{if(!e||!e.currentTarget)return void console.warn("Invalid event or currentTarget for tooltip");const n=e.currentTarget.getBoundingClientRect(),i=pe.current;if(i){const e=i.getBoundingClientRect();re({show:!0,text:t,x:n.left+n.width/2,y:Math.max(n.top-10,e.top+5)})}else re({show:!0,text:t,x:n.left+n.width/2,y:n.top-10})}catch(WE){return void console.warn("Tooltip positioning error:",WE)}},[ie.show,ie.text]),Fe=(0,t.useCallback)(()=>{ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{re({show:!1,text:"",x:0,y:0})},100)},[]),Oe=(0,t.useCallback)(e=>{if("Enter"!==e.key||e.shiftKey){if("Escape"===e.key){var t;l(""),null===(t=de.current)||void 0===t||t.blur()}}else e.preventDefault(),Ie()},[Ie]),Ue=(0,t.useCallback)(e=>{r(e),y(0),localStorage.setItem("last_active_tab",e),setTimeout(()=>He(),100)},[]),He=(0,t.useCallback)(()=>{ce.current&&ce.current.scrollTo({top:ce.current.scrollHeight+1e3,behavior:"smooth"})},[]);(0,t.useEffect)(()=>{const e=setTimeout(()=>{N(!0)},2e3);return()=>clearTimeout(e)},[]),(0,t.useEffect)(()=>{e&&N(!1)},[e]),(0,t.useEffect)(()=>{e&&He()},[a,h,g,e,He]),(0,t.useEffect)(()=>{Z||$||ne(85)},[Z,$]);const Ge=(0,t.useCallback)(e=>new Date(e).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),[]),We=(0,t.useCallback)(e=>{if(!e)return"";let t=e.replace(/<[^>]*>/g,"");return t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/PostureGuard Duru\u015f Uzman\u0131/g,"<strong>PostureGuard Duru\u015f Uzman\u0131</strong>").replace(/PostureGuard Rehber/g,"<strong>PostureGuard Rehber</strong>").replace(/Geli\u015fmi\u015f Analiz Uzman\u0131/g,"<strong>Geli\u015fmi\u015f Analiz Uzman\u0131</strong>").replace(/Geli\u015fmi\u015f Uygulama Rehberi/g,"<strong>Geli\u015fmi\u015f Uygulama Rehberi</strong>"),t},[]),Ve=((0,t.useCallback)(()=>{const e=Rt.getUser();if(e&&e.avatar){const t="http://localhost:8000/auth/avatar/".concat(e.user_id);return(0,ni.jsx)("img",{src:t,alt:"Kullan\u0131c\u0131 Avatar\u0131",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}})}return(0,ni.jsx)("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ni.jsx)(Xn,{size:16,color:"white"})})},[]),(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.includes("<div style=")||e.includes("<strong style=")||e.includes("<ul")||e.includes("<p"))return(0,ni.jsx)("div",{dangerouslySetInnerHTML:{__html:e},style:{"& strong":{fontWeight:"700",color:t?"white":Se[i].primaryColor}}});const n=e.replace(/\*\*(.*?)\*\*/g,'<strong style="font-weight: 700; color: '+(t?"white":Se[i].primaryColor)+';">$1</strong>');return n!==e?(0,ni.jsx)("div",{dangerouslySetInnerHTML:{__html:n.replace(/\n/g,"<br/>")}}):e.split("\n").map((n,r)=>n.startsWith("\u2022")?(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"6px",marginLeft:"12px"},children:[(0,ni.jsx)("span",{style:{color:t?"rgba(255,255,255,0.8)":Se[i].primaryColor,fontSize:"16px",lineHeight:"1.5"},children:"\u2022"}),(0,ni.jsx)("span",{children:n.substring(2)})]},r):(0,ni.jsx)("div",{style:{marginBottom:r<e.split("\n").length-1?"8px":"0"},children:n},r))},[i,Se])),Xe=(0,t.useCallback)(()=>{const e=S[i];return e?Object.entries(e).map(e=>{let[t,n]=e;return(0,ni.jsx)("div",{style:{marginBottom:"12px"},children:(0,ni.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",justifyContent:"center",alignItems:"stretch"},children:n.map((e,n)=>(0,ni.jsxs)("button",{onClick:()=>je(e),style:{background:we.background,border:"1px solid ".concat(e.color,"30"),borderRadius:"8px",padding:"8px 10px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"8px",position:"relative",overflow:"hidden",minHeight:"38px",width:"100%",boxSizing:"border-box"},onMouseEnter:t=>{t&&t.target&&(t.target.style.borderColor=e.color,t.target.style.transform="translateY(-1px)",t.target.style.boxShadow="0 4px 12px ".concat(e.color,"20"),ze(t,e.text))},onMouseLeave:t=>{t&&t.target&&(t.target.style.borderColor="".concat(e.color,"30"),t.target.style.transform="translateY(0)",t.target.style.boxShadow="none",Fe())},children:[(0,ni.jsx)("div",{style:{width:"22px",height:"22px",background:"".concat(e.color,"15"),borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",flexShrink:0},children:(()=>{const t={FiTarget:On,FiTrendingUp:Gn,FiActivity:Ht,FiSearch:Rn,FiFileText:ln,FiSettings:Pn,FiCpu:nn,HiOutlineSparkles:tN,FiBarChart2:Xt,FiCalendar:Kt,FiHeart:un,FiMonitor:wn,FiZap:ei,FiCamera:qt,FiVideo:Jn,FiPieChart:Cn,FiUpload:Vn,FiTool:Un,FiShield:Bn,FiClipboard:en,HiOutlineLightBulb:eN,FiHelpCircle:dn,FiMail:_n,FiMessageSquare:_n}[e.icon];return t?(0,ni.jsx)(t,{size:10,color:e.color}):e.icon})()}),(0,ni.jsx)("div",{style:{flex:1,minWidth:0},children:(0,ni.jsx)("div",{style:{color:we.text,fontSize:"10px",fontWeight:"600",lineHeight:"1.2",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.text})})]},"".concat(t,"-").concat(n)))})},t)}):null},[S,i,je,we]),Ye=(0,t.useCallback)(()=>{const e={connected:{color:"#10b981",text:"\xc7evrimi\xe7i",icon:(0,ni.jsx)(Qn,{size:10})},connecting:{color:"#f59e0b",text:"Ba\u011flan\u0131yor...",icon:(0,ni.jsx)(kn,{size:10,className:"spin"})},disconnected:{color:"#6b7280",text:"\xc7evrimd\u0131\u015f\u0131",icon:(0,ni.jsx)(Zn,{size:10})},error:{color:"#ef4444",text:"Ba\u011flant\u0131 Hatas\u0131",icon:(0,ni.jsx)(Gt,{size:10})}},t=e[_]||e.disconnected;return(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"11px",color:t.color,fontWeight:"500"},children:[(0,ni.jsx)("span",{children:t.icon}),(0,ni.jsx)("span",{children:t.text})]})},[_]);return(0,t.useEffect)(()=>{const e=e=>{U&&!e.target.closest("[data-dropdown]")&&H(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[U]),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n        @keyframes bounce {\n          0%, 80%, 100% { transform: translateY(0); opacity: 0.8; }\n          40% { transform: translateY(-8px); opacity: 1; }\n        }\n        @keyframes pulse {\n          0%, 100% { opacity: 1; transform: scale(1); }\n          50% { opacity: 0.9; transform: scale(1.02); }\n        }\n        @keyframes slideUp {\n          0% { transform: translateY(calc(100% + 20px)) scale(0.98); opacity: 0; }\n          100% { transform: translateY(0) scale(1); opacity: 1; }\n        }\n        @keyframes slideUp {\n          0% { transform: translateY(20px) scale(0.95); opacity: 0; }\n          100% { transform: translateY(0) scale(1); opacity: 1; }\n        }\n        @keyframes slideDown {\n          0% { transform: translateY(0); opacity: 1; }\n          100% { transform: translateY(-20px); opacity: 0; }\n        }\n        @keyframes slideUpKepenk {\n          0% {\n            height: 0px;\n            transform: translateY(-10px);\n            opacity: 0;\n          }\n          50% {\n            height: 42px;\n            transform: translateY(-5px);\n            opacity: 0.7;\n          }\n          100% {\n            height: 85px;\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n        @keyframes slideDownKepenk {\n          0% {\n            height: 85px;\n            transform: translateY(0);\n            opacity: 1;\n          }\n          50% {\n            height: 42px;\n            transform: translateY(-5px);\n            opacity: 0.7;\n          }\n          100% {\n            height: 0px;\n            transform: translateY(-10px);\n            opacity: 0;\n          }\n        }\n        @keyframes slideDown {\n          0% { transform: translateY(0) scale(1); opacity: 1; }\n          100% { transform: translateY(calc(100% + 20px)) scale(0.98); opacity: 0; }\n        }\n        @keyframes typing {\n          0%, 60%, 100% { transform: translateY(0); opacity: 0.7; }\n          30% { transform: translateY(-10px); opacity: 1; }\n        }\n        .bounce { animation: bounce 1.4s infinite ease-in-out; }\n        .pulse { animation: pulse 3s infinite; }\n        .slide-up { animation: slideUp 0.4s ease-out; }\n        .slide-down { animation: slideDown 0.3s ease-in; }\n        .typing { animation: typing 1.5s infinite; }\n\n        .chat-scrollbar::-webkit-scrollbar { width: 8px; }\n        .chat-scrollbar::-webkit-scrollbar-track {\n          background: #f1f5f9;\n          border-radius: 4px;\n        }\n        .chat-scrollbar::-webkit-scrollbar-thumb {\n          background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);\n          border-radius: 4px;\n        }\n\n        .drag-over {\n          border: 2px dashed #3b82f6 !important;\n          background: rgba(59, 130, 246, 0.1) !important;\n        }\n\n        .chatbot-window {\n          border-left: none !important;\n          border-right: none !important;\n          border-top: none !important;\n          border-bottom: none !important;\n        }\n\n        button:focus {\n          outline: none !important;\n        }\n        "}}),(0,ni.jsx)("div",{style:{position:"fixed",bottom:"30px",right:"30px",zIndex:999,display:e?"none":"block"},children:(0,ni.jsxs)("button",{onClick:()=>{n(!0),N(!1)},className:"pulse logo-float",style:{width:"90px",height:"90px",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",padding:"0"},onMouseEnter:e=>{e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.transform="scale(1)"},children:[(0,ni.jsx)("img",{src:"/PostureGuideLogo.gif",alt:"PostureGuide",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"50%",opacity:"0.8"}}),x>0&&(0,ni.jsx)("div",{style:{position:"absolute",top:"5px",right:"5px",minWidth:"24px",height:"24px",background:"#ef4444",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"bold",color:"white",border:"2px solid white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:x>99?"99+":x})]})}),e&&(0,ni.jsxs)("div",{className:"chatbot-window ".concat(L?"slide-down":"slide-up"," ").concat(T?"drag-over":""),style:{position:"fixed",bottom:"20px",right:"30px",width:"450px",height:"600px",maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 120px)",background:we.background,borderRadius:"20px",boxShadow:"0 20px 60px ".concat(we.shadow),zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden",border:"1px solid ".concat(we.border)},onDragOver:e=>{e.preventDefault(),R(!0)},onDragLeave:e=>{e.preventDefault(),R(!1)},onDrop:e=>{e.preventDefault(),R(!1);const t=Array.from(e.dataTransfer.files);t.length>0&&De(t[0])},children:[(0,ni.jsxs)("div",{style:{background:Se[i].gradient,padding:"20px",color:"white"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"40px",height:"40px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:Se[i].icon}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"bold"},children:"PostureGuide AI"}),(0,ni.jsx)("p",{style:{margin:"2px 0 0 0",fontSize:"12px",opacity:.9},children:Se[i].description})]})]}),(0,ni.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,ni.jsx)("button",{onClick:_e,style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer",color:"white",transition:"all 0.3s ease",outline:"none",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="scale(1)"},title:se?"A\xe7\u0131k tema":"Koyu tema",children:se?(0,ni.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,ni.jsx)("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor",strokeWidth:"2"}),(0,ni.jsx)("path",{d:"m12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):(0,ni.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:(0,ni.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,ni.jsx)("button",{onClick:()=>{P(!0),setTimeout(()=>{n(!1),P(!1)},300)},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",padding:"6px",cursor:"pointer",color:"white",transition:"all 0.3s ease",outline:"none"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="scale(1)"},title:"A\u015fa\u011f\u0131 indir",children:(0,ni.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:(0,ni.jsx)("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})}),(0,ni.jsx)("button",{onClick:()=>{Me()?I(!0):(P(!0),setTimeout(()=>{n(!1),P(!1)},300))},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",padding:"6px",cursor:"pointer",color:"white",transition:"all 0.3s ease",outline:"none"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="scale(1)"},title:"Kapat",children:(0,ni.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:(0,ni.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),(0,ni.jsxs)("div",{style:{position:"relative"},"data-dropdown":!0,children:[(0,ni.jsx)("button",{onClick:()=>H(!U),style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",padding:"6px",cursor:"pointer",color:"white",transition:"all 0.3s ease",outline:"none",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="scale(1)"},title:"Se\xe7enekler",children:(0,ni.jsx)(Mn,{size:16})}),U&&(0,ni.jsxs)("div",{style:{position:"absolute",top:"100%",right:0,background:we.background,borderRadius:"8px",boxShadow:"0 4px 12px ".concat(we.shadow),border:"1px solid ".concat(we.border),zIndex:1001,minWidth:"160px",marginTop:"4px"},children:[(0,ni.jsx)("button",{onClick:()=>{H(!1),(async()=>{try{console.log("Fetching chat history...");const e=await Ce("/api/chat/history");console.log("Chat history response:",e),O(e.chats||[])}catch(WE){console.error("Failed to fetch chat history:",WE),O([])}})(),z(!0)},style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",color:we.text,transition:"background 0.2s ease"},onMouseEnter:e=>{e.target.style.background=se?"#4b5563":"#f3f4f6"},onMouseLeave:e=>{e.target.style.background="transparent"},children:"Ge\xe7mi\u015f Sohbetler"}),(0,ni.jsx)("button",{onClick:()=>{H(!1),(()=>{const e=a[i];if(!e||0===e.length)return void alert("D\u0131\u015fa aktar\u0131lacak sohbet bulunamad\u0131.");let t="PostureGuide AI Sohbet Ge\xe7mi\u015fi\n";t+="Tarih: ".concat((new Date).toLocaleString("tr-TR"),"\n"),t+="Tab: ".concat("analysis"===i?"Duru\u015f Uzman\u0131":"Uygulama Rehberi","\n"),t+="\n".concat("=".repeat(50),"\n\n"),e.forEach((e,n)=>{const i=new Date(e.timestamp).toLocaleTimeString("tr-TR"),r="user"===e.from?"Kullan\u0131c\u0131":"PostureGuide AI";t+="[".concat(i,"] ").concat(r,":\n"),t+="".concat(e.text,"\n\n")});const n=new Blob([t],{type:"text/plain;charset=utf-8"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="postureguide_sohbet_".concat((new Date).toISOString().slice(0,10),".txt"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)})()},style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",color:we.text,transition:"background 0.2s ease"},onMouseEnter:e=>{e.target.style.background=se?"#4b5563":"#f3f4f6"},onMouseLeave:e=>{e.target.style.background="transparent"},children:"Sohbeti D\u0131\u015fa Aktar"})]})]})]})]}),(0,ni.jsx)("div",{style:{display:"flex",gap:"8px"},children:Object.entries(Se).map(e=>{let[t,n]=e;return(0,ni.jsxs)("button",{onClick:()=>Ue(t),style:{flex:1,padding:"6px 10px",background:i===t?"rgba(255, 255, 255, 0.25)":"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontSize:"12px",fontWeight:i===t?"bold":"normal",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",position:"relative",overflow:"hidden"},onMouseEnter:e=>{if(i!==t){e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.2)";const t=e.target.querySelector("div");if(t){const e=t.querySelector("div:last-child");e&&(e.style.transform="translateX(100%)")}}},onMouseLeave:e=>{if(i!==t){e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.transform="translateY(0)",e.target.style.boxShadow="none";const t=e.target.querySelector("div");if(t){const e=t.querySelector("div:last-child");e&&(e.style.transform="translateX(-100%)")}}},children:[n.icon," ",n.title]},t)})})]}),(0,ni.jsxs)("div",{style:{padding:"12px 16px",background:we.surface,borderBottom:"1px solid ".concat(we.border),minHeight:Z?"50px":"44px",display:"flex",flexDirection:"column",justifyContent:Z?"flex-start":"center"},children:[(0,ni.jsxs)("h4",{onClick:()=>{Z?(ee(!0),setTimeout(()=>{Q(!1),ee(!1)},300)):Q(!0)},style:{margin:Z?"0 0 8px 0":"0",fontSize:"12px",fontWeight:"600",color:we.text,display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",userSelect:"none",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.color=Se[i].primaryColor,e.target.style.transform="scale(1.02)"},onMouseLeave:e=>{e.target.style.color=we.text,e.target.style.transform="scale(1)"},children:[(0,ni.jsx)(ei,{size:12,color:we.text}),"H\u0131zl\u0131 \u0130\u015flemler",(0,ni.jsx)("span",{style:{marginLeft:"auto",transition:"transform 0.3s ease",transform:Z?"rotate(180deg)":"rotate(0deg)",display:"flex",alignItems:"center"},children:(0,ni.jsx)(Qt,{size:12})})]}),(Z||$)&&(0,ni.jsx)("div",{ref:pe,className:"chat-scrollbar",style:{height:"".concat(te,"px"),overflowY:"auto",animation:$?"slideDownKepenk 0.3s ease-out":"slideUpKepenk 0.3s ease-out",position:"relative",scrollBehavior:"smooth"},children:Xe()}),ie.show&&(0,ni.jsxs)("div",{style:{position:"fixed",left:ie.x,top:ie.y,transform:"translateX(-50%) translateY(-100%)",background:we.surface,border:"1px solid ".concat(we.border),borderRadius:"12px",padding:"12px 16px",fontSize:"13px",color:we.text,boxShadow:"0 8px 25px ".concat(we.shadow),zIndex:1e4,maxWidth:"300px",minWidth:"200px",whiteSpace:"normal",lineHeight:"1.5",wordWrap:"break-word",pointerEvents:"none",textAlign:"center"},children:[ie.text,(0,ni.jsx)("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"10px solid ".concat(we.surface)}})]})]}),(0,ni.jsxs)("div",{ref:ce,className:"chat-scrollbar",style:{flex:1,overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[a[i].map((e,t)=>(0,ni.jsx)("div",{style:{display:"flex",justifyContent:"user"===e.from?"flex-end":"flex-start"},children:(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",maxWidth:"85%",flexDirection:"user"===e.from?"row-reverse":"row"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"user"===e.from?"#10b981":Se[i].primaryColor,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",flexShrink:0,overflow:"hidden"},children:"user"===e.from?(0,ni.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"linear-gradient(135deg, #4f46e5 0%, #3730a3 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(79, 70, 229, 0.25)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,ni.jsx)(Xn,{style:{fontSize:"14px",color:"white",strokeWidth:2.5}})}):(0,ni.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"6px",background:"linear-gradient(135deg, #10b981 0%, #047857 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.25)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,ni.jsx)(nn,{style:{fontSize:"14px",color:"white",strokeWidth:2.5}})})}),(0,ni.jsxs)("div",{style:{background:"user"===e.from?we.userMessage:we.botMessage,color:"user"===e.from?we.userText:we.botText,padding:"10px 12px",borderRadius:"user"===e.from?"14px 14px 4px 14px":"14px 14px 14px 4px",boxShadow:"0 2px 8px ".concat(we.shadow),border:"user"===e.from?"none":"1px solid ".concat(we.border),position:"relative"},children:[(0,ni.jsx)("div",{style:{fontSize:"12px",lineHeight:"1.4"},children:f&&t===a[i].length-1?Ve(g,"user"===e.from):Ve(e.text,"user"===e.from)}),e.suggestions&&e.suggestions.length>0&&(0,ni.jsxs)("div",{style:{marginTop:"8px"},children:[(0,ni.jsxs)("div",{style:{fontSize:"10px",fontWeight:"600",marginBottom:"4px",opacity:.7,display:"flex",alignItems:"center",gap:"4px"},children:[(0,ni.jsx)(eN,{size:12,color:we.textSecondary}),"\xd6neriler:"]}),(0,ni.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:e.suggestions.map((e,t)=>(0,ni.jsx)("button",{onClick:()=>Ie(e),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"6px",padding:"2px 6px",fontSize:"9px",cursor:"pointer",color:"#3b82f6",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(59, 130, 246, 0.2)"},onMouseLeave:e=>{e.target.style.background="rgba(59, 130, 246, 0.1)"},children:e},t))})]}),(0,ni.jsx)("div",{style:{fontSize:"9px",marginTop:"4px",opacity:.6,textAlign:"user"===e.from?"right":"left"},children:Ge(e.timestamp)})]})]})},"".concat(e.timestamp,"-").concat(t))),(h||f)&&(0,ni.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:Se[i].primaryColor,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",overflow:"hidden"},children:(0,ni.jsx)("img",{src:"/PostureGuideLogo.png",alt:"PostureGuide",style:{width:"24px",height:"24px",objectFit:"contain"}})}),(0,ni.jsx)("div",{style:{background:we.botMessage,padding:"10px 14px",borderRadius:"16px 16px 16px 4px",boxShadow:"0 2px 8px ".concat(we.shadow),border:"1px solid ".concat(we.border)},children:(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,ni.jsx)("span",{style:{fontSize:"11px",color:we.textSecondary},children:f?"Yan\u0131t geliyor...":"Yaz\u0131yor..."}),(0,ni.jsxs)("div",{style:{display:"flex",gap:"2px"},children:[(0,ni.jsx)("div",{className:"typing",style:{width:"5px",height:"5px",background:Se[i].primaryColor,borderRadius:"50%"}}),(0,ni.jsx)("div",{className:"typing",style:{width:"5px",height:"5px",background:Se[i].primaryColor,borderRadius:"50%",animationDelay:"0.2s"}}),(0,ni.jsx)("div",{className:"typing",style:{width:"5px",height:"5px",background:Se[i].primaryColor,borderRadius:"50%",animationDelay:"0.4s"}})]})]})})]})}),T&&(0,ni.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(59, 130, 246, 0.1)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,border:"2px dashed rgba(59, 130, 246, 0.4)",borderRadius:"16px",margin:"8px",animation:"fadeInUp 0.2s ease-out"},children:(0,ni.jsxs)("div",{style:{background:"linear-gradient(145deg, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 0.9))",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",color:"white",padding:"24px 32px",borderRadius:"20px",textAlign:"center",boxShadow:"0 20px 60px rgba(59, 130, 246, 0.3), 0 8px 32px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",overflow:"hidden"},children:[(0,ni.jsx)("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2), transparent 60%)",pointerEvents:"none"}}),(0,ni.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",position:"relative",zIndex:1},children:[(0,ni.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"16px",background:"rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",flexShrink:0},children:(0,ni.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ni.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,ni.jsx)("polyline",{points:"14,2 14,8 20,8"}),(0,ni.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),(0,ni.jsx)("line",{x1:"9",y1:"15",x2:"12",y2:"12"}),(0,ni.jsx)("line",{x1:"15",y1:"15",x2:"12",y2:"12"})]})}),(0,ni.jsx)("div",{style:{fontSize:"16px",fontWeight:"700",marginBottom:"4px",letterSpacing:"-0.025em"},children:"Dosyay\u0131 B\u0131rak\u0131n"}),(0,ni.jsx)("div",{style:{fontSize:"13px",opacity:.9,fontWeight:"500"},children:"PDF, resim dosyalar\u0131n\u0131 destekliyoruz"})]})]})}),(0,ni.jsx)("div",{ref:le})]}),(0,ni.jsxs)("div",{style:{padding:"16px",background:we.background,borderTop:"1px solid ".concat(we.border)},children:[E&&(0,ni.jsxs)("div",{style:{background:se?"linear-gradient(145deg, rgba(30, 58, 138, 0.3), rgba(59, 130, 246, 0.2))":"linear-gradient(145deg, rgba(240, 249, 255, 0.8), rgba(186, 230, 253, 0.6))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid ".concat(se?"rgba(59, 130, 246, 0.3)":"rgba(186, 230, 253, 0.5)"),borderRadius:"14px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"13px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.1)",animation:"fadeInUp 0.3s ease-out"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"10px",background:"linear-gradient(145deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.2))",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(59, 130, 246, 0.3)"},children:(0,ni.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ni.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,ni.jsx)("polyline",{points:"14,2 14,8 20,8"}),(0,ni.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,ni.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,ni.jsx)("polyline",{points:"10,9 9,9 8,9"})]})}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("div",{style:{color:se?"#e2e8f0":"#1e293b",fontWeight:"600",fontSize:"13px",marginBottom:"2px"},children:E.name}),(0,ni.jsxs)("div",{style:{color:se?"#94a3b8":"#64748b",fontSize:"11px",fontWeight:"500"},children:[(E.size/1024/1024).toFixed(2)," MB \u2022 Haz\u0131r"]})]})]}),(0,ni.jsx)("button",{onClick:()=>k(null),style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",width:"28px",height:"28px",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.15)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.transform="scale(1)"},children:(0,ni.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ni.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,ni.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,ni.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,ni.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,ni.jsx)("input",{ref:de,type:"text",value:o,onChange:e=>l(e.target.value),onKeyPress:Oe,placeholder:"Mesaj\u0131n\u0131z\u0131 yaz\u0131n...",style:{width:"100%",borderRadius:"20px",border:"2px solid ".concat(we.inputBorder),padding:"8px 50px 8px 16px",fontSize:"13px",outline:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:se?"rgba(55, 65, 81, 0.8)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",color:we.inputText,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.1)",fontWeight:"400",letterSpacing:"0.01em",height:"36px",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor=Se[i].primaryColor,e.target.style.boxShadow="0 4px 16px rgba(59, 130, 246, 0.15), 0 2px 8px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.1)",e.target.style.transform="translateY(-1px)"},onBlur:e=>{e.target.style.borderColor=we.inputBorder,e.target.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.1)",e.target.style.transform="translateY(0)"},disabled:u}),xe&&(0,ni.jsx)("button",{onClick:fe?Te:ke,style:{position:"absolute",right:"40px",top:"50%",transform:"translateY(-50%)",background:fe?"rgba(239, 68, 68, 0.1)":"none",border:"none",cursor:"pointer",color:fe?"#ef4444":"#9ca3af",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",borderRadius:"4px",transition:"all 0.2s ease"},title:fe?"Dinlemeyi durdur":"Sesli mesaj",children:fe?(0,ni.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,ni.jsx)("rect",{x:"6",y:"6",width:"3",height:"12",rx:"1.5"}),(0,ni.jsx)("rect",{x:"15",y:"6",width:"3",height:"12",rx:"1.5"})]}):(0,ni.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ni.jsx)("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),(0,ni.jsx)("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),(0,ni.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),(0,ni.jsx)("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})}),(0,ni.jsx)("button",{onClick:()=>{var e;return null===(e=he.current)||void 0===e?void 0:e.click()},style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#9ca3af",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Dosya y\xfckle",children:(0,ni.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,ni.jsx)("path",{d:"M21.586 10.461l-10.05 10.075c-1.95 1.949-5.122 1.949-7.071 0s-1.95-5.122 0-7.07l10.628-10.629c1.17-1.17 3.073-1.17 4.243 0 1.169 1.17 1.17 3.072 0 4.242l-8.507 8.464c-.39.39-1.024.39-1.414 0-.391-.39-.391-1.024 0-1.414l7.093-7.05-1.415-1.414-7.093 7.049c-1.172 1.172-1.171 3.073 0 4.244s3.071 1.171 4.242 0l8.507-8.464c1.951-1.951 1.951-5.122 0-7.071-1.95-1.95-5.121-1.95-7.071 0L3.515 12.533c-2.732 2.731-2.732 7.166 0 9.898 2.731 2.732 7.166 2.731 9.899 0L23.001 12.05l-1.415-1.414-.001-.175z"})})}),(0,ni.jsx)("input",{ref:he,type:"file",onChange:e=>De(e.target.files[0]),accept:".pdf,.jpg,.jpeg,.png,.webp,.bmp,.gif",style:{display:"none"}})]}),(0,ni.jsx)("button",{onClick:()=>Ie(),disabled:u||!o.trim()&&!E,style:{background:u||!o.trim()&&!E?"linear-gradient(145deg, rgba(156, 163, 175, 0.8), rgba(107, 114, 128, 0.8))":Se[i].gradient,color:"white",border:u||!o.trim()&&!E?"1px solid rgba(156, 163, 175, 0.3)":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"20px",width:"36px",height:"36px",cursor:u||!o.trim()&&!E?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",boxShadow:u||!o.trim()&&!E?"0 2px 8px rgba(0, 0, 0, 0.1)":"0 4px 16px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{u||!o.trim()&&!E||(e.target.style.transform="translateY(-2px) scale(1.05)",e.target.style.boxShadow="0 6px 20px rgba(59, 130, 246, 0.3), 0 4px 8px rgba(0, 0, 0, 0.15)")},onMouseLeave:e=>{u||!o.trim()&&!E||(e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 16px rgba(59, 130, 246, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)")},onMouseDown:e=>{u||!o.trim()&&!E||(e.target.style.transform="translateY(0) scale(0.95)")},onMouseUp:e=>{u||!o.trim()&&!E||(e.target.style.transform="translateY(-2px) scale(1.05)")},children:u?(0,ni.jsx)("div",{style:{width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}):(0,ni.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,ni.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]}),(0,ni.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px",fontSize:"10px",color:we.textSecondary},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Ye(),(0,ni.jsx)("span",{children:"\u2022"}),(0,ni.jsx)("span",{children:"PDF, resim y\xfckleyebilirsiniz"})]}),(0,ni.jsx)("span",{children:"PostureGuide AI v3.3"})]})]}),D&&(0,ni.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,pointerEvents:"auto"},children:(0,ni.jsxs)("div",{style:{background:we.background,borderRadius:"16px",padding:"16px",maxWidth:"280px",width:"85%",boxShadow:"0 20px 60px ".concat(we.shadow),animation:"slideUp 0.3s ease-out"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[(0,ni.jsx)("span",{style:{fontSize:"18px",lineHeight:1},children:"\u26a0\ufe0f"}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h3",{style:{margin:0,fontSize:"14px",fontWeight:"bold",color:we.text},children:"Sohbeti Sonland\u0131r"}),(0,ni.jsx)("p",{style:{margin:"2px 0 0 0",fontSize:"11px",color:we.textSecondary},children:"Sohbet ge\xe7mi\u015finiz silinecek. Devam etmek istiyor musunuz?"})]})]}),(0,ni.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(0,ni.jsx)("button",{onClick:()=>I(!1),style:{background:se?"#4b5563":"#f3f4f6",border:"1px solid ".concat(we.border),borderRadius:"6px",padding:"6px 12px",cursor:"pointer",color:we.text,fontSize:"11px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background=se?"#6b7280":"#e5e7eb"},onMouseLeave:e=>{e.target.style.background=se?"#4b5563":"#f3f4f6"},children:"\u0130ptal"}),(0,ni.jsx)("button",{onClick:()=>{I(!1),Be()},style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",color:"white",fontSize:"11px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"Evet, Sohbeti Sonland\u0131r"})]})]})}),j&&(0,ni.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ni.jsxs)("div",{style:{background:we.background,borderRadius:"20px",padding:"0",width:"450px",height:"600px",maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 120px)",boxShadow:"0 20px 60px ".concat(we.shadow),overflow:"hidden",position:"relative",border:"1px solid ".concat(we.border)},children:[(0,ni.jsxs)("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",padding:"20px 24px",borderRadius:"20px 20px 0 0",display:"flex",alignItems:"center",justifyContent:"space-between",height:"100px",boxSizing:"border-box"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,ni.jsx)("div",{style:{width:"32px",height:"32px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:"\ud83d\udcda"}),(0,ni.jsxs)("div",{children:[(0,ni.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"bold"},children:"Ge\xe7mi\u015f Sohbetler"}),(0,ni.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"12px",opacity:.9},children:"\xd6nceki sohbetlerinizi g\xf6r\xfcnt\xfcleyin ve y\xf6netin"})]})]}),(0,ni.jsx)("button",{onClick:()=>z(!1),style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",padding:"8px",cursor:"pointer",color:"white",fontSize:"16px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)"},children:"\u2715"})]}),(0,ni.jsx)("div",{className:"chat-scrollbar",style:{padding:"20px 24px",height:"calc(600px - 100px)",overflowY:"auto"},children:0===F.length?(0,ni.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:we.textSecondary},children:[(0,ni.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:(0,ni.jsx)(ln,{size:48,color:we.textSecondary})}),(0,ni.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"600",color:we.text},children:"Hen\xfcz Sohbet Ge\xe7mi\u015fi Yok"}),(0,ni.jsx)("p",{style:{margin:0,fontSize:"14px",lineHeight:"1.5",color:we.textSecondary},children:"\u0130lk sohbetinizi ba\u015flatt\u0131\u011f\u0131n\u0131zda burada g\xf6r\xfcnecek."}),(0,ni.jsxs)("div",{style:{marginTop:"16px",fontSize:"12px",color:we.textSecondary},children:["Debug: chatHistory.length = ",F.length]})]}):(0,ni.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,ni.jsxs)("div",{style:{fontSize:"12px",color:we.textSecondary,marginBottom:"8px"},children:["Debug: ",F.length," sohbet bulundu"]}),F.map((e,t)=>(0,ni.jsxs)("div",{style:{background:we.surface,borderRadius:"12px",padding:"16px",border:"1px solid ".concat(we.border),transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.borderColor=we.primary,e.target.style.boxShadow="0 4px 12px ".concat(we.primary,"20")},onMouseLeave:e=>{e.target.style.borderColor=we.border,e.target.style.boxShadow="none"},children:[(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,ni.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:we.text},children:["Sohbet #",e.id||t+1]}),(0,ni.jsx)("div",{style:{fontSize:"11px",color:we.textSecondary,background:se?"#4b5563":"#e5e7eb",padding:"2px 8px",borderRadius:"12px"},children:e.updated_at?new Date(e.updated_at).toLocaleDateString("tr-TR"):"Tarih yok"})]}),(0,ni.jsx)("div",{style:{fontSize:"12px",color:we.textSecondary,lineHeight:"1.4",marginBottom:"12px",maxHeight:"60px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},dangerouslySetInnerHTML:{__html:We(e.preview||e.messages&&e.messages.slice(0,2).map(e=>e.text).join(" ")||"Sohbet i\xe7eri\u011fi bulunamad\u0131")}}),(0,ni.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(0,ni.jsx)("button",{onClick:()=>{console.log("View button clicked for item:",e),(e=>{if(console.log("Viewing chat history item:",e),e.messages&&e.messages.length>0){console.log("Messages found:",e.messages.length);const t=e.messages.map(e=>({from:e.from||e.from_,text:e.text,timestamp:e.timestamp,type:e.type}));console.log("Formatted messages:",t),console.log("Active tab:",e.active_tab);const n=t.filter(t=>"analysis"===e.active_tab),i=t.filter(t=>"system"===e.active_tab);console.log("Analysis messages:",n.length),console.log("System messages:",i.length),s({analysis:n,system:i}),z(!1)}else console.log("No messages found in chat item"),alert("Bu sohbetin detaylar\u0131 bulunamad\u0131.")})(e)},style:{fontSize:"11px",padding:"6px 12px",borderRadius:"6px",border:"1px solid ".concat(we.border),background:we.background,color:we.text,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.borderColor=we.primary,e.target.style.color=we.primary},onMouseLeave:e=>{e.target.style.borderColor=we.border,e.target.style.color=we.text},children:"G\xf6r\xfcnt\xfcle"}),(0,ni.jsx)("button",{onClick:()=>{(e=>{if(!e.messages||0===e.messages.length)return void alert("D\u0131\u015fa aktar\u0131lacak sohbet bulunamad\u0131.");let t="PostureGuide AI Sohbet Ge\xe7mi\u015fi\n";t+="Sohbet ID: ".concat(e.id||"Bilinmiyor","\n"),t+="Tarih: ".concat(e.date?new Date(e.date).toLocaleString("tr-TR"):"Bilinmiyor","\n"),t+="\n".concat("=".repeat(50),"\n\n"),e.messages.forEach((e,n)=>{const i=new Date(e.timestamp).toLocaleTimeString("tr-TR"),r="user"===e.from?"Kullan\u0131c\u0131":"PostureGuide AI";t+="[".concat(i,"] ").concat(r,":\n"),t+="".concat(e.text,"\n\n")});const n=new Blob([t],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download="postureguide_sohbet_".concat(e.id||Date.now(),".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)})(e)},style:{fontSize:"11px",padding:"6px 12px",borderRadius:"6px",border:"none",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"D\u0131\u015fa Aktar"}),(0,ni.jsx)("button",{onClick:()=>{(async e=>{e.id?(X(e),W(!0)):alert("Silinecek sohbet bulunamad\u0131.")})(e)},style:{fontSize:"11px",padding:"6px 12px",borderRadius:"6px",border:"none",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"Sil"})]})]},e.id||t))]})})]})}),G&&(0,ni.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ni.jsxs)("div",{style:{background:we.background,borderRadius:"16px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 25px 80px ".concat(we.shadow),textAlign:"center"},children:[(0,ni.jsx)("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",margin:"0 auto 16px auto"},children:(0,ni.jsx)(Wt,{size:24,color:"white"})}),(0,ni.jsx)("h3",{style:{margin:"0 0 12px 0",fontSize:"18px",fontWeight:"bold",color:we.text},children:"Sohbeti Sil"}),(0,ni.jsxs)("p",{style:{margin:"0 0 24px 0",fontSize:"14px",lineHeight:"1.5",color:we.textSecondary},children:["Bu sohbeti silmek istedi\u011finizden emin misiniz?",(0,ni.jsx)("br",{}),"Bu i\u015flem geri al\u0131namaz."]}),(0,ni.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[(0,ni.jsx)("button",{onClick:()=>{W(!1),X(null)},style:{padding:"10px 20px",borderRadius:"8px",border:"1px solid ".concat(we.border),background:we.background,color:we.text,cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.borderColor=we.textSecondary,e.target.style.background=se?"#4b5563":"#f9fafb"},onMouseLeave:e=>{e.target.style.borderColor=we.border,e.target.style.background=we.background},children:"\u0130ptal"}),(0,ni.jsx)("button",{onClick:async()=>{if(V)try{await Ce("/api/chat/history/".concat(V.id),{method:"DELETE"}),O(e=>e.filter(e=>e.id!==V.id)),W(!1),X(null),q("Sohbet ba\u015far\u0131yla silindi."),J(!0),setTimeout(()=>{J(!1),q("")},3e3)}catch(WE){console.error("Failed to delete chat history:",WE),q("Sohbet silinirken bir hata olu\u015ftu."),J(!0),setTimeout(()=>{J(!1),q("")},3e3)}},style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"Sil"})]})]})}),Y&&(0,ni.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:we.background,borderRadius:"12px",padding:"16px 20px",boxShadow:"0 10px 30px ".concat(we.shadow),zIndex:2001,maxWidth:"300px",textAlign:"center",border:"1px solid ".concat(we.border)},children:(0,ni.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[(0,ni.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:K.includes("ba\u015far\u0131yla")?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"white"},children:K.includes("ba\u015far\u0131yla")?(0,ni.jsx)(Zt,{size:12}):(0,ni.jsx)($n,{size:12})}),(0,ni.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:we.text},children:K})]})})]}),(0,ni.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .spin {\n          animation: spin 1s linear infinite;\n        }\n        @keyframes fadeInUp {\n          0% { opacity: 0; transform: translateY(10px); }\n          100% { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes fadeOutDown {\n          0% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(10px); }\n        }\n        @keyframes logoFloat {\n          0%, 85%, 100% { transform: translateY(0px) scale(1); }\n          92.5% { transform: translateY(-8px) scale(1.02); }\n        }\n        @keyframes shimmer {\n          0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }\n          100% { transform: translateX(100%) translateY(100%) rotate(45deg); }\n        }\n        @keyframes iconFloat {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-2px); }\n        }\n        @keyframes iconGlow {\n          0%, 100% { box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3); }\n          50% { box-shadow: 0 4px 16px rgba(59, 130, 246, 0.5); }\n        }\n        .speech-bubble {\n          animation: fadeInUp 0.5s ease-out;\n        }\n        .speech-bubble.hide {\n          animation: fadeOutDown 0.3s ease-in;\n        }\n        .logo-float {\n          animation: logoFloat 5s ease-in-out infinite;\n        }\n        "}}),B&&!e&&(0,ni.jsxs)("div",{className:"speech-bubble ".concat(B?"":"hide"),style:{position:"fixed",bottom:"120px",right:"30px",background:we.background,borderRadius:"16px",padding:"12px 16px",boxShadow:"0 8px 25px ".concat(we.shadow),border:"1px solid ".concat(we.border),maxWidth:"280px",zIndex:999,fontSize:"13px",lineHeight:"1.4",color:we.text,fontWeight:"500",cursor:"default"},onMouseEnter:e=>{const t=e.currentTarget.querySelector("button");t&&(t.style.opacity="1")},onMouseLeave:e=>{const t=e.currentTarget.querySelector("button");t&&(t.style.opacity="0")},children:[(0,ni.jsxs)("div",{style:{fontSize:"13px",lineHeight:"1.4",color:we.text,fontWeight:"500"},children:["Merhaba ben PostureGuide,",(0,ni.jsx)("br",{}),"size nas\u0131l yard\u0131mc\u0131 olabilirim?"]}),(0,ni.jsx)("div",{style:{position:"absolute",bottom:"-8px",right:"25px",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"8px solid ".concat(we.background)}}),(0,ni.jsx)("button",{onClick:()=>N(!1),style:{position:"absolute",top:"8px",right:"8px",background:"transparent",border:"none",cursor:"pointer",color:"#9ca3af",padding:"4px",borderRadius:"4px",opacity:"0",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.target.style.color="#6b7280",e.target.style.opacity="1",e.target.style.transform="scale(1.1)"},onMouseLeave:e=>{e.target.style.color="#9ca3af",e.target.style.opacity="0",e.target.style.transform="scale(1)"},children:(0,ni.jsx)($n,{size:14})})]})]})};const iN=function(){const[e,n]=(0,t.useState)(null),[i,r]=(0,t.useState)(!0),[a,s]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{try{const e=await Rt.checkAuth();e&&n(e)}catch(WE){console.error("Authentication check failed:",WE)}finally{r(!1)}})()},[]);const o=e=>{n(e)},l=()=>{n(null),Rt.logout()},c=()=>{s(!a)},u=e=>{const t=document.getElementById(e);if(t){const e=t.offsetTop-100;window.scrollTo({top:e,behavior:"smooth"})}};if(i)return(0,ni.jsx)("div",{className:"loading-screen",children:(0,ni.jsxs)("div",{className:"loading-content",children:[(0,ni.jsx)("img",{src:"/logo-500x500.png",alt:"PostureGuard Logo",className:"loading-logo"}),(0,ni.jsx)("h2",{children:"PostureGuard"}),(0,ni.jsx)("p",{children:"Y\xfckleniyor..."})]})});const d=t=>{let{children:n}=t;return e?n:(0,ni.jsx)(ke,{to:"/login",replace:!0})},h=e=>{let{children:t}=e;return t};return(0,ni.jsx)(Mt,{clientId:"132533598821-fgrmsi8l19ssja1u3749acvu1s31iato.apps.googleusercontent.com",children:(0,ni.jsx)(ht,{children:(0,ni.jsxs)("div",{className:"App ".concat(a?"dark-mode":"light-mode"),children:[(0,ni.jsxs)(Le,{children:[(0,ni.jsx)(Te,{path:"/login",element:(0,ni.jsx)(h,{children:(0,ni.jsx)(ii,{onLogin:o,isDarkMode:a,toggleTheme:c})})}),(0,ni.jsx)(Te,{path:"/",element:(0,ni.jsxs)("div",{className:"main-app",children:[(0,ni.jsx)($B,{currentUser:e,onLogout:l,scrollToSection:u,isDarkMode:a,toggleTheme:c}),(0,ni.jsx)(JB,{scrollToSection:u,isDarkMode:a}),(0,ni.jsx)(KB,{isDarkMode:a}),(0,ni.jsx)(qB,{isDarkMode:a}),(0,ni.jsx)(ZB,{isDarkMode:a}),(0,ni.jsx)(QB,{isDarkMode:a,currentUser:e})]})}),(0,ni.jsx)(Te,{path:"/dashboard",element:(0,ni.jsx)(d,{children:(0,ni.jsxs)("div",{className:"main-app",children:[(0,ni.jsx)($B,{currentUser:e,onLogout:l,scrollToSection:u,isDarkMode:a,toggleTheme:c}),(0,ni.jsx)("div",{className:"app-content",children:(0,ni.jsx)(kT,{currentUser:e,isDarkMode:a})})]})})}),(0,ni.jsx)(Te,{path:"/analysis",element:(0,ni.jsx)(d,{children:(0,ni.jsxs)("div",{className:"main-app",children:[(0,ni.jsx)($B,{currentUser:e,onLogout:l,scrollToSection:u,isDarkMode:a,toggleTheme:c}),(0,ni.jsx)("div",{className:"app-content",children:(0,ni.jsx)(BT,{isDarkMode:a})})]})})}),(0,ni.jsx)(Te,{path:"/calibration",element:(0,ni.jsx)(d,{children:(0,ni.jsxs)("div",{className:"main-app",children:[(0,ni.jsx)($B,{currentUser:e,onLogout:l,scrollToSection:u,isDarkMode:a,toggleTheme:c}),(0,ni.jsx)("div",{className:"app-content",children:(0,ni.jsx)(NT,{isDarkMode:a})})]})})}),(0,ni.jsx)(Te,{path:"/about",element:(0,ni.jsxs)("div",{className:"main-app",children:[(0,ni.jsx)($B,{currentUser:e,onLogout:l,scrollToSection:u,isDarkMode:a,toggleTheme:c}),(0,ni.jsx)("div",{className:"app-content",children:(0,ni.jsx)(DT,{isDarkMode:a})})]})}),(0,ni.jsx)(Te,{path:"/account-settings",element:(0,ni.jsx)(d,{children:(0,ni.jsxs)("div",{className:"main-app",children:[(0,ni.jsx)($B,{currentUser:e,onLogout:l,scrollToSection:u,isDarkMode:a,toggleTheme:c}),(0,ni.jsx)("div",{className:"app-content",children:(0,ni.jsx)(YB,{currentUser:e,onLogout:l,onLogin:o,isDarkMode:a})})]})})}),(0,ni.jsx)(Te,{path:"/contact",element:(0,ni.jsxs)("div",{className:"main-app",children:[(0,ni.jsx)($B,{currentUser:e,onLogout:l,scrollToSection:u,isDarkMode:a,toggleTheme:c}),(0,ni.jsx)("div",{className:"app-content",children:(0,ni.jsx)(QB,{isDarkMode:a,currentUser:e})})]})})]}),(0,ni.jsx)(nN,{})]})})})};i.createRoot(document.getElementById("root")).render((0,ni.jsx)(t.StrictMode,{children:(0,ni.jsx)(iN,{})}))})()})();